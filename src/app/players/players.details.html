<div >
  @if (player) {
    <h2>{{ player.nickname }}</h2>

    <div>
      Clan:
      @if (clan) {
        <span class="clan-link" (click)="goToClan()">{{ clan.name }}</span>
      } @else {
        <span>-</span>
      }
    </div>

    <h3>
      Level: {{ levelInfo?.level.title }} ({{ levelInfo?.level.level }})
    </h3>

    <div class="progress-bar">
      <div class="progress" [style.width.%]="levelInfo?.progress"></div>
    </div>

    @if (levelInfo?.nextLevel) {
      <p>
        XP do ďalšieho levelu:
        {{ (levelInfo?.nextLevel.xpRequired ?? 0) - player.xp }}
      </p>
    }

    <!-- Aktívne questy -->
    <h3>Aktívne questy</h3>
    <ul>
      @for (q of player.activeQuests; track q.id) {
        <li>
          <a [routerLink]="['/quests', q.id]">{{ q.title }}</a> (XP: {{ q.xp }})
          <button (click)="completeQuest(q.id)">Označiť dokončený</button>
          <button (click)="removeQuest(q.id)">Odstrániť</button>
        </li>
      }
      @if (!player.activeQuests?.length) {
        <li>Žiadne aktívne questy</li>
      }
    </ul>

    <!-- Dokončené questy -->
    <h3>Dokončené questy</h3>
    <ul>
      @for (q of player.completedQuests; track q.id) {
        <li>
          <a [routerLink]="['/quests', q.id]">{{ q.title }}</a> (XP: {{ q.xp }})
          <button (click)="reopenQuest(q.id)">Označiť aktívny</button>
          <button (click)="removeQuest(q.id)">Odstrániť</button>
        </li>
      }
      @if (!player.completedQuests?.length) {
        <li>Žiadne dokončené questy</li>
      }
    </ul>

    <h4>Pridať nový quest</h4>
    <select [(ngModel)]="selectedQuestId">
      <option [ngValue]="undefined">-- Vyber quest --</option>

      @for (q of allQuests; track q.id) {
        <option [ngValue]="q.id">{{ q.title }}</option>
      }
    </select>

    <button (click)="addQuest()">Pridať quest</button>
  }
</div>
