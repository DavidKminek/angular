<div *ngIf="player" class="player-detail">
  <h2>{{ player.nickname }}</h2>

  <div>
    Clan: 
    <span *ngIf="clan" class="clan-link" (click)="goToClan()">{{ clan.name }}</span>
    <span *ngIf="!clan">-</span>
  </div>

  <h3>Level: {{ levelInfo?.level.title }} ({{ levelInfo?.level.level }})</h3>
  <div class="progress-bar">
    <div class="progress" [style.width.%]="levelInfo?.progress"></div>
  </div>
  <p *ngIf="levelInfo?.nextLevel">
    XP do ďalšieho levelu: {{ (levelInfo?.nextLevel.xpRequired ?? 0) - player.xp }}
  </p>

  <h3>Aktívne questy</h3>
  <ul>
    <li *ngFor="let q of player.activeQuests">
      <a [routerLink]="['/quests', q.id]">{{ q.title }}</a> (XP: {{ q.xp }})
      <button (click)="completeQuest(q.id)">Označiť dokončený</button>
      <button (click)="removeQuest(q.id)">Odstrániť</button>
    </li>
    <li *ngIf="!player.activeQuests?.length">Žiadne aktívne questy</li>
  </ul>

  <h3>Dokončené questy</h3>
  <ul>
    <li *ngFor="let q of player.completedQuests">
      <a [routerLink]="['/quests', q.id]">{{ q.title }}</a> (XP: {{ q.xp }})
      <button (click)="reopenQuest(q.id)">Označiť aktívny</button>
      <button (click)="removeQuest(q.id)">Odstrániť</button>
    </li>
    <li *ngIf="!player.completedQuests?.length">Žiadne dokončené questy</li>
  </ul>

  <h4>Pridať nový quest</h4>
  <select [(ngModel)]="selectedQuestId">
    <option [ngValue]="undefined">-- Vyber quest --</option>
    <option *ngFor="let q of allQuests" [ngValue]="q.id">{{ q.title }}</option>
  </select>
  <button (click)="addQuest()">Pridať quest</button>
</div>
