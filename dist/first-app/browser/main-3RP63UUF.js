var wk=Object.defineProperty,Dk=Object.defineProperties;var Ck=Object.getOwnPropertyDescriptors;var zl=Object.getOwnPropertySymbols,bk=Object.getPrototypeOf,MC=Object.prototype.hasOwnProperty,PC=Object.prototype.propertyIsEnumerable,Tk=Reflect.get;var NC=(n,e,t)=>e in n?wk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,M=(n,e)=>{for(var t in e||={})MC.call(e,t)&&NC(n,t,e[t]);if(zl)for(var t of zl(e))PC.call(e,t)&&NC(n,t,e[t]);return n},K=(n,e)=>Dk(n,Ck(e));var jg=(n,e)=>{var t={};for(var r in n)MC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&zl)for(var r of zl(n))e.indexOf(r)<0&&PC.call(n,r)&&(t[r]=n[r]);return t};var vi=(n,e,t)=>Tk(bk(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Rt=null,Gl=!1,Hg=1,Sk=null,Lt=Symbol("SIGNAL");function J(n){let e=Rt;return Rt=n,e}function Kl(){return Rt}var Ac={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rc(n){if(Gl)throw new Error("");if(Rt===null)return;Rt.consumerOnSignalRead(n);let e=Rt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Rt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Rt.producers,t!==void 0&&t.producer===n)){Rt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Rt&&(!r||Rk(i,Rt)))return;let o=As(Rt),s={producer:n,consumer:Rt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Rt.producersTail=s,e!==void 0?e.nextProducer=s:Rt.producers=s,o&&FC(n,s)}function xC(){Hg++}function qg(n){if(!(As(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hg)){if(!n.producerMustRecompute(n)&&!Yl(n)){$g(n);return}n.producerRecomputeValue(n),$g(n)}}function zg(n){if(n.consumers===void 0)return;let e=Gl;Gl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Ak(r)}}finally{Gl=e}}function Gg(){return Rt?.consumerAllowSignalWrites!==!1}function Ak(n){n.dirty=!0,zg(n),n.consumerMarkedDirty?.(n)}function $g(n){n.dirty=!1,n.lastCleanEpoch=Hg}function Nc(n){return n&&kC(n),J(n)}function kC(n){n.producersTail=void 0,n.recomputing=!0}function Ql(n,e){J(e),n&&OC(n)}function OC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(As(n))do t=Wg(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Yl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(qg(t),r!==t.version))return!0}return!1}function Mc(n){if(As(n)){let e=n.producers;for(;e!==void 0;)e=Wg(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function FC(n,e){let t=n.consumersTail,r=As(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)FC(i.producer,i)}function Wg(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!As(e)){let o=e.producers;for(;o!==void 0;)o=Wg(o)}return t}function As(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Kg(n){Sk?.(n)}function Rk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Qg(n,e){return Object.is(n,e)}function Jl(n,e){let t=Object.create(Nk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(qg(t),Rc(t),t.value===Wl)throw t.error;return t.value};return r[Lt]=t,Kg(t),r}var Ug=Symbol("UNSET"),Bg=Symbol("COMPUTING"),Wl=Symbol("ERRORED"),Nk=K(M({},Ac),{value:Ug,dirty:!0,error:null,equal:Qg,kind:"computed",producerMustRecompute(n){return n.value===Ug||n.value===Bg},producerRecomputeValue(n){if(n.value===Bg)throw new Error("");let e=n.value;n.value=Bg;let t=Nc(n),r,i=!1;try{r=n.computation(),J(null),i=e!==Ug&&e!==Wl&&r!==Wl&&n.equal(e,r)}catch(o){r=Wl,n.error=o}finally{Ql(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Mk(){throw new Error}var LC=Mk;function VC(n){LC(n)}function Yg(n){LC=n}var Pk=null;function Jg(n,e){let t=Object.create(Zl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>jC(t);return r[Lt]=t,Kg(t),[r,s=>Pc(t,s),s=>UC(t,s)]}function jC(n){return Rc(n),n.value}function Pc(n,e){Gg()||VC(n),n.equal(n.value,e)||(n.value=e,xk(n))}function UC(n,e){Gg()||VC(n),Pc(n,e(n.value))}var Zl=K(M({},Ac),{equal:Qg,value:void 0,kind:"signal"});function xk(n){n.version++,xC(),zg(n),Pk?.(n)}function Zg(n){let e=J(null);try{return n()}finally{J(e)}}function re(n){return typeof n=="function"}function Rs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xl=Rs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function go(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ye=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Xl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BC(o)}catch(s){e=e??[],s instanceof Xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)BC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&go(t,e)}remove(e){let{_finalizers:t}=this;t&&go(t,e),e instanceof n&&e._removeParent(this)}};Ye.EMPTY=(()=>{let n=new Ye;return n.closed=!0,n})();var Xg=Ye.EMPTY;function ed(n){return n instanceof Ye||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function BC(n){re(n)?n():n.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ns={setTimeout(n,e,...t){let{delegate:r}=Ns;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ns;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function td(n){Ns.setTimeout(()=>{let{onUnhandledError:e}=kn;if(e)e(n);else throw n})}function xc(){}var $C=em("C",void 0,void 0);function HC(n){return em("E",void 0,n)}function qC(n){return em("N",n,void 0)}function em(n,e,t){return{kind:n,value:e,error:t}}var mo=null;function Ms(n){if(kn.useDeprecatedSynchronousErrorHandling){let e=!mo;if(e&&(mo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=mo;if(mo=null,t)throw r}}else n()}function zC(n){kn.useDeprecatedSynchronousErrorHandling&&mo&&(mo.errorThrown=!0,mo.error=n)}var yo=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ed(e)&&e.add(this)):this.destination=Fk}static create(e,t,r){return new Ps(e,t,r)}next(e){this.isStopped?nm(qC(e),this):this._next(e)}error(e){this.isStopped?nm(HC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?nm($C,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kk=Function.prototype.bind;function tm(n,e){return kk.call(n,e)}var rm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){nd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){nd(r)}else nd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nd(t)}}},Ps=class extends yo{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&tm(e.next,o),error:e.error&&tm(e.error,o),complete:e.complete&&tm(e.complete,o)}):i=e}this.destination=new rm(i)}};function nd(n){kn.useDeprecatedSynchronousErrorHandling?zC(n):td(n)}function Ok(n){throw n}function nm(n,e){let{onStoppedNotification:t}=kn;t&&Ns.setTimeout(()=>t(n,e))}var Fk={closed:!0,next:xc,error:Ok,complete:xc};var xs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function On(n){return n}function rd(...n){return im(n)}function im(n){return n.length===0?On:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Vk(t)?t:new Ps(t,r,i);return Ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GC(r),new r((i,o)=>{let s=new Ps({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[xs](){return this}pipe(...t){return im(t)(this)}toPromise(t){return t=GC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function GC(n){var e;return(e=n??kn.Promise)!==null&&e!==void 0?e:Promise}function Lk(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function Vk(n){return n&&n instanceof yo||Lk(n)&&ed(n)}function jk(n){return re(n?.lift)}function De(n){return e=>{if(jk(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(n,e,t,r,i){return new om(n,e,t,r,i)}var om=class extends yo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var WC=Rs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new id(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new WC}next(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Xg:(this.currentObservers=null,o.push(t),new Ye(()=>{this.currentObservers=null,go(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new id(e,t),n})(),id=class extends Ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Xg}};var wt=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sm={now(){return(sm.delegate||Date).now()},delegate:void 0};var od=class extends Ye{constructor(e,t){super()}schedule(e,t=0){return this}};var kc={setInterval(n,e,...t){let{delegate:r}=kc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=kc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ks=class extends od{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return kc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&kc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,go(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Os=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Os.now=sm.now;var Fs=class extends Os{constructor(e,t=Os.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var am=new Fs(ks);var sd=class extends ks{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ad=class extends Fs{};var cm=new ad(sd);var Qt=new ce(n=>n.complete());function KC(n){return n&&re(n.schedule)}function QC(n){return n[n.length-1]}function cd(n){return re(QC(n))?n.pop():void 0}function _i(n){return KC(QC(n))?n.pop():void 0}function JC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function YC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vo(n){return this instanceof vo?(this.v=n,this):new vo(n)}function ZC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(P){return new Promise(function(N,j){o.push([y,P,N,j])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof vo?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function XC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YC=="function"?YC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ud=n=>n&&typeof n.length=="number"&&typeof n!="function";function ld(n){return re(n?.then)}function dd(n){return re(n[xs])}function hd(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function fd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Uk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pd=Uk();function gd(n){return re(n?.[pd])}function md(n){return ZC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield vo(t.read());if(i)return yield vo(void 0);yield yield vo(r)}}finally{t.releaseLock()}})}function yd(n){return re(n?.getReader)}function Xe(n){if(n instanceof ce)return n;if(n!=null){if(dd(n))return Bk(n);if(ud(n))return $k(n);if(ld(n))return Hk(n);if(hd(n))return eb(n);if(gd(n))return qk(n);if(yd(n))return zk(n)}throw fd(n)}function Bk(n){return new ce(e=>{let t=n[xs]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $k(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Hk(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,td)})}function qk(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function eb(n){return new ce(e=>{Gk(n,e).catch(t=>e.error(t))})}function zk(n){return eb(md(n))}function Gk(n,e){var t,r,i,o;return JC(this,void 0,void 0,function*(){try{for(t=XC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ei(n,e=0){return De((t,r)=>{t.subscribe(Ce(r,i=>Yt(r,n,()=>r.next(i),e),()=>Yt(r,n,()=>r.complete(),e),i=>Yt(r,n,()=>r.error(i),e)))})}function Ii(n,e=0){return De((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function tb(n,e){return Xe(n).pipe(Ii(e),Ei(e))}function nb(n,e){return Xe(n).pipe(Ii(e),Ei(e))}function rb(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ib(n,e){return new ce(t=>{let r;return Yt(t,e,()=>{r=n[pd](),Yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function vd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Yt(t,e,()=>{let r=n[Symbol.asyncIterator]();Yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ob(n,e){return vd(md(n),e)}function sb(n,e){if(n!=null){if(dd(n))return tb(n,e);if(ud(n))return rb(n,e);if(ld(n))return nb(n,e);if(hd(n))return vd(n,e);if(gd(n))return ib(n,e);if(yd(n))return ob(n,e)}throw fd(n)}function Pe(n,e){return e?sb(n,e):Xe(n)}function se(...n){let e=_i(n);return Pe(n,e)}function um(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function _d(n){return!!n&&(n instanceof ce||re(n.lift)&&re(n.subscribe))}var _o=Rs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(n,e){return De((t,r)=>{let i=0;t.subscribe(Ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Wk}=Array;function Kk(n,e){return Wk(e)?n(...e):n(e)}function Ed(n){return pe(e=>Kk(n,e))}var{isArray:Qk}=Array,{getPrototypeOf:Yk,prototype:Jk,keys:Zk}=Object;function Id(n){if(n.length===1){let e=n[0];if(Qk(e))return{args:e,keys:null};if(Xk(e)){let t=Zk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Xk(n){return n&&typeof n=="object"&&Yk(n)===Jk}function wd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dd(...n){let e=_i(n),t=cd(n),{args:r,keys:i}=Id(n);if(r.length===0)return Pe([],e);let o=new ce(eO(r,e,i?s=>wd(i,s):On));return t?o.pipe(Ed(t)):o}function eO(n,e,t=On){return r=>{ab(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ab(e,()=>{let l=Pe(n[u],e),h=!1;l.subscribe(Ce(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ab(n,e,t){n?Yt(t,n,e):e()}function cb(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let N=!1;Xe(t(P,h++)).subscribe(Ce(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let j=u.shift();s?Yt(e,s,()=>S(j)):S(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(Ce(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Dt(n,e,t=1/0){return re(e)?Dt((r,i)=>pe((o,s)=>e(r,o,i,s))(Xe(n(r,i))),t):(typeof e=="number"&&(t=e),De((r,i)=>cb(r,i,n,t)))}function wi(n=1/0){return Dt(On,n)}function ub(){return wi(1)}function Ls(...n){return ub()(Pe(n,_i(n)))}function Oc(n){return new ce(e=>{Xe(n()).subscribe(e)})}function lm(...n){let e=cd(n),{args:t,keys:r}=Id(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Xe(t[h]).subscribe(Ce(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?wd(r,a):a),o.complete())}))}});return e?i.pipe(Ed(e)):i}function tn(n,e){return De((t,r)=>{let i=0;t.subscribe(Ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Vs(n){return De((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ce(t,void 0,void 0,s=>{o=Xe(n(s,Vs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function js(n,e){return re(e)?Dt(n,e,1):Dt(n,1)}function dm(n){return De((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Lr(n){return n<=0?()=>Qt:De((e,t)=>{let r=0;e.subscribe(Ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function lb(n=tO){return De((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tO(){return new _o}function hm(n){return De((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tn((i,o)=>n(i,o,r)):On,Lr(1),t?dm(e):lb(()=>new _o))}function Cd(n){return n<=0?()=>Qt:De((e,t)=>{let r=[];e.subscribe(Ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bd(...n){let e=_i(n);return De((t,r)=>{(e?Ls(n,t,e):Ls(n,t)).subscribe(r)})}function Fn(n,e){return De((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ce(r,u=>{i?.unsubscribe();let l=0,h=o++;Xe(n(u,h)).subscribe(i=Ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fc(n){return De((e,t)=>{Xe(n).subscribe(Ce(t,()=>t.complete(),xc)),!t.closed&&e.subscribe(t)})}function Vt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ce(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):On}var fm;function Td(){return fm}function ur(n){let e=fm;return fm=n,e}var db=Symbol("NotFound");function Us(n){return n===db||n?.name==="\u0275NotFound"}var Di=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Rm=new Di("21.0.1");var Md="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,t){super(bo(e,t)),this.code=e}};function iO(n){return`NG0${Math.abs(n)}`}function bo(n,e){return`${iO(n)}${e?": "+e:""}`}var $c=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("")}function mb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ur(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ur).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Nm(n,e){return n?e?`${n} ${e}`:n:e||""}var oO=be({__forward_ref__:be});function on(n){return n.__forward_ref__=on,n.toString=function(){return Ur(this())},n}function Ct(n){return Mm(n)?n():n}function Mm(n){return typeof n=="function"&&n.hasOwnProperty(oO)&&n.__forward_ref__===on}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function En(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hc(n){return sO(n,Pd)}function Pm(n){return Hc(n)!==null}function sO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function aO(n){let e=n?.[Pd]??null;return e||null}function gm(n){return n&&n.hasOwnProperty(Ad)?n[Ad]:null}var Pd=be({\u0275prov:be}),Ad=be({\u0275inj:be}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xm(n){return n&&!!n.\u0275providers}var km=be({\u0275cmp:be}),Om=be({\u0275dir:be}),Fm=be({\u0275pipe:be}),Lm=be({\u0275mod:be}),Vc=be({\u0275fac:be}),To=be({__NG_ELEMENT_ID__:be}),hb=be({__NG_ENV_ID__:be});function dr(n){return typeof n=="string"?n:n==null?"":String(n)}function yb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():dr(n)}var vb=be({ngErrorCode:be}),cO=be({ngErrorMessage:be}),uO=be({ngTokenPath:be});function Vm(n,e){return _b("",-200,e)}function xd(n,e){throw new G(-201,!1)}function _b(n,e,t){let r=new G(e,n);return r[vb]=e,r[cO]=n,t&&(r[uO]=t),r}function lO(n){return n[vb]}var mm;function Eb(){return mm}function nn(n){let e=mm;return mm=n,e}function jm(n,e,t){let r=Hc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;xd(n,"Injector")}var dO={},Eo=dO,ym="__NG_DI_FLAG__",vm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Io(t)||0;try{return this.injector.get(e,r&8?null:Eo,r)}catch(i){if(Us(i))return i;throw i}}};function hO(n,e=0){let t=Td();if(t===void 0)throw new G(-203,!1);if(t===null)return jm(n,void 0,e);{let r=fO(e),i=t.retrieve(n,r);if(Us(i)){if(r.optional)return null;throw i}return i}}function X(n,e=0){return(Eb()||hO)(Ct(n),e)}function R(n,e){return X(n,Io(e))}function Io(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function _m(n){let e=[];for(let t=0;t<n.length;t++){let r=Ct(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=pO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(X(i,o))}else e.push(X(r))}return e}function Ib(n,e){return n[ym]=e,n.prototype[ym]=e,n}function pO(n){return n[ym]}function wo(n,e){let t=n.hasOwnProperty(Vc);return t?n[Vc]:null}function wb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Db(n){return n.flat(Number.POSITIVE_INFINITY)}function kd(n,e){n.forEach(t=>Array.isArray(t)?kd(t,e):e(t))}function Um(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Cb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function bb(n,e,t){let r=$s(n,e);return r>=0?n[r|1]=t:(r=~r,Cb(n,r,e,t)),r}function Od(n,e){let t=$s(n,e);if(t>=0)return n[t|1]}function $s(n,e){return gO(n,e,1)}function gO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var bi={},rn=[],Ti=new q(""),Bm=new q("",-1),$m=new q(""),jc=class{get(e,t=Eo){if(t===Eo){let i=_b("",-201);throw i.name="\u0275NotFound",i}return t}};function Hm(n){return n[Lm]||null}function $r(n){return n[km]||null}function qm(n){return n[Om]||null}function Tb(n){return n[Fm]||null}function sn(n){return{\u0275providers:n}}function Sb(...n){return{\u0275providers:zm(!0,n),\u0275fromNgModule:!0}}function zm(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return kd(e,s=>{let a=s;Rd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ab(i,o),t}function Ab(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Gm(i,o=>{e(o,r)})}}function Rd(n,e,t,r){if(n=Ct(n),!n)return!1;let i=null,o=gm(n),s=!o&&$r(n);if(!o&&!s){let u=n.ngModule;if(o=gm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Rd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{kd(o.imports,h=>{Rd(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Ab(l,e)}if(!a){let l=wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:$m,useValue:i,multi:!0},i),e({provide:Ti,useValue:()=>X(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Gm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Gm(n,e){for(let t of n)xm(t)&&(t=t.\u0275providers),Array.isArray(t)?Gm(t,e):e(t)}var mO=be({provide:String,useValue:be});function Rb(n){return n!==null&&typeof n=="object"&&mO in n}function yO(n){return!!(n&&n.useExisting)}function vO(n){return!!(n&&n.useFactory)}function Do(n){return typeof n=="function"}function Nb(n){return!!n.useClass}var zc=new q(""),Sd={},fb={},pm;function Gc(){return pm===void 0&&(pm=new jc),pm}var et=class{},Co=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Im(e,s=>this.processProvider(s)),this.records.set(Bm,Bs(void 0,this)),i.has("environment")&&this.records.set(et,Bs(void 0,this));let o=this.records.get(zc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get($m,rn,{self:!0}))}retrieve(e,t){let r=Io(t)||0;try{return this.get(e,Eo,r)}catch(i){if(Us(i))return i;throw i}}destroy(){Lc(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Lc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lc(this);let t=ur(this),r=nn(void 0),i;try{return e()}finally{ur(t),nn(r)}}get(e,t=Eo,r){if(Lc(this),e.hasOwnProperty(hb))return e[hb](this);let i=Io(r),o,s=ur(this),a=nn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=DO(e)&&Hc(e);h&&this.injectableDefInScope(h)?l=Bs(Em(e),Sd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Gc():this.parent;return t=i&8&&t===Eo?null:t,u.get(e,t)}catch(u){let l=lO(u);throw l===-200||l===-201?new G(l,null):u}finally{nn(a),ur(s)}}resolveInjectorInitializers(){let e=J(null),t=ur(this),r=nn(void 0),i;try{let o=this.get(Ti,rn,{self:!0});for(let s of o)s()}finally{ur(t),nn(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ur(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ct(e);let t=Do(e)?e:Ct(e&&e.provide),r=EO(e);if(!Do(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Bs(void 0,Sd,!0),i.factory=()=>_m(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===fb)throw Vm(Ur(e));return t.value===Sd&&(t.value=fb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&wO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ct(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Em(n){let e=Hc(n),t=e!==null?e.factory:wo(n);if(t!==null)return t;if(n instanceof q)throw new G(204,!1);if(n instanceof Function)return _O(n);throw new G(204,!1)}function _O(n){if(n.length>0)throw new G(204,!1);let t=aO(n);return t!==null?()=>t.factory(n):()=>new n}function EO(n){if(Rb(n))return Bs(void 0,n.useValue);{let e=Wm(n);return Bs(e,Sd)}}function Wm(n,e,t){let r;if(Do(n)){let i=Ct(n);return wo(i)||Em(i)}else if(Rb(n))r=()=>Ct(n.useValue);else if(vO(n))r=()=>n.useFactory(..._m(n.deps||[]));else if(yO(n))r=(i,o)=>X(Ct(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ct(n&&(n.useClass||n.provide));if(IO(n))r=()=>new i(..._m(n.deps));else return wo(i)||Em(i)}return r}function Lc(n){if(n.destroyed)throw new G(205,!1)}function Bs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function IO(n){return!!n.deps}function wO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function DO(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Im(n,e){for(let t of n)Array.isArray(t)?Im(t,e):t&&xm(t)?Im(t.\u0275providers,e):e(t)}function tt(n,e){let t;n instanceof Co?(Lc(n),t=n):t=new vm(n);let r,i=ur(t),o=nn(void 0);try{return e()}finally{ur(i),nn(o)}}function Mb(){return Eb()!==void 0||Td()!=null}var Ln=0,Q=1,ee=2,lt=3,In=4,wn=5,Hs=6,qs=7,Je=8,Hr=9,hr=10,Le=11,zs=12,Km=13,So=14,an=15,Si=16,Ao=17,fr=18,Wc=19,Qm=20,jr=21,Fd=22,Kc=23,cn=24,Ro=25,No=26,bt=27,Pb=1,Ym=6,Ai=7,Qc=8,Mo=9,ze=10;function pr(n){return Array.isArray(n)&&typeof n[Pb]=="object"}function Vn(n){return Array.isArray(n)&&n[Pb]===!0}function Jm(n){return(n.flags&4)!==0}function Ri(n){return n.componentOffset>-1}function Ld(n){return(n.flags&1)===1}function gr(n){return!!n.template}function Gs(n){return(n[ee]&512)!==0}function Po(n){return(n[ee]&256)===256}var xb="svg",kb="math";function Dn(n){for(;Array.isArray(n);)n=n[Ln];return n}function Zm(n,e){return Dn(e[n])}function jn(n,e){return Dn(e[n.index])}function Yc(n,e){return n.data[e]}function Cn(n,e){let t=e[n];return pr(t)?t:t[Ln]}function Ob(n){return(n[ee]&4)===4}function Vd(n){return(n[ee]&128)===128}function Fb(n){return Vn(n[lt])}function mr(n,e){return e==null?null:n[e]}function Xm(n){n[Ao]=0}function ey(n){n[ee]&1024||(n[ee]|=1024,Vd(n)&&Ws(n))}function Lb(n,e){for(;n>0;)e=e[So],n--;return e}function Jc(n){return!!(n[ee]&9216||n[cn]?.dirty)}function jd(n){n[hr].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Jc(n)&&Ws(n)}function Ws(n){n[hr].changeDetectionScheduler?.notify(0);let e=Ci(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Vd(e)));)e=Ci(e)}function ty(n,e){if(Po(n))throw new G(911,!1);n[jr]===null&&(n[jr]=[]),n[jr].push(e)}function Vb(n,e){if(n[jr]===null)return;let t=n[jr].indexOf(e);t!==-1&&n[jr].splice(t,1)}function Ci(n){let e=n[lt];return Vn(e)?e[lt]:e}function ny(n){return n[qs]??=[]}function ry(n){return n.cleanup??=[]}function jb(n,e,t,r){let i=ny(e);i.push(t),n.firstCreatePass&&ry(n).push(r,i.length-1)}var le={lFrame:Zb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wm=!1;function Ub(){return le.lFrame.elementDepthCount}function Bb(){le.lFrame.elementDepthCount++}function iy(){le.lFrame.elementDepthCount--}function $b(){return le.bindingsEnabled}function Hb(){return le.skipHydrationRootTNode!==null}function oy(n){return le.skipHydrationRootTNode===n}function sy(){le.skipHydrationRootTNode=null}function ue(){return le.lFrame.lView}function Tt(){return le.lFrame.tView}function Ge(n){return le.lFrame.contextLView=n,n[Je]}function We(n){return le.lFrame.contextLView=null,n}function St(){let n=ay();for(;n!==null&&n.type===64;)n=n.parent;return n}function ay(){return le.lFrame.currentTNode}function qb(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ks(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function cy(){return le.lFrame.isParent}function zb(){le.lFrame.isParent=!1}function uy(){return wm}function ly(n){let e=wm;return wm=n,e}function dy(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function hy(){return le.lFrame.bindingIndex}function Gb(n){return le.lFrame.bindingIndex=n}function xo(){return le.lFrame.bindingIndex++}function Ud(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Wb(){return le.lFrame.inI18n}function Kb(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bd(e)}function Qb(){return le.lFrame.currentDirectiveIndex}function Bd(n){le.lFrame.currentDirectiveIndex=n}function Yb(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fy(){return le.lFrame.currentQueryIndex}function $d(n){le.lFrame.currentQueryIndex=n}function CO(n){let e=n[Q];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function py(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=CO(o),i===null||(o=o[So],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=le.lFrame=Jb();return r.currentTNode=e,r.lView=n,!0}function Hd(n){let e=Jb(),t=n[Q];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Jb(){let n=le.lFrame,e=n===null?null:n.child;return e===null?Zb(n):e}function Zb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Xb(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var gy=Xb;function qd(){let n=Xb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function eT(n){return(le.lFrame.contextLView=Lb(n,le.lFrame.contextLView))[Je]}function yr(){return le.lFrame.selectedIndex}function Ni(n){le.lFrame.selectedIndex=n}function zd(){let n=le.lFrame;return Yc(n.tView,n.selectedIndex)}function tT(){return le.lFrame.currentNamespace}var nT=!0;function Gd(){return nT}function Wd(n){nT=n}function Dm(n,e=null,t=null,r){let i=my(n,e,t,r);return i.resolveInjectorInitializers(),i}function my(n,e=null,t=null,r,i=new Set){let o=[t||rn,Sb(n)];return r=r||(typeof n=="object"?void 0:Ur(n)),new Co(o,e||Gc(),r||null,i)}var qe=class n{static THROW_IF_NOT_FOUND=Eo;static NULL=new jc;static create(e,t){if(Array.isArray(e))return Dm({name:""},t,e,"");{let r=e.name??"";return Dm({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>X(Bm)});static __NG_ELEMENT_ID__=-1},nt=new q(""),Un=(()=>{class n{static __NG_ELEMENT_ID__=bO;static __NG_ENV_ID__=t=>t}return n})(),Cm=class extends Un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Po(this._lView)}onDestroy(e){let t=this._lView;return ty(t,e),()=>Vb(t,e)}};function bO(){return new Cm(ue())}var yy=!1,vr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new wt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),bm=class extends Ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Mb()&&(this.destroyRef=R(Un,{optional:!0})??void 0,this.pendingTasks=R(vr,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ye&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},xe=bm;function Nd(...n){}function vy(n){let e,t;function r(){n=Nd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _y(n){return queueMicrotask(()=>n()),()=>{n=Nd}}var Ey="isAngularZone",Uc=Ey+"_ID",TO=0,Ee=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new xe(!1);onMicrotaskEmpty=new xe(!1);onStable=new xe(!1);onError=new xe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=yy}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,RO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ey)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,SO,Nd,Nd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},SO={};function Iy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function AO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){vy(()=>{n.callbackScheduled=!1,Tm(n),n.isCheckStableRunning=!0,Iy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Tm(n)}function RO(n){let e=()=>{AO(n)},t=TO++;n._inner=n._inner.fork({name:"angular",properties:{[Ey]:!0,[Uc]:t,[Uc+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(NO(u))return r.invokeTask(o,s,a,u);try{return pb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return pb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!MO(u)&&e(),gb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Tm(n),Iy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Tm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function pb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gb(n){n._nesting--,Iy(n)}var Bc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new xe;onMicrotaskEmpty=new xe;onStable=new xe;onError=new xe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function NO(n){return rT(n,"__ignore_ng_zone__")}function MO(n){return rT(n,"__scheduler_tick__")}function rT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var lr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},bn=new q("",{factory:()=>{let n=R(Ee),e=R(et),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(lr),t.handleError(r))})}}}),iT={provide:Ti,useValue:()=>{let n=R(lr,{optional:!0})},multi:!0};function Re(n,e){let[t,r,i]=Jg(n,e?.equal),o=t,s=o[Lt];return o.set=r,o.update=i,o.asReadonly=oT.bind(o),o}function oT(){let n=this[Lt];if(n.readonlyFn===void 0){let e=()=>this();e[Lt]=n,n.readonlyFn=e}return n.readonlyFn}var Kd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=PO}return n})();function PO(){return new Kd(ue(),St())}var Br=class{},Qs=new q("",{factory:()=>!0});var Qd=new q(""),Ys=(()=>{class n{internalPendingTasks=R(vr);scheduler=R(Br);errorHandler=R(bn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),wy=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Sm})}return n})(),Sm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Am=class{[Lt];constructor(e){this[Lt]=e}destroy(){this[Lt].destroy()}};function dt(n){return Zg(n)}function ia(n){return{toString:n}.toString()}var Yd="__parameters__";function BO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function $O(n,e,t){return ia(()=>{let r=BO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Yd)?u[Yd]:Object.defineProperty(u,Yd,{value:[]})[Yd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var un=Ib($O("Optional"),8);function HO(n){return typeof n=="function"}function kT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var rh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Tn=(()=>{let n=()=>OT;return n.ngInherit=!0,n})();function OT(n){return n.type.prototype.ngOnChanges&&(n.setInput=zO),qO}function qO(){let n=LT(this),e=n?.current;if(e){let t=n.previous;if(t===bi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zO(n,e,t,r,i){let o=this.declaredInputs[r],s=LT(n)||GO(n,{previous:bi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new rh(l&&l.currentValue,t,u===bi),kT(n,e,i,t)}var FT="__ngSimpleChanges__";function LT(n){return n[FT]||null}function GO(n,e){return n[FT]=e}var sT=[];var Te=function(n,e=null,t){for(let r=0;r<sT.length;r++){let i=sT[r];i(n,e,t)}},ve=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ve||{});function WO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=OT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function KO(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Xd(n,e,t){VT(n,e,3,t)}function eh(n,e,t,r){(n[ee]&3)===t&&VT(n,e,t,r)}function Dy(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function VT(n,e,t,r){let i=r!==void 0?n[Ao]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ao]+=65536),(a<o||o==-1)&&(QO(n,t,e,u),n[Ao]=(n[Ao]&4294901760)+u+2),u++}function aT(n,e){Te(ve.LifecycleHookStart,n,e);let t=J(null);try{e.call(n)}finally{J(t),Te(ve.LifecycleHookEnd,n,e)}}function QO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[Ao]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,aT(a,o)):aT(a,o)}var Zs=-1,Oo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function YO(n){return(n.flags&8)!==0}function JO(n){return(n.flags&16)!==0}function ZO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];XO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jT(n){return n===3||n===4||n===6}function XO(n){return n.charCodeAt(0)===64}function Xs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cT(n,t,i,null,e[++r]):cT(n,t,i,null,null))}}return n}function cT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function UT(n){return n!==Zs}function ih(n){return n&32767}function e1(n){return n>>16}function oh(n,e){let t=e1(n),r=e;for(;t>0;)r=r[So],t--;return r}var ky=!0;function uT(n){let e=ky;return ky=n,e}var t1=256,BT=t1-1,$T=5,n1=0,_r={};function r1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(To)&&(r=t[To]),r==null&&(r=t[To]=n1++);let i=r&BT,o=1<<i;e.data[n+(i>>$T)]|=o}function sh(n,e){let t=HT(n,e);if(t!==-1)return t;let r=e[Q];r.firstCreatePass&&(n.injectorIndex=e.length,Cy(r.data,n),Cy(e,null),Cy(r.blueprint,null));let i=cv(n,e),o=n.injectorIndex;if(UT(i)){let s=ih(i),a=oh(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Cy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function HT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=KT(i),r===null)return Zs;if(t++,i=i[So],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Zs}function Oy(n,e,t){r1(n,e,t)}function i1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(jT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function qT(n,e,t){if(t&8||n!==void 0)return n;xd(e,"NodeInjector")}function zT(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Hr],o=nn(void 0);try{return i?i.get(e,r,t&8):jm(e,r,t&8)}finally{nn(o)}}return qT(r,e,t)}function GT(n,e,t,r=0,i){if(n!==null){if(e[ee]&2048&&!(r&2)){let s=c1(n,e,t,r,_r);if(s!==_r)return s}let o=WT(n,e,t,r,_r);if(o!==_r)return o}return zT(e,t,r,i)}function WT(n,e,t,r,i){let o=s1(t);if(typeof o=="function"){if(!py(e,n,r))return r&1?qT(i,t,r):zT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))xd(t);else return s}finally{gy()}}else if(typeof o=="number"){let s=null,a=HT(n,e),u=Zs,l=r&1?e[an][wn]:null;for((a===-1||r&4)&&(u=a===-1?cv(n,e):e[a+8],u===Zs||!dT(r,!1)?a=-1:(s=e[Q],a=ih(u),e=oh(u,e)));a!==-1;){let h=e[Q];if(lT(o,a,h.data)){let p=o1(a,e,t,s,r,l);if(p!==_r)return p}u=e[a+8],u!==Zs&&dT(r,e[Q].data[a+8]===l)&&lT(o,a,e)?(s=h,a=ih(u),e=oh(u,e)):a=-1}}return i}function o1(n,e,t,r,i,o){let s=e[Q],a=s.data[n+8],u=r==null?Ri(a)&&ky:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=th(a,s,t,u,l);return h!==null?eu(e,s,h,a,i):_r}function th(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&gr(y)&&y.type===t)return u}return null}function eu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Oo){let a=o;if(a.resolving){let y=yb(s[t]);throw Vm(y)}let u=uT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?nn(a.injectImpl):null,m=py(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&WO(t,s[t],e)}finally{p!==null&&nn(p),uT(u),a.resolving=!1,gy()}}return o}function s1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(To)?n[To]:void 0;return typeof e=="number"?e>=0?e&BT:a1:e}function lT(n,e,t){let r=1<<n;return!!(t[e+(n>>$T)]&r)}function dT(n,e){return!(n&2)&&!(n&1&&e)}var ko=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return GT(this._tNode,this._lView,e,Io(r),t)}};function a1(){return new ko(St(),ue())}function qn(n){return ia(()=>{let e=n.prototype.constructor,t=e[Vc]||Fy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Vc]||Fy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Fy(n){return Mm(n)?()=>{let e=Fy(Ct(n));return e&&e()}:wo(n)}function c1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Gs(s);){let a=WT(o,s,t,r|2,_r);if(a!==_r)return a;let u=o.parent;if(!u){let l=s[Qm];if(l){let h=l.get(t,_r,r);if(h!==_r)return h}u=KT(s),s=s[So]}o=u}return i}function KT(n){let e=n[Q],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function su(n){return i1(St(),n)}function u1(){return oa(St(),ue())}function oa(n,e){return new jt(jn(n,e))}var jt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=u1}return n})();function l1(n){return n instanceof jt?n.nativeElement:n}function d1(){return this._results[Symbol.iterator]()}var ah=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ze}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Db(e);(this._changesDetected=!wb(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=d1};function QT(n){return(n.flags&128)===128}var uv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(uv||{}),YT=new Map,h1=0;function f1(){return h1++}function p1(n){YT.set(n[Wc],n)}function Ly(n){YT.delete(n[Wc])}var hT="__ngContext__";function ea(n,e){pr(e)?(n[hT]=e[Wc],p1(e)):n[hT]=e}function JT(n){return XT(n[zs])}function ZT(n){return XT(n[In])}function XT(n){for(;n!==null&&!Vn(n);)n=n[In];return n}var g1;function lv(n){g1=n}var Ih=new q("",{factory:()=>m1}),m1="ng";var wh=new q(""),Uo=new q("",{providedIn:"platform",factory:()=>"unknown"});var Dh=new q("",{factory:()=>R(nt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var eS="r";var tS="di";var nS=!1,rS=new q("",{factory:()=>nS});var dv=new q("");var y1=(n,e,t,r)=>{};function v1(n,e,t,r){y1(n,e,t,r)}function hv(n){return(n.flags&32)===32}var _1=()=>null;function iS(n,e,t=!1){return _1(n,e,t)}function oS(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];$d(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function Vy(n,e,t){$d(0);let r=J(null);try{e(n,t)}finally{J(r)}}function sS(n,e,t){if(Jm(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var $n=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})($n||{});var Jd;function E1(){if(Jd===void 0&&(Jd=null,$c.trustedTypes))try{Jd=$c.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jd}function fT(n){return E1()?.createScriptURL(n)||n}var ch=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Md})`}};function au(n){return n instanceof ch?n.changingThisBreaksApplicationSecurity:n}function fv(n,e){let t=aS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Md})`)}return t===e}function aS(n){return n instanceof ch&&n.getTypeName()||null}var I1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cS(n){return n=String(n),n.match(I1)?n:"unsafe:"+n}var Ch=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ch||{});function uS(n){let e=dS();return e?e.sanitize(Ch.URL,n)||"":fv(n,"URL")?au(n):cS(dr(n))}function lS(n){let e=dS();if(e)return fT(e.sanitize(Ch.RESOURCE_URL,n)||"");if(fv(n,"ResourceURL"))return fT(au(n));throw new G(904,!1)}function w1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?lS:uS}function pv(n,e,t){return w1(e,t)(n)}function dS(){let n=ue();return n&&n[hr].sanitizer}function hS(n){return n instanceof Function?n():n}function D1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var fS="ng-template";function C1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&D1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(gv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gv(n){return n.type===4&&n.value!==fS}function b1(n,e,t){let r=n.type===4&&!t?fS:n.value;return e===r}function T1(n,e,t){let r=4,i=n.attrs,o=i!==null?R1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Bn(r)&&!Bn(u))return!1;if(s&&Bn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!b1(n,u,t)||u===""&&e.length===1){if(Bn(r))return!1;s=!0}}else if(r&8){if(i===null||!C1(n,i,u,t)){if(Bn(r))return!1;s=!0}}else{let l=e[++a],h=S1(u,i,gv(n),t);if(h===-1){if(Bn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Bn(r))return!1;s=!0}}}}return Bn(r)||s}function Bn(n){return(n&1)===0}function S1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return N1(e,n)}function A1(n,e,t=!1){for(let r=0;r<e.length;r++)if(T1(n,e[r],t))return!0;return!1}function R1(n){for(let e=0;e<n.length;e++){let t=n[e];if(jT(t))return e}return n.length}function N1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function pT(n,e){return n?":not("+e.trim()+")":e}function M1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bn(s)&&(e+=pT(o,i),i=""),r=s,o=o||!Bn(r);t++}return i!==""&&(e+=pT(o,i)),e}function P1(n){return n.map(M1).join(",")}function x1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Bn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ut={};function k1(n,e){return n.createText(e)}function O1(n,e,t){n.setValue(e,t)}function pS(n,e,t){return n.createElement(e,t)}function uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gS(n,e,t){n.appendChild(e,t)}function gT(n,e,t,r,i){r!==null?uh(n,e,t,r,i):gS(n,e,t)}function mS(n,e,t,r){n.removeChild(null,e,t,r)}function F1(n,e,t){n.setAttribute(e,"style",t)}function L1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ZO(n,e,r),i!==null&&L1(n,e,i),o!==null&&F1(n,e,o)}function mv(n,e,t,r,i,o,s,a,u,l,h){let p=bt+r,m=p+i,y=V1(p,m),S=typeof l=="function"?l():l;return y[Q]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function V1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ut);return t}function j1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=mv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ln]=i,p[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),Xm(p),p[lt]=p[So]=n,p[Je]=t,p[hr]=s||n&&n[hr],p[Le]=a||n&&n[Le],p[Hr]=u||n&&n[Hr]||null,p[wn]=o,p[Wc]=f1(),p[Hs]=h,p[Qm]=l,p[an]=e.type==2?n[an]:p,p}function U1(n,e,t){let r=jn(e,n),i=j1(t),o=n[hr].rendererFactory,s=vv(n,yv(n,i,null,vS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function vS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function _S(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vv(n,e){return n[zs]?n[Km][In]=e:n[zs]=e,n[Km]=e,e}function U(n=1){ES(Tt(),ue(),yr()+n,!1)}function ES(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Xd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&eh(e,o,0,t)}Ni(t)}var bh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(bh||{});function jy(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],u=null;(s&bh.SignalBased)!==0&&(u=e[o][Lt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):kT(e,u,o,r)}finally{J(i)}}var qr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(qr||{}),B1;function _v(n,e){return B1(n,e)}var Fo=new Set,Th=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Th||{}),Bo=new q(""),mT=new Set;function zn(n){mT.has(n)||(mT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ev=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),IS=[0,1,2,3],wS=(()=>{class n{ngZone=R(Ee);scheduler=R(Br);errorHandler=R(lr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Bo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Te(ve.AfterRenderHooksStart),this.executing=!0;for(let r of IS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Te(ve.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Ro]??=[]).push(t),Ws(r),r[ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Th.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),lh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ro];e&&(this.view[Ro]=e.filter(t=>t!==this))}};function cu(n,e){let t=e?.injector??R(qe);return zn("NgAfterNextRender"),H1(n,t,e,!0)}function $1(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function H1(n,e,t,r){let i=e.get(Ev);i.impl??=e.get(wS);let o=e.get(Bo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Un):null,a=e.get(Kd,null,{optional:!0}),u=new lh(i.impl,$1(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var DS=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function CS(n,e,t){let r=n.get(DS);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function q1(n,e){let t=n.get(DS);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function z1(n,e){for(let[t,r]of e)CS(n,r.animateFns)}function yT(n,e,t,r){let i=n?.[No]?.enter;e!==null&&i&&i.has(t.index)&&z1(r,i)}function Js(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Vn(i)?u=i:pr(i)&&(l=!0,i=i[Ln]);let h=Dn(i);n===0&&r!==null?(yT(a,r,o,t),s==null?gS(e,r,h):uh(e,r,h,s||null,!0)):n===1&&r!==null?(yT(a,r,o,t),uh(e,r,h,s||null,!0)):n===2?vT(a,o,t,p=>{mS(e,h,l,p)}):n===3&&vT(a,o,t,()=>{e.destroyNode(h)}),u!=null&&iF(e,n,t,u,o,r,s)}}function G1(n,e){bS(n,e),e[Ln]=null,e[wn]=null}function W1(n,e,t,r,i,o){r[Ln]=i,r[wn]=e,Ah(n,r,t,1,i,o)}function bS(n,e){e[hr].changeDetectionScheduler?.notify(9),Ah(n,e,e[Le],2,null,null)}function K1(n){let e=n[zs];if(!e)return by(n[Q],n);for(;e;){let t=null;if(pr(e))t=e[zs];else{let r=e[ze];r&&(t=r)}if(!t){for(;e&&!e[In]&&e!==n;)pr(e)&&by(e[Q],e),e=e[lt];e===null&&(e=n),pr(e)&&by(e[Q],e),t=e&&e[In]}e=t}}function Iv(n,e){let t=n[Mo],r=t.indexOf(e);t.splice(r,1)}function Sh(n,e){if(Po(e))return;let t=e[Le];t.destroyNode&&Ah(n,e,t,3,null,null),K1(e)}function by(n,e){if(Po(e))return;let t=J(null);try{e[ee]&=-129,e[ee]|=256,e[cn]&&Mc(e[cn]),J1(n,e),Y1(n,e),e[Q].type===1&&e[Le].destroy();let r=e[Si];if(r!==null&&Vn(e[lt])){r!==e[lt]&&Iv(r,e);let i=e[fr];i!==null&&i.detachView(n)}Ly(e)}finally{J(t)}}function vT(n,e,t,r){let i=n?.[No];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Fo.add(n),CS(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Q1(n,r)}else n&&Fo.delete(n),r(!1)},i)}function Q1(n,e){let t=n[No]?.running;if(t){t.then(()=>{n[No].running=void 0,Fo.delete(n),e(!0)});return}e(!1)}function Y1(n,e){let t=n.cleanup,r=e[qs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[qs]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Kc];if(o!==null){e[Kc]=null;for(let s of o)s.destroy()}}function J1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Te(ve.LifecycleHookStart,a,u);try{u.call(a)}finally{Te(ve.LifecycleHookEnd,a,u)}}else{Te(ve.LifecycleHookStart,i,o);try{o.call(i)}finally{Te(ve.LifecycleHookEnd,i,o)}}}}}function Z1(n,e,t){return X1(n,e.parent,t)}function X1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ln];if(Ri(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===$n.None||i===$n.Emulated)return null}return jn(r,t)}function eF(n,e,t){return nF(n,e,t)}function tF(n,e,t){return n.type&40?jn(n,t):null}var nF=tF,_T;function wv(n,e,t,r){let i=Z1(n,r,e),o=e[Le],s=r.parent||e[wn],a=eF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)gT(o,i,t[u],a,!1);else gT(o,i,t,a,!1);_T!==void 0&&_T(o,r,e,t,i)}function Zc(n,e){if(e!==null){let t=e.type;if(t&3)return jn(e,n);if(t&4)return Uy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Zc(n,r);{let i=n[e.index];return Vn(i)?Uy(-1,i):Dn(i)}}else{if(t&128)return Zc(n,e.next);if(t&32)return _v(e,n)()||Dn(n[e.index]);{let r=TS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ci(n[an]);return Zc(i,r)}else return Zc(n,e.next)}}}return null}function TS(n,e){if(e!==null){let r=n[an][wn],i=e.projection;return r.projection[i]}return null}function Uy(n,e){let t=ze+n+1;if(t<e.length){let r=e[t],i=r[Q].firstChild;if(i!==null)return Zc(r,i)}return e[Ai]}function Dv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Hr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ea(Dn(u),r),t.flags|=2),!hv(t))if(l&8)Dv(n,e,t.child,r,i,o,!1),Js(e,n,a,i,u,t,o,r);else if(l&32){let h=_v(t,r),p;for(;p=h();)Js(e,n,a,i,p,t,o,r);Js(e,n,a,i,u,t,o,r)}else l&16?rF(n,e,r,t,i,o):Js(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Ah(n,e,t,r,i,o){Dv(t,r,n.firstChild,e,i,o,!1)}function rF(n,e,t,r,i,o){let s=t[an],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Js(e,n,t[Hr],i,h,r,o,t)}else{let l=u,h=s[lt];QT(r)&&(l.flags|=128),Dv(n,e,l,h,i,o,!0)}}function iF(n,e,t,r,i,o,s){let a=r[Ai],u=Dn(r);a!==u&&Js(e,n,t,o,a,i,s);for(let l=ze;l<r.length;l++){let h=r[l];Ah(h[Q],h,n,e,o,a)}}function oF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:qr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qr.Important),n.setStyle(t,r,i,o))}}function SS(n,e,t,r,i){let o=yr(),s=r&2;try{Ni(-1),s&&e.length>bt&&ES(n,e,bt,!1);let a=s?ve.TemplateUpdateStart:ve.TemplateCreateStart;Te(a,i,t),t(r,i)}finally{Ni(o);let a=s?ve.TemplateUpdateEnd:ve.TemplateCreateEnd;Te(a,i,t)}}function AS(n,e,t){hF(n,e,t),(t.flags&64)===64&&fF(n,e,t)}function Cv(n,e,t=jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function sF(n,e,t,r){let o=r.get(rS,nS)||t===$n.ShadowDom||t===$n.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return aF(s),s}function aF(n){cF(n)}var cF=()=>null;function uF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function RS(n,e,t,r,i,o){let s=e[Q];if(bv(n,s,e,t,r)){Ri(n)&&dF(e,n.index);return}n.type&3&&(t=uF(t)),lF(n,e,t,r,i,o)}function lF(n,e,t,r,i,o){if(n.type&3){let s=jn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function dF(n,e){let t=Cn(e,n);t[ee]&16||(t[ee]|=64)}function hF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ri(t)&&U1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=eu(e,n,s,t);if(ea(u,e),o!==null&&vF(e,s-r,u,a,t,o),gr(a)){let l=Cn(t.index,e);l[Je]=eu(e,n,s,t)}}}function fF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Qb();try{Ni(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Bd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&pF(u,l)}}finally{Ni(-1),Bd(s)}}function pF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function gF(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];A1(e,o.selectors,!1)&&(r??=[],gr(o)?r.unshift(o):r.push(o))}return r}function mF(n,e,t,r,i,o){let s=jn(n,e);yF(e[Le],s,o,n.value,t,r,i)}function yF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?dr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function vF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];jy(r,t,u,l)}}function NS(n,e,t,r,i){let o=bt+t,s=e[Q],a=i(s,e,n,r,t);e[o]=a,Ks(n,!0);let u=n.type===2;return u?(yS(e[Le],a,n),(Ub()===0||Ld(n))&&ea(a,e),Bb()):ea(a,e),Gd()&&(!u||!hv(n))&&wv(s,e,a,n),n}function MS(n){let e=n;return cy()?zb():(e=e.parent,Ks(e,!1)),e}function _F(n,e){let t=n[Hr];if(!t)return;let r;try{r=t.get(bn,null)}catch{r=null}r?.(e)}function bv(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];jy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];jy(h,l,r,i),a=!0}return a}function EF(n,e){let t=Cn(e,n),r=t[Q];IF(r,t);let i=t[Ln];i!==null&&t[Hs]===null&&(t[Hs]=iS(i,t[Hr])),Te(ve.ComponentStart);try{Tv(r,t,t[Je])}finally{Te(ve.ComponentEnd,t[Je])}}function IF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Tv(n,e,t){Hd(e);try{let r=n.viewQuery;r!==null&&Vy(1,r,t);let i=n.template;i!==null&&SS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[fr]?.finishViewCreation(n),n.staticContentQueries&&oS(n,e),n.staticViewQueries&&Vy(2,n.viewQuery,t);let o=n.components;o!==null&&wF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,qd()}}function wF(n,e){for(let t=0;t<e.length;t++)EF(n,e[t])}function Rh(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=yv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Si]=l;let h=n[fr];return h!==null&&(u[fr]=h.createEmbeddedView(o)),Tv(o,u,t),u}finally{J(i)}}function tu(n,e){return!e||e.firstChild===null||QT(n)}function nu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Dn(o)),Vn(o)&&PS(o,r);let s=t.type;if(s&8)nu(n,e,t.child,r);else if(s&32){let a=_v(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=TS(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ci(e[an]);nu(u[Q],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function PS(n,e){for(let t=ze;t<n.length;t++){let r=n[t],i=r[Q].firstChild;i!==null&&nu(r[Q],r,i,e)}n[Ai]!==n[Ln]&&e.push(n[Ai])}function xS(n){if(n[Ro]!==null){for(let e of n[Ro])e.impl.addSequence(e);n[Ro].length=0}}var kS=[];function DF(n){return n[cn]??CF(n)}function CF(n){let e=kS.pop()??Object.create(TF);return e.lView=n,e}function bF(n){n.lView[cn]!==n&&(n.lView=null,kS.push(n))}var TF=K(M({},Ac),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ws(n.lView)},consumerOnSignalRead(){this.lView[cn]=this}});function SF(n){let e=n[cn]??Object.create(AF);return e.lView=n,e}var AF=K(M({},Ac),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ci(n.lView);for(;e&&!OS(e[Q]);)e=Ci(e);e&&ey(e)},consumerOnSignalRead(){this.lView[cn]=this}});function OS(n){return n.type!==2}function FS(n){if(n[Kc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Kc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var RF=100;function LS(n,e=0){let r=n[hr].rendererFactory,i=!1;i||r.begin?.();try{NF(n,e)}finally{i||r.end?.()}}function NF(n,e){let t=uy();try{ly(!0),By(n,e);let r=0;for(;Jc(n);){if(r===RF)throw new G(103,!1);r++,By(n,1)}}finally{ly(t)}}function MF(n,e,t,r){if(Po(e))return;let i=e[ee],o=!1,s=!1;Hd(e);let a=!0,u=null,l=null;o||(OS(n)?(l=DF(e),u=Nc(l)):Kl()===null?(a=!1,l=SF(e),u=Nc(l)):e[cn]&&(Mc(e[cn]),e[cn]=null));try{Xm(e),Gb(n.bindingStartIndex),t!==null&&SS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Xd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&eh(e,y,0,null),Dy(e,0)}if(s||PF(e),FS(e),VS(e,0),n.contentQueries!==null&&oS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Xd(e,y)}else{let y=n.contentHooks;y!==null&&eh(e,y,1),Dy(e,1)}kF(n,e);let p=n.components;p!==null&&US(e,p,0);let m=n.viewQuery;if(m!==null&&Vy(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Xd(e,y)}else{let y=n.viewHooks;y!==null&&eh(e,y,2),Dy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Fd]){for(let y of e[Fd])y();e[Fd]=null}o||(xS(e),e[ee]&=-73)}catch(h){throw o||Ws(e),h}finally{l!==null&&(Ql(l,u),a&&bF(l)),qd()}}function VS(n,e){for(let t=JT(n);t!==null;t=ZT(t))for(let r=ze;r<t.length;r++){let i=t[r];jS(i,e)}}function PF(n){for(let e=JT(n);e!==null;e=ZT(e)){if(!(e[ee]&2))continue;let t=e[Mo];for(let r=0;r<t.length;r++){let i=t[r];ey(i)}}}function xF(n,e,t){Te(ve.ComponentStart);let r=Cn(e,n);try{jS(r,t)}finally{Te(ve.ComponentEnd,r[Je])}}function jS(n,e){Vd(n)&&By(n,e)}function By(n,e){let r=n[Q],i=n[ee],o=n[cn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Yl(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)MF(r,n,r.template,n[Je]);else if(i&8192){let a=J(null);try{FS(n),VS(n,1);let u=r.components;u!==null&&US(n,u,1),xS(n)}finally{J(a)}}}function US(n,e,t){for(let r=0;r<e.length;r++)xF(n,e[r],t)}function kF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ni(~i);else{let o=i,s=t[++r],a=t[++r];Kb(s,o);let u=e[o];Te(ve.HostBindingsUpdateStart,u);try{a(2,u)}finally{Te(ve.HostBindingsUpdateEnd,u)}}}}finally{Ni(-1)}}function Sv(n,e){let t=uy()?64:1088;for(n[hr].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Ci(n);if(Gs(n)&&!r)return n;n=r}return null}function BS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function $S(n,e){let t=ze+e;if(t<n.length)return n[t]}function Nh(n,e,t,r=!0){let i=e[Q];if(OF(i,e,n,t),r){let s=Uy(t,n),a=e[Le],u=a.parentNode(n[Ai]);u!==null&&W1(i,n[wn],a,e,u,s)}let o=e[Hs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function HS(n,e){let t=ru(n,e);return t!==void 0&&Sh(t[Q],t),t}function ru(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t];if(r){let i=r[Si];i!==null&&i!==n&&Iv(i,r),e>0&&(n[t-1][In]=r[In]);let o=qc(n,ze+e);G1(r[Q],r);let s=o[fr];s!==null&&s.detachView(o[Q]),r[lt]=null,r[In]=null,r[ee]&=-129}return r}function OF(n,e,t,r){let i=ze+r,o=t.length;r>0&&(t[i-1][In]=e),r<o-ze?(e[In]=t[i],Um(t,ze+r,e)):(t.push(e),e[In]=null),e[lt]=t;let s=e[Si];s!==null&&t!==s&&qS(s,e);let a=e[fr];a!==null&&a.insertView(n),jd(e),e[ee]|=128}function qS(n,e){let t=n[Mo],r=e[lt];if(pr(r))n[ee]|=2;else{let i=r[lt][an];e[an]!==i&&(n[ee]|=2)}t===null?n[Mo]=[e]:t.push(e)}var Mi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Q];return nu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Je]}set context(e){this._lView[Je]=e}get destroyed(){return Po(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[lt];if(Vn(e)){let t=e[Qc],r=t?t.indexOf(this):-1;r>-1&&(ru(e,r),qc(t,r))}this._attachedToViewContainer=!1}Sh(this._lView[Q],this._lView)}onDestroy(e){ty(this._lView,e)}markForCheck(){Sv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){jd(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,LS(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Gs(this._lView),t=this._lView[Si];t!==null&&!e&&Iv(t,this._lView),bS(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=Gs(this._lView),r=this._lView[Si];r!==null&&!t&&qS(r,this._lView),jd(this._lView)}};var ta=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=FF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Rh(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Mi(o)}}return n})();function FF(){return Av(St(),ue())}function Av(n,e){return n.type&4?new ta(e,n,oa(n,e)):null}function Mh(n,e,t,r,i){let o=n.data[e];if(o===null)o=LF(n,e,t,r,i),Wb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=qb();o.injectorIndex=s===null?-1:s.injectorIndex}return Ks(o,!0),o}function LF(n,e,t,r,i){let o=ay(),s=cy(),a=s?o:o&&o.parent,u=n.data[e]=jF(n,a,t,e,r,i);return VF(n,u,o,s),u}function VF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function jF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Hb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function UF(n){let e=n[Ym]??[],r=n[lt][Le],i=[];for(let o of e)o.data[tS]!==void 0?i.push(o):BF(o,r);n[Ym]=i}function BF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[eS];for(;t<i;){let o=r.nextSibling;mS(e,r,!1),r=o,t++}}}var $F=()=>null,HF=()=>null;function $y(n,e){return $F(n,e)}function zS(n,e,t){return HF(n,e,t)}var GS=class{},Ph=class{},Hy=class{resolveComponentFactory(e){throw new G(917,!1)}},uu=class{static NULL=new Hy},Lo=class{},Gn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>qF()}return n})();function qF(){let n=ue(),e=St(),t=Cn(e.index,n);return(pr(t)?t:n)[Le]}var WS=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var nh={},qy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,nh,r);return i!==nh||t===nh?i:this.parentInjector.get(e,t,r)}};function dh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Nm(i,a);else if(o==2){let u=a,l=e[++s];r=Nm(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B(n,e=0){let t=ue();if(t===null)return X(n,e);let r=St();return GT(r,t,Ct(n),e)}function Rv(){let n="invalid";throw new Error(n)}function zF(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}KF(n,e,t,a,o,u,l)}o!==null&&r!==null&&GF(t,r,o)}function GF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function WF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function KF(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&gr(y)&&(u=!0,WF(n,t,m)),Oy(sh(t,e),n,y.type)}eL(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=_S(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Xs(t.mergedAttrs,y.hostAttrs),YF(n,t,e,p,y),XF(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}QF(n,t,o)}function QF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ET(0,e,i,r),ET(1,e,i,r),wT(e,r,!1);else{let o=t.get(i);IT(0,e,o,r),IT(1,e,o,r),wT(e,r,!0)}}}function ET(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),KS(e,o)}}function IT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),KS(e,s)}}function KS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function wT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||gv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function YF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=wo(i.type,!0)),s=new Oo(o,gr(i),B,null);n.blueprint[r]=s,t[r]=s,JF(n,e,r,_S(n,t,i.hostVars,Ut),i)}function JF(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;ZF(s)!=a&&s.push(a),s.push(t,r,o)}}function ZF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;gr(e)&&(t[""]=n)}}function eL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QS(n,e,t,r,i,o,s,a){let u=e[Q],l=u.consts,h=mr(l,s),p=Mh(u,n,t,r,h);return o&&zF(u,e,p,mr(l,a),i),p.mergedAttrs=Xs(p.mergedAttrs,p.attrs),p.attrs!==null&&dh(p,p.attrs,!1),p.mergedAttrs!==null&&dh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function YS(n,e){KO(n,e),Jm(e)&&n.queries.elementEnd(e)}function tL(n,e,t,r,i,o){let s=e.consts,a=mr(s,i),u=Mh(e,n,t,r,a);if(u.mergedAttrs=Xs(u.mergedAttrs,u.attrs),o!=null){let l=mr(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&dh(u,u.attrs,!1),u.mergedAttrs!==null&&dh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function JS(n,e,t){return n[e]=t}function nL(n,e){return n[e]}function Hn(n,e,t){if(t===Ut)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ZS(n,e,t,r){let i=Hn(n,e,t);return Hn(n,e+1,r)||i}function rL(n,e,t,r,i){let o=ZS(n,e,t,r);return Hn(n,e+2,i)||o}function Ty(n,e,t){return function r(i){let o=Ri(n)?Cn(n.index,e):e;Sv(o,5);let s=e[Je],a=DT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=DT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function DT(n,e,t,r){let i=J(null);try{return Te(ve.OutputStart,e,t),t(r)!==!1}catch(o){return _F(n,o),!1}finally{Te(ve.OutputEnd,e,t),J(i)}}function iL(n,e,t,r,i,o,s,a){let u=Ld(n),l=!1,h=null;if(!r&&u&&(h=sL(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=jn(n,t),m=r?r(p):p;v1(t,m,o,a);let y=i.listen(m,o,a);if(!oL(o)){let S=r?P=>r(Dn(P[n.index])):n.index;XS(S,e,t,o,a,y,!1)}}return l}function oL(n){return n.startsWith("animation")||n.startsWith("transition")}function sL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[qs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function XS(n,e,t,r,i,o,s){let a=e.firstCreatePass?ry(e):null,u=ny(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function CT(n,e,t,r,i,o){let s=e[t],a=e[Q],l=a.data[t].outputs[r],p=s[l].subscribe(o);XS(n.index,a,e,i,o,p,!0)}var zy=Symbol("BINDING");var hh=class extends uu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=$r(e);return new Vo(t,this.ngModule)}};function aL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&bh.SignalBased)!==0};return i&&(o.transform=i),o})}function cL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function uL(n,e,t){let r=e instanceof et?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new qy(t,r):t}function lL(n){let e=n.get(Lo,null);if(e===null)throw new G(407,!1);let t=n.get(WS,null),r=n.get(Br,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function dL(n,e){let t=e0(n);return pS(e,t,t==="svg"?xb:t==="math"?kb:null)}function e0(n){return(n.selectors[0][0]||"div").toLowerCase()}var Vo=class extends Ph{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=aL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=cL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=P1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Te(ve.DynamicComponentStart);let a=J(null);try{let u=this.componentDef,l=hL(r,u,s,o),h=uL(u,i||this.ngModule,e),p=lL(h),m=p.rendererFactory.createRenderer(null,u),y=r?sF(m,r,u.encapsulation,h):dL(u,m),S=s?.some(bT)||o?.some(j=>typeof j!="function"&&j.bindings.some(bT)),P=yv(null,l,null,512|vS(u),null,null,p,m,h,null,iS(y,h,!0));P[bt]=y,Hd(P);let N=null;try{let j=QS(bt,P,2,"#host",()=>l.directiveRegistry,!0,0);yS(m,y,j),ea(y,P),AS(l,P,j),sS(l,j,P),YS(l,j),t!==void 0&&pL(j,this.ngContentSelectors,t),N=Cn(j.index,P),P[Je]=N[Je],Tv(l,P,null)}catch(j){throw N!==null&&Ly(N),Ly(P),j}finally{Te(ve.DynamicComponentEnd),qd()}return new fh(this.componentType,P,!!S)}finally{J(a)}}};function hL(n,e,t,r){let i=n?["ng-version","21.0.1"]:x1(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[zy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[zy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=qm(p);u.push(m)}return mv(0,null,fL(o,s),1,a,u,null,null,null,[i],null)}function fL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function bT(n){let e=n[zy].kind;return e==="input"||e==="twoWay"}var fh=class extends GS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Yc(t[Q],bt),this.location=oa(this._tNode,t),this.instance=Cn(this._tNode.index,t)[Je],this.hostView=this.changeDetectorRef=new Mi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=bv(r,i[Q],i,e,t);this.previousInputValues.set(e,t);let s=Cn(r.index,i);Sv(s,1)}get injector(){return new ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $o=(()=>{class n{static __NG_ELEMENT_ID__=gL}return n})();function gL(){let n=St();return n0(n,ue())}var mL=$o,t0=class extends mL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return oa(this._hostTNode,this._hostLView)}get injector(){return new ko(this._hostTNode,this._hostLView)}get parentInjector(){let e=cv(this._hostTNode,this._hostLView);if(UT(e)){let t=oh(e,this._hostLView),r=ih(e),i=t[Q].data[r+8];return new ko(i,t)}else return new ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=TT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ze}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$y(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,tu(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!HO(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new Vo($r(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(et,null);j&&(o=j)}let m=$r(h.componentType??{}),y=$y(this._lContainer,m?.id??null),S=y?.firstChild??null,P=h.create(p,i,S,o,s,a);return this.insertImpl(P.hostView,l,tu(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Fb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[lt],l=new t0(u,u[wn],u[lt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Nh(s,i,o,r),e.attachToViewContainerRef(),Um(Sy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=TT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ru(this._lContainer,t);r&&(qc(Sy(this._lContainer),t),Sh(r[Q],r))}detach(e){let t=this._adjustIndex(e,-1),r=ru(this._lContainer,t);return r&&qc(Sy(this._lContainer),t)!=null?new Mi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function TT(n){return n[Qc]}function Sy(n){return n[Qc]||(n[Qc]=[])}function n0(n,e){let t,r=e[n.index];return Vn(r)?t=r:(t=BS(r,e,null,n),e[n.index]=t,vv(e,t)),vL(t,e,n,r),new t0(t,n,e)}function yL(n,e){let t=n[Le],r=t.createComment(""),i=jn(e,n),o=t.parentNode(i);return uh(t,o,r,t.nextSibling(i),!1),r}var vL=IL,_L=()=>!1;function EL(n,e,t){return _L(n,e,t)}function IL(n,e,t,r){if(n[Ai])return;let i;t.type&8?i=Dn(r):i=yL(e,t),n[Ai]=i}var Gy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Wy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Nv(e,t).matches!==null&&this.queries[t].setDirty()}},Ky=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=RL(e):this.predicate=e}},Qy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,wL(t,o)),this.matchTNodeWithReadOption(e,t,th(t,e,o,!1,!1))}else r===ta?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,th(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jt||i===$o||i===ta&&t.type&4)this.addMatch(t.index,-2);else{let o=th(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function wL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function DL(n,e){return n.type&11?oa(n,e):n.type&4?Av(n,e):null}function CL(n,e,t,r){return t===-1?DL(e,n):t===-2?bL(n,e,r):eu(n,n[Q],t,e)}function bL(n,e,t){if(t===jt)return oa(e,n);if(t===ta)return Av(e,n);if(t===$o)return n0(e,n)}function r0(n,e,t,r){let i=e[fr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(CL(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Jy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=r0(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=ze;p<h.length;p++){let m=h[p];m[Si]===m[lt]&&Jy(m[Q],m,l,r)}if(h[Mo]!==null){let p=h[Mo];for(let m=0;m<p.length;m++){let y=p[m];Jy(y[Q],y,l,r)}}}}}return r}function TL(n,e){return n[fr].queries[e].queryList}function SL(n,e,t){let r=new ah((t&4)===4);return jb(n,e,r,r.destroy),(e[fr]??=new Wy).queries.push(new Gy(r))-1}function AL(n,e,t,r){let i=Tt();if(i.firstCreatePass){let o=St();NL(i,new Ky(e,t,r),o.index),ML(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return SL(i,ue(),t)}function RL(n){return n.split(",").map(e=>e.trim())}function NL(n,e,t){n.queries===null&&(n.queries=new Qy),n.queries.track(new Yy(e,t))}function ML(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Nv(n,e){return n.queries.getByIndex(e)}function PL(n,e){let t=n[Q],r=Nv(t,e);return r.crossesNgTemplate?Jy(t,n,e,[]):r0(t,n,r,e)}var na=class{},xh=class{};var ph=class extends na{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Hm(e);this._bootstrapComponents=hS(o.bootstrap),this._r3Injector=my(e,t,[{provide:na,useValue:this},{provide:uu,useValue:this.componentFactoryResolver},...r],Ur(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gh=class extends xh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ph(this.moduleType,e,[])}};var iu=class extends na{injector;componentFactoryResolver=new hh(this);instance=null;constructor(e){super();let t=new Co([...e.providers,{provide:na,useValue:this},{provide:uu,useValue:this.componentFactoryResolver}],e.parent||Gc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sa(n,e,t=null){return new iu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var xL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zm(!1,t.type),i=r.length>0?sa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(X(et))})}return n})();function ke(n){return ia(()=>{let e=i0(n),t=K(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(xL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$n.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zn("NgStandalone"),o0(t);let r=n.dependencies;return t.directiveDefs=ST(r,kL),t.pipeDefs=ST(r,Tb),t.id=LL(t),t})}function kL(n){return $r(n)||qm(n)}function Wn(n){return ia(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function OL(n,e){if(n==null)return bi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=bh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function FL(n){if(n==null)return bi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Oe(n){return ia(()=>{let e=i0(n);return o0(e),e})}function i0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||bi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:OL(n.inputs,e),outputs:FL(n.outputs),debugInfo:null}}function o0(n){n.features?.forEach(e=>e(n))}function ST(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function LL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function VL(n){return Object.getPrototypeOf(n.prototype).constructor}function Bt(n){let e=VL(n.type),t=!0,r=[n];for(;e;){let i;if(gr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Ay(n.inputs),s.declaredInputs=Ay(n.declaredInputs),s.outputs=Ay(n.outputs);let a=i.hostBindings;a&&HL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&BL(n,u),l&&$L(n,l),jL(n,i),mb(n.outputs,i.outputs),gr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Bt&&(t=!1)}}e=Object.getPrototypeOf(e)}UL(r)}function jL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function UL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xs(i.hostAttrs,t=Xs(t,i.hostAttrs))}}function Ay(n){return n===bi?{}:n===rn?[]:n}function BL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function $L(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function HL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function qL(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Xs(n.mergedAttrs,n.attrs);let h=n.tView=mv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ks(n,!1);let u=zL(t,e,n,r);Gd()&&wv(t,e,u,n),ea(u,e);let l=BS(u,e,u,n);e[r+bt]=l,vv(e,l),EL(l,n,e)}function mh(n,e,t,r,i,o,s,a,u,l,h){let p=t+bt,m;if(e.firstCreatePass){if(m=Mh(e,p,4,s||null,a||null),l!=null){let y=mr(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return qL(m,n,e,t,r,i,o,u),l!=null&&Cv(n,m,h),m}var zL=GL;function GL(n,e,t,r){return Wd(!0),e[Le].createComment("")}var Mv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function s0(n){return typeof n=="function"&&n[Lt]!==void 0}function Pv(n){return s0(n)&&typeof n.set=="function"}var xv=new q("");function Ho(n){return!!n&&typeof n.then=="function"}function a0(n){return!!n&&typeof n.subscribe=="function"}var kv=new q("");function kh(n){return sn([{provide:kv,multi:!0,useValue:n}])}var Ov=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(kv,{optional:!0})??[];injector=R(qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=tt(this.injector,i);if(Ho(o))t.push(o);else if(a0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lu=new q("");function c0(){Yg(()=>{let n="";throw new G(600,n)})}function u0(n){return n.isBoundToModule}var WL=10;var zr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(bn);afterRenderManager=R(Ev);zonelessEnabled=R(Qs);rootEffectScheduler=R(wy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(vr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(t=>!t))}constructor(){R(Bo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=qe.NULL){return this._injector.get(Ee).run(()=>{Te(ve.BootstrapComponentStart);let s=t instanceof Ph;if(!this._injector.get(Ov).done){let S="";throw new G(405,S)}let u;s?u=t:u=this._injector.get(uu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=u0(u)?void 0:this._injector.get(na),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(xv,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Xc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Te(ve.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(ve.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Th.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Te(ve.ChangeDetectionEnd),new G(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),Te(ve.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Lo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<WL;){Te(ve.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Te(ve.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Jc(i))continue;let o=r&&!this.zonelessEnabled?0:1;LS(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Jc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Xc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(lu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function du(n,e,t,r){let i=ue(),o=xo();if(Hn(i,o,e)){let s=Tt(),a=zd();mF(a,i,n,e,t,r)}return du}var $K=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Zy=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Ry(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function KL(n,e,t,r){let i,o,s=0,a=n.length-1,u=void 0;if(Array.isArray(e)){J(r);let l=e.length-1;for(J(null);s<=a&&s<=l;){let h=n.at(s),p=e[s],m=Ry(s,h,s,p,t);if(m!==0){m<0&&n.updateValue(s,p),s++;continue}let y=n.at(a),S=e[l],P=Ry(a,y,l,S,t);if(P!==0){P<0&&n.updateValue(a,S),a--,l--;continue}let N=t(s,h),j=t(a,y),oe=t(s,p);if(Object.is(oe,j)){let fe=t(l,S);Object.is(fe,N)?(n.swap(s,a),n.updateValue(a,S),l--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new yh,o??=RT(n,s,a,t),Xy(n,i,s,oe))n.updateValue(s,p),s++,a++;else if(o.has(oe))i.set(N,n.detach(s)),a--;else{let fe=n.create(s,e[s]);n.attach(s,fe),s++,a++}}for(;s<=l;)AT(n,i,t,s,e[s]),s++}else if(e!=null){J(r);let l=e[Symbol.iterator]();J(null);let h=l.next();for(;!h.done&&s<=a;){let p=n.at(s),m=h.value,y=Ry(s,p,s,m,t);if(y!==0)y<0&&n.updateValue(s,m),s++,h=l.next();else{i??=new yh,o??=RT(n,s,a,t);let S=t(s,m);if(Xy(n,i,s,S))n.updateValue(s,m),s++,a++,h=l.next();else if(!o.has(S))n.attach(s,n.create(s,m)),s++,a++,h=l.next();else{let P=t(s,p);i.set(P,n.detach(s)),a--}}}for(;!h.done;)AT(n,i,t,n.length,h.value),h=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function Xy(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function AT(n,e,t,r,i){if(Xy(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function RT(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var yh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Ve(n,e,t,r,i,o,s,a){zn("NgControlFlow");let u=ue(),l=Tt(),h=mr(l.consts,o);return mh(u,l,n,e,t,r,i,h,256,s,a),Fv}function Fv(n,e,t,r,i,o,s,a){zn("NgControlFlow");let u=ue(),l=Tt(),h=mr(l.consts,o);return mh(u,l,n,e,t,r,i,h,512,s,a),Fv}function je(n,e){zn("NgControlFlow");let t=ue(),r=xo(),i=t[r]!==Ut?t[r]:-1,o=i!==-1?vh(t,bt+i):void 0,s=0;if(Hn(t,r,n)){let a=J(null);try{if(o!==void 0&&HS(o,s),n!==-1){let u=bt+n,l=vh(t,u),h=rv(t[Q],u),p=zS(l,h,t),m=Rh(t,h,e,{dehydratedView:p});Nh(l,m,s,tu(h,p))}}finally{J(a)}}else if(o!==void 0){let a=$S(o,s);a!==void 0&&(a[Je]=e)}}var ev=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ze}};function Lv(n,e){return e}var tv=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function $t(n,e,t,r,i,o,s,a,u,l,h,p,m){zn("NgControlFlow");let y=ue(),S=Tt(),P=u!==void 0,N=ue(),j=a?s.bind(N[an][Je]):s,oe=new tv(P,j);N[bt+n]=oe,mh(y,S,n+1,e,t,r,i,mr(S.consts,o),256),P&&mh(y,S,n+2,u,l,h,p,mr(S.consts,m),512)}var nv=class extends Zy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ze}at(e){return this.getLView(e)[Je].$implicit}attach(e,t){let r=t[Hs];this.needsIndexUpdate||=e!==this.length,Nh(this.lContainer,t,e,tu(this.templateTNode,r)),QL(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,YL(this.lContainer,e),JL(this.lContainer,e)}create(e,t){let r=$y(this.lContainer,this.templateTNode.tView.ssrId),i=Rh(this.hostLView,this.templateTNode,new ev(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Sh(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Je].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Je].$index=e}getLView(e){return ZL(this.lContainer,e)}};function Ht(n){let e=J(null),t=yr();try{let r=ue(),i=r[Q],o=r[t],s=t+1,a=vh(r,s);if(o.liveCollection===void 0){let l=rv(i,s);o.liveCollection=new nv(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(KL(u,n,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=xo(),h=u.length===0;if(Hn(r,l,h)){let p=t+2,m=vh(r,p);if(h){let y=rv(i,p),S=zS(m,y,r),P=Rh(r,y,void 0,{dehydratedView:S});Nh(m,P,0,tu(y,S))}else i.firstUpdatePass&&UF(m),HS(m,0)}}}finally{J(e)}}function vh(n,e){return n[e]}function QL(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t],i=r?r[No]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Hr];q1(o,i),Fo.delete(r),i.detachedLeaveAnimationFns=void 0}}function YL(n,e){if(n.length<=ze)return;let t=ze+e,r=n[t],i=r?r[No]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function JL(n,e){return ru(n,e)}function ZL(n,e){return $S(n,e)}function rv(n,e){return Yc(n,e)}function Ie(n,e,t){let r=ue(),i=xo();if(Hn(r,i,e)){let o=Tt(),s=zd();RS(s,r,n,e,r[Le],t)}return Ie}function NT(n,e,t,r,i){bv(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=ue(),o=i[Q],s=n+bt,a=o.firstCreatePass?QS(s,i,2,e,gF,$b(),t,r):o.data[s];if(NS(a,i,n,e,l0),Ld(a)){let u=i[Q];AS(u,i,a),sS(u,a,i)}return r!=null&&Cv(i,a),x}function k(){let n=Tt(),e=St(),t=MS(e);return n.firstCreatePass&&YS(n,t),oy(t)&&sy(),iy(),t.classesWithoutHost!=null&&YO(t)&&NT(n,t,ue(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&JO(t)&&NT(n,t,ue(),t.stylesWithoutHost,!1),k}function Ne(n,e,t,r){return x(n,e,t,r),k(),Ne}function Kn(n,e,t,r){let i=ue(),o=i[Q],s=n+bt,a=o.firstCreatePass?tL(s,o,2,e,t,r):o.data[s];return NS(a,i,n,e,l0),r!=null&&Cv(i,a),Kn}function Jt(){let n=St(),e=MS(n);return oy(e)&&sy(),iy(),Jt}var l0=(n,e,t,r,i)=>(Wd(!0),pS(e[Le],r,tT()));function qt(){return ue()}var hu="en-US";var XL=hu;function d0(n){typeof n=="string"&&(XL=n.toLowerCase().replace(/_/g,"-"))}function de(n,e,t){let r=ue(),i=Tt(),o=St();return h0(i,r,r[Le],o,n,e,t),de}function h0(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ty(r,e,o),iL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Ty(r,e,o),CT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ty(r,e,o),CT(r,e,p,i,i,u)}}function _e(n=1){return eT(n)}function Vv(n,e,t,r){AL(n,e,t,r)}function jv(n){let e=ue(),t=Tt(),r=fy();$d(r+1);let i=Nv(t,r);if(n.dirty&&Ob(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=PL(e,r);n.reset(o,l1),n.notifyOnChanges()}return!0}return!1}function Uv(){return TL(ue(),fy())}function Zd(n,e){return n<<17|e<<2}function jo(n){return n>>17&32767}function eV(n){return(n&2)==2}function tV(n,e){return n&131071|e<<17}function iv(n){return n|2}function ra(n){return(n&131068)>>2}function Ny(n,e){return n&-131069|e<<2}function nV(n){return(n&1)===1}function ov(n){return n|1}function rV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=jo(s),u=ra(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||$s(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=jo(n[a+1]);n[r+1]=Zd(m,a),m!==0&&(n[m+1]=Ny(n[m+1],r)),n[a+1]=tV(n[a+1],r)}else n[r+1]=Zd(a,0),a!==0&&(n[a+1]=Ny(n[a+1],r)),a=r;else n[r+1]=Zd(u,0),a===0?a=r:n[u+1]=Ny(n[u+1],r),u=r;l&&(n[r+1]=iv(n[r+1])),MT(n,h,r,!0),MT(n,h,r,!1),iV(e,h,n,r,o),s=Zd(a,u),o?e.classBindings=s:e.styleBindings=s}function iV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$s(o,e)>=0&&(t[r+1]=ov(t[r+1]))}function MT(n,e,t,r){let i=n[t+1],o=e===null,s=r?jo(i):ra(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];oV(u,e)&&(a=!0,n[s+1]=r?ov(l):iv(l)),s=r?jo(l):ra(l)}a&&(n[t+1]=r?iv(i):ov(i))}function oV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$s(n,e)>=0:!1}function aa(n,e,t){return f0(n,e,t,!1),aa}function fu(n,e){return f0(n,e,null,!0),fu}function f0(n,e,t,r){let i=ue(),o=Tt(),s=Ud(2);if(o.firstUpdatePass&&aV(o,n,s,r),e!==Ut&&Hn(i,s,e)){let a=o.data[yr()];hV(o,a,i,i[Le],n,i[s+1]=fV(e,t),r,s)}}function sV(n,e){return e>=n.expandoStartIndex}function aV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yr()],s=sV(n,t);pV(o,r)&&e===null&&!s&&(e=!1),e=cV(i,o,e,r),rV(i,o,e,t,s,r)}}function cV(n,e,t,r){let i=Yb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=My(null,n,e,t,r),t=ou(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=My(i,n,e,t,r),o===null){let u=uV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=My(null,n,e,u[1],r),u=ou(u,e.attrs,r),lV(n,e,r,u))}else o=dV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function uV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ra(r)!==0)return n[jo(r)]}function lV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[jo(i)]=r}function dV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ou(r,s,t)}return ou(r,e.attrs,t)}function My(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ou(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ou(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),bb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function hV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=nV(l)?PT(u,e,t,i,ra(l),s):void 0;if(!_h(h)){_h(o)||eV(l)&&(o=PT(u,null,t,i,a,s));let p=Zm(yr(),t);oF(r,s,p,i,o)}}function PT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Ut&&(m=p?rn:void 0);let y=p?Od(m,r):h===r?m:void 0;if(l&&!_h(y)&&(y=Od(u,r)),_h(y)&&(a=y,s))return a;let S=n[i+1];i=s?jo(S):ra(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Od(u,r))}return a}function _h(n){return n!==void 0}function fV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ur(au(n)))),n}function pV(n,e){return(n.flags&(e?8:16))!==0}function F(n,e=""){let t=ue(),r=Tt(),i=n+bt,o=r.firstCreatePass?Mh(r,i,1,e,null):r.data[i],s=gV(r,t,o,e,n);t[i]=s,Gd()&&wv(r,t,s,o),Ks(o,!1)}var gV=(n,e,t,r,i)=>(Wd(!0),k1(e[Le],r));function mV(n,e,t,r=""){return Hn(n,xo(),t)?e+dr(t)+r:Ut}function yV(n,e,t,r,i,o=""){let s=hy(),a=ZS(n,s,t,i);return Ud(2),a?e+dr(t)+r+dr(i)+o:Ut}function vV(n,e,t,r,i,o,s,a=""){let u=hy(),l=rL(n,u,t,i,s);return Ud(3),l?e+dr(t)+r+dr(i)+o+dr(s)+a:Ut}function yt(n){return vt("",n),yt}function vt(n,e,t){let r=ue(),i=mV(r,n,e,t);return i!==Ut&&Bv(r,yr(),i),vt}function Oh(n,e,t,r,i){let o=ue(),s=yV(o,n,e,t,r,i);return s!==Ut&&Bv(o,yr(),s),Oh}function Er(n,e,t,r,i,o,s){let a=ue(),u=vV(a,n,e,t,r,i,o,s);return u!==Ut&&Bv(a,yr(),u),Er}function Bv(n,e,t){let r=Zm(e,n);O1(n[Le],r,t)}function Fh(n,e,t){Pv(e)&&(e=e());let r=ue(),i=xo();if(Hn(r,i,e)){let o=Tt(),s=zd();RS(s,r,n,e,r[Le],t)}return Fh}function $v(n,e){let t=Pv(n);return t&&n.set(e),t}function Lh(n,e){let t=ue(),r=Tt(),i=St();return h0(r,t,t[Le],i,n,e),Lh}function _V(n,e,t){let r=Tt();if(r.firstCreatePass){let i=gr(n);sv(t,r.data,r.blueprint,i,!0),sv(e,r.data,r.blueprint,i,!1)}}function sv(n,e,t,r,i){if(n=Ct(n),Array.isArray(n))for(let o=0;o<n.length;o++)sv(n[o],e,t,r,i);else{let o=Tt(),s=ue(),a=St(),u=Do(n)?n:Ct(n.provide),l=Wm(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Do(n)||!n.multi){let y=new Oo(l,i,B,null),S=xy(u,e,i?h:h+m,p);S===-1?(Oy(sh(a,s),o,u),Py(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=xy(u,e,h+m,p),S=xy(u,e,h,h+m),P=y>=0&&t[y],N=S>=0&&t[S];if(i&&!N||!i&&!P){Oy(sh(a,s),o,u);let j=wV(i?IV:EV,t.length,i,r,l,n);!i&&N&&(t[S].providerFactory=j),Py(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=p0(t[i?S:y],l,!i&&r);Py(o,n,y>-1?y:S,j)}!i&&r&&N&&t[S].componentProviders++}}}function Py(n,e,t,r){let i=Do(e),o=Nb(e);if(i||o){let u=(o?Ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function p0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function EV(n,e,t,r,i){return av(this.multi,[])}function IV(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=eu(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),av(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],av(o,s);return s}function av(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wV(n,e,t,r,i,o){let s=new Oo(n,t,B,null);return s.multi=[],s.index=e,s.componentProviders=0,p0(s,i,r&&!t),s}function Ir(n,e=[]){return t=>{t.providersResolver=(r,i)=>_V(r,i?i(n):n,e)}}function Gr(n,e,t){let r=dy()+n,i=ue();return i[r]===Ut?JS(i,r,t?e.call(t):e()):nL(i,r)}function ca(n,e,t,r){return CV(ue(),dy(),n,e,t,r)}function DV(n,e){let t=n[e];return t===Ut?void 0:t}function CV(n,e,t,r,i,o){let s=e+t;return Hn(n,s,i)?JS(n,s+1,o?r.call(o,i):r(i)):DV(n,s+1)}var Eh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hv=(()=>{class n{compileModuleSync(t){return new gh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Hm(t),o=hS(i.declarations).reduce((s,a)=>{let u=$r(a);return u&&s.push(new Vo(u)),s},[]);return new Eh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g0=(()=>{class n{applicationErrorHandler=R(bn);appRef=R(zr);taskService=R(vr);ngZone=R(Ee);zonelessEnabled=R(Qs);tracing=R(Bo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ye;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Uc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Qd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?_y:vy;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Uc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_y(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m0(){return[{provide:Br,useExisting:g0},{provide:Ee,useClass:Bc},{provide:Qs,useValue:!0}]}function bV(){return typeof $localize<"u"&&$localize.locale||hu}var qv=new q("",{factory:()=>R(qv,{optional:!0,skipSelf:!0})||bV()});function Sn(n,e){return Jl(n,e?.equal)}var _0=Symbol("InputSignalNode#UNSET"),kV=K(M({},Zl),{transformFn:void 0,applyValueToInputSignal(n,e){Pc(n,e)}});function E0(n,e){let t=Object.create(kV);t.value=n,t.transformFn=e?.transform;function r(){if(Rc(t),t.value===_0){let i=null;throw new G(-950,i)}return t.value}return r[Lt]=t,r}var jh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>su(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function y0(n,e){return E0(n,e)}function OV(n){return E0(_0,n)}var I0=(y0.required=OV,y0);var FV=(()=>{class n{zone=R(Ee);changeDetectionScheduler=R(Br);applicationRef=R(zr);applicationErrorHandler=R(bn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LV=new q("",{factory:()=>!1});function VV({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new Ee(K(M({},D0()),{scheduleInRootZone:e})),[{provide:Qs,useValue:!1},{provide:Ee,useFactory:n},{provide:Ti,multi:!0,useFactory:()=>{let t=R(FV,{optional:!0});return()=>t.initialize()}},{provide:Ti,multi:!0,useFactory:()=>{let t=R(jV);return()=>{t.initialize()}}},{provide:Qd,useValue:e??yy}]}function w0(n){let e=n?.scheduleInRootZone,t=VV({ngZoneFactory:()=>{let r=D0(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&zn("NgZone_CoalesceEvent"),new Ee(r)},scheduleInRootZone:e});return sn([{provide:LV,useValue:!0},t])}function D0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var jV=(()=>{class n{subscription=new Ye;initialized=!1;zone=R(Ee);pendingTasks=R(vr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zv=new q(""),UV=new q("");function pu(n){return!n.moduleRef}function BV(n){let e=pu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{pu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(bn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),pu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(zv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(zv);s.add(o),n.moduleRef.onDestroy(()=>{Xc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return HV(r,t,()=>{let o=e.get(vr),s=o.add(),a=e.get(Ov);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(qv,hu);if(d0(u||hu),!e.get(UV,!0))return pu(n)?e.get(zr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(pu(n)){let h=e.get(zr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return $V?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var $V;function HV(n,e,t){try{let r=t();return Ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Vh=null;function qV(n=[],e){return qe.create({name:e,providers:[{provide:zc,useValue:"platform"},{provide:zv,useValue:new Set([()=>Vh=null])},...n]})}function zV(n=[]){if(Vh)return Vh;let e=qV(n);return Vh=e,c0(),GV(e),e}function GV(n){let e=n.get(wh,null);tt(n,()=>{e?.forEach(t=>t())})}function Gv(){return!1}var Wr=(()=>{class n{static __NG_ELEMENT_ID__=WV}return n})();function WV(n){return KV(St(),ue(),(n&16)===16)}function KV(n,e,t){if(Ri(n)&&!t){let r=Cn(n.index,e);return new Mi(r,r)}else if(n.type&175){let r=e[an];return new Mi(r,e)}return null}function C0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Te(ve.BootstrapApplicationStart);try{let o=i?.injector??zV(r),s=[m0(),iT,...t||[]],a=new iu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return BV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(ve.BootstrapApplicationEnd)}}function qo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function b0(n){let e=$r(n);if(!e)return null;let t=new Vo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var A0=null;function An(){return A0}function Wv(n){A0??=n}var gu=class{},mu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(R0),providedIn:"platform"})}return n})(),Kv=new q(""),R0=(()=>{class n extends mu{_location;_history;_doc=R(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return An().getBaseHref(this._doc)}onPopState(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Uh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function T0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qn(n){return n&&n[0]!=="?"?`?${n}`:n}var Yn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R($h),providedIn:"root"})}return n})(),Bh=new q(""),$h=(()=>{class n extends Yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Uh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(X(mu),X(Bh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pi=(()=>{class n{_subject=new Ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=JV(T0(S0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qn(r))}normalize(t){return n.stripTrailingSlash(YV(this._basePath,S0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qn;static joinWithSlash=Uh;static stripTrailingSlash=T0;static \u0275fac=function(r){return new(r||n)(X(Yn))};static \u0275prov=H({token:n,factory:()=>QV(),providedIn:"root"})}return n})();function QV(){return new Pi(X(Yn))}function YV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function S0(n){return n.replace(/\/index.html$/,"")}function JV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Qv=(()=>{class n extends Yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Uh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(X(mu),X(Bh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Zt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();function Yv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yu=class{};var N0="browser";var M0=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Jv(R(nt),window)})}return n})(),Jv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(K(M({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=XV(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(bo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(K(M({},t),{left:i-s[0],top:o-s[1]}))}};function XV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var vu=class{_doc;constructor(e){this._doc=e}manager},Hh=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(X(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Gh=new q(""),t_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Hh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Hh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(X(Gh),X(Ee))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Zv="ng-app-id";function P0(n){for(let e of n)e.remove()}function x0(n,e){let t=e.createElement("style");return t.textContent=n,t}function t2(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Zv}="${e}"],link[${Zv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Zv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function e_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var n_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,t2(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,x0);r?.forEach(i=>this.addUsage(i,this.external,e_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(P0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])P0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,x0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,e_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(X(nt),X(Ih),X(Dh,8),X(Uo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Xv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},r_=/%COMP%/g;var O0="%COMP%",n2=`_nghost-${O0}`,r2=`_ngcontent-${O0}`,i2=!0,o2=new q("",{factory:()=>i2});function s2(n){return r2.replace(r_,n)}function a2(n){return n2.replace(r_,n)}function F0(n,e){return e.map(t=>t.replace(r_,n))}var i_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new _u(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof zh?i.applyToHost(t):i instanceof Eu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case $n.Emulated:o=new zh(u,l,r,this.appId,h,s,a,p,m);break;case $n.ShadowDom:return new qh(u,t,r,s,a,this.nonce,p,m,l);case $n.ExperimentalIsolatedShadowDom:return new qh(u,t,r,s,a,this.nonce,p,m);default:o=new Eu(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(X(t_),X(n_),X(Ih),X(o2),X(nt),X(Ee),X(Dh),X(Bo,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),_u=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Xv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(k0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(k0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Xv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Xv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qr.DashCase|qr.Important)?e.style.setProperty(t,r,i&qr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function k0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qh=class extends _u{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=F0(r.id,h);for(let m of h){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=e_(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Eu=class extends _u{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?F0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Fo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zh=class extends Eu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=s2(h),this.hostAttr=a2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Wh=class n extends gu{supportsDOMEvents=!0;static makeCurrent(){Wv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=c2();return t==null?null:u2(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yv(document.cookie,e)}},Iu=null;function c2(){return Iu=Iu||document.head.querySelector("base"),Iu?Iu.getAttribute("href"):null}function u2(n){return new URL(n,document.baseURI).pathname}var l2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),L0=["alt","control","meta","shift"],d2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},V0=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),L0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=d2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),L0.forEach(s=>{if(s!==i){let a=h2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(X(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function o_(n,e,t){let r=M({rootComponent:n,platformRef:t?.platformRef},f2(e));return C0(r)}function f2(n){return{appProviders:[...v2,...n?.providers??[]],platformProviders:y2}}function p2(){Wh.makeCurrent()}function g2(){return new lr}function m2(){return lv(document),document}var y2=[{provide:Uo,useValue:N0},{provide:wh,useValue:p2,multi:!0},{provide:nt,useFactory:m2}];var v2=[{provide:zc,useValue:"root"},{provide:lr,useFactory:g2},{provide:Gh,useClass:Hh,multi:!0},{provide:Gh,useClass:V0,multi:!0},i_,n_,t_,{provide:Lo,useExisting:i_},{provide:yu,useClass:l2},[]];var j0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(X(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var te="primary",Pu=Symbol("RouteTitle"),l_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ko(n){return new l_(n)}function K0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xh(n){return new Promise((e,t)=>{n.pipe(Vr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function I2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wr(n[t],e[t]))return!1;return!0}function wr(n,e){let t=n?d_(n):void 0,r=e?d_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Q0(n[i],e[i]))return!1;return!0}function d_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Q0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Y0(n){return n.length>0?n[n.length-1]:null}function Qo(n){return _d(n)?n:Ho(n)?Pe(Promise.resolve(n)):se(n)}function J0(n){return _d(n)?Xh(n):Promise.resolve(n)}var w2={exact:X0,subset:eA},Z0={exact:D2,subset:C2,ignored:()=>!0};function U0(n,e,t){return w2[t.paths](n.root,e.root,t.matrixParams)&&Z0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function D2(n,e){return wr(n,e)}function X0(n,e,t){if(!Go(n.segments,e.segments)||!Yh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!X0(n.children[r],e.children[r],t))return!1;return!0}function C2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Q0(n[t],e[t]))}function eA(n,e,t){return tA(n,e,e.segments,t)}function tA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Go(i,t)||e.hasChildren()||!Yh(i,t,r))}else if(n.segments.length===t.length){if(!Go(n.segments,t)||!Yh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!eA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Go(n.segments,i)||!Yh(n.segments,i,r)||!n.children[te]?!1:tA(n.children[te],e,o,r)}}function Yh(n,e,t){return e.every((r,i)=>Z0[t](n[i].parameters,r.parameters))}var Zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ko(this.queryParams),this._queryParamMap}toString(){return S2.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jh(this)}},xi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ko(this.parameters),this._parameterMap}toString(){return rA(this)}};function b2(n,e){return Go(n,e)&&n.every((t,r)=>wr(t.parameters,e[r].parameters))}function Go(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function T2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==te&&(t=t.concat(e(i,r)))}),t}var Yo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Kr,providedIn:"root"})}return n})(),Kr=class{parse(e){let t=new f_(e);return new Zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wu(e.root,!0)}`,r=N2(e.queryParams),i=typeof e.fragment=="string"?`#${A2(e.fragment)}`:"";return`${t}${r}${i}`}},S2=new Kr;function Jh(n){return n.segments.map(e=>rA(e)).join("/")}function wu(n,e){if(!n.hasChildren())return Jh(n);if(e){let t=n.children[te]?wu(n.children[te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${wu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=T2(n,(r,i)=>i===te?[wu(n.children[te],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[te]!=null?`${Jh(n)}/${t[0]}`:`${Jh(n)}/(${t.join("//")})`}}function nA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kh(n){return nA(n).replace(/%3B/gi,";")}function A2(n){return encodeURI(n)}function h_(n){return nA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zh(n){return decodeURIComponent(n)}function B0(n){return Zh(n.replace(/\+/g,"%20"))}function rA(n){return`${h_(n.path)}${R2(n.parameters)}`}function R2(n){return Object.entries(n).map(([e,t])=>`;${h_(e)}=${h_(t)}`).join("")}function N2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Kh(t)}=${Kh(i)}`).join("&"):`${Kh(t)}=${Kh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var M2=/^[^\/()?;#]+/;function s_(n){let e=n.match(M2);return e?e[0]:""}var P2=/^[^\/()?;=#]+/;function x2(n){let e=n.match(P2);return e?e[0]:""}var k2=/^[^=?&#]+/;function O2(n){let e=n.match(k2);return e?e[0]:""}var F2=/^[^&#]+/;function L2(n){let e=n.match(F2);return e?e[0]:""}var f_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[te]=new we(e,t)),r}parseSegment(){let e=s_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new xi(Zh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=x2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=s_(this.remaining);i&&(r=i,this.capture(r))}e[Zh(t)]=Zh(r)}parseQueryParam(e){let t=O2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=L2(this.remaining);s&&(r=s,this.capture(r))}let i=B0(t),o=B0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=s_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();t[o??te]=Object.keys(s).length===1&&s[te]?s[te]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function iA(n){return n.segments.length>0?new we([],{[te]:n}):n}function oA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=oA(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new we(n.segments,e);return V2(t)}function V2(n){if(n.numberOfChildren===1&&n.children[te]){let e=n.children[te];return new we(n.segments.concat(e.segments),e.children)}return n}function ki(n){return n instanceof Zn}function sA(n,e,t=null,r=null,i=new Kr){let o=aA(n);return cA(o,e,t,r,i)}function aA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new we(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=iA(r);return e??i}function cA(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return a_(o,o,o,t,r,i);let s=j2(e);if(s.toRoot())return a_(o,o,new we([],{}),t,r,i);let a=U2(s,o,n),u=a.processChildren?Cu(a.segmentGroup,a.index,s.commands):lA(a.segmentGroup,a.index,s.commands);return a_(o,a.segmentGroup,u,t,r,i)}function ef(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Tu(n){return typeof n=="object"&&n!=null&&n.outlets}function $0(n,e,t){n||="\u0275";let r=new Zn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function a_(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>$0(l,p,o)):$0(l,h,o);let a;n===e?a=t:a=uA(n,e,t);let u=iA(oA(a));return new Zn(u,s,i)}function uA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=uA(o,e,t)}),new we(n.segments,r)}var tf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ef(r[0]))throw new G(4003,!1);let i=r.find(Tu);if(i&&i!==Y0(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function j2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new tf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new tf(t,e,r)}var la=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function U2(n,e,t){if(n.isAbsolute)return new la(e,!0,0);if(!t)return new la(e,!1,NaN);if(t.parent===null)return new la(t,!0,0);let r=ef(n.commands[0])?0:1,i=t.segments.length-1+r;return B2(t,i,n.numberOfDoubleDots)}function B2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new la(r,!1,i-o)}function $2(n){return Tu(n[0])?n[0].outlets:{[te]:n}}function lA(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Cu(n,e,t);let r=H2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[te]=new we(n.segments.slice(r.pathIndex),n.children),Cu(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?p_(n,e,t):r.match?Cu(n,0,i):p_(n,e,t)}function Cu(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=$2(t),i={};if(Object.keys(r).some(o=>o!==te)&&n.children[te]&&n.numberOfChildren===1&&n.children[te].segments.length===0){let o=Cu(n.children[te],e,t);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function H2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Tu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!q0(u,l,s))return o;r+=2}else{if(!q0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function p_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Tu(o)){let u=q2(o.outlets);return new we(r,u)}if(i===0&&ef(t[0])){let u=n.segments[e];r.push(new xi(u.path,H0(t[0]))),i++;continue}let s=Tu(o)?o.outlets[te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ef(a)?(r.push(new xi(s,H0(a))),i+=2):(r.push(new xi(s,{})),i++)}return new we(r,{})}function q2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=p_(new we([],{}),0,r))}),e}function H0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function q0(n,e,t){return n==t.path&&wr(e,t.parameters)}var da="imperative",ht=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ht||{}),dn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Oi=class extends dn{type=ht.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hn=class extends dn{urlAfterRedirects;type=ht.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zt||{}),fa=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(fa||{}),Dr=class extends dn{reason;code;type=ht.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cr=class extends dn{reason;code;type=ht.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},pa=class extends dn{error;target;type=ht.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Su=class extends dn{urlAfterRedirects;state;type=ht.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends dn{urlAfterRedirects;state;type=ht.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends dn{urlAfterRedirects;state;shouldActivate;type=ht.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},of=class extends dn{urlAfterRedirects;state;type=ht.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sf=class extends dn{urlAfterRedirects;state;type=ht.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class{route;type=ht.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cf=class{route;type=ht.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uf=class{snapshot;type=ht.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lf=class{snapshot;type=ht.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{snapshot;type=ht.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hf=class{snapshot;type=ht.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ga=class{routerEvent;position;anchor;type=ht.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Au=class{},ma=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function z2(n){return!(n instanceof Au)&&!(n instanceof ma)}function G2(n,e){return n.providers&&!n._injector&&(n._injector=sa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jn(n){return n.outlet||te}function W2(n,e){let t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function _a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ff=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _a(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jo(this.rootInjector)}},Jo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ff(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(X(et))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=g_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=g_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=m_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return m_(e,this._root).map(t=>t.value)}};function g_(n,e){if(n===e.value)return e;for(let t of e.children){let r=g_(n,t);if(r)return r}return null}function m_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=m_(n,t);if(r.length)return r.unshift(e),r}return[]}var ln=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ua(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ru=class extends pf{snapshot;constructor(e,t){super(e),this.snapshot=t,w_(this,e)}toString(){return this.snapshot.toString()}};function dA(n){let e=K2(n),t=new wt([new xi("",{})]),r=new wt({}),i=new wt({}),o=new wt({}),s=new wt(""),a=new Nt(t,r,o,s,i,te,n,e.root);return a.snapshot=e.root,new Ru(new ln(a,[]),e)}function K2(n){let e={},t={},r={},o=new Wo([],e,r,"",t,te,n,null,{});return new Nu("",new ln(o,[]))}var Nt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(l=>l[Pu]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Ko(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Ko(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&fA(i)&&(r.resolve[Pu]=i.title),r}var Wo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Pu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ko(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Nu=class extends pf{url;constructor(e,t){super(t),this.url=e,w_(this,t)}toString(){return hA(this._root)}};function w_(n,e){e.value._routerState=n,e.children.forEach(t=>w_(n,t))}function hA(n){let e=n.children.length>0?` { ${n.children.map(hA).join(", ")} } `:"";return`${n.value}${e}`}function c_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wr(e.params,t.params)||n.paramsSubject.next(t.params),I2(e.url,t.url)||n.urlSubject.next(t.url),wr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function y_(n,e){let t=wr(n.params,e.params)&&b2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||y_(n.parent,e.parent))}function fA(n){return typeof n.title=="string"||n.title===null}var pA=new q(""),xu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new xe;deactivateEvents=new xe;attachEvents=new xe;detachEvents=new xe;routerOutletData=I0(void 0,{});parentContexts=R(Jo);location=R($o);changeDetector=R(Wr);inputBinder=R(ku,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new v_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tn]})}return n})(),v_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Nt?this.route:e===Jo?this.childContexts:e===pA?this.outletData:this.parent.get(e,t)}},ku=new q(""),D_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Dd([r.queryParams,r.params,r.data]).pipe(Fn(([o,s,a],u)=>(a=M(M(M({},o),s),a),u===0?se(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=b0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),C_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ke({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ne(0,"router-outlet")},dependencies:[xu],encapsulation:2})}return n})();function b_(n){let e=n.children&&n.children.map(b_),t=e?K(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=C_),t}function Q2(n,e,t){let r=Mu(n,e._root,t?t._root:void 0);return new Ru(r,e)}function Mu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Y2(n,e,t);return new ln(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mu(n,a)),s}}let r=J2(e.value),i=e.children.map(o=>Mu(n,o));return new ln(r,i)}}function Y2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Mu(n,r,i);return Mu(n,r)})}function J2(n){return new Nt(new wt(n.url),new wt(n.params),new wt(n.queryParams),new wt(n.fragment),new wt(n.data),n.outlet,n.component,n)}var ya=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},gA="ngNavigationCancelingError";function mf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mA(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[gA]=!0,t.cancellationCode=e,t}function Z2(n){return yA(n)&&ki(n.url)}function yA(n){return!!n&&n[gA]}var X2=(n,e,t,r)=>pe(i=>(new __(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),__=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),c_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ua(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ua(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new hf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(c_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),c_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},yf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ha=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ej(n,e,t){let r=n._root,i=e?e._root:null;return Du(r,i,t,[r.value])}function tj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Pm(n)?n:e.get(n):r}function Du(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ua(e);return n.children.forEach(s=>{nj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bu(a,t.getContext(s),i)),i}function nj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=rj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Du(n,e,a?a.children:null,r,i):Du(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ha(a.outlet.component,s))}else s&&bu(e,a,i),i.canActivateChecks.push(new yf(r)),o.component?Du(n,null,a?a.children:null,r,i):Du(n,null,t,r,i);return i}function rj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Go(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Go(n.url,e.url)||!wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y_(n,e)||!wr(n.queryParams,e.queryParams);case"paramsChange":default:return!y_(n,e)}}function bu(n,e,t){let r=ua(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?bu(s,e.children.getContext(o),t):bu(s,null,t):bu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ha(e.outlet.component,i)):t.canDeactivateChecks.push(new ha(null,i)):t.canDeactivateChecks.push(new ha(null,i))}function Ou(n){return typeof n=="function"}function ij(n){return typeof n=="boolean"}function oj(n){return n&&Ou(n.canLoad)}function sj(n){return n&&Ou(n.canActivate)}function aj(n){return n&&Ou(n.canActivateChild)}function cj(n){return n&&Ou(n.canDeactivate)}function uj(n){return n&&Ou(n.canMatch)}function vA(n){return n instanceof _o||n?.name==="EmptyError"}var Qh=Symbol("INITIAL_VALUE");function va(){return Fn(n=>Dd(n.map(e=>e.pipe(Lr(1),bd(Qh)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===Qh)return Qh;if(t===!1||lj(t))return t}return!0}),tn(e=>e!==Qh),Lr(1)))}function lj(n){return ki(n)||n instanceof ya}function _A(n){return n.aborted?se(void 0).pipe(Lr(1)):new ce(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function EA(n){return Fc(_A(n))}function dj(n,e){return Dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(K(M({},t),{guardsResult:!0})):hj(s,r,i,n).pipe(Dt(a=>a&&ij(a)?fj(r,o,n,e):se(a)),pe(a=>K(M({},t),{guardsResult:a})))})}function hj(n,e,t,r){return Pe(n).pipe(Dt(i=>vj(i.component,i.route,t,e,r)),Vr(i=>i!==!0,!0))}function fj(n,e,t,r){return Pe(e).pipe(js(i=>Ls(gj(i.route.parent,r),pj(i.route,r),yj(n,i.path,t),mj(n,i.route,t))),Vr(i=>i!==!0,!0))}function pj(n,e){return n!==null&&e&&e(new df(n)),se(!0)}function gj(n,e){return n!==null&&e&&e(new uf(n)),se(!0)}function mj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Oc(()=>{let s=_a(e)??t,a=Ea(o,s),u=sj(a)?a.canActivate(e,n):tt(s,()=>a(e,n));return Qo(u).pipe(Vr())}));return se(i).pipe(va())}function yj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tj(s)).filter(s=>s!==null).map(s=>Oc(()=>{let a=s.guards.map(u=>{let l=_a(s.node)??t,h=Ea(u,l),p=aj(h)?h.canActivateChild(r,n):tt(l,()=>h(r,n));return Qo(p).pipe(Vr())});return se(a).pipe(va())}));return se(o).pipe(va())}function vj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let u=_a(e)??i,l=Ea(a,u),h=cj(l)?l.canDeactivate(n,e,t,r):tt(u,()=>l(n,e,t,r));return Qo(h).pipe(Vr())});return se(s).pipe(va())}function _j(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return se(!0);let s=o.map(a=>{let u=Ea(a,n),l=oj(u)?u.canLoad(e,t):tt(n,()=>u(e,t)),h=Qo(l);return i?h.pipe(EA(i)):h});return se(s).pipe(va(),IA(r))}function IA(n){return rd(Vt(e=>{if(typeof e!="boolean")throw mf(n,e)}),pe(e=>e===!0))}function Ej(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let u=Ea(a,n),l=uj(u)?u.canMatch(e,t):tt(n,()=>u(e,t)),h=Qo(l);return i?h.pipe(EA(i)):h});return se(s).pipe(va(),IA(r))}var zo=class wA extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,wA.prototype)}},E_=class DA extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,DA.prototype)}};function Ij(n){throw new G(4e3,!1)}function wj(n){throw mA(!1,zt.GuardRejected)}var Dj=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){return v(this,null,function*(){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[te])throw Ij(`${e.redirectTo}`);i=i.children[te]}})}applyRedirectCommands(e,t,r,i,o){return v(this,null,function*(){let s=yield Cj(t,i,o);if(s instanceof Zn)throw new E_(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new E_(a);return a})}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Zn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Cj(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Xh(Qo(tt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var I_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bj(n,e,t,r,i,o){let s=CA(n,e,t);return s.matched?(r=G2(e,r),Ej(r,e,t,i,o).pipe(pe(a=>a===!0?s:M({},I_)))):se(s)}function CA(n,e,t){if(e.path==="**")return Tj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},I_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||K0)(t,n,e);if(!i)return M({},I_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Tj(n){return{matched:!0,parameters:n.length>0?Y0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function z0(n,e,t,r){return t.length>0&&Rj(n,t,r)?{segmentGroup:new we(e,Aj(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&Nj(n,t,r)?{segmentGroup:new we(n.segments,Sj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function Sj(n,e,t,r){let i={};for(let o of t)if(_f(n,e,o)&&!r[Jn(o)]){let s=new we([],{});i[Jn(o)]=s}return M(M({},r),i)}function Aj(n,e){let t={};t[te]=e;for(let r of n)if(r.path===""&&Jn(r)!==te){let i=new we([],{});t[Jn(r)]=i}return t}function Rj(n,e,t){return t.some(r=>_f(n,e,r)&&Jn(r)!==te)}function Nj(n,e,t){return t.some(r=>_f(n,e,r))}function _f(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Mj(n,e,t){return e.length===0&&!n.children[t]}var Pj=class{};function xj(n,e,t,r,i,o,s="emptyOnly",a){return v(this,null,function*(){return new Oj(n,e,t,r,i,s,o,a).recognize()})}var kj=31,Oj=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new Dj(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){return v(this,null,function*(){let e=z0(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=yield this.match(e),i=new ln(r,t),o=new Nu("",i),s=sA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(e){return v(this,null,function*(){let t=new Wo([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,e,te,t),rootSnapshot:t}}catch(r){if(r instanceof E_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zo?this.noMatchError(r):r}})}processSegmentGroup(e,t,r,i,o){return v(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=yield this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof ln?[s]:[]})}processChildren(e,t,r,i){return v(this,null,function*(){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=W2(t,u),p=yield this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=bA(s);return Fj(a),a})}processSegment(e,t,r,i,o,s,a){return v(this,null,function*(){for(let u of t)try{return yield this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof zo||vA(l))continue;throw l}if(Mj(r,i,o))return new Pj;throw new zo(r)})}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return v(this,null,function*(){if(Jn(r)!==s&&(s===te||!_f(i,o,r)))throw new zo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new zo(i)})}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){return v(this,null,function*(){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=CA(t,i,o);if(!u)throw new zo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kj&&(this.allowRedirects=!1));let y=new Wo(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,G0(i),Jn(i),i.component??i._loadedComponent??null,i,W0(i)),S=gf(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=yield this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),N=yield this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,N.concat(m),s,!1,a)})}matchSegmentAgainstRoute(e,t,r,i,o,s){return v(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield Xh(bj(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new zo(t);e=r._injector??e;let{routes:u}=yield this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new Wo(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,G0(r),Jn(r),r.component??r._loadedComponent??null,r,W0(r)),S=gf(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:P,slicedSegments:N}=z0(t,p,m,u);if(N.length===0&&P.hasChildren()){let fe=yield this.processChildren(l,u,P,y);return new ln(y,fe)}if(u.length===0&&N.length===0)return new ln(y,[]);let j=Jn(r)===o,oe=yield this.processSegment(l,u,P,N,j?te:o,!0,y);return new ln(y,oe instanceof ln?[oe]:[])})}getChildConfig(e,t,r){return v(this,null,function*(){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield Xh(_j(e,t,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw wj(t)}return{routes:[],injector:e}})}};function Fj(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}function Lj(n){let e=n.value.routeConfig;return e&&e.path===""}function bA(n){let e=[],t=new Set;for(let r of n){if(!Lj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bA(r.children);e.push(new ln(r.value,i))}return e.filter(r=>!t.has(r))}function G0(n){return n.data||{}}function W0(n){return n.resolve||{}}var Vj=new q("",{factory:()=>xj});function jj(n,e,t,r,i,o,s){let a=n.get(Vj);return Dt(u=>se(u).pipe(Fn(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),pe(({state:l,tree:h})=>K(M({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function Uj(n,e){return Dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of TA(u))s.add(l);let a=0;return Pe(s).pipe(js(u=>o.has(u)?Bj(u,r,n,e):(u.data=gf(u,u.parent,n).resolve,se(void 0))),Vt(()=>a++),Cd(1),Dt(u=>a===s.size?se(t):Qt))})}function TA(n){let e=n.children.map(t=>TA(t)).flat();return[n,...e]}function Bj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!fA(i)&&(o[Pu]=i.title),Oc(()=>(n.data=gf(n,n.parent,t).resolve,$j(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=M(M({},n.data),s),null)))))}function $j(n,e,t,r){let i=d_(n);if(i.length===0)return se({});let o={};return Pe(i).pipe(Dt(s=>Hj(n[s],e,t,r).pipe(Vr(),Vt(a=>{if(a instanceof ya)throw mf(new Kr,a);o[s]=a}))),Cd(1),pe(()=>o),Vs(s=>vA(s)?Qt:um(s)))}function Hj(n,e,t,r){let i=_a(e)??r,o=Ea(n,i),s=o.resolve?o.resolve(e,t):tt(i,()=>o(e,t));return Qo(s)}function u_(n){return Fn(e=>{let t=n(e);return t?Pe(t).pipe(pe(()=>e)):se(e)})}var T_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(t){return t.data[Pu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(SA),providedIn:"root"})}return n})(),SA=(()=>{class n extends T_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(X(j0))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fi=new q("",{factory:()=>({})}),Zo=new q(""),Ef=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Hv);loadComponent(t,r){return v(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=v(this,null,function*(){try{let o=yield J0(tt(t,()=>r.loadComponent())),s=yield NA(RA(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=v(this,null,function*(){try{let o=yield AA(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AA(n,e,t,r){return v(this,null,function*(){let i=yield J0(tt(t,()=>n.loadChildren())),o=yield NA(RA(i)),s;o instanceof xh||Array.isArray(o)?s=o:s=yield e.compileModuleAsync(o),r&&r(n);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,u=a.get(Zo,[],{optional:!0,self:!0}).flat()),{routes:u.map(b_),injector:a}})}function qj(n){return n&&typeof n=="object"&&"default"in n}function RA(n){return qj(n)?n.default:n}function NA(n){return v(this,null,function*(){return n})}var If=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(zj),providedIn:"root"})}return n})(),zj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S_=new q(""),A_=new q("");function MA(n,e,t){let r=n.get(A_),i=n.get(nt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Gj(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&tt(n,()=>u({transition:a,from:e,to:t})),s}function Gj(n){return new Promise(e=>{cu({read:()=>setTimeout(e)},{injector:n})})}var Wj=()=>{},R_=new q(""),wf=(()=>{class n{currentNavigation=Re(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Re(null,{});events=new Ze;transitionAbortWithErrorSubject=new Ze;configLoader=R(Ef);environmentInjector=R(et);destroyRef=R(Un);urlSerializer=R(Yo);rootContexts=R(Jo);location=R(Pi);inputBindingEnabled=R(ku,{optional:!0})!==null;titleStrategy=R(T_);options=R(Fi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(If);createViewTransition=R(S_,{optional:!0});navigationErrorHandler=R(R_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new af(i)),r=i=>this.events.next(new cf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;dt(()=>{this.transitions?.next(K(M({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new wt(null),this.transitions.pipe(tn(r=>r!==null),Fn(r=>{let i=!1,o=new AbortController;return se(r).pipe(Fn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Qt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?K(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new Cr(s.id,this.urlSerializer.serialize(s.rawUrl),"",fa.IgnoredSameUrlNavigation)),s.resolve(!1),Qt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return se(s).pipe(Fn(h=>(this.events.next(new Oi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Qt:Promise.resolve(h))),jj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Vt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Su(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:S}=s,P=new Oi(h,this.urlSerializer.serialize(p),m,y);this.events.next(P);let N=dA(this.rootComponentType).snapshot;return this.currentTransition=r=K(M({},s),{targetSnapshot:N,urlAfterRedirects:p,extras:K(M({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(j=>(j.finalUrl=p,j)),se(r)}else return this.events.next(new Cr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",fa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Qt}),Vt(s=>{let a=new nf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),pe(s=>(this.currentTransition=r=K(M({},s),{guards:ej(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),dj(this.environmentInjector,s=>this.events.next(s)),Vt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw mf(this.urlSerializer,s.guardsResult);let a=new rf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),tn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",zt.GuardRejected),!1)),u_(s=>{if(s.guards.canActivateChecks.length!==0)return se(s).pipe(Vt(a=>{let u=new of(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Fn(a=>{let u=!1;return se(a).pipe(Uj(this.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",zt.NoDataFromResolver)}}))}),Vt(a=>{let u=new sf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),u_(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=_a(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?se(s):Pe(Promise.all(u).then(()=>s))}),u_(()=>this.afterPreactivation()),Fn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Pe(u).pipe(pe(()=>r)):se(r)}),pe(s=>{let a=Q2(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=K(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Vt(()=>{this.events.next(new Au)}),X2(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Lr(1),Fc(_A(o.signal).pipe(tn(()=>!i&&!r.targetRouterState),Vt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",zt.Aborted)}))),Vt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=Wj,a)),this.lastSuccessfulNavigation.set(dt(this.currentNavigation)),this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Fc(this.transitionAbortWithErrorSubject.pipe(Vt(s=>{throw s}))),hm(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Vs(s=>{if(this.destroyed)return r.resolve(!1),Qt;if(i=!0,yA(s))this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Z2(s)?this.events.next(new ma(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new pa(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ya){let{message:l,cancellationCode:h}=mf(this.urlSerializer,u);this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new ma(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let o=new Dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=dt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kj(n){return n!==da}var PA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(Qj),providedIn:"root"})}return n})(),vf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Qj=(()=>{class n extends vf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N_=(()=>{class n{urlSerializer=R(Yo);options=R(Fi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Pi);urlHandlingStrategy=R(If);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=dA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(xA),providedIn:"root"})}return n})(),xA=(()=>{class n extends N_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Oi?this.updateStateMemento():t instanceof Cr?this.commitTransition(r):t instanceof Su?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Au?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Dr&&t.code!==zt.SupersededByNewNavigation&&t.code!==zt.Redirect?this.restoreHistory(r):t instanceof pa?this.restoreHistory(r,!0):t instanceof hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Df(n,e){n.events.pipe(tn(t=>t instanceof hn||t instanceof Dr||t instanceof pa||t instanceof Cr),pe(t=>t instanceof hn||t instanceof Cr?0:(t instanceof Dr?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?2:1),tn(t=>t!==2),Lr(1)).subscribe(()=>{e()})}var Yj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Mv);stateManager=R(N_);options=R(Fi,{optional:!0})||{};pendingTasks=R(vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(wf);urlSerializer=R(Yo);location=R(Pi);urlHandlingStrategy=R(If);injector=R(et);_events=new Ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(PA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Zo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(ku,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ye;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=dt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof hn)this.navigated=!0;else if(r instanceof ma){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Kj(i.source)},s);this.scheduleNavigation(a,da,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}z2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),da,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(bn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return dt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(b_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=aA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return cA(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ki(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,da,null,r)}navigate(t,r={skipLocationChange:!1}){return Zj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(bo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=M({},Yj):r===!1?i=M({},Jj):i=r,ki(t))return U0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return U0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Df(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new G(4008,!1)}var Rn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Re(null,{});get href(){return dt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ze;applicationErrorHandler=R(bn);options=R(Fi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new jh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof hn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ki(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ki(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(B(rt),B(Nt),su("tabindex"),B(Gn),B(jt),B(Yn))};static \u0275dir=Oe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&de("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&du("href",i.reactiveHref(),pv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",qo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",qo],replaceUrl:[2,"replaceUrl","replaceUrl",qo],routerLink:"routerLink"},features:[Tn]})}return n})(),P_=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new xe;link=R(Rn,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof hn&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(wi()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Pe(t).pipe(wi()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Xj(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(B(rt),B(jt),B(Gn),B(Wr))};static \u0275dir=Oe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Vv(o,Rn,5),r&2){let s;jv(s=Uv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Tn]})}return n})();function Xj(n){return!!n.paths}var Fu=class{};var kA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(tn(t=>t instanceof hn),js(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=sa(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Pe(i).pipe(wi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=Pe(this.loader.loadChildren(t,r)):i=se(null);let o=i.pipe(Dt(s=>s===null?se(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Pe([o,s]).pipe(wi())}else return o})}static \u0275fac=function(r){return new(r||n)(X(rt),X(et),X(Fu),X(Ef))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OA=new q(""),eU=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=da;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Oi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Cr&&t.code===fa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof ga))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ga(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Rv()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function x_(n,...e){return sn([{provide:Zo,multi:!0,useValue:n},[],{provide:Nt,useFactory:FA},{provide:lu,multi:!0,useFactory:LA},e.map(t=>t.\u0275providers)])}function FA(){return R(rt).routerState.root}function Lu(n,e){return{\u0275kind:n,\u0275providers:e}}function LA(){let n=R(qe);return e=>{let t=n.get(zr);if(e!==t.components[0])return;let r=n.get(rt),i=n.get(VA);n.get(k_)===1&&r.initialNavigation(),n.get(BA,null,{optional:!0})?.setUpPreloading(),n.get(OA,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VA=new q("",{factory:()=>new Ze}),k_=new q("",{factory:()=>1});function jA(){let n=[{provide:dv,useValue:!0},{provide:k_,useValue:0},kh(()=>{let e=R(qe);return e.get(Kv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(rt),o=e.get(VA);Df(i,()=>{r(!0)}),e.get(wf).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))})];return Lu(2,n)}function UA(){let n=[kh(()=>{R(rt).setUpLocationChangeListener()}),{provide:k_,useValue:2}];return Lu(3,n)}var BA=new q("");function $A(n){return Lu(0,[{provide:BA,useExisting:kA},{provide:Fu,useExisting:n}])}function HA(){return Lu(8,[D_,{provide:ku,useExisting:D_}])}function qA(n){zn("NgRouterViewTransitions");let e=[{provide:S_,useValue:MA},{provide:A_,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return Lu(9,e)}var zA=[Pi,{provide:Yo,useClass:Kr},rt,Jo,{provide:Nt,useFactory:FA},Ef,[]],Xo=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[zA,[],{provide:Zo,multi:!0,useValue:t},[],r?.errorHandler?{provide:R_,useValue:r.errorHandler}:[],{provide:Fi,useValue:r||{}},r?.useHash?nU():rU(),tU(),r?.preloadingStrategy?$A(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?iU(r):[],r?.bindToComponentInputs?HA().\u0275providers:[],r?.enableViewTransitions?qA().\u0275providers:[],oU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Zo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();function tU(){return{provide:OA,useFactory:()=>{let n=R(M0),e=R(Ee),t=R(Fi),r=R(wf),i=R(Yo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eU(i,r,n,e,t)}}}function nU(){return{provide:Yn,useClass:Qv}}function rU(){return{provide:Yn,useClass:$h}}function iU(n){return[n.initialNavigation==="disabled"?UA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jA().\u0275providers:[]]}var M_=new q("");function oU(){return[{provide:M_,useFactory:LA},{provide:lu,multi:!0,useExisting:M_}]}var GA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ke({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"home"]],template:function(r,i){r&1&&(Kn(0,"section",0)(1,"h2"),F(2,"Vitaj v Quest OverFlow!"),Jt(),Kn(3,"p"),F(4,"Tu m\xF4\u017Ee\u0161 spravova\u0165 svoje dobrodru\u017Estv\xE1, sledova\u0165 sk\xFAsenosti a plni\u0165 \xFAlohy ako prav\xFD hrdina!"),Jt()())},encapsulation:2})}}return n})();var eR=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(B(Gn),B(jt))};static \u0275dir=Oe({type:n})}return n})(),Of=(()=>{class n extends eR{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Oe({type:n,features:[Bt]})}return n})(),ts=new q("");var sU={provide:ts,useExisting:on(()=>Nn),multi:!0};function aU(){let n=An()?An().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var cU=new q(""),Nn=(()=>{class n extends eR{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!aU())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(B(Gn),B(jt),B(cU,8))};static \u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&de("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ir([sU]),Bt]})}return n})();function L_(n){return n==null||V_(n)===0}function V_(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ff=new q(""),Lf=new q(""),uU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Be=class{static min(e){return lU(e)}static max(e){return dU(e)}static required(e){return hU(e)}static requiredTrue(e){return fU(e)}static email(e){return pU(e)}static minLength(e){return gU(e)}static maxLength(e){return mU(e)}static pattern(e){return yU(e)}static nullValidator(e){return tR()}static compose(e){return aR(e)}static composeAsync(e){return uR(e)}};function lU(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function dU(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function hU(n){return L_(n.value)?{required:!0}:null}function fU(n){return n.value===!0?null:{required:!0}}function pU(n){return L_(n.value)||uU.test(n.value)?null:{email:!0}}function gU(n){return e=>{let t=e.value?.length??V_(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function mU(n){return e=>{let t=e.value?.length??V_(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function yU(n){if(!n)return tR;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(L_(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function tR(n){return null}function nR(n){return n!=null}function rR(n){return Ho(n)?Pe(n):n}function iR(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function oR(n,e){return e.map(t=>t(n))}function vU(n){return!n.validate}function sR(n){return n.map(e=>vU(e)?e:t=>e.validate(t))}function aR(n){if(!n)return null;let e=n.filter(nR);return e.length==0?null:function(t){return iR(oR(t,e))}}function cR(n){return n!=null?aR(sR(n)):null}function uR(n){if(!n)return null;let e=n.filter(nR);return e.length==0?null:function(t){let r=oR(t,e).map(rR);return lm(r).pipe(pe(iR))}}function lR(n){return n!=null?uR(sR(n)):null}function WA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dR(n){return n._rawValidators}function hR(n){return n._rawAsyncValidators}function O_(n){return n?Array.isArray(n)?n:[n]:[]}function bf(n,e){return Array.isArray(n)?n.includes(e):n===e}function KA(n,e){let t=O_(e);return O_(n).forEach(i=>{bf(t,i)||t.push(i)}),t}function QA(n,e){return O_(e).filter(t=>!bf(n,t))}var Tf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},es=class extends Tf{name;get formDirective(){return null}get path(){return null}},Qr=class extends Tf{_parent=null;name=null;valueAccessor=null},Sf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Xt=(()=>{class n extends Sf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Qr,2))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Bt]})}return n})(),br=(()=>{class n extends Sf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(es,10))};static \u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Bt]})}return n})();var Vu="VALID",Cf="INVALID",wa="PENDING",ju="DISABLED",Li=class{},Af=class extends Li{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Uu=class extends Li{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Bu=class extends Li{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Da=class extends Li{status;source;constructor(e,t){super(),this.status=e,this.source=t}},F_=class extends Li{source;constructor(e){super(),this.source=e}},Rf=class extends Li{source;constructor(e){super(),this.source=e}};function fR(n){return(Vf(n)?n.validators:n)||null}function _U(n){return Array.isArray(n)?cR(n):n||null}function pR(n,e){return(Vf(e)?e.asyncValidators:n)||null}function EU(n){return Array.isArray(n)?lR(n):n||null}function Vf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function IU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[t])throw new G(1001,"")}function wU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new G(1002,"")})}var Nf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dt(this.statusReactive)}set status(e){dt(()=>this.statusReactive.set(e))}_status=Sn(()=>this.statusReactive(),{});statusReactive=Re(void 0,{});get valid(){return this.status===Vu}get invalid(){return this.status===Cf}get pending(){return this.status==wa}get disabled(){return this.status===ju}get enabled(){return this.status!==ju}errors;get pristine(){return dt(this.pristineReactive)}set pristine(e){dt(()=>this.pristineReactive.set(e))}_pristine=Sn(()=>this.pristineReactive(),{});pristineReactive=Re(!0,{});get dirty(){return!this.pristine}get touched(){return dt(this.touchedReactive)}set touched(e){dt(()=>this.touchedReactive.set(e))}_touched=Sn(()=>this.touchedReactive(),{});touchedReactive=Re(!1,{});get untouched(){return!this.touched}_events=new Ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QA(e,this._rawAsyncValidators))}hasValidator(e){return bf(this._rawValidators,e)}hasAsyncValidator(e){return bf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(K(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Bu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Bu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(K(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Uu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Uu(!0,r))}markAsPending(e={}){this.status=wa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Da(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(K(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ju,this.errors=null,this._forEachChild(i=>{i.disable(K(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,r)),this._events.next(new Da(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(K(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this._forEachChild(r=>{r.enable(K(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(K(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vu||this.status===wa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,t)),this._events.next(new Da(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(K(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ju:Vu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=rR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Da(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?ju:this.errors?Cf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wa)?wa:this._anyControlsHaveStatus(Cf)?Cf:Vu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Uu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Bu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_U(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=EU(this._rawAsyncValidators)}},fn=class extends Nf{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wU(this,!0,e),Object.keys(e).forEach(r=>{IU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,K(M({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Rf(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var $u=new q("",{factory:()=>jf}),jf="always";function gR(n,e){return[...e.path,n]}function Mf(n,e,t=jf){j_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),CU(n,e),TU(n,e),bU(n,e),DU(n,e)}function Pf(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DU(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function j_(n,e){let t=dR(n);e.validator!==null?n.setValidators(WA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=hR(n);e.asyncValidator!==null?n.setAsyncValidators(WA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xf(e._rawValidators,i),xf(e._rawAsyncValidators,i)}function kf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=dR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=hR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return xf(e._rawValidators,r),xf(e._rawAsyncValidators,r),t}function CU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mR(n,e)})}function bU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TU(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function SU(n,e){n==null,j_(n,e)}function AU(n,e){return kf(n,e)}function U_(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function RU(n){return Object.getPrototypeOf(n.constructor)===Of}function NU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function B_(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Nn?t=o:RU(o)?r=o:i=o}),i||r||t||null}function MU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function YA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var it=class extends Nf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fR(t),pR(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(JA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Rf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){JA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var PU=n=>n instanceof it;var xU={provide:Qr,useExisting:on(()=>$_)},ZA=Promise.resolve(),$_=(()=>{class n extends Qr{_changeDetectorRef;callSetDisabledState;control=new it;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new xe;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=B_(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),U_(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Mf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ZA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&qo(r);ZA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?gR(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(B(es,9),B(Ff,10),B(Lf,10),B(ts,10),B(Wr,8),B($u,8))};static \u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ir([xU]),Bt,Tn]})}return n})();var Vi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),kU={provide:ts,useExisting:on(()=>Hu),multi:!0},Hu=(()=>{class n extends Of{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&de("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ir([kU]),Bt]})}return n})();var OU=(()=>{class n extends es{callSetDisabledState;get submitted(){return dt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Sn(()=>this._submittedReactive(),{});_submittedReactive=Re(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(kf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Mf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Pf(t.control||null,t,!1),MU(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,NU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new F_(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Pf(r||null,t),PU(i)&&(Mf(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);SU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&AU(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){j_(this.form,this),this._oldForm&&kf(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(B(Ff,10),B(Lf,10),B($u,8))};static \u0275dir=Oe({type:n,features:[Bt,Tn]})}return n})();var H_=new q(""),FU={provide:Qr,useExisting:on(()=>q_)},q_=(()=>{class n extends Qr{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=B_(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&Pf(r,this,!1),Mf(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}U_(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Pf(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(B(Ff,10),B(Lf,10),B(ts,10),B(H_,8),B($u,8))};static \u0275dir=Oe({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Ir([FU]),Bt,Tn]})}return n})();var LU={provide:Qr,useExisting:on(()=>Xn)},Xn=(()=>{class n extends Qr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=B_(this,o)}ngOnChanges(t){this._added||this._setUpControl(),U_(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return gR(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(B(es,13),B(Ff,10),B(Lf,10),B(ts,10),B(H_,8))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ir([LU]),Bt,Tn]})}return n})();var VU={provide:es,useExisting:on(()=>er)},er=(()=>{class n extends OU{form=null;ngSubmit=new xe;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&de("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ir([VU]),Bt]})}return n})(),jU={provide:ts,useExisting:on(()=>ji),multi:!0};function yR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function UU(n){return n.split(":")[0]}var ji=(()=>{class n extends Of{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(zr).injector;destroyRef=R(Un);cdr=R(Wr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,cu({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=yR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=UU(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([jU]),Bt]})}return n})(),Ca=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yR(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(B(jt),B(Gn),B(ji,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),BU={provide:ts,useExisting:on(()=>vR),multi:!0};function XA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $U(n){return n.split(":")[0]}var vR=(()=>{class n extends Of{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=$U(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&de("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([BU]),Bt]})}return n})(),ba=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(XA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(XA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(jt),B(Gn),B(vR,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var _R=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();var ER=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$u,useValue:t.callSetDisabledState??jf}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({imports:[_R]})}return n})(),Mn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:H_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:$u,useValue:t.callSetDisabledState??jf}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({imports:[_R]})}return n})();var Ta=(()=>{class n{constructor(){this.searchChange=new xe,this.searchControl=new it(""),this.searchControl.valueChanges.subscribe(t=>{this.searchChange.emit(t??"")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ke({type:n,selectors:[["app-search"]],outputs:{searchChange:"searchChange"},decls:1,vars:1,consts:[["placeholder","Search...",1,"search-input",3,"formControl"]],template:function(r,i){r&1&&Ne(0,"input",0),r&2&&Ie("formControl",i.searchControl)},dependencies:[Mn,Nn,Xt,q_],encapsulation:2})}}return n})();var IR=()=>{};var CR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Uf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new G_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},G_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qU=function(n){let e=CR(n);return Uf.encodeByteArray(e,!0)},zu=function(n){return qU(n).replace(/\./g,"")},Bf=function(n){try{return Uf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function K_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zU=()=>K_().__FIREBASE_DEFAULTS__,GU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bf(n[1]);return e&&JSON.parse(e)},$f=()=>{try{return IR()||zU()||GU()||WU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Q_=n=>$f()?.emulatorHosts?.[n],bR=n=>{let e=Q_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Y_=()=>$f()?.config,J_=n=>$f()?.[`_${n}`];var rs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ui(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Hf(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function TR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zu(JSON.stringify(t)),zu(JSON.stringify(s)),""].join(".")}var qu={};function KU(){let n={prod:[],emulator:[]};for(let e of Object.keys(qu))qu[e]?n.emulator.push(e):n.prod.push(e);return n}function QU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var wR=!1;function qf(n,e){if(typeof window>"u"||typeof document>"u"||!Ui(window.location.host)||qu[n]===e||qu[n]||wR)return;qu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=KU().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{wR=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=QU(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),N=document.getElementById(P)||document.createElement("a"),j=t("preprendIcon"),oe=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let fe=m.element;a(fe),h(N,P);let kt=l();u(oe,j),fe.append(oe,S,N,kt),document.body.appendChild(fe)}o?(S.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function YU(){let n=$f()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PR(){return!YU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gu(){try{return typeof indexedDB=="object"}catch{return!1}}function xR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var JU="FirebaseError",pn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?ZU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new pn(i,a,r)}};function ZU(n,e){return n.replace(XU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var XU=/\{\$([^}]+)}/g;function kR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(DR(o)&&DR(s)){if(!Tr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function DR(n){return n!==null&&typeof n=="object"}function Wu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Aa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function OR(n,e){let t=new W_(n,e);return t.subscribe.bind(t)}var W_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=z_),i.error===void 0&&(i.error=z_),i.complete===void 0&&(i.complete=z_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function eB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function z_(){}var kie=14400*1e3;function ft(n){return n&&n._delegate?n._delegate:n}var Gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var is="[DEFAULT]";var Z_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new rs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nB(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tB(n){return n===is?void 0:n}function nB(n){return n.instantiationMode==="EAGER"}var zf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Z_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var rB=[],he=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(he||{}),iB={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},oB=he.INFO,sB={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},aB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=sB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sr=class{constructor(e){this.name=e,this._logLevel=oB,this._logHandler=aB,this._userLogHandler=null,rB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var cB=(n,e)=>e.some(t=>n instanceof t),FR,LR;function uB(){return FR||(FR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lB(){return LR||(LR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VR=new WeakMap,eE=new WeakMap,jR=new WeakMap,X_=new WeakMap,nE=new WeakMap;function dB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ar(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&VR.set(t,n)}).catch(()=>{}),nE.set(e,n),e}function hB(n){if(eE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});eE.set(n,e)}var tE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UR(n){tE=n(tE)}function fB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Gf(this),e,...t);return jR.set(r,e.sort?e.sort():[e]),Ar(r)}:lB().includes(n)?function(...e){return n.apply(Gf(this),e),Ar(VR.get(this))}:function(...e){return Ar(n.apply(Gf(this),e))}}function pB(n){return typeof n=="function"?fB(n):(n instanceof IDBTransaction&&hB(n),cB(n,uB())?new Proxy(n,tE):n)}function Ar(n){if(n instanceof IDBRequest)return dB(n);if(X_.has(n))return X_.get(n);let e=pB(n);return e!==n&&(X_.set(n,e),nE.set(e,n)),e}var Gf=n=>nE.get(n);function $R(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ar(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Ar(s.result),u.oldVersion,u.newVersion,Ar(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var gB=["get","getKey","getAll","getAllKeys","count"],mB=["put","add","delete","clear"],rE=new Map;function BR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rE.get(e))return rE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=mB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gB.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return rE.set(e,o),o}UR(n=>K(M({},n),{get:(e,t,r)=>BR(e,t)||n.get(e,t,r),has:(e,t)=>!!BR(e,t)||n.has(e,t)}));var oE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function yB(n){return n.getComponent()?.type==="VERSION"}var sE="@firebase/app",HR="0.14.6";var Yr=new Sr("@firebase/app"),vB="@firebase/app-compat",_B="@firebase/analytics-compat",EB="@firebase/analytics",IB="@firebase/app-check-compat",wB="@firebase/app-check",DB="@firebase/auth",CB="@firebase/auth-compat",bB="@firebase/database",TB="@firebase/data-connect",SB="@firebase/database-compat",AB="@firebase/functions",RB="@firebase/functions-compat",NB="@firebase/installations",MB="@firebase/installations-compat",PB="@firebase/messaging",xB="@firebase/messaging-compat",kB="@firebase/performance",OB="@firebase/performance-compat",FB="@firebase/remote-config",LB="@firebase/remote-config-compat",VB="@firebase/storage",jB="@firebase/storage-compat",UB="@firebase/firestore",BB="@firebase/ai",$B="@firebase/firestore-compat",HB="firebase",qB="12.6.0";var aE="[DEFAULT]",zB={[sE]:"fire-core",[vB]:"fire-core-compat",[EB]:"fire-analytics",[_B]:"fire-analytics-compat",[wB]:"fire-app-check",[IB]:"fire-app-check-compat",[DB]:"fire-auth",[CB]:"fire-auth-compat",[bB]:"fire-rtdb",[TB]:"fire-data-connect",[SB]:"fire-rtdb-compat",[AB]:"fire-fn",[RB]:"fire-fn-compat",[NB]:"fire-iid",[MB]:"fire-iid-compat",[PB]:"fire-fcm",[xB]:"fire-fcm-compat",[kB]:"fire-perf",[OB]:"fire-perf-compat",[FB]:"fire-rc",[LB]:"fire-rc-compat",[VB]:"fire-gcs",[jB]:"fire-gcs-compat",[UB]:"fire-fst",[$B]:"fire-fst-compat",[BB]:"fire-vertex","fire-js":"fire-js",[HB]:"fire-js-all"};var Ku=new Map,GB=new Map,cE=new Map;function qR(n,e){try{n.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){let e=n.name;if(cE.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;cE.set(e,n);for(let t of Ku.values())qR(t,n);for(let t of GB.values())qR(t,n);return!0}function Ra(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gn(n){return n==null?!1:n.settings!==void 0}var WB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new tr("app","Firebase",WB);var uE=class{constructor(e,t,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}};var $i=qB;function hE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=M({name:aE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(t||(t=Y_()),!t)throw Bi.create("no-options");let o=Ku.get(i);if(o){if(Tr(t,o.options)&&Tr(r,o.config))return o;throw Bi.create("duplicate-app",{appName:i})}let s=new zf(i);for(let u of cE.values())s.addComponent(u);let a=new uE(t,r,s);return Ku.set(i,a),a}function os(n=aE){let e=Ku.get(n);if(!e&&n===aE&&Y_())return hE();if(!e)throw Bi.create("no-app",{appName:n});return e}function Wf(){return Array.from(Ku.values())}function Ke(n,e,t){let r=zB[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(s.join(" "));return}nr(new Gt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var KB="firebase-heartbeat-database",QB=1,Qu="firebase-heartbeat-store",iE=null;function KR(){return iE||(iE=$R(KB,QB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Bi.create("idb-open",{originalErrorMessage:n.message})})),iE}function YB(n){return v(this,null,function*(){try{let t=(yield KR()).transaction(Qu),r=yield t.objectStore(Qu).get(QR(n));return yield t.done,r}catch(e){if(e instanceof pn)Yr.warn(e.message);else{let t=Bi.create("idb-get",{originalErrorMessage:e?.message});Yr.warn(t.message)}}})}function zR(n,e){return v(this,null,function*(){try{let r=(yield KR()).transaction(Qu,"readwrite");yield r.objectStore(Qu).put(e,QR(n)),yield r.done}catch(t){if(t instanceof pn)Yr.warn(t.message);else{let r=Bi.create("idb-set",{originalErrorMessage:t?.message});Yr.warn(r.message)}}})}function QR(n){return`${n.name}!${n.options.appId}`}var JB=1024,ZB=30,lE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=GR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>ZB){let i=e$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yr.warn(e)}})}getHeartbeatsHeader(){return v(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=GR(),{heartbeatsToSend:t,unsentEntries:r}=XB(this._heartbeatsCache.heartbeats),i=zu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Yr.warn(e),""}})}};function GR(){return new Date().toISOString().substring(0,10)}function XB(n,e=JB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),WR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Gu()?xR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield YB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return zR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return zR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function WR(n){return zu(JSON.stringify({version:2,heartbeats:n})).length}function e$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function t$(n){nr(new Gt("platform-logger",e=>new oE(e),"PRIVATE")),nr(new Gt("heartbeat",e=>new lE(e),"PRIVATE")),Ke(sE,HR,n),Ke(sE,HR,"esm2020"),Ke("fire-js","")}t$("");var n$="firebase",r$="12.6.0";Ke(n$,r$,"app");function YR(n){n===void 0&&(n=R(qe));let e=n.get(Ys);return t=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Hi=new Di("ANGULARFIRE2_VERSION");function Yu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ma=(n,e)=>{let t=e?[e]:Wf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Na=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Na||{}),JR=Gv()&&typeof Zone<"u"?Na.WARN:Na.SILENT;var Kf=class{zone;delegate;constructor(e,t=cm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},qi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(Ee);this.outsideAngular=t.runOutsideAngular(()=>new Kf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Kf(typeof Zone>"u"?void 0:Zone.current,am))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZR=!1;function i$(n,e){!ZR&&(JR>Na.SILENT||Gv())&&(ZR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),JR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function o$(n){let e=R(Ee,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ss(n){let e=R(Ee,{optional:!0});return e?e.run(()=>n()):n()}var s$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),tt(t,()=>ss(()=>n.apply(void 0,r)))),mn=(n,e,t)=>(t||=e?Na.WARN:Na.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(qi),s=R(Ys),a=R(et)}catch{return i$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ss(()=>s.add())),i[l]=s$(i[l],r,a));let u=o$(()=>n.apply(this,i));return e?u instanceof ce?u.pipe(Ii(o.outsideAngular),Ei(o.insideAngular),YR(a)):u instanceof Promise?ss(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>tt(a,()=>ss(()=>h(m))),m=>tt(a,()=>ss(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ss(()=>u):u instanceof ce?u.pipe(Ii(o.outsideAngular),Ei(o.insideAngular)):ss(()=>u)});var Jr=class{constructor(e){return e}},as=class{constructor(){return Wf()}};function a$(n){return n&&n.length===1?n[0]:new Jr(os())}var fE=new q("angularfire2._apps"),c$={provide:Jr,useFactory:a$,deps:[[new un,fE]]},u$={provide:as,deps:[[new un,fE]]};function l$(n){return(e,t)=>{let r=t.get(Uo);Ke("angularfire",Hi.full,"core"),Ke("angularfire",Hi.full,"app"),Ke("angular",Rm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Jr(i)}}function XR(n,...e){return sn([c$,u$,{provide:fE,useFactory:l$(n),multi:!0,deps:[Ee,qe,qi,...e]}])}var eN=mn(hE,!0);var d$=new Map,h$={activated:!1,tokenObservers:[]},f$={initialized:!1,enabled:!1};function rr(n){return d$.get(n)||M({},h$)}function iN(){return f$}var p$="https://content-firebaseappcheck.googleapis.com/v1";var g$="exchangeDebugToken",tN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Loe=1440*60*1e3;var mE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new rs,this.pending.promise.catch(t=>{}),yield m$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new rs,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function m$(n){return new Promise(e=>{setTimeout(e,n)})}var y$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},zi=new tr("appCheck","AppCheck",y$);function oN(n){if(!rr(n).activated)throw zi.create("use-before-activation",{appName:n.name})}function sN(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw zi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw zi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw zi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function aN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${p$}/projects/${t}/apps/${r}:${g$}?key=${i}`,body:{debug_token:e}}}var v$="firebase-app-check-database",_$=1,yE="firebase-app-check-store";var Qf=null;function E$(){return Qf||(Qf=new Promise((n,e)=>{try{let t=indexedDB.open(v$,_$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(zi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yE,{keyPath:"compositeKey"})}}}catch(t){e(zi.create("storage-open",{originalErrorMessage:t?.message}))}}),Qf)}function I$(n,e){return w$(D$(n),e)}function w$(n,e){return v(this,null,function*(){let r=(yield E$()).transaction(yE,"readwrite"),o=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{a(zi.create("storage-set",{originalErrorMessage:u.target.error?.message}))}})})}function D$(n){return`${n.options.appId}-${n.name}`}var Ju=new Sr("@firebase/app-check");function pE(n,e){return Gu()?I$(n,e).catch(t=>{Ju.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cN(){return iN().enabled}function uN(){return v(this,null,function*(){let n=iN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var C$={error:"UNKNOWN_ERROR"};function b$(n){return Uf.encodeString(JSON.stringify(n),!1)}function vE(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;oN(r);let i=rr(r),o=i.token,s;if(o&&!Zu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Zu(l)?o=l:yield pE(r,void 0))}if(!e&&o&&Zu(o))return{token:o.token};let a=!1;if(cN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=sN(aN(r,yield uN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield pE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ju.warn(l.message):t&&Ju.error(l),gE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield rr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ju.warn(l.message):t&&Ju.error(l),s=l}let u;return o?s?Zu(o)?u={token:o.token,internalError:s}:u=gE(s):(u={token:o.token},i.token=o,yield pE(r,o)):u=gE(s),a&&R$(r,u),u})}function T$(n){return v(this,null,function*(){let e=n.app;oN(e);let{provider:t}=rr(e);if(cN()){let r=yield uN(),{token:i}=yield sN(aN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function S$(n,e,t,r){let{app:i}=n,o=rr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Zu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nN(n))}function lN(n,e){let t=rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nN(n){let{app:e}=n,t=rr(e),r=t.tokenRefresher;r||(r=A$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function A$(n){let{app:e}=n;return new mE(()=>v(null,null,function*(){let t=rr(e),r;if(t.token?r=yield vE(n,!0):r=yield vE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tN.RETRIAL_MIN_WAIT,tN.RETRIAL_MAX_WAIT)}function R$(n,e){let t=rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Zu(n){return n.expireTimeMillis-Date.now()>0}function gE(n){return{token:b$(C$),error:n}}var _E=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=rr(this.app);for(let t of e)lN(this.app,t.next);return Promise.resolve()}};function N$(n,e){return new _E(n,e)}function M$(n){return{getToken:e=>vE(n,e),getLimitedUseToken:()=>T$(n),addTokenListener:e=>S$(n,"INTERNAL",e),removeTokenListener:e=>lN(n.app,e)}}var P$="@firebase/app-check",x$="0.11.0";var k$="app-check",rN="app-check-internal";function O$(){nr(new Gt(k$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return N$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rN).initialize()})),nr(new Gt(rN,n=>{let e=n.getProvider("app-check").getImmediate();return M$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ke(P$,x$)}O$();var F$="app-check";var Pa=class{constructor(){return Ma(F$)}};var L$=["localhost","0.0.0.0","127.0.0.1"],Yoe=typeof window<"u"&&L$.includes(window.location.hostname);function SN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AN=SN,RN=new tr("auth","Firebase",SN());var tp=new Sr("@firebase/auth");function V$(n,...e){tp.logLevel<=he.WARN&&tp.warn(`Auth (${$i}): ${n}`,...e)}function Jf(n,...e){tp.logLevel<=he.ERROR&&tp.error(`Auth (${$i}): ${n}`,...e)}function Nr(n,...e){throw HE(n,...e)}function cs(n,...e){return HE(n,...e)}function NN(n,e,t){let r=K(M({},AN()),{[e]:t});return new tr("auth","Firebase",r).create(e,{appName:n.name})}function Ki(n){return NN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return RN.create(n,...e)}function Z(n,e,...t){if(!n)throw HE(e,...t)}function Zr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Jf(e),new Error(e)}function Qi(n,e){n||Zr(e)}function DE(){return typeof self<"u"&&self.location?.href||""}function j$(){return dN()==="http:"||dN()==="https:"}function dN(){return typeof self<"u"&&self.location?.protocol||null}function U$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j$()||RR()||"connection"in navigator)?navigator.onLine:!0}function B$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var us=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qi(t>e,"Short delay should be less than long delay!"),this.isMobile=SR()||NR()}get(){return U$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qE(n,e){Qi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var np=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var H$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q$=new us(3e4,6e4);function ds(n,e){return n.tenantId&&!e.tenantId?K(M({},e),{tenantId:n.tenantId}):e}function Yi(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return MN(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Wu(M({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=M({method:e,headers:m},l);return AR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ui(n.emulatorConfig.host)&&(y.credentials="include"),np.fetch()(yield PN(n,n.config.apiHost,t,p),y)}))})}function MN(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=M(M({},$$),e);try{let i=new CE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Yf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Yf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Yf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw NN(n,h,l);Nr(n,h)}}catch(i){if(i instanceof pn)throw i;Nr(n,"network-request-failed",{message:String(i)})}})}function fp(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Yi(n,e,t,r,i);return"mfaPendingCredential"in l&&Nr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function PN(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?qE(n.config,i):`${n.config.apiScheme}://${i}`;return H$.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function z$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var CE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),q$.get())})}};function Yf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=cs(n,e,r);return i.customData._tokenResponse=t,i}function hN(n){return n!==void 0&&n.enterprise!==void 0}var bE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return z$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function G$(n,e){return v(this,null,function*(){return Yi(n,"GET","/v2/recaptchaConfig",ds(n,e))})}function W$(n,e){return v(this,null,function*(){return Yi(n,"POST","/v1/accounts:delete",e)})}function rp(n,e){return v(this,null,function*(){return Yi(n,"POST","/v1/accounts:lookup",e)})}function el(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zE(n,e=!1){return v(this,null,function*(){let t=ft(n),r=yield t.getIdToken(e),i=GE(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:el(EE(i.auth_time)),issuedAtTime:el(EE(i.iat)),expirationTime:el(EE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function EE(n){return Number(n)*1e3}function GE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bf(t);return i?JSON.parse(i):(Jf("Failed to decode base64 JWT payload"),null)}catch(i){return Jf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fN(n){let e=GE(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function nl(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof pn&&K$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function K$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var TE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var rl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ip(n){return v(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield nl(n,rp(e,{idToken:t}));Z(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?xN(i.providerUserInfo):[],s=Q$(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rl(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)})}function WE(n){return v(this,null,function*(){let e=ft(n);yield ip(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Q$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xN(n){return n.map(r=>{var i=r,{providerId:e}=i,t=jg(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function Y$(n,e){return v(this,null,function*(){let t=yield MN(n,{},()=>v(null,null,function*(){let r=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield PN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ui(n.emulatorConfig.host)&&(u.credentials="include"),np.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function J$(n,e){return v(this,null,function*(){return Yi(n,"POST","/v2/accounts:revokeToken",ds(n,e))})}var tl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=fN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Y$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Zr("not implemented")}};function Gi(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wi=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=jg(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rl(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield nl(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return zE(this,e)}reload(){return WE(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>M({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(K(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ip(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(gn(this.auth.app))return Promise.reject(Ki(this.auth));let e=yield this.getIdToken();return yield nl(this,W$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return K(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:P}=t;Z(p&&P,e,"internal-error");let N=tl.fromJSON(this.name,P);Z(typeof p=="string",e,"internal-error"),Gi(r,e.name),Gi(i,e.name),Z(typeof m=="boolean",e,"internal-error"),Z(typeof y=="boolean",e,"internal-error"),Gi(o,e.name),Gi(s,e.name),Gi(a,e.name),Gi(u,e.name),Gi(l,e.name),Gi(h,e.name);let j=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(j.providerData=S.map(oe=>M({},oe))),u&&(j._redirectEventId=u),j}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new tl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ip(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?xN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new tl;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var pN=new Map;function Xr(n){Qi(n instanceof Function,"Expected a class definition");let e=pN.get(n);return e?(Qi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pN.set(n,e),e)}var Z$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),SE=Z$;function Zf(n,e,t){return`firebase:${n}:${e}:${t}`}var op=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield rp(this.auth,{idToken:e}).catch(()=>{});return t?Wi._fromGetAccountInfoResponse(this.auth,t,e):null}return Wi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Xr(SE),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Xr(SE),s=Zf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield rp(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Wi._fromGetAccountInfoResponse(e,m,h)}else p=Wi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function gN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jN(e))return"Blackberry";if(UN(e))return"Webos";if(ON(e))return"Safari";if((e.includes("chrome/")||FN(e))&&!e.includes("edge/"))return"Chrome";if(VN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kN(n=_t()){return/firefox\//i.test(n)}function ON(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FN(n=_t()){return/crios\//i.test(n)}function LN(n=_t()){return/iemobile/i.test(n)}function VN(n=_t()){return/android/i.test(n)}function jN(n=_t()){return/blackberry/i.test(n)}function UN(n=_t()){return/webos/i.test(n)}function KE(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function X$(n=_t()){return KE(n)&&!!window.navigator?.standalone}function eH(){return MR()&&document.documentMode===10}function BN(n=_t()){return KE(n)||VN(n)||UN(n)||jN(n)||/windows phone/i.test(n)||LN(n)}function $N(n,e=[]){let t;switch(n){case"Browser":t=gN(_t());break;case"Worker":t=`${gN(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$i}/${r}`}var AE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function tH(t){return v(this,arguments,function*(n,e={}){return Yi(n,"GET","/v2/passwordPolicy",ds(n,e))})}var nH=6,RE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nH,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var NE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sp(this),this.idTokenSubscription=new sp(this),this.beforeStateQueue=new AE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield op.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield rp(this,{idToken:e}),r=yield Wi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){if(gn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield ip(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=B$()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(gn(this.app))return Promise.reject(Ki(this));let t=e?ft(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return gn(this.app)?Promise.reject(Ki(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return gn(this.app)?Promise.reject(Ki(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Xr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield tH(this),t=new RE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield J$(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xr(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield op.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return v(this,null,function*(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V$(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function xa(n){return ft(n)}var sp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=OR(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pp={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rH(n){pp=n}function HN(n){return pp.loadJS(n)}function iH(){return pp.recaptchaEnterpriseScript}function oH(){return pp.gapiScript}function qN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var ME=class{constructor(){this.enterprise=new PE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},PE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var sH="recaptcha-enterprise",zN="NO_RECAPTCHA",xE=class{constructor(e){this.type=sH,this.auth=xa(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){G$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new bE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;hN(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(zN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ME().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&hN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iH();u.length!==0&&(u+=a),HN(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Xu(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new xE(n),s;if(i)s=zN;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=M({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function mN(n,e,t,r,i){return v(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Xu(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Xu(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Xu(n,e,t);return r(n,o).catch(s=>v(null,null,function*(){if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=yield Xu(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)}))}else{let o=yield Xu(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")})}function QE(n,e){let t=Ra(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Tr(o,e??{}))return i;Nr(i,"already-initialized")}return t.initialize({options:e})}function aH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YE(n,e,t){let r=xa(n);Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=GN(e),{host:s,port:a}=cH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Z(Tr(l,r.config.emulator)&&Tr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ui(s)?(Hf(`${o}//${s}${u}`),qf("Auth",!0)):i||uH()}function GN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cH(n){let e=GN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:yN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:yN(s)}}}function yN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function uH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var il=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}};function lH(n,e){return v(this,null,function*(){return Yi(n,"POST","/v1/accounts:signUp",e)})}function dH(n,e){return v(this,null,function*(){return fp(n,"POST","/v1/accounts:signInWithPassword",ds(n,e))})}function hH(n,e){return v(this,null,function*(){return fp(n,"POST","/v1/accounts:signInWithEmailLink",ds(n,e))})}function fH(n,e){return v(this,null,function*(){return fp(n,"POST","/v1/accounts:signInWithEmailLink",ds(n,e))})}var ol=class n extends il{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mN(e,t,"signInWithPassword",dH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hH(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mN(e,r,"signUpPassword",lH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fH(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function IE(n,e){return v(this,null,function*(){return fp(n,"POST","/v1/accounts:signInWithIdp",ds(n,e))})}function pH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gH(n){let e=Sa(Aa(n)).link,t=e?Sa(Aa(e)).deep_link_id:null,r=Sa(Aa(n)).deep_link_id;return(r?Sa(Aa(r)).link:null)||r||t||e||n}var ap=class n{constructor(e){let t=Sa(Aa(e)),r=t.apiKey??null,i=t.oobCode??null,o=pH(t.mode??null);Z(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=gH(e);try{return new n(t)}catch{return null}}};var WN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ol._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ap.parseLink(r);return Z(i,"argument-error"),ol._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kE=class extends cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var sl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Wi._fromIdTokenResponse(e,r,i),s=vN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function vN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var OE=class n extends pn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function KN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?OE._fromErrorAndOperation(n,o,e,r):o})}function mH(n,e,t=!1){return v(this,null,function*(){let r=yield nl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return sl._forOperation(n,"link",r)})}function yH(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(gn(r.app))return Promise.reject(Ki(r));let i="reauthenticate";try{let o=yield nl(n,KN(r,i,e,n),t);Z(o.idToken,r,"internal-error");let s=GE(o.idToken);Z(s,r,"internal-error");let{sub:a}=s;return Z(n.uid===a,r,"user-mismatch"),sl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nr(r,"user-mismatch"),o}})}function QN(n,e,t=!1){return v(this,null,function*(){if(gn(n.app))return Promise.reject(Ki(n));let r="signIn",i=yield KN(n,r,e),o=yield sl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function JE(n,e){return v(this,null,function*(){return QN(xa(n),e)})}function vH(n){return v(this,null,function*(){let e=xa(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function gp(n,e,t){return gn(n.app)?Promise.reject(Ki(n)):JE(ft(n),WN.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&vH(n),r}))}function ZE(n,e,t,r){return ft(n).onIdTokenChanged(e,t,r)}function XE(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}var up="__sak";var lp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(up,"1"),this.storage.removeItem(up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var _H=1e3,EH=10,IH=(()=>{class n extends lp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);eH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,EH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},_H)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield vi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield vi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield vi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),YN=IH;var wH=(()=>{class n extends lp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),eI=wH;function DH(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var CH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield DH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function JN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var FE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=JN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Rr(){return window}function bH(n){Rr().location.href=n}function ZN(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}function TH(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function SH(){return navigator?.serviceWorker?.controller||null}function AH(){return ZN()?self:null}var XN="firebaseLocalStorageDb",RH=1,dp="firebaseLocalStorage",eM="fbase_key",ls=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function mp(n,e){return n.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function NH(){let n=indexedDB.deleteDatabase(XN);return new ls(n).toPromise()}function LE(){let n=indexedDB.open(XN,RH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(dp,{keyPath:eM})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(dp)?e(r):(r.close(),yield NH(),e(yield LE()))}))})}function _N(n,e,t){return v(this,null,function*(){let r=mp(n,!0).put({[eM]:e,value:t});return new ls(r).toPromise()})}function MH(n,e){return v(this,null,function*(){let t=mp(n,!1).get(e),r=yield new ls(t).toPromise();return r===void 0?null:r.value})}function EN(n,e){let t=mp(n,!0).delete(e);return new ls(t).toPromise()}var PH=800,xH=3,kH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield LE(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>xH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return ZN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=CH._getInstance(AH()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){if(this.activeServiceWorker=yield TH(),!this.activeServiceWorker)return;this.sender=new FE(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||SH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield LE();return yield _N(t,up,"1"),yield EN(t,up),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>_N(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>MH(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>EN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=mp(o,!1).getAll();return new ls(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),PH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),tM=kH;var rse=qN("rcb"),ise=new us(3e4,6e4);function OH(n,e){return e?Xr(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var al=class extends il{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return IE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return IE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return IE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function FH(n){return QN(n.auth,new al(n),n.bypassAuthState)}function LH(n){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),yH(t,new al(n),n.bypassAuthState)}function VH(n){return v(this,null,function*(){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),mH(t,new al(n),n.bypassAuthState)})}var VE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FH;case"linkViaPopup":case"linkViaRedirect":return VH;case"reauthViaPopup":case"reauthViaRedirect":return LH;default:Nr(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ose=new us(2e3,1e4);var jH="pendingRedirect",Xf=new Map,jE=class n extends VE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Xf.get(this.auth._key());if(!e){try{let r=(yield UH(this.resolver,this.auth))?yield vi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xf.set(this.auth._key(),e)}return this.bypassAuthState||Xf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return vi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function UH(n,e){return v(this,null,function*(){let t=HH(e),r=$H(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function BH(n,e){Xf.set(n._key(),e)}function $H(n){return Xr(n._redirectPersistence)}function HH(n){return Zf(jH,n.config.apiKey,n.name)}function qH(n,e,t=!1){return v(this,null,function*(){if(gn(n.app))return Promise.reject(Ki(n));let r=xa(n),i=OH(r,e),s=yield new jE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var zH=600*1e3,UE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nM(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zH&&this.cachedEventUids.clear(),this.cachedEventUids.has(IN(e))}saveEventToCache(e){this.cachedEventUids.add(IN(e)),this.lastProcessedEventTime=Date.now()}};function IN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function GH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nM(n);default:return!1}}function WH(t){return v(this,arguments,function*(n,e={}){return Yi(n,"GET","/v1/projects",e)})}var KH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QH=/^https?/;function YH(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield WH(n);for(let t of e)try{if(JH(t))return}catch{}Nr(n,"unauthorized-domain")})}function JH(n){let e=DE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!QH.test(t))return!1;if(KH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ZH=new us(3e4,6e4);function wN(){let n=Rr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XH(n){return new Promise((e,t)=>{function r(){wN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wN(),t(cs(n,"network-request-failed"))},timeout:ZH.get()})}if(Rr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rr().gapi?.load)r();else{let i=qN("iframefcb");return Rr()[i]=()=>{gapi.load?r():t(cs(n,"network-request-failed"))},HN(`${oH()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw ep=null,e})}var ep=null;function e4(n){return ep=ep||XH(n),ep}var t4=new us(5e3,15e3),n4="__/auth/iframe",r4="emulator/auth/iframe",i4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s4(n){let e=n.config;Z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qE(e,r4):`https://${n.config.authDomain}/${n4}`,r={apiKey:e.apiKey,appName:n.name,v:$i},i=o4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Wu(r).slice(1)}`}function a4(n){return v(this,null,function*(){let e=yield e4(n),t=Rr().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:s4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i4,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=cs(n,"network-request-failed"),a=Rr().setTimeout(()=>{o(s)},t4.get());function u(){Rr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var c4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,l4=600,d4="_blank",h4="http://localhost",hp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function f4(n,e,t,r=u4,i=l4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=K(M({},c4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=_t().toLowerCase();t&&(a=FN(l)?d4:t),kN(l)&&(e=e||h4,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(X$(l)&&a!=="_self")return p4(e||"",a),new hp(null);let p=window.open(e||"",a,h);Z(p,n,"popup-blocked");try{p.focus()}catch{}return new hp(p)}function p4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var g4="__/auth/handler",m4="emulator/auth/handler",y4=encodeURIComponent("fac");function DN(n,e,t,r,i,o){return v(this,null,function*(){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$i,eventId:i};if(e instanceof cp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",kR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof kE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${y4}=${encodeURIComponent(u)}`:"";return`${v4(n)}?${Wu(a).slice(1)}${l}`})}function v4({config:n}){return n.emulator?qE(n,m4):`https://${n.authDomain}/${g4}`}var wE="webStorageSupport",BE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=qH,this._overrideRedirectResult=BH}_openPopup(e,t,r,i){return v(this,null,function*(){Qi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield DN(e,t,r,DE(),i);return f4(e,o,JN())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield DN(e,t,r,DE(),i);return bH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Qi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield a4(e),r=new UE(e);return t.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wE,{type:wE},i=>{let o=i?.[0]?.[wE];o!==void 0&&t(!!o),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BN()||ON()||KE()}},rM=BE;var CN="@firebase/auth",bN="1.11.1";var $E=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E4(n){nr(new Gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$N(n)},l=new NE(r,i,o,u);return aH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),nr(new Gt("auth-internal",e=>{let t=xa(e.getProvider("auth").getImmediate());return(r=>new $E(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ke(CN,bN,_4(n)),Ke(CN,bN,"esm2020")}var I4=300,w4=J_("authIdTokenMaxAge")||I4,TN=null,D4=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>w4)return;let i=t?.token;TN!==i&&(TN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tI(n=os()){let e=Ra(n,"auth");if(e.isInitialized())return e.getImmediate();let t=QE(n,{popupRedirectResolver:rM,persistence:[tM,YN,eI]}),r=J_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=D4(o.toString());XE(t,s,()=>s(t.currentUser)),ZE(t,a=>s(a))}}let i=Q_("auth");return i&&YE(t,`http://${i}`),t}function C4(){return document.getElementsByTagName("head")?.[0]??document}rH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=cs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",C4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E4("Browser");var iM="auth",hs=class{constructor(e){return e}},cl=class{constructor(){return Ma(iM)}};var nI=new q("angularfire2.auth-instances");function gq(n,e){let t=Yu(iM,n,e);return t&&new hs(t)}function mq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hs(r)}}var yq={provide:cl,deps:[[new un,nI]]},vq={provide:hs,useFactory:gq,deps:[[new un,nI],Jr]};function oM(n,...e){return Ke("angularfire",Hi.full,"auth"),sn([vq,yq,{provide:nI,useFactory:mq(n),multi:!0,deps:[Ee,qe,qi,as,[new un,Pa],...e]}])}var sM=mn(tI,!0);var aM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cM={};var ei,rI;(function(){var n;function e(D,_){function I(){}I.prototype=_.prototype,D.F=_.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(C,w,T){for(var E=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)E[Kt-2]=arguments[Kt];return _.prototype[w].apply(C,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,I){I||(I=0);let C=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)C[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;w<16;++w)C[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=D.g[0],I=D.g[1],w=D.g[2];let T=D.g[3],E;E=_+(T^I&(w^T))+C[0]+3614090360&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[1]+3905402710&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[2]+606105819&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[3]+3250441966&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[5]+1200080426&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[6]+2821735955&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[7]+4249261313&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[9]+2336552879&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[10]+4294925233&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[11]+2304563134&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[13]+4254626195&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[14]+2792965006&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[15]+1236535329&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(w^T&(I^w))+C[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[6]+3225465664&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[11]+643717713&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[0]+3921069994&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[10]+38016083&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[15]+3634488961&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[4]+3889429448&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[14]+3275163606&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[3]+4107603335&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[8]+1163531501&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[2]+4243563512&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[7]+1735328473&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[12]+2368359562&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(I^w^T)+C[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[8]+2272392833&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[11]+1839030562&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[14]+4259657740&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[4]+1272893353&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[7]+4139469664&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[10]+3200236656&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[0]+3936430074&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[3]+3572445317&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[6]+76029189&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[12]+3873151461&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[15]+530742520&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[2]+3299628645&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(w^(I|~T))+C[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[7]+1126891415&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[14]+2878612391&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[5]+4237533241&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[3]+2399980690&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[10]+4293915773&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[1]+2240044497&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[15]+4264355552&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[6]+2734768916&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[13]+1309151649&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[11]+3174756917&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[2]+718787259&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+w&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.v=function(D,_){_===void 0&&(_=D.length);let I=_-this.blockSize,C=this.C,w=this.h,T=0;for(;T<_;){if(w==0)for(;T<=I;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<_;)if(C[w++]=D.charCodeAt(T++),w==this.blockSize){i(this,C),w=0;break}}else for(;T<_;)if(C[w++]=D[T++],w==this.blockSize){i(this,C),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;_=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=_&255,_/=256;for(this.v(D),D=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)D[_++]=this.g[I]>>>C&255;return D};function o(D,_){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=_(D)}function s(D,_){this.h=_;let I=[],C=!0;for(let w=D.length-1;w>=0;w--){let T=D[w]|0;C&&T==_||(I[w]=T,C=!1)}this.g=I}var a={};function u(D){return-128<=D&&D<128?o(D,function(_){return new s([_|0],_<0?-1:0)}):new s([D|0],D<0?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(D<0)return N(l(-D));let _=[],I=1;for(let C=0;D>=I;C++)_[C]=D/I|0,I*=4294967296;return new s(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return N(h(D.substring(1),_));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=l(Math.pow(_,8)),C=p;for(let T=0;T<D.length;T+=8){var w=Math.min(8,D.length-T);let E=parseInt(D.substring(T,T+w),_);w<8?(w=l(Math.pow(_,w)),C=C.j(w).add(l(E))):(C=C.j(I),C=C.add(l(E)))}return C}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();let D=0,_=1;for(let I=0;I<this.g.length;I++){let C=this.i(I);D+=(C>=0?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(P(this))return"-"+N(this).toString(D);let _=l(Math.pow(D,6));var I=this;let C="";for(;;){let w=kt(I,_).g;I=j(I,w.j(_));let T=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=w,S(I))return T+C;for(;T.length<6;)T="0"+T;C=T+C}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(let _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=j(this,D),P(D)?-1:S(D)?0:1};function N(D){let _=D.g.length,I=[];for(let C=0;C<_;C++)I[C]=~D.g[C];return new s(I,~D.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(D){let _=Math.max(this.g.length,D.g.length),I=[],C=0;for(let w=0;w<=_;w++){let T=C+(this.i(w)&65535)+(D.i(w)&65535),E=(T>>>16)+(this.i(w)>>>16)+(D.i(w)>>>16);C=E>>>16,T&=65535,E&=65535,I[w]=E<<16|T}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(D,_){return D.add(N(_))}n.j=function(D){if(S(this)||S(D))return p;if(P(this))return P(D)?N(this).j(N(D)):N(N(this).j(D));if(P(D))return N(this.j(N(D)));if(this.l(y)<0&&D.l(y)<0)return l(this.m()*D.m());let _=this.g.length+D.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let w=0;w<D.g.length;w++){let T=this.i(C)>>>16,E=this.i(C)&65535,Kt=D.i(w)>>>16,di=D.i(w)&65535;I[2*C+2*w]+=E*di,oe(I,2*C+2*w),I[2*C+2*w+1]+=T*di,oe(I,2*C+2*w+1),I[2*C+2*w+1]+=E*Kt,oe(I,2*C+2*w+1),I[2*C+2*w+2]+=T*Kt,oe(I,2*C+2*w+2)}for(D=0;D<_;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=_;D<2*_;D++)I[D]=0;return new s(I,0)};function oe(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function fe(D,_){this.g=D,this.h=_}function kt(D,_){if(S(_))throw Error("division by zero");if(S(D))return new fe(p,p);if(P(D))return _=kt(N(D),_),new fe(N(_.g),N(_.h));if(P(_))return _=kt(D,N(_)),new fe(N(_.g),_.h);if(D.g.length>30){if(P(D)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=_;C.l(D)<=0;)I=Wt(I),C=Wt(C);var w=gt(I,1),T=gt(C,1);for(C=gt(C,2),I=gt(I,2);!S(C);){var E=T.add(C);E.l(D)<=0&&(w=w.add(I),T=E),C=gt(C,1),I=gt(I,1)}return _=j(D,w.j(_)),new fe(w,_)}for(w=p;D.l(_)>=0;){for(I=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),T=l(I),E=T.j(_);P(E)||E.l(D)>0;)I-=C,T=l(I),E=T.j(_);S(T)&&(T=m),w=w.add(T),D=j(D,E)}return new fe(w,D)}n.B=function(D){return kt(this,D).h},n.and=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&D.i(C);return new s(I,this.h&D.h)},n.or=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|D.i(C);return new s(I,this.h|D.h)},n.xor=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^D.i(C);return new s(I,this.h^D.h)};function Wt(D){let _=D.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=D.i(C)<<1|D.i(C-1)>>>31;return new s(I,D.h)}function gt(D,_){let I=_>>5;_%=32;let C=D.g.length-I,w=[];for(let T=0;T<C;T++)w[T]=_>0?D.i(T+I)>>>_|D.i(T+I+1)<<32-_:D.i(T+I);return new s(w,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rI=cM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ei=cM.Integer=s}).apply(typeof aM<"u"?aM:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ti={};var iI,Eq,ka,oI,ul,vp,sI,aI,cI;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(g,b,A){for(var V=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)V[ae-2]=arguments[ae];return d.prototype[b].apply(g,V)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function S(c,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=c.length||0;let A=b.length||0;c.length=f+A;for(let V=0;V<A;V++)c[f+V]=b[V]}else c.push(b)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function j(){var c=D;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class oe{constructor(){this.h=this.g=null}add(d,f){let g=fe.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var fe=new P(()=>new kt,c=>c.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Wt,gt=!1,D=new oe,_=()=>{let c=Promise.resolve(void 0);Wt=()=>{c.then(I)}};function I(){for(var c;c=j();){try{c.h.call(c.g)}catch(f){N(f)}var d=fe;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}gt=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function E(c){return/^[\s\xa0]*$/.test(c)}function Kt(c,d){w.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Kt,w),Kt.prototype.init=function(c,d){let f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Kt.Z.h.call(this)},Kt.prototype.h=function(){Kt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var di="closure_listenable_"+(Math.random()*1e6|0),zx=0;function Gx(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++zx,this.da=this.fa=!1}function Rl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Nl(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function Wx(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function AD(c){let d={};for(let f in c)d[f]=c[f];return d}let RD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ND(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<RD.length;A++)f=RD[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function Ml(c){this.src=c,this.g={},this.h=0}Ml.prototype.add=function(c,d,f,g,b){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let V=mg(c,d,g,b);return V>-1?(d=c[V],f||(d.fa=!1)):(d=new Gx(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function gg(c,d){let f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=b>=0)&&Array.prototype.splice.call(g,b,1),A&&(Rl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function mg(c,d,f,g){for(let b=0;b<c.length;++b){let A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var yg="closure_lm_"+(Math.random()*1e6|0),vg={};function MD(c,d,f,g,b){if(g&&g.once)return xD(c,d,f,g,b);if(Array.isArray(d)){for(let A=0;A<d.length;A++)MD(c,d[A],f,g,b);return null}return f=wg(f),c&&c[di]?c.J(d,f,a(g)?!!g.capture:!!g,b):PD(c,d,f,!1,g,b)}function PD(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");let V=a(b)?!!b.capture:!!b,ae=Eg(c);if(ae||(c[yg]=ae=new Ml(c)),f=ae.add(d,f,g,V,A),f.proxy)return f;if(g=Kx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)T||(b=V),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(OD(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Kx(){function c(f){return d.call(c.src,c.listener,f)}let d=Qx;return c}function xD(c,d,f,g,b){if(Array.isArray(d)){for(let A=0;A<d.length;A++)xD(c,d[A],f,g,b);return null}return f=wg(f),c&&c[di]?c.K(d,f,a(g)?!!g.capture:!!g,b):PD(c,d,f,!0,g,b)}function kD(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)kD(c,d[A],f,g,b);else g=a(g)?!!g.capture:!!g,f=wg(f),c&&c[di]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],f=mg(d,f,g,b),f>-1&&(Rl(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=Eg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=mg(d,f,g,b)),(f=c>-1?d[c]:null)&&_g(f))}function _g(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[di])gg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(OD(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Eg(d))?(gg(f,c),f.h==0&&(f.src=null,d[yg]=null)):Rl(c)}}}function OD(c){return c in vg?vg[c]:vg[c]="on"+c}function Qx(c,d){if(c.da)c=!0;else{d=new Kt(d,this);let f=c.listener,g=c.ha||c.src;c.fa&&_g(c),c=f.call(g,d)}return c}function Eg(c){return c=c[yg],c instanceof Ml?c:null}var Ig="__closure_events_fn_"+(Math.random()*1e9>>>0);function wg(c){return typeof c=="function"?c:(c[Ig]||(c[Ig]=function(d){return c.handleEvent(d)}),c[Ig])}function At(){C.call(this),this.i=new Ml(this),this.M=this,this.G=null}p(At,C),At.prototype[di]=!0,At.prototype.removeEventListener=function(c,d,f,g){kD(this,c,d,f,g)};function Ot(c,d){var f,g=c.G;if(g)for(f=[];g;g=g.G)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new w(d,c);else if(d instanceof w)d.target=d.target||c;else{var b=d;d=new w(g,c),ND(d,b)}b=!0;let A,V;if(f)for(V=f.length-1;V>=0;V--)A=d.g=f[V],b=Pl(A,g,!0,d)&&b;if(A=d.g=c,b=Pl(A,g,!0,d)&&b,b=Pl(A,g,!1,d)&&b,f)for(V=0;V<f.length;V++)A=d.g=f[V],b=Pl(A,g,!1,d)&&b}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let g=0;g<f.length;g++)Rl(f[g]);delete c.g[d],c.h--}}this.G=null},At.prototype.J=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},At.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Pl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let A=0;A<d.length;++A){let V=d[A];if(V&&!V.da&&V.capture==f){let ae=V.listener,ut=V.ha||V.src;V.fa&&gg(c.i,V),b=ae.call(ut,g)!==!1&&b}}return b&&!g.defaultPrevented}function Yx(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function FD(c){c.g=Yx(()=>{c.g=null,c.i&&(c.i=!1,FD(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Jx extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:FD(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hc(c){C.call(this),this.h=c,this.g={}}p(hc,C);var LD=[];function VD(c){Nl(c.g,function(d,f){this.g.hasOwnProperty(f)&&_g(d)},c),c.g={}}hc.prototype.N=function(){hc.Z.N.call(this),VD(this)},hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dg=s.JSON.stringify,Zx=s.JSON.parse,Xx=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function jD(){}function UD(){}var fc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cg(){w.call(this,"d")}p(Cg,w);function bg(){w.call(this,"c")}p(bg,w);var uo={},BD=null;function xl(){return BD=BD||new At}uo.Ia="serverreachability";function $D(c){w.call(this,uo.Ia,c)}p($D,w);function pc(c){let d=xl();Ot(d,new $D(d))}uo.STAT_EVENT="statevent";function HD(c,d){w.call(this,uo.STAT_EVENT,c),this.stat=d}p(HD,w);function Ft(c){let d=xl();Ot(d,new HD(d,c))}uo.Ja="timingevent";function qD(c,d){w.call(this,uo.Ja,c),this.size=d}p(qD,w);function gc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function mc(){this.g=!0}mc.prototype.ua=function(){this.g=!1};function ek(c,d,f,g,b,A){c.info(function(){if(c.g)if(A){var V="",ae=A.split("&");for(let Ae=0;Ae<ae.length;Ae++){var ut=ae[Ae].split("=");if(ut.length>1){let mt=ut[0];ut=ut[1];let cr=mt.split("_");V=cr.length>=2&&cr[1]=="type"?V+(mt+"="+ut+"&"):V+(mt+"=redacted&")}}}else V=null;else V=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+V})}function tk(c,d,f,g,b,A,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+V})}function bs(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+rk(c,f)+(g?" "+g:"")})}function nk(c,d){c.info(function(){return"TIMEOUT: "+d})}mc.prototype.info=function(){};function rk(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var f=A[c];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let V=1;V<g.length;V++)g[V]=""}}}}return Dg(A)}catch{return d}}var kl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zD={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},GD;function Tg(){}p(Tg,jD),Tg.prototype.g=function(){return new XMLHttpRequest},GD=new Tg;function yc(c){return encodeURIComponent(String(c))}function ik(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function hi(c,d,f,g){this.j=c,this.i=d,this.l=f,this.S=g||1,this.V=new hc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new WD}function WD(){this.i=null,this.g="",this.h=!1}var KD={},Sg={};function Ag(c,d,f){c.M=1,c.A=Fl(ar(d)),c.u=f,c.R=!0,QD(c,null)}function QD(c,d){c.F=Date.now(),Ol(c),c.B=ar(c.A);var f=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),cC(f.i,"t",g),c.C=0,f=c.j.L,c.h=new WD,c.g=TC(c.j,f?d:null,!c.u),c.P>0&&(c.O=new Jx(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,g=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(LD[0]=b.toString()),b=LD);for(let A=0;A<b.length;A++){let V=MD(f,b[A],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.J?AD(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),pc(),ek(c.i,c.v,c.B,c.l,c.S,c.u)}hi.prototype.ba=function(c){c=c.target;let d=this.O;d&&gi(c)==3?d.j():this.Y(c)},hi.prototype.Y=function(c){try{if(c==this.g)e:{let ae=gi(this.g),ut=this.g.ya(),Ae=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||gC(this.g)))){this.K||ae!=4||ut==7||(ut==8||Ae<=0?pc(3):pc(2)),Rg(this);var d=this.g.ca();this.X=d;var f=ok(this);if(this.o=d==200,tk(this.i,this.v,this.B,this.l,this.S,ae,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var A=g;break t}}A=null}if(c=A)bs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ng(this,c);else{this.o=!1,this.m=3,Ft(12),lo(this),vc(this);break e}}if(this.R){c=!0;let mt;for(;!this.K&&this.C<f.length;)if(mt=sk(this,f),mt==Sg){ae==4&&(this.m=4,Ft(14),c=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==KD){this.m=4,Ft(15),bs(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else bs(this.i,this.l,mt,null),Ng(this,mt);if(YD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||f.length!=0||this.h.h||(this.m=1,Ft(16),c=!1),this.o=this.o&&c,!c)bs(this.i,this.l,f,"[Invalid Chunked Response]"),lo(this),vc(this);else if(f.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Lg(V),V.P=!0,Ft(11))}}else bs(this.i,this.l,f,null),Ng(this,f);ae==4&&lo(this),this.o&&!this.K&&(ae==4?wC(this.j,this):(this.o=!1,Ol(this)))}else Ek(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),lo(this),vc(this)}}}catch{}finally{}};function ok(c){if(!YD(c))return c.g.la();let d=gC(c.g);if(d==="")return"";let f="",g=d.length,b=gi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return lo(c),vc(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<g;A++)c.h.h=!0,f+=c.h.i.decode(d[A],{stream:!(b&&A==g-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function YD(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function sk(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Sg:(f=Number(d.substring(f,g)),isNaN(f)?KD:(g+=1,g+f>d.length?Sg:(d=d.slice(g,g+f),c.C=g+f,d)))}hi.prototype.cancel=function(){this.K=!0,lo(this)};function Ol(c){c.T=Date.now()+c.H,JD(c,c.H)}function JD(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=gc(l(c.aa,c),d)}function Rg(c){c.D&&(s.clearTimeout(c.D),c.D=null)}hi.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(nk(this.i,this.B),this.M!=2&&(pc(),Ft(17)),lo(this),this.m=2,vc(this)):JD(this,this.T-c)};function vc(c){c.j.I==0||c.K||wC(c.j,c)}function lo(c){Rg(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,VD(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Ng(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||Mg(f.h,c))){if(!c.L&&Mg(f.h,c)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)$l(f),Ul(f);else break e;Fg(f),Ft(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=gc(l(f.Va,f),6e3));eC(f.h)<=1&&f.ta&&(f.ta=void 0)}else fo(f,11)}else if((c.L||f.g==c)&&$l(f),!E(d))for(b=f.Ba.g.parse(d),d=0;d<b.length;d++){let Ae=b[d],mt=Ae[0];if(!(mt<=f.K))if(f.K=mt,Ae=Ae[1],f.I==2)if(Ae[0]=="c"){f.M=Ae[1],f.ba=Ae[2];let cr=Ae[3];cr!=null&&(f.ka=cr,f.j.info("VER="+f.ka));let po=Ae[4];po!=null&&(f.za=po,f.j.info("SVER="+f.za));let mi=Ae[5];mi!=null&&typeof mi=="number"&&mi>0&&(g=1.5*mi,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let yi=c.g;if(yi){let ql=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var A=g.h;A.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Pg(A,A.h),A.h=null))}if(g.G){let Vg=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Vg&&(g.wa=Vg,Me(g.J,g.G,Vg))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var V=c;if(g.na=bC(g,g.L?g.ba:null,g.W),V.L){tC(g.h,V);var ae=V,ut=g.O;ut&&(ae.H=ut),ae.D&&(Rg(ae),Ol(ae)),g.g=V}else EC(g);f.i.length>0&&Bl(f)}else Ae[0]!="stop"&&Ae[0]!="close"||fo(f,7);else f.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?fo(f,7):Og(f):Ae[0]!="noop"&&f.l&&f.l.qa(Ae),f.A=0)}}pc(4)}catch{}}var ak=class{constructor(c,d){this.g=c,this.map=d}};function ZD(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function XD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eC(c){return c.h?1:c.g?c.g.size:0}function Mg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pg(c,d){c.g?c.g.add(d):c.h=d}function tC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ZD.prototype.cancel=function(){if(this.i=nC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function nC(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var rC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ck(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let g=c[f].indexOf("="),b,A=null;g>=0?(b=c[f].substring(0,g),A=c[f].substring(g+1)):b=c[f],d(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function fi(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof fi?(this.l=c.l,_c(this,c.j),this.o=c.o,this.g=c.g,Ec(this,c.u),this.h=c.h,xg(this,uC(c.i)),this.m=c.m):c&&(d=String(c).match(rC))?(this.l=!1,_c(this,d[1]||"",!0),this.o=Ic(d[2]||""),this.g=Ic(d[3]||"",!0),Ec(this,d[4]),this.h=Ic(d[5]||"",!0),xg(this,d[6]||"",!0),this.m=Ic(d[7]||"")):(this.l=!1,this.i=new Dc(null,this.l))}fi.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(wc(d,iC,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(wc(d,iC,!0),"@"),c.push(yc(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(wc(f,f.charAt(0)=="/"?dk:lk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",wc(f,fk)),c.join("")},fi.prototype.resolve=function(c){let d=ar(this),f=!!c.j;f?_c(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var g=c.h;if(f)Ec(d,c.u);else if(f=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let A=[];for(let V=0;V<b.length;){let ae=b[V++];ae=="."?g&&V==b.length&&A.push(""):ae==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),g&&V==b.length&&A.push("")):(A.push(ae),g=!0)}g=A.join("/")}else g=b}return f?d.h=g:f=c.i.toString()!=="",f?xg(d,uC(c.i)):f=!!c.m,f&&(d.m=c.m),d};function ar(c){return new fi(c)}function _c(c,d,f){c.j=f?Ic(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ec(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function xg(c,d,f){d instanceof Dc?(c.i=d,pk(c.i,c.l)):(f||(d=wc(d,hk)),c.i=new Dc(d,c.l))}function Me(c,d,f){c.i.set(d,f)}function Fl(c){return Me(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ic(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,uk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var iC=/[#\/\?@]/g,lk=/[#\?:]/g,dk=/[#\?]/g,hk=/[#\?@]/g,fk=/#/g;function Dc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ho(c){c.g||(c.g=new Map,c.h=0,c.i&&ck(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Dc.prototype,n.add=function(c,d){ho(this),this.i=null,c=Ts(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function oC(c,d){ho(c),d=Ts(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function sC(c,d){return ho(c),d=Ts(c,d),c.g.has(d)}n.forEach=function(c,d){ho(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)};function aC(c,d){ho(c);let f=[];if(typeof d=="string")sC(c,d)&&(f=f.concat(c.g.get(Ts(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}n.set=function(c,d){return ho(this),this.i=null,c=Ts(this,c),sC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=aC(this,c),c.length>0?String(c[0]):d):d};function cC(c,d,f){oC(c,d),f.length>0&&(c.i=null,c.g.set(Ts(c,d),y(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let b=yc(f);f=aC(this,f);for(let A=0;A<f.length;A++){let V=b;f[A]!==""&&(V+="="+yc(f[A])),c.push(V)}}return this.i=c.join("&")};function uC(c){let d=new Dc;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Ts(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function pk(c,d){d&&!c.j&&(ho(c),c.i=null,c.g.forEach(function(f,g){let b=g.toLowerCase();g!=b&&(oC(this,g),cC(this,b,f))},c)),c.j=d}function gk(c,d){let f=new mc;if(s.Image){let g=new Image;g.onload=h(pi,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(pi,f,"TestLoadImage: error",!1,d,g),g.onabort=h(pi,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(pi,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function mk(c,d){let f=new mc,g=new AbortController,b=setTimeout(()=>{g.abort(),pi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?pi(f,"TestPingServer: ok",!0,d):pi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),pi(f,"TestPingServer: error",!1,d)})}function pi(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function yk(){this.g=new Xx}function Ll(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Ll,jD),Ll.prototype.g=function(){return new Vl(this.i,this.h)};function Vl(c,d){At.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Vl,At),n=Vl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,bc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cc(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,bc(this)),this.g&&(this.readyState=3,bc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lC(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function lC(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Cc(this):bc(this),this.readyState==3&&lC(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Cc(this))},n.Na=function(c){this.g&&(this.response=c,Cc(this))},n.ga=function(){this.g&&Cc(this)};function Cc(c){c.readyState=4,c.l=null,c.j=null,c.B=null,bc(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function bc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dC(c){let d="";return Nl(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function kg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=dC(f),typeof c=="string"?f!=null&&yc(f):Me(c,d,f))}function He(c){At.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(He,At);var vk=/^https?$/i,_k=["POST","PUT"];n=He.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():GD.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){hC(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(_k,d,void 0)>=0)||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){hC(this,A)}};function hC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,fC(c),jl(c)}function fC(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ot(this,"complete"),Ot(this,"abort"),jl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),He.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?pC(this):this.Xa())},n.Xa=function(){pC(this)};function pC(c){if(c.h&&typeof o<"u"){if(c.v&&gi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ot(c,"readystatechange"),gi(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=A===0){let V=String(c.D).match(rC)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),g=!vk.test(V?V.toLowerCase():"")}f=g}if(f)Ot(c,"complete"),Ot(c,"success");else{c.o=6;try{var b=gi(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",fC(c)}}finally{jl(c)}}}}function jl(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||Ot(c,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(c){return c.g?c.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Zx(d)}};function gC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ek(c){let d={};c=(c.g&&gi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(E(c[g]))continue;var f=ik(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}Wx(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function mC(c){this.za=0,this.i=[],this.j=new mc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tc("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tc("baseRetryDelayMs",5e3,c),this.Za=Tc("retryDelaySeedMs",1e4,c),this.Ta=Tc("forwardChannelMaxRetries",2,c),this.va=Tc("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ZD(c&&c.concurrentRequestLimit),this.Ba=new yk,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=mC.prototype,n.ka=8,n.I=1,n.connect=function(c,d,f,g){Ft(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=bC(this,null,this.W),Bl(this)};function Og(c){if(yC(c),c.I==3){var d=c.V++,f=ar(c.J);if(Me(f,"SID",c.M),Me(f,"RID",d),Me(f,"TYPE","terminate"),Sc(c,f),d=new hi(c,c.j,d),d.M=2,d.A=Fl(ar(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=TC(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ol(d)}CC(c)}function Ul(c){c.g&&(Lg(c),c.g.cancel(),c.g=null)}function yC(c){Ul(c),c.v&&(s.clearTimeout(c.v),c.v=null),$l(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Bl(c){if(!XD(c.h)&&!c.m){c.m=!0;var d=c.Ea;Wt||_(),gt||(Wt(),gt=!0),D.add(d,c),c.D=0}}function Ik(c,d){return eC(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=gc(l(c.Ea,c,d),DC(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new hi(this,this.j,c),A=this.o;if(this.U&&(A?(A=AD(A),ND(A,this.U)):A=this.U),this.u!==null||this.R||(b.J=A,A=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=_C(this,b,d),f=ar(this.J),Me(f,"RID",c),Me(f,"CVER",22),this.G&&Me(f,"X-HTTP-Session-Id",this.G),Sc(this,f),A&&(this.R?d="headers="+yc(dC(A))+"&"+d:this.u&&kg(f,this.u,A)),Pg(this.h,b),this.Ra&&Me(f,"TYPE","init"),this.S?(Me(f,"$req",d),Me(f,"SID","null"),b.U=!0,Ag(b,f,null)):Ag(b,f,d),this.I=2}}else this.I==3&&(c?vC(this,c):this.i.length==0||XD(this.h)||vC(this))};function vC(c,d){var f;d?f=d.l:f=c.V++;let g=ar(c.J);Me(g,"SID",c.M),Me(g,"RID",f),Me(g,"AID",c.K),Sc(c,g),c.u&&c.o&&kg(g,c.u,c.o),f=new hi(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=_C(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Pg(c.h,f),Ag(f,g,d)}function Sc(c,d){c.H&&Nl(c.H,function(f,g){Me(d,g,f)}),c.l&&Nl({},function(f,g){Me(d,g,f)})}function _C(c,d,f){f=Math.min(c.i.length,f);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let ae=-1;for(;;){let ut=["count="+f];ae==-1?f>0?(ae=b[0].g,ut.push("ofs="+ae)):ae=0:ut.push("ofs="+ae);let Ae=!0;for(let mt=0;mt<f;mt++){var A=b[mt].g;let cr=b[mt].map;if(A-=ae,A<0)ae=Math.max(0,b[mt].g-100),Ae=!1;else try{A="req"+A+"_"||"";try{var V=cr instanceof Map?cr:Object.entries(cr);for(let[po,mi]of V){let yi=mi;a(mi)&&(yi=Dg(mi)),ut.push(A+po+"="+encodeURIComponent(yi))}}catch(po){throw ut.push(A+"type="+encodeURIComponent("_badmap")),po}}catch{g&&g(cr)}}if(Ae){V=ut.join("&");break e}}V=void 0}return c=c.i.splice(0,f),d.G=c,V}function EC(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Wt||_(),gt||(Wt(),gt=!0),D.add(d,c),c.A=0}}function Fg(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=gc(l(c.Da,c),DC(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,IC(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=gc(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),Ul(this),IC(this))};function Lg(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function IC(c){c.g=new hi(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=ar(c.na);Me(d,"RID","rpc"),Me(d,"SID",c.M),Me(d,"AID",c.K),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Me(d,"TO",c.ia),Me(d,"TYPE","xmlhttp"),Sc(c,d),c.u&&c.o&&kg(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=Fl(ar(d)),f.u=null,f.R=!0,QD(f,c)}n.Va=function(){this.C!=null&&(this.C=null,Ul(this),Fg(this),Ft(19))};function $l(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function wC(c,d){var f=null;if(c.g==d){$l(c),Lg(c),c.g=null;var g=2}else if(Mg(c.h,d))f=d.G,tC(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;g=xl(),Ot(g,new qD(g,f)),Bl(c)}else EC(c);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&Ik(c,d)||g==2&&Fg(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),b){case 1:fo(c,5);break;case 4:fo(c,10);break;case 3:fo(c,6);break;default:fo(c,2)}}}function DC(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function fo(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),g=c.Ua;let b=!g;g=new fi(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||_c(g,"https"),Fl(g),b?gk(g.toString(),f):mk(g.toString(),f)}else Ft(2);c.I=0,c.l&&c.l.pa(d),CC(c),yC(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function CC(c){if(c.I=0,c.ja=[],c.l){let d=nC(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ja,d),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function bC(c,d,f){var g=f instanceof fi?ar(f):new fi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ec(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let A=new fi(null);g&&_c(A,g),d&&(A.g=d),b&&Ec(A,b),f&&(A.h=f),g=A}return f=c.G,d=c.wa,f&&d&&Me(g,f,d),Me(g,"VER",c.ka),Sc(c,g),g}function TC(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new He(new Ll({ab:f})):new He(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function SC(){}n=SC.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hl(){}Hl.prototype.g=function(c,d){return new en(c,d)};function en(c,d){At.call(this),this.g=new mC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!E(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ss(this)}p(en,At),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Og(this.g)},en.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=Dg(c),c=f);d.i.push(new ak(d.Ya++,c)),d.I==3&&Bl(d)},en.prototype.N=function(){this.g.l=null,delete this.j,Og(this.g),delete this.g,en.Z.N.call(this)};function AC(c){Cg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(AC,Cg);function RC(){bg.call(this),this.status=1}p(RC,bg);function Ss(c){this.g=c}p(Ss,SC),Ss.prototype.ra=function(){Ot(this.g,"a")},Ss.prototype.qa=function(c){Ot(this.g,new AC(c))},Ss.prototype.pa=function(c){Ot(this.g,new RC)},Ss.prototype.oa=function(){Ot(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,cI=ti.createWebChannelTransport=function(){return new Hl},aI=ti.getStatEventTarget=function(){return xl()},sI=ti.Event=uo,vp=ti.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kl.NO_ERROR=0,kl.TIMEOUT=8,kl.HTTP_ERROR=6,ul=ti.ErrorCode=kl,zD.COMPLETE="complete",oI=ti.EventType=zD,UD.EventType=fc,fc.OPEN="a",fc.CLOSE="b",fc.ERROR="c",fc.MESSAGE="d",At.prototype.listen=At.prototype.J,ka=ti.WebChannel=UD,Eq=ti.FetchXmlHttpFactory=Ll,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,iI=ti.XhrIo=He}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});var uM="@firebase/firestore",lM="4.9.2";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var ic="12.3.0";var ys=new Sr("@firebase/firestore");function Oa(){return ys.logLevel}function $(n,...e){if(ys.logLevel<=he.DEBUG){let t=e.map(Yw);ys.debug(`Firestore (${ic}): ${n}`,...t)}}function ii(n,...e){if(ys.logLevel<=he.ERROR){let t=e.map(Yw);ys.error(`Firestore (${ic}): ${n}`,...t)}}function Ha(n,...e){if(ys.logLevel<=he.WARN){let t=e.map(Yw);ys.warn(`Firestore (${ic}): ${n}`,...t)}}function Yw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Y(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ZM(n,r,t)}function ZM(n,e,t){let r=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ii(r),new Error(r)}function Se(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||ZM(e,i,r)}function ne(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ni=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},gI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},mI=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ni,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ni)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new bp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Et(e)}},yI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},vI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Tp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_I=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0,3512);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Tp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Iq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var gl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Iq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function EI(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return uI(i)===uI(o)?ge(i,o):uI(i)?1:-1}return ge(n.length,e.length)}var wq=55296,Dq=57343;function uI(n){let e=n.charCodeAt(0);return e>=wq&&e<=Dq}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var dM="__name__",Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Y(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):EI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}},$e=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Cq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vn=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Cq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dM}static keyField(){return new n([dM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n($e.fromString(e))}static fromName(e){return new n($e.fromString(e).popFirst(5))}static empty(){return new n($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new $e(e.slice()))}};function XM(n,e,t){if(!t)throw new z(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bq(n,e,t,r){if(e===!0&&r===!0)throw new z(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hM(n){if(!W.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fM(n){if(W.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y(12329,{type:typeof n})}function Ji(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jw(n);throw new z(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function at(n,e){let t={typeString:n};return e&&(t.value=e),t}function Tl(n,e){if(!eP(n))throw new z(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(O.INVALID_ARGUMENT,t);return!0}var pM=-62135596800,gM=1e6,ct=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pM)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gM}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:at("string",ct._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};var ie=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ct(0,0))}static max(){return new n(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ml=-1,II=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};II.UNKNOWN_ID=-1;function Tq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new vs(i,W.empty(),e)}function Sq(n){return new vs(n.readTime,n.key,ml)}var vs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),W.empty(),ml)}static max(){return new n(ie.max(),W.empty(),ml)}};function Aq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var Rq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function oc(n){return v(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==Rq)throw n;$("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Nq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sc(n){return n.name==="IndexedDbTransactionError"}var Zw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Xw=-1;function ig(n){return n==null}function yl(n){return n===0&&1/n==-1/0}function Mq(n){return typeof n=="number"&&Number.isInteger(n)&&!yl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var tP="";function Pq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mM(e)),e=xq(n.get(t),e);return mM(e)}function xq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case tP:t+="";break;default:t+=o}}return t}function mM(n){return n+tP+""}var kq="remoteDocuments",nP="owner";var rP="mutationQueues";var iP="mutations";var oP="documentMutations",Oq="remoteDocumentsV14";var sP="remoteDocumentGlobal";var aP="targets";var cP="targetDocuments";var uP="targetGlobal",lP="collectionParents";var dP="clientMetadata";var hP="bundles";var fP="namedQueries";var Fq="indexConfiguration";var Lq="indexState";var Vq="indexEntries";var pP="documentOverlays";var jq="globals";var Uq=[rP,iP,oP,kq,aP,nP,uP,cP,dP,sP,lP,hP,fP],iae=[...Uq,pP],Bq=[rP,iP,oP,Oq,aP,nP,uP,cP,dP,sP,lP,hP,fP,pP],$q=Bq,Hq=[...$q,Fq,Lq,Vq];var oae=[...Hq,jq];function yM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||Mr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ja(this.root,e,this.comparator,!0)}},ja=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Mr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var It=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ap=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class n{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new n([])}unionWith(e){let t=new It(vn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Rp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var qq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(n){if(Se(!!n,39018),typeof n=="string"){let e=0,t=qq.exec(n);if(Se(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function si(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}var mP="server_timestamp",yP="__type__",vP="__previous_value__",_P="__local_write_time__";function eD(n){return(n?.mapValue?.fields||{})[yP]?.stringValue===mP}function og(n){let e=n.mapValue.fields[vP];return eD(e)?og(e):e}function vl(n){let e=oi(n.mapValue.fields[_P].timestampValue);return new ct(e.seconds,e.nanos)}var DI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Np="(default)",Mp=class n{constructor(e,t){this.projectId=e,this.database=t||Np}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Np}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var tD="__type__",EP="__max__",_p={mapValue:{fields:{__type__:{stringValue:EP}}}},nD="__vector__",za="value";function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eD(n)?4:wP(n)?9007199254740991:IP(n)?10:11:Y(28295,{value:n})}function kr(n,e){if(n===e)return!0;let t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vl(n).isEqual(vl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=oi(i.timestampValue),a=oi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return si(i.bytesValue).isEqual(si(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?yl(s)===yl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yM(s)!==yM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!kr(s[u],a[u])))return!1;return!0})(n,e);default:return Y(52216,{left:n})}}function _l(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function Ga(n,e){if(n===e)return 0;let t=no(n),r=no(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return vM(n.timestampValue,e.timestampValue);case 4:return vM(vl(n),vl(e));case 5:return EI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=si(o),u=si(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ge(Fe(o.latitude),Fe(s.latitude));return a!==0?a:ge(Fe(o.longitude),Fe(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return _M(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[za]?.arrayValue,h=u[za]?.arrayValue,p=ge(l?.values?.length||0,h?.values?.length||0);return p!==0?p:_M(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===_p.mapValue&&s===_p.mapValue)return 0;if(o===_p.mapValue)return 1;if(s===_p.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=EI(u[p],h[p]);if(m!==0)return m;let y=Ga(a[u[p]],l[h[p]]);if(y!==0)return y}return ge(u.length,h.length)})(n.mapValue,e.mapValue);default:throw Y(23264,{he:t})}}function vM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=oi(n),r=oi(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function _M(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ga(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function Wa(n){return CI(n)}function CI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return si(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return W.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=CI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${CI(t.fields[s])}`;return i+"}"})(n.mapValue):Y(61005,{value:n})}function wp(n){switch(no(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=og(n);return e?16+wp(e):16;case 5:return 2*n.stringValue.length;case 6:return si(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+wp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return so(r.fields,(o,s)=>{i+=o.length+wp(s)}),i})(n.mapValue);default:throw Y(13486,{value:n})}}function bI(n){return!!n&&"integerValue"in n}function rD(n){return!!n&&"arrayValue"in n}function EM(n){return!!n&&"nullValue"in n}function IM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dp(n){return!!n&&"mapValue"in n}function IP(n){return(n?.mapValue?.fields||{})[tD]?.stringValue===nD}function dl(n){if(n.geoPointValue)return{geoPointValue:M({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:M({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return so(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dl(n.arrayValue.values[t]);return e}return M({},n)}function wP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===EP}var aae={mapValue:{fields:{[tD]:{stringValue:nD},[za]:{arrayValue:{}}}}};var yn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(t)}setAll(e){let t=vn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=dl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){so(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(dl(this.value))}};function DP(n){let e=[];return so(n.fields,(t,r)=>{let i=new vn([t]);if(Dp(r)){let o=DP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new xn(e)}var ir=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),yn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ka=class{constructor(e,t){this.position=e,this.inclusive=t}};function wM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=Ga(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function DM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}var Qa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function zq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pp=class{},pt=class n extends Pp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SI(e,t,r):t==="array-contains"?new NI(e,r):t==="in"?new MI(e,r):t==="not-in"?new PI(e,r):t==="array-contains-any"?new xI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new AI(e,r):new RI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ga(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(Ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Or=class n extends Pp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return CP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function CP(n){return n.op==="and"}function bP(n){return Gq(n)&&CP(n)}function Gq(n){for(let e of n.filters)if(e instanceof Or)return!1;return!0}function TI(n){if(n instanceof pt)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(bP(n))return n.filters.map(e=>TI(e)).join(",");{let e=n.filters.map(t=>TI(t)).join(",");return`${n.op}(${e})`}}function TP(n,e){return n instanceof pt?(function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)})(n,e):n instanceof Or?(function(r,i){return i instanceof Or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&TP(s,i.filters[a]),!0):!1})(n,e):void Y(19439)}function SP(n){return n instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof Or?(function(t){return t.op.toString()+" {"+t.getFilters().map(SP).join(" ,")+"}"})(n):"Filter"}var SI=class extends pt{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},AI=class extends pt{constructor(e,t){super(e,"in",t),this.keys=AP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RI=class extends pt{constructor(e,t){super(e,"not-in",t),this.keys=AP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AP(n,e){return(e.arrayValue?.values||[]).map(t=>W.fromName(t.referenceValue))}var NI=class extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rD(t)&&_l(t.arrayValue,this.value)}},MI=class extends pt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_l(this.value.arrayValue,t)}},PI=class extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_l(this.value.arrayValue,t)}},xI=class extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_l(this.value.arrayValue,r))}};var kI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function CM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new kI(n,e,t,r,i,o,s)}function iD(n){let e=ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wa(r)).join(",")),e.Te=t}return e.Te}function oD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DM(n.startAt,e.startAt)&&DM(n.endAt,e.endAt)}function OI(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ya=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Wq(n,e,t,r,i,o,s,a){return new Ya(n,e,t,r,i,o,s,a)}function sD(n){return new Ya(n)}function bM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kq(n){return n.collectionGroup!==null}function hl(n){let e=ne(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new It(vn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Qa(o,r))}),t.has(vn.keyField().canonicalString())||e.Ie.push(new Qa(vn.keyField(),r))}return e.Ie}function Pr(n){let e=ne(n);return e.Ee||(e.Ee=Qq(e,hl(n))),e.Ee}function Qq(n,e){if(n.limitType==="F")return CM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Qa(i.field,o)});let t=n.endAt?new Ka(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ka(n.startAt.position,n.startAt.inclusive):null;return CM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function FI(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sg(n,e){return oD(Pr(n),Pr(e))&&n.limitType===e.limitType}function RP(n){return`${iD(Pr(n))}|lt:${n.limitType}`}function Fa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SP(i)).join(", ")}]`),ig(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wa(i)).join(",")),`Target(${r})`})(Pr(n))}; limitType=${n.limitType})`}function ag(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of hl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=wM(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,hl(r),i)||r.endAt&&!(function(s,a,u){let l=wM(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,hl(r),i))})(n,e)}function Yq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NP(n){return(e,t)=>{let r=!1;for(let i of hl(n)){let o=Jq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Jq(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ga(u,l):Y(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:n.dir})}}var ai=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return gP(this.inner)}size(){return this.innerSize}};var Zq=new Qe(W.comparator);function ci(){return Zq}var MP=new Qe(W.comparator);function ll(...n){let e=MP;for(let t of n)e=e.insert(t.key,t);return e}function PP(n){let e=MP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fs(){return fl()}function xP(){return fl()}function fl(){return new ai(n=>n.toString(),(n,e)=>n.isEqual(e))}var Xq=new Qe(W.comparator),e3=new It(W.comparator);function me(...n){let e=e3;for(let t of n)e=e.add(t);return e}var t3=new It(ge);function n3(){return t3}function aD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function kP(n){return{integerValue:""+n}}function r3(n,e){return Mq(e)?kP(e):aD(n,e)}var Ja=class{constructor(){this._=void 0}};function i3(n,e,t){return n instanceof Za?(function(i,o){let s={fields:{[yP]:{stringValue:mP},[_P]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&eD(o)&&(o=og(o)),o&&(s.fields[vP]=o),{mapValue:s}})(t,e):n instanceof _s?FP(n,e):n instanceof Es?LP(n,e):(function(i,o){let s=OP(i,o),a=TM(s)+TM(i.Ae);return bI(s)&&bI(i.Ae)?kP(a):aD(i.serializer,a)})(n,e)}function o3(n,e,t){return n instanceof _s?FP(n,e):n instanceof Es?LP(n,e):t}function OP(n,e){return n instanceof Xa?(function(r){return bI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Za=class extends Ja{},_s=class extends Ja{constructor(e){super(),this.elements=e}};function FP(n,e){let t=VP(e);for(let r of n.elements)t.some(i=>kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Es=class extends Ja{constructor(e){super(),this.elements=e}};function LP(n,e){let t=VP(e);for(let r of n.elements)t=t.filter(i=>!kr(i,r));return{arrayValue:{values:t}}}var Xa=class extends Ja{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function TM(n){return Fe(n.integerValue||n.doubleValue)}function VP(n){return rD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s3(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof _s&&i instanceof _s||r instanceof Es&&i instanceof Es?qa(r.elements,i.elements,kr):r instanceof Xa&&i instanceof Xa?kr(r.Ae,i.Ae):r instanceof Za&&i instanceof Za})(n.transform,e.transform)}var LI=class{constructor(e,t){this.version=e,this.transformResults=t}},ri=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ec=class{};function jP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new El(n.key,ri.none()):new Is(n.key,n.data,ri.none());{let t=n.data,r=yn.empty(),i=new It(vn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Fr(n.key,r,new xn(i.toArray()),ri.none())}}function a3(n,e,t){n instanceof Is?(function(i,o,s){let a=i.value.clone(),u=AM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Fr?(function(i,o,s){if(!Cp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=AM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(UP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function pl(n,e,t,r){return n instanceof Is?(function(o,s,a,u){if(!Cp(o.precondition,s))return a;let l=o.value.clone(),h=RM(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fr?(function(o,s,a,u){if(!Cp(o.precondition,s))return a;let l=RM(o.fieldTransforms,u,s),h=s.data;return h.setAll(UP(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Cp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function c3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=OP(r.transform,i||null);o!=null&&(t===null&&(t=yn.empty()),t.set(r.field,o))}return t||null}function SM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(o,s)=>s3(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Is=class extends ec{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fr=class extends ec{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function UP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function AM(n,e,t){let r=new Map;Se(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,o3(s,a,t[i]))}return r}function RM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,i3(o,s,e))}return r}var El=class extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},VI=class extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&a3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=pl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=pl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=jP(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>SM(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>SM(t,r))}},UI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Xq})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var BI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $I=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,ye;function u3(n){switch(n){case O.OK:return Y(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Y(15467,{code:n})}}function BP(n){if(n===void 0)return ii("GRPC error has no .code"),O.UNKNOWN;switch(n){case ot.OK:return O.OK;case ot.CANCELLED:return O.CANCELLED;case ot.UNKNOWN:return O.UNKNOWN;case ot.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case ot.INTERNAL:return O.INTERNAL;case ot.UNAVAILABLE:return O.UNAVAILABLE;case ot.UNAUTHENTICATED:return O.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case ot.NOT_FOUND:return O.NOT_FOUND;case ot.ALREADY_EXISTS:return O.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return O.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case ot.ABORTED:return O.ABORTED;case ot.OUT_OF_RANGE:return O.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return O.UNIMPLEMENTED;case ot.DATA_LOSS:return O.DATA_LOSS;default:return Y(39323,{code:n})}}(ye=ot||(ot={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var l3=null;function d3(){return new TextEncoder}var h3=new ei([4294967295,4294967295],0);function NM(n){let e=d3().encode(n),t=new rI;return t.update(e),new Uint8Array(t.digest())}function MM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ei([t,r],0),new ei([i,o],0)]}var HI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ps(`Invalid padding: ${t}`);if(r<0)throw new ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ps(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ps(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ei.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ei.fromNumber(r)));return i.compare(h3)===1&&(i=new ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=NM(e),[r,i]=MM(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=NM(e),[r,i]=MM(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ps=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new Qe(ge),ci(),me())}},Il=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var Ua=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},kp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Op=class{constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Fp=class{constructor(){this.ve=0,this.Fe=PM(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),t=me(),r=me();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Il(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=PM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},qI=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=Ep(),this.He=Ep(),this.Ye=new Qe(ge)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(OI(o))if(r===0){let s=new W(o.path);this.et(t,s,ir.newNoDocument(s,ie.min()))}else Se(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}l3?.lt((function(h,p,m,y,S){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(P.bloomFilter={applied:S===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:j=>y?.mightContain(j)??!1}),P})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=si(r).toUint8Array()}catch(u){if(u instanceof Rp)return Ha("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new HI(s,i,o)}catch(u){return Ha(u instanceof ps?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&OI(a.target)){let u=new W(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,ir.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=me();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new xp(e,t,this.Ye,this.je,r);return this.je=ci(),this.Je=Ep(),this.He=Ep(),this.Ye=new Qe(ge),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Fp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(ge),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fp),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ep(){return new Qe(W.comparator)}function PM(){return new Qe(W.comparator)}var f3={asc:"ASCENDING",desc:"DESCENDING"},p3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g3={and:"AND",or:"OR"},zI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function GI(n,e){return n.useProto3Json||ig(e)?e:{value:e}}function Lp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $P(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m3(n,e){return Lp(n,e.toTimestamp())}function xr(n){return Se(!!n,49232),ie.fromTimestamp((function(t){let r=oi(t);return new ct(r.seconds,r.nanos)})(n))}function cD(n,e){return WI(n,e).canonicalString()}function WI(n,e){let t=(function(i){return new $e(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function HP(n){let e=$e.fromString(n);return Se(KP(e),10190,{key:e.toString()}),e}function KI(n,e){return cD(n.databaseId,e.path)}function lI(n,e){let t=HP(e);if(t.get(1)!==n.databaseId.projectId)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(zP(t))}function qP(n,e){return cD(n.databaseId,e)}function y3(n){let e=HP(n);return e.length===4?$e.emptyPath():zP(e)}function QI(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zP(n){return Se(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xM(n,e,t){return{name:KI(n,e),fields:t.value.mapValue.fields}}function v3(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Se(h===void 0||typeof h=="string",58123),xt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),xt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?O.UNKNOWN:BP(l.code);return new z(h,l.message||"")})(s);t=new Op(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lI(n,r.document.name),o=xr(r.document.updateTime),s=r.document.createTime?xr(r.document.createTime):ie.min(),a=new yn({mapValue:{fields:r.document.fields}}),u=ir.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ua(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lI(n,r.document),o=r.readTime?xr(r.readTime):ie.min(),s=ir.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lI(n,r.document),o=r.removedTargetIds||[];t=new Ua([],o,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new $I(i,o),a=r.targetId;t=new kp(a,s)}}return t}function _3(n,e){let t;if(e instanceof Is)t={update:xM(n,e.key,e.value)};else if(e instanceof El)t={delete:KI(n,e.key)};else if(e instanceof Fr)t={update:xM(n,e.key,e.data),updateMask:A3(e.fieldMask)};else{if(!(e instanceof VI))return Y(16599,{Vt:e.type});t={verify:KI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Za)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Es)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xa)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Y(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:m3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)})(n,e.precondition)),t}function E3(n,e){return n&&n.length>0?(Se(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?xr(i.updateTime):xr(o);return s.isEqual(ie.min())&&(s=xr(o)),new LI(s,i.transformResults||[])})(t,e))):[]}function I3(n,e){return{documents:[qP(n,e.path)]}}function w3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qP(n,i);let o=(function(l){if(l.length!==0)return WP(Or.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:La(m.field),direction:b3(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=GI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function D3(n){let e=y3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Se(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=GP(p);return m instanceof Or&&bP(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Qa(Va(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,ig(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Ka(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Ka(y,m)})(t.endAt)),Wq(e,i,s,o,a,"F",u,l)}function C3(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Va(t.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Va(t.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Va(t.unaryFilter.field);return pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Va(t.unaryFilter.field);return pt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}})(n):n.fieldFilter!==void 0?(function(t){return pt.create(Va(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Or.create(t.compositeFilter.filters.map(r=>GP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}})(t.compositeFilter.op))})(n):Y(30097,{filter:n})}function b3(n){return f3[n]}function T3(n){return p3[n]}function S3(n){return g3[n]}function La(n){return{fieldPath:n.canonicalString()}}function Va(n){return vn.fromServerFormat(n.fieldPath)}function WP(n){return n instanceof pt?(function(t){if(t.op==="=="){if(IM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NAN"}};if(EM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NAN"}};if(EM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(t.field),op:T3(t.op),value:t.value}}})(n):n instanceof Or?(function(t){let r=t.getFilters().map(i=>WP(i));return r.length===1?r[0]:{compositeFilter:{op:S3(t.op),filters:r}}})(n):Y(54877,{filter:n})}function A3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var wl=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var YI=class{constructor(e){this.yt=e}};function R3(n){let e=D3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?FI(e,e.limit,"L"):e}var Vp=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),yl(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=oi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(si(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?wP(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):IP(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Y(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=za,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Fe(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),W.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Vp.Kt=new Vp;var JI=class{constructor(){this.Cn=new ZI}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(vs.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},ZI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new It($e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It($e.comparator)).toArray()}};var cae=new Uint8Array(0);var kM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QP=41943040,Pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(QP,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var Dl=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var OM="LruGarbageCollector",N3=1048576;function FM([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var XI=class{constructor(e){this.Ir=e,this.buffer=new It(FM),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();FM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ew=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(OM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){sc(t)?$(OM,"Ignoring IndexedDB error during garbage collection: ",t):yield oc(t)}yield this.Vr(3e5)}))}},tw=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Zw.ce);let r=new XI(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(kM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kM):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Oa()<=he.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function M3(n,e){return new tw(n,e)}var nw=class{constructor(){this.changes=new ai(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var iw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pl(r.mutation,i,xn.empty(),ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=fs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ll();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=fs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ci(),s=fl(),a=(function(){return fl()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Fr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),pl(h.mutation,l,h.mutation.getFieldMask(),ct.now())):s.set(l.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new rw(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=fl(),i=new Qe((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||xn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||me()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=xP();h.forEach(m=>{if(!o.has(m)){let y=jP(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(fs()),a=ml,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,me())).next(h=>({batchId:a,changes:PP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ll();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=(function(p,m){return new Ya(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ir.newInvalidDocument(h)))});let a=ll();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&pl(h.mutation,l,xn.empty(),ct.now()),ag(t,l)&&(a=a.insert(u,l))}),a})}};var ow=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:xr(i.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:R3(i.bundledQuery),readTime:xr(i.readTime)}})(t)),L.resolve()}};var sw=class{constructor(){this.overlays=new Qe(W.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fs();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=fs(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Qe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=fs(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=fs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new BI(t,r));let o=this.qr.get(t);o===void 0&&(o=me(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var aw=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Cl=class{constructor(){this.Qr=new It(st.$r),this.Ur=new It(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new st(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new st(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new W(new $e([])),r=new st(t,e),i=new st(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new W(new $e([])),r=new st(t,e),i=new st(t,e+1),o=me();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new st(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return W.comparator(e.key,t.key)||ge(e.Yr,t.Yr)}static Kr(e,t){return ge(e.Yr,t.Yr)||W.comparator(e.key,t.key)}};var cw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(st.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new jI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Xw:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new It(ge);return t.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new st(new W(o),0),a=new It(ge);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),L.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(t.mutations,i=>{let o=new st(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new st(t,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var uw=class{constructor(e){this.ri=e,this.docs=(function(){return new Qe(W.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=ci();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ir.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ci(),s=t.path,a=new W(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Aq(Sq(h),r)<=0||(i.has(h.key)||ag(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y(9500)}ii(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lw(this)}getSize(e){return L.resolve(this.size)}},lw=class extends nw{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var dw=class{constructor(e){this.persistence=e,this.si=new ai(t=>iD(t),oD),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Cl,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}};var jp=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zw(0),this.li=!1,this.li=!0,this.hi=new aw,this.referenceDelegate=e(this),this.Pi=new dw(this),this.indexManager=new JI,this.remoteDocumentCache=(function(i){return new uw(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new YI(t),this.Ii=new ow(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new cw(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new hw(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},hw=class extends wI{constructor(e){super(),this.currentSequenceNumber=e}},fw=class n{constructor(e){this.persistence=e,this.Ri=new Cl,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{let i=W.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Up=class n{constructor(e,t){this.persistence=e,this.pi=new ai(r=>Pq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=M3(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wp(e.data.value)),t}br(e,t,r){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var pw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=me(),i=me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var gw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mw=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PR()?8:Nq(_t())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new gw;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Oa()<=he.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Oa()<=he.DEBUG&&$("QueryEngine","Query:",Fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Oa()<=he.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):L.resolve())}ys(e,t){if(bM(t))return L.resolve(null);let r=Pr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=FI(t,null,"F"),r=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=me(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,FI(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return bM(t)||i.isEqual(ie.min())?L.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?L.resolve(null):(Oa()<=he.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(t)),this.vs(e,s,t,Tq(i,ml)).next(a=>a))})}Ds(e,t){let r=new It(NP(e));return t.forEach((i,o)=>{ag(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Oa()<=he.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Fa(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var uD="LocalStore",P3=3e8,yw=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Qe(ge),this.xs=new ai(o=>iD(o),oD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function x3(n,e,t,r){return new yw(n,e,t,r)}function YP(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=me();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function k3(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=L.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let N=l.docVersions.get(S);Se(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=me();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function JP(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function O3(n,e){let t=ne(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(xt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,N,j){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=P3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=ci(),l=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(F3(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(ie.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function F3(n,e,t){let r=me(),i=me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ci();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):$(uD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function L3(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V3(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new wl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function vw(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!sc(s))throw s;$(uD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function LM(n,e,t){let r=ne(n),i=ie.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),m=p.xs.get(h);return m!==void 0?L.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,s,Pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:me())).next(a=>(j3(r,Yq(e),a),{documents:a,Qs:o})))}function j3(n,e,t){let r=n.Os.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Bp=class{constructor(){this.activeTargetIds=n3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _w=class{constructor(){this.Mo=new Bp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ew=class{Oo(e){}shutdown(){}};var VM="ConnectivityMonitor",$p=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(VM,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){$(VM,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ip=null;function Iw(){return Ip===null?Ip=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ip++,"0x"+Ip.toString(16)}var dI="RestConnection",U3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ww=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Np?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Iw(),a=this.zo(e,t.toUriEncodedString());$(dI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=Ui(l);return this.Jo(e,a,u,r,h).then(p=>($(dI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ha(dI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ic})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=U3[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Dw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Mt="WebChannelConnection",Cw=class extends ww{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Iw();return new Promise((a,u)=>{let l=new iI;l.setWithCredentials(!0),l.listenOnce(oI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ul.NO_ERROR:let p=l.getResponseJson();$(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case ul.TIMEOUT:$(Mt,`RPC '${e}' ${s} timed out`),u(new z(O.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:let m=l.getStatus();if($(Mt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let P=(function(j){let oe=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(oe)>=0?oe:O.UNKNOWN})(S.status);u(new z(P,S.message))}else u(new z(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(O.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{$(Mt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(Mt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Iw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cI(),a=aI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");$(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,y=!1,S=new Dw({Yo:N=>{y?$(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||($(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),$(Mt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),P=(N,j,oe)=>{N.listen(j,fe=>{try{oe(fe)}catch(kt){setTimeout(()=>{throw kt},0)}})};return P(p,ka.EventType.OPEN,()=>{y||($(Mt,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),P(p,ka.EventType.CLOSE,()=>{y||(y=!0,$(Mt,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),P(p,ka.EventType.ERROR,N=>{y||(y=!0,Ha(Mt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.a_(new z(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,ka.EventType.MESSAGE,N=>{if(!y){let j=N.data[0];Se(!!j,16349);let oe=j,fe=oe?.error||oe[0]?.error;if(fe){$(Mt,`RPC '${e}' stream ${i} received error:`,fe);let kt=fe.status,Wt=(function(_){let I=ot[_];if(I!==void 0)return BP(I)})(kt),gt=fe.message;Wt===void 0&&(Wt=O.INTERNAL,gt="Unknown error status: "+kt+" with message "+fe.message),y=!0,S.a_(new z(Wt,gt)),p.close()}else $(Mt,`RPC '${e}' stream ${i} received:`,j),S.u_(j)}}),P(a,sI.STAT_EVENT,N=>{N.stat===vp.PROXY?$(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===vp.NOPROXY&&$(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function hI(){return typeof document<"u"?document:null}function cg(n){return new zI(n,!0)}var Hp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var jM="PersistentStream",qp=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return v(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return v(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new z(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>v(this,null,function*(){this.state=0,this.start()}))}z_(e){return $(jM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():($(jM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bw=class extends qp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=v3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?xr(s.readTime):ie.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=QI(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=OI(u)?{documents:I3(o,u)}:{query:w3(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$P(o,s.resumeToken);let l=GI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Lp(o,s.snapshotVersion.toTimestamp());let l=GI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=C3(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=QI(this.serializer),t.removeTarget=e,this.q_(t)}},Tw=class extends qp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=E3(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=QI(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_3(this.serializer,r))};this.q_(t)}};var Sw=class{},Aw=class extends Sw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,WI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(O.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,WI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(O.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Rw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ii(t),this.aa=!1):$("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ws="RemoteStore",Nw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Ds(this)&&($(ws,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=ne(u);l.Ea.add(4),yield Sl(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield ug(l)})})(this))}))}),this.Ra=new Rw(r,i)}};function ug(n){return v(this,null,function*(){if(Ds(n))for(let e of n.da)yield e(!0)})}function Sl(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function ZP(n,e){let t=ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),fD(t)?hD(t):ac(t).O_()&&dD(t,e))}function lD(n,e){let t=ne(n),r=ac(t);t.Ia.delete(e),r.O_()&&XP(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ds(t)&&t.Ra.set("Unknown"))}function dD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ac(n).Y_(e)}function XP(n,e){n.Va.Ue(e),ac(n).Z_(e)}function hD(n){n.Va=new qI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ac(n).start(),n.Ra.ua()}function fD(n){return Ds(n)&&!ac(n).x_()&&n.Ia.size>0}function Ds(n){return ne(n).Ea.size===0}function ex(n){n.Va=void 0}function B3(n){return v(this,null,function*(){n.Ra.set("Online")})}function $3(n){return v(this,null,function*(){n.Ia.forEach((e,t)=>{dD(n,e)})})}function H3(n,e){return v(this,null,function*(){ex(n),fD(n)?(n.Ra.ha(e),hD(n)):n.Ra.set("Unknown")})}function q3(n,e,t){return v(this,null,function*(){if(n.Ra.set("Online"),e instanceof Op&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){$(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zp(n,r)}else if(e instanceof Ua?n.Va.Ze(e):e instanceof kp?n.Va.st(e):n.Va.tt(e),!t.isEqual(ie.min()))try{let r=yield JP(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),XP(o,u);let p=new wl(h.target,u,l,h.sequenceNumber);dD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){$(ws,"Failed to raise snapshot:",r),yield zp(n,r)}})}function zp(n,e,t){return v(this,null,function*(){if(!sc(e))throw e;n.Ea.add(1),yield Sl(n),n.Ra.set("Offline"),t||(t=()=>JP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){$(ws,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield ug(n)}))})}function tx(n,e){return e().catch(t=>zp(n,t,e))}function lg(n){return v(this,null,function*(){let e=ne(n),t=ro(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xw;for(;z3(e);)try{let i=yield L3(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,G3(e,i)}catch(i){yield zp(e,i)}nx(e)&&rx(e)})}function z3(n){return Ds(n)&&n.Ta.length<10}function G3(n,e){n.Ta.push(e);let t=ro(n);t.O_()&&t.X_&&t.ea(e.mutations)}function nx(n){return Ds(n)&&!ro(n).x_()&&n.Ta.length>0}function rx(n){ro(n).start()}function W3(n){return v(this,null,function*(){ro(n).ra()})}function K3(n){return v(this,null,function*(){let e=ro(n);for(let t of n.Ta)e.ea(t.mutations)})}function Q3(n,e,t){return v(this,null,function*(){let r=n.Ta.shift(),i=UI.from(r,e,t);yield tx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield lg(n)})}function Y3(n,e){return v(this,null,function*(){e&&ro(n).X_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return u3(s)&&s!==O.ABORTED})(i.code)){let o=r.Ta.shift();ro(r).B_(),yield tx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield lg(r)}})})(n,e)),nx(n)&&rx(n)})}function UM(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),$(ws,"RemoteStore received new credentials");let r=Ds(t);t.Ea.add(3),yield Sl(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield ug(t)})}function J3(n,e){return v(this,null,function*(){let t=ne(n);e?(t.Ea.delete(2),yield ug(t)):e||(t.Ea.add(2),yield Sl(t),t.Ra.set("Unknown"))})}function ac(n){return n.ma||(n.ma=(function(t,r,i){let o=ne(t);return o.sa(),new bw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:B3.bind(null,n),t_:$3.bind(null,n),r_:H3.bind(null,n),H_:q3.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.B_(),fD(n)?hD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),ex(n))}))),n.ma}function ro(n){return n.fa||(n.fa=(function(t,r,i){let o=ne(t);return o.sa(),new Tw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:W3.bind(null,n),r_:Y3.bind(null,n),ta:K3.bind(null,n),na:Q3.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.fa.B_(),yield lg(n)):(yield n.fa.stop(),n.Ta.length>0&&($(ws,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Mw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pD(n,e){if(ii("AsyncQueue",`${e}: ${n}`),sc(n))return new z(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Gp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=ll(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Wp=class{constructor(){this.ga=new Qe(W.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},tc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Gp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Pw=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},xw=class{constructor(){this.queries=BM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ne(t),o=i.queries;i.queries=BM(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new z(O.ABORTED,"Firestore shutting down"))}};function BM(){return new ai(n=>RP(n),sg)}function Z3(n,e){return v(this,null,function*(){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Pw,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=pD(s,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&gD(t)})}function X3(n,e){return v(this,null,function*(){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ez(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&gD(t)}function tz(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function gD(n){n.Ca.forEach(e=>{e.next()})}var kw,$M;($M=kw||(kw={})).Ma="default",$M.Cache="cache";var Ow=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kw.Cache}};var Kp=class{constructor(e){this.key=e}},Qp=class{constructor(e){this.key=e}},Fw=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=NP(e),this.tu=new Gp(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Wp,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=ag(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:N})}};return P(y)-P(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new tc(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Qp(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Kp(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=me();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},mD="SyncEngine",Lw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Vw=class{constructor(e){this.key=e,this.hu=!1}},jw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ai(a=>RP(a),sg),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(W.comparator),this.Au=new Map,this.Ru=new Cl,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function nz(n,e,t=!0){return v(this,null,function*(){let r=ux(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield ix(r,e,t,!0),i})}function rz(n,e){return v(this,null,function*(){let t=ux(n);yield ix(t,e,!0,!1)})}function ix(n,e,t,r){return v(this,null,function*(){let i=yield V3(n.localStore,Pr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield iz(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&ZP(n.remoteStore,i),a})}function iz(n,e,t,r,i){return v(this,null,function*(){n.pu=(p,m,y)=>(function(P,N,j,oe){return v(this,null,function*(){let fe=N.view.ru(j);fe.Cs&&(fe=yield LM(P.localStore,N.query,!1).then(({documents:D})=>N.view.ru(D,fe)));let kt=oe&&oe.targetChanges.get(N.targetId),Wt=oe&&oe.targetMismatches.get(N.targetId)!=null,gt=N.view.applyChanges(fe,P.isPrimaryClient,kt,Wt);return qM(P,N.targetId,gt.au),gt.snapshot})})(n,p,m,y);let o=yield LM(n.localStore,e,!0),s=new Fw(e,o.Qs),a=s.ru(o.documents),u=Il.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);qM(n,t,l.au);let h=new Lw(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function oz(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!sg(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lD(r.remoteStore,i.targetId),Uw(r,i.targetId)}).catch(oc))):(Uw(r,i.targetId),yield vw(r.localStore,i.targetId,!0))})}function sz(n,e){return v(this,null,function*(){let t=ne(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lD(t.remoteStore,r.targetId))})}function az(n,e,t){return v(this,null,function*(){let r=pz(n);try{let i=yield(function(s,a){let u=ne(s),l=ct.now(),h=a.reduce((y,S)=>y.add(S.key),me()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=ci(),P=me();return u.Ns.getEntries(y,h).next(N=>{S=N,S.forEach((j,oe)=>{oe.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(N=>{p=N;let j=[];for(let oe of a){let fe=c3(oe,p.get(oe.key).overlayedDocument);fe!=null&&j.push(new Fr(oe.key,fe,DP(fe.value.mapValue),ri.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:PP(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Qe(ge)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Al(r,i.changes),yield lg(r.remoteStore)}catch(i){let o=pD(i,"Failed to persist write");t.reject(o)}})}function ox(n,e){return v(this,null,function*(){let t=ne(n);try{let r=yield O3(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Se(s.hu,14607):i.removedDocuments.size>0&&(Se(s.hu,42227),s.hu=!1))}),yield Al(t,r,e)}catch(r){yield oc(r)}})}function HM(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&gD(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cz(n,e,t){return v(this,null,function*(){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Qe(W.comparator);s=s.insert(o,ir.newNoDocument(o,ie.min()));let a=me().add(o),u=new xp(ie.min(),new Map,new Qe(ge),s,a);yield ox(r,u),r.du=r.du.remove(o),r.Au.delete(e),yD(r)}else yield vw(r.localStore,e,!1).then(()=>Uw(r,e,t)).catch(oc)})}function uz(n,e){return v(this,null,function*(){let t=ne(n),r=e.batch.batchId;try{let i=yield k3(t.localStore,e);ax(t,r,null),sx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Al(t,i)}catch(i){yield oc(i)}})}function lz(n,e,t){return v(this,null,function*(){let r=ne(n);try{let i=yield(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Se(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);ax(r,e,t),sx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Al(r,i)}catch(i){yield oc(i)}})}function sx(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function ax(n,e,t){let r=ne(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Uw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||cx(n,r)})}function cx(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),yD(n))}function qM(n,e,t){for(let r of t)r instanceof Kp?(n.Ru.addReference(r.key,e),dz(n,r)):r instanceof Qp?($(mD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||cx(n,r.key)):Y(19791,{wu:r})}function dz(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||($(mD,"New document in limbo: "+t),n.Eu.add(r),yD(n))}function yD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new W($e.fromString(e)),r=n.fu.next();n.Au.set(r,new Vw(t)),n.du=n.du.insert(t,r),ZP(n.remoteStore,new wl(Pr(sD(t.path)),r,"TargetPurposeLimboResolution",Zw.ce))}}function Al(n,e,t){return v(this,null,function*(){let r=ne(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=pw.As(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield(function(u,l){return v(this,null,function*(){let h=ne(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,m=>L.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>L.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!sc(p))throw p;$(uD,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,P)}}})})(r.localStore,o))})}function hz(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){$(mD,"User change. New user:",e.toKey());let r=yield YP(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new z(O.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Al(t,r.Ls)}})}function fz(n,e){let t=ne(n),r=t.Au.get(e);if(r&&r.hu)return me().add(r.key);{let i=me(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function ux(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cz.bind(null,e),e.Pu.H_=ez.bind(null,e.eventManager),e.Pu.yu=tz.bind(null,e.eventManager),e}function pz(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lz.bind(null,e),e}var lx=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=cg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return x3(this.persistence,new mw,t.initialUser,this.serializer)}Cu(t){return new jp(fw.mi,this.serializer)}Du(t){return new _w}terminate(){return v(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Bw=class extends lx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Se(this.persistence.referenceDelegate instanceof Up,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ew(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new jp(r=>Up.mi(r,t),this.serializer)}};var gz=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hz.bind(null,this.syncEngine),yield J3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new xw})()}createDatastore(t){let r=cg(t.databaseInfo.databaseId),i=(function(s){return new Cw(s)})(t.databaseInfo);return(function(s,a,u,l){return new Aw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new Nw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>HM(this.syncEngine,r,0),(function(){return $p.v()?new $p:new Ew})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new jw(o,s,a,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){yield(function(r){return v(this,null,function*(){let i=ne(r);$(ws,"RemoteStore shutting down."),i.Ea.add(5),yield Sl(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var $w=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var io="FirestoreClient",Hw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=gl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){$(io,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($(io,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=pD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fI(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$(io,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield YP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function zM(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mz(n);$(io,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UM(e.remoteStore,i)),n._onlineComponents=e})}function mz(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$(io,"Using user provided OfflineComponentProvider");try{yield fI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ha("Error using user provided cache. Falling back to memory cache: "+t),yield fI(n,new lx)}}else $(io,"Using default OfflineComponentProvider"),yield fI(n,new Bw(void 0));return n._offlineComponents})}function dx(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($(io,"Using user provided OnlineComponentProvider"),yield zM(n,n._uninitializedComponentsProvider._online)):($(io,"Using default OnlineComponentProvider"),yield zM(n,new gz))),n._onlineComponents})}function yz(n){return dx(n).then(e=>e.syncEngine)}function GM(n){return v(this,null,function*(){let e=yield dx(n),t=e.eventManager;return t.onListen=nz.bind(null,e.syncEngine),t.onUnlisten=oz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sz.bind(null,e.syncEngine),t})}function hx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WM=new Map;var fx="firestore.googleapis.com",KM=!0,Yp=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fx,this.ssl=KM}else this.host=e.host,this.ssl=e.ssl??KM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N3)throw new z(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hx(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},nc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pI;switch(r.type){case"firstParty":return new vI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=WM.get(t);r&&($("ComponentProvider","Removing Datastore"),WM.delete(t),r.terminate())})(this),Promise.resolve()}};function px(n,e,t,r={}){n=Ji(n,nc);let i=Ui(e),o=n._getSettings(),s=K(M({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Hf(`https://${a}`),qf("Firestore",!0)),o.host!==fx&&o.host!==a&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=K(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!Tr(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Et.MOCK_USER;else{l=TR(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new z(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(p)}n._authCredentials=new gI(new bp(l,h))}}var Jp=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Tl(t,n._jsonSchema))return new n(e,r||null,new W($e.fromString(t.referencePath)))}};Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:at("string",Pt._jsonSchemaVersion),referencePath:at("string")};var Zi=class n extends Jp{constructor(e,t,r){super(e,t,sD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gx(n,e,...t){if(n=ft(n),XM("collection","path",e),n instanceof nc){let r=$e.fromString(e,...t);return fM(r),new Zi(n,null,r)}{if(!(n instanceof Pt||n instanceof Zi))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return fM(r),new Zi(n.firestore,null,r)}}function vD(n,e,...t){if(n=ft(n),arguments.length===1&&(e=gl.newId()),XM("doc","path",e),n instanceof nc){let r=$e.fromString(e,...t);return hM(r),new Pt(n,null,new W(r))}{if(!(n instanceof Pt||n instanceof Zi))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return hM(r),new Pt(n.firestore,n instanceof Zi?n.converter:null,new W(r))}}var QM="AsyncQueue",Zp=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hp(this,"async_queue_retry"),this._c=()=>{let r=hI();r&&$(QM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=hI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=hI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return v(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sc(e))throw e;$(QM,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ii("INTERNAL UNHANDLED ERROR: ",YM(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Mw.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:YM(this.nc)})}verifyOperationInProgress(){}Tc(){return v(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function YM(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function JM(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var oo=class extends nc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,yield e}})}};function mx(n,e){let t=typeof n=="object"?n:os(),r=typeof n=="string"?n:e||Np,i=Ra(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=bR("firestore");o&&px(i,...o)}return i}function yx(n){if(n._terminated)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vz(n),n._firestoreClient}function vz(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new DI(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,hx(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Hw(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Xi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(xt.fromBase64String(e))}catch(t){throw new z(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Xi._jsonSchemaVersion="firestore/bytes/1.0",Xi._jsonSchema={type:at("string",Xi._jsonSchemaVersion),bytes:at("string")};var rc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bl=class{constructor(e){this._methodName=e}};var eo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Tl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};eo._jsonSchemaVersion="firestore/geoPoint/1.0",eo._jsonSchema={type:at("string",eo._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};var to=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};to._jsonSchemaVersion="firestore/vectorValue/1.0",to._jsonSchema={type:at("string",to._jsonSchemaVersion),vectorValues:at("object")};var _z=/^__.*__$/,qw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Is(e,this.data,t,this.fieldTransforms)}},Xp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:n})}}var zw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vx(this.Ac)&&_z.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Gw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cg(e)}Cc(e,t,r,i=!1){return new zw({Ac:e,methodName:t,Dc:r,path:vn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _x(n){let e=n._freezeSettings(),t=cg(n._databaseId);return new Gw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ez(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);_D("Data must be an object, but it was:",s,r);let a=Ex(r,s),u,l;if(o.merge)u=new xn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Ww(e,p,t);if(!s.contains(m))throw new z(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wx(h,m)||h.push(m)}u=new xn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new qw(new yn(a),u,l)}var eg=class n extends bl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Iz(n,e,t,r){let i=n.Cc(1,e,t);_D("Data must be an object, but it was:",i,r);let o=[],s=yn.empty();so(r,(u,l)=>{let h=ED(e,u,t);l=ft(l);let p=i.yc(h);if(l instanceof eg)o.push(h);else{let m=dg(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new xn(o);return new Xp(s,a,i.fieldTransforms)}function wz(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[Ww(e,r,t)],u=[i];if(o.length%2!=0)throw new z(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Ww(e,o[m])),u.push(o[m+1]);let l=[],h=yn.empty();for(let m=a.length-1;m>=0;--m)if(!wx(l,a[m])){let y=a[m],S=u[m];S=ft(S);let P=s.yc(y);if(S instanceof eg)l.push(y);else{let N=dg(S,P);N!=null&&(l.push(y),h.set(y,N))}}let p=new xn(l);return new Xp(h,p,s.fieldTransforms)}function dg(n,e){if(Ix(n=ft(n)))return _D("Unsupported field value:",e,n),Ex(n,e);if(n instanceof bl)return(function(r,i){if(!vx(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=dg(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ct.fromDate(r);return{timestampValue:Lp(i.serializer,o)}}if(r instanceof ct){let o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(i.serializer,o)}}if(r instanceof eo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xi)return{bytesValue:$P(i.serializer,r._byteString)};if(r instanceof Pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof to)return(function(s,a){return{mapValue:{fields:{[tD]:{stringValue:nD},[za]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return aD(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Jw(r)}`)})(n,e)}function Ex(n,e){let t={};return gP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,(r,i)=>{let o=dg(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ix(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof eo||n instanceof Xi||n instanceof Pt||n instanceof bl||n instanceof to)}function _D(n,e,t){if(!Ix(t)||!eP(t)){let r=Jw(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ww(n,e,t){if((e=ft(e))instanceof rc)return e._internalPath;if(typeof e=="string")return ED(n,e);throw tg("Field path arguments must be of type string or ",n,!1,void 0,t)}var Dz=new RegExp("[~\\*/\\[\\]]");function ED(n,e,t){if(e.search(Dz)>=0)throw tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rc(...e.split("."))._internalPath}catch{throw tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(O.INVALID_ARGUMENT,a+n+u)}function wx(n,e){return n.some(t=>t.isEqual(e))}var ng=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Dx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kw=class extends ng{data(){return super.data()}};function Dx(n,e){return typeof e=="string"?ED(n,e):e instanceof rc?e._internalPath:e._delegate._internalPath}function Cz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qw=class{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return so(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[za].arrayValue?.values?.map(r=>Fe(r.doubleValue));return new to(t)}convertGeoPoint(e){return new eo(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=og(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){let t=oi(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=$e.fromString(e);Se(KP(r),9688,{name:e});let i=new Mp(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function bz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var gs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ms=class n extends ng{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Dx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:at("string",ms._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};var Ba=class extends ms{data(e={}){return super.data(e)}},$a=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ba(this._firestore,this._userDataWriter,r.key,r,new gs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ba(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ba(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Tz(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Tz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:n})}}$a._jsonSchemaVersion="firestore/querySnapshot/1.0",$a._jsonSchema={type:at("string",$a._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};var rg=class extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function Cx(n,e,t,...r){n=Ji(n,Pt);let i=Ji(n.firestore,oo),o=_x(i),s;return s=typeof(e=ft(e))=="string"||e instanceof rc?wz(o,"updateDoc",n._key,e,t,r):Iz(o,"updateDoc",n._key,e),wD(i,[s.toMutation(n._key,ri.exists(!0))])}function bx(n){return wD(Ji(n.firestore,oo),[new El(n._key,ri.none())])}function Tx(n,e){let t=Ji(n.firestore,oo),r=vD(n),i=bz(n.converter,e);return wD(t,[Ez(_x(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}function ID(n,...e){n=ft(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||JM(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(JM(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof Pt)s=Ji(n.firestore,oo),a=sD(n._key.path),o={next:u=>{e[r]&&e[r](Sz(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Ji(n,Jp);s=Ji(u.firestore,oo),a=u._query;let l=new rg(s);o={next:h=>{e[r]&&e[r](new $a(s,l,u,h))},error:e[r+1],complete:e[r+2]},Cz(n._query)}return(function(l,h,p,m){let y=new $w(m),S=new Ow(h,y,p);return l.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Z3(yield GM(l),S)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return X3(yield GM(l),S)}))}})(yx(s),a,i,o)}function wD(n,e){return(function(r,i){let o=new ni;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return az(yield yz(r),i,o)})),o.promise})(yx(n),e)}function Sz(n,e,t){let r=t.docs.get(e._key),i=new rg(n);return new ms(n,i,e._key,r,new gs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ic=i})($i),nr(new Gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new oo(new mI(r.getProvider("auth-internal")),new _I(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mp(l.options.projectId,h)})(s,i),s);return o=M({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ke(uM,lM,e),Ke(uM,lM,"esm2020")})();var hg=function(){return hg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hg.apply(this,arguments)};var Nz={includeMetadataChanges:!1};function Sx(n,e){return e===void 0&&(e=Nz),new ce(function(t){var r=ID(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ax(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:hg(hg({},r),(t={},t[e.idField]=n.id,t))}function Rx(n){return Sx(n,{includeMetadataChanges:!0}).pipe(pe(function(e){return e.docs}))}function Nx(n,e){return e===void 0&&(e={}),Rx(n).pipe(pe(function(t){return t.map(function(r){return Ax(r,e)})}))}var or=class{constructor(e){return e}},Mx="firestore",DD=class{constructor(){return Ma(Mx)}};var CD=new q("angularfire2.firestore-instances");function Mz(n,e){let t=Yu(Mx,n,e);return t&&new or(t)}function Pz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new or(r)}}var xz={provide:DD,deps:[[new un,CD]]},kz={provide:or,useFactory:Mz,deps:[[new un,CD],Jr]};function Px(n,...e){return Ke("angularfire",Hi.full,"fst"),sn([kz,xz,{provide:CD,useFactory:Pz(n),multi:!0,deps:[Ee,qe,qi,as,[new un,cl],[new un,Pa],...e]}])}var cc=mn(Nx,!0);var ui=mn(Tx,!0,2);var uc=mn(gx,!0,2);var lc=mn(bx,!0,2);var _n=mn(vD,!0,2);var xx=mn(mx,!0);var li=mn(Cx,!0,2);var dc=(()=>{class n{constructor(){this.firestore=R(or),this.questsCollection=uc(this.firestore,"quests"),this._quests=Re([],{}),this.loadQuests()}loadQuests(){cc(this.questsCollection,{idField:"id"}).pipe(pe(r=>r.sort((i,o)=>(o.id??"").localeCompare(i.id??"")))).subscribe(r=>{this._quests.set(r)})}quests(){return this._quests.asReadonly()()}getQuestById(t){return this._quests().find(r=>r.id===t)}addCustomQuest(t){return v(this,null,function*(){let r={title:t.title,description:t.description,xp:t.xp,imageUrl:"assets/default.png",difficulty:"medium"},i=yield ui(this.questsCollection,r)})}deleteQuest(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"quests",t);yield lc(r)})}addDefaultQuestsIfEmpty(){return v(this,null,function*(){if(this._quests().length===0){let t=[{title:"Find the Lost Sword",description:"Retrieve the legendary sword from the ancient ruins.",xp:40,imageUrl:"assets/sword.png",difficulty:"medium"},{title:"Rescue the Villagers",description:"Save the villagers captured by goblins.",xp:120,imageUrl:"assets/villagers.png",difficulty:"hard"},{title:"Collect Herbs",description:"Gather 10 healing herbs for the village healer.",xp:60,imageUrl:"assets/herbs.png",difficulty:"easy"}];for(let r of t)yield ui(this.questsCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Oz=n=>["/quests",n],Fz=(n,e)=>e.id;function Lz(n,e){n&1&&(x(0,"p",3),F(1,"Title must be at least 8 characters."),k())}function Vz(n,e){if(n&1){let t=qt();x(0,"div",8)(1,"h3",9),F(2),k(),x(3,"p"),F(4),k(),x(5,"p")(6,"strong"),F(7,"XP:"),k(),F(8),k(),x(9,"button",10),de("click",function(i){let o=Ge(t).$implicit;return _e().deleteQuest(o.id),We(i.stopPropagation())}),F(10," Delete "),k()()}if(n&2){let t=e.$implicit;Ie("routerLink",ca(4,Oz,t.id)),U(2),yt(t.title),U(2),yt(t.description),U(4),vt(" ",t.xp)}}function jz(n,e){n&1&&(x(0,"p"),F(1,"No quests match your search."),k())}var kx=(()=>{class n{constructor(t){this.questsService=t,this.search=Re("",{}),this.questForm=new fn({title:new it("",{validators:[Be.required,Be.minLength(8)],nonNullable:!0}),description:new it("",{validators:[Be.required],nonNullable:!0}),xp:new it(0,{validators:[Be.required,Be.min(1)],nonNullable:!0})}),this.filteredQuests=Sn(()=>{let r=this.search().toLowerCase();return this.questsService.quests().filter(i=>i.title.toLowerCase().includes(r))},{})}onSearchChange(t){this.search.set(t??"")}createQuest(){return v(this,null,function*(){if(this.questForm.invalid)return;let{title:t,description:r,xp:i}=this.questForm.getRawValue();yield this.questsService.addCustomQuest({title:t,description:r,xp:i}),this.questForm.reset({title:"",description:"",xp:0})})}deleteQuest(t){return v(this,null,function*(){yield this.questsService.deleteQuest(t)})}static{this.\u0275fac=function(r){return new(r||n)(B(dc))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-quests"]],decls:18,vars:5,consts:[[3,"searchChange"],[1,"create-form",3,"formGroup"],["type","text","formControlName","title","placeholder","Title"],[1,"error"],["formControlName","description","placeholder","Description"],["type","number","formControlName","xp","placeholder","XP"],["type","button",1,"create-btn",3,"click","disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"p-4","bg-gray-800","text-white","rounded-xl","shadow","hover:bg-gray-700","transition","cursor-pointer",3,"routerLink"],[1,"text-xl","font-bold"],[1,"mt-2","bg-red-500","hover:bg-red-600","text-white","px-3","py-1","rounded",3,"click"]],template:function(r,i){if(r&1&&(x(0,"h2"),F(1,"Available Quests"),k(),x(2,"p"),F(3),k(),x(4,"app-search",0),de("searchChange",function(s){return i.onSearchChange(s)}),k(),x(5,"div",1)(6,"h3"),F(7,"Create New Quest"),k(),Ne(8,"input",2),Ve(9,Lz,2,0,"p",3),Ne(10,"textarea",4)(11,"input",5),x(12,"button",6),de("click",function(){return i.createQuest()}),F(13," Create Quest "),k()(),x(14,"div",7),$t(15,Vz,11,6,"div",8,Fz),Ve(17,jz,2,0,"p"),k()),r&2){let o;U(3),vt("Total quests: ",i.questsService.quests().length),U(2),Ie("formGroup",i.questForm),U(4),je((o=i.questForm.get("title"))!=null&&o.invalid&&((o=i.questForm.get("title"))!=null&&o.touched)?9:-1),U(3),Ie("disabled",i.questForm.invalid),U(3),Ht(i.filteredQuests()),U(2),je(i.filteredQuests().length?-1:17)}},dependencies:[Zt,Rn,Mn,Nn,Hu,Xt,br,er,Xn,Ta],styles:["h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;color:#222}p[_ngcontent-%COMP%]{font-size:1rem;color:#000;margin-bottom:1rem}button[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;border:none;transition:background .2s ease}button.bg-green-500[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff}button.bg-green-500[_ngcontent-%COMP%]:hover{background-color:#16a34a}button.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}button.bg-red-500[_ngcontent-%COMP%]:hover{background-color:#b91c1c}button.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem}@media(min-width:640px){.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.lg\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}div[p-4][_ngcontent-%COMP%]{padding:1rem}div.bg-gray-800[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#fff;box-shadow:0 4px 10px #0003;transition:transform .2s ease,background .2s ease}div.bg-gray-800[_ngcontent-%COMP%]:hover{background-color:#374151;transform:translateY(-3px)}h3.text-xl[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:.5rem}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}div.bg-gray-800[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.25rem .5rem;font-size:.9rem}.create-form[_ngcontent-%COMP%]{background:#1f2937;padding:20px;border-radius:12px;margin-bottom:24px;color:#fff;box-shadow:0 4px 12px #0000004d}.create-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:12px;font-weight:600}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:#111827;border:1px solid #374151;padding:10px;border-radius:8px;color:#fff;margin-bottom:12px;font-size:.95rem;transition:border .2s,background .2s}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#0f172a;outline:none}.create-btn[_ngcontent-%COMP%]{width:100%;background:#10b981;padding:10px;border-radius:8px;font-weight:600;transition:.2s;color:#fff}.create-btn[_ngcontent-%COMP%]:disabled{background:#374151;color:#9ca3af;cursor:not-allowed}.create-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669}.error[_ngcontent-%COMP%]{font-size:.85rem;color:#f87171;margin-top:-8px;margin-bottom:12px}"]})}}return n})();function Uz(n,e){if(n&1&&(Kn(0,"p")(1,"strong"),F(2,"Difficulty:"),Jt(),F(3),Jt()),n&2){let t=_e(2);U(3),vt(" ",t.quest.difficulty)}}function Bz(n,e){if(n&1&&(Kn(0,"div",0)(1,"h2"),F(2),Jt(),Kn(3,"p"),F(4),Jt(),Kn(5,"p")(6,"strong"),F(7,"XP:"),Jt(),F(8),Jt(),Ve(9,Uz,4,1,"p"),Jt()),n&2){let t=_e();U(2),yt(t.quest.title),U(2),yt(t.quest.description),U(4),vt(" ",t.quest.xp),U(),je(t.quest.difficulty?9:-1)}}function $z(n,e){n&1&&(Kn(0,"p"),F(1,"Quest sa nena\u0161iel."),Jt())}var Ox=(()=>{class n{constructor(t,r){this.route=t,this.questsService=r}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");this.quest=this.questsService.getQuestById(t??"")}static{this.\u0275fac=function(r){return new(r||n)(B(Nt),B(dc))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-quest-detail"]],decls:2,vars:1,consts:[[1,"quest-detail"]],template:function(r,i){r&1&&Ve(0,Bz,10,4,"div",0)(1,$z,2,0,"p"),r&2&&je(i.quest?0:1)},styles:[".quest-detail[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:1rem;box-shadow:0 4px 12px #00000026;max-width:600px;margin:2rem auto;transition:transform .2s ease,box-shadow .2s ease}.quest-detail[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0003}.quest-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:1rem;text-align:center}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#4b5563;margin-bottom:.75rem;line-height:1.5}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#111827}p[_ngcontent-%COMP%]{font-size:1rem;color:#ef4444;text-align:center;margin-top:2rem}"]})}}return n})();var Cs=[{level:1,xpRequired:0,title:"Novice"},{level:2,xpRequired:100,title:"Apprentice"},{level:3,xpRequired:300,title:"Adept"},{level:4,xpRequired:600,title:"Expert"},{level:5,xpRequired:1e3,title:"Master"},{level:6,xpRequired:2e3,title:"Grandmaster"},{level:7,xpRequired:3500,title:"Legend"},{level:8,xpRequired:5500,title:"Mythic"},{level:9,xpRequired:8e3,title:"Immortal"},{level:10,xpRequired:12e3,title:"Eternal"}];function sr(n){let e=Cs[0],t;for(let i=0;i<Cs.length;i++)n>=Cs[i].xpRequired&&(e=Cs[i],t=Cs[i+1]);let r=0;if(t){let i=e.xpRequired,o=t.xpRequired;r=(n-i)/(o-i)*100}else r=100;return{level:e,nextLevel:t,progress:r}}var ao=(()=>{class n{constructor(){this.firestore=R(or),this.playersCollection=uc(this.firestore,"players"),this._players=Re([],{}),this.loadPlayers()}loadPlayers(){cc(this.playersCollection,{idField:"id"}).pipe(pe(r=>r.sort((i,o)=>(o.nickname??"").localeCompare(i.nickname??"")))).subscribe(r=>{console.log("[PlayerService] loadPlayers - received",r.length,"players"),this._players.set(r)})}players(){return this._players.asReadonly()}getAll(){return this._players()}getPlayerById(t){return this._players().find(r=>r.id===t)}addPlayer(t){return v(this,null,function*(){let r={nickname:t,xp:0,level:1,activeQuests:[],completedQuests:[]};try{let i=yield ui(this.playersCollection,r);return console.log("[PlayerService] addPlayer - created",i.id),i.id}catch(i){console.error("[PlayerService] addPlayer - error",i);return}})}removePlayer(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"players",t);yield lc(r)})}addQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i||(i.activeQuests??[]).some(a=>a.id===r.id))return;let o=[...i.activeQuests??[],r],s=_n(this.firestore,"players",t);yield li(s,{activeQuests:o})})}removeQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.activeQuests??[]).filter(h=>h.id!==r),s=(i.completedQuests??[]).filter(h=>h.id!==r),a=s.reduce((h,p)=>h+(p.xp??0),0),u=sr(a),l=_n(this.firestore,"players",t);yield li(l,{activeQuests:o,completedQuests:s,xp:a,level:u.level.level})})}completeQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.activeQuests??[]).findIndex(m=>m.id===r);if(o===-1)return;let s=i.activeQuests[o],a=i.activeQuests.filter((m,y)=>y!==o),u=[...i.completedQuests??[],s],l=u.reduce((m,y)=>m+(y.xp??0),0),h=sr(l),p=_n(this.firestore,"players",t);yield li(p,{activeQuests:a,completedQuests:u,xp:l,level:h.level.level})})}reopenQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.completedQuests??[]).findIndex(m=>m.id===r);if(o===-1)return;let s=i.completedQuests[o],a=i.completedQuests.filter((m,y)=>y!==o),u=[...i.activeQuests??[],s],l=a.reduce((m,y)=>m+(y.xp??0),0),h=sr(l),p=_n(this.firestore,"players",t);yield li(p,{activeQuests:u,completedQuests:a,xp:l,level:h.level.level})})}setPlayerClan(t,r){return v(this,null,function*(){let i=_n(this.firestore,"players",t);yield li(i,{clanId:r})})}addDefaultPlayersIfEmpty(){return v(this,null,function*(){if(this._players().length===0){let t=[{nickname:"Alice",xp:150,level:2,activeQuests:[],completedQuests:[]},{nickname:"Bob",xp:80,level:1,activeQuests:[],completedQuests:[]},{nickname:"Cara",xp:250,level:3,activeQuests:[],completedQuests:[]}];for(let r of t)yield ui(this.playersCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var co=(()=>{class n{constructor(){this.firestore=R(or),this.clansCollection=uc(this.firestore,"clans"),this._clans=Re([],{}),this.loadClans()}loadClans(){cc(this.clansCollection,{idField:"id"}).pipe(pe(r=>r.sort((i,o)=>(i.name??"").localeCompare(o.name??"")))).subscribe(r=>{this._clans.set(r)})}clans(){return this._clans.asReadonly()}getAll(){return this._clans()}getById(t){return this._clans().find(r=>r.id===t)}addClan(t){return v(this,null,function*(){let r=M({},t);delete r.id,yield ui(this.clansCollection,r)})}removeClan(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"clans",t);yield lc(r)})}addPlayerToClan(t,r){return v(this,null,function*(){let i=this.getById(t);if(!i||(i.memberIds||(i.memberIds=[]),i.memberIds.includes(r))||i.memberIds.length>=i.capacity)return!1;let o=[...i.memberIds,r],s=_n(this.firestore,"clans",t);return yield li(s,{memberIds:o}),!0})}removePlayerFromClan(t,r){return v(this,null,function*(){let i=this.getById(t);if(!i)return!1;let o=(i.memberIds??[]).length,s=(i.memberIds??[]).filter(u=>u!==r);if(s.length===o)return!1;let a=_n(this.firestore,"clans",t);return yield li(a,{memberIds:s}),!0})}addDefaultClansIfEmpty(){return v(this,null,function*(){if(this._clans().length===0){let t=[{name:"Warriors",description:"Strong and proud.",capacity:5,memberIds:[]},{name:"Rangers",description:"Stealth and speed.",capacity:4,memberIds:[]}];for(let r of t)yield ui(this.clansCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hz=(n,e)=>e.title,qz=(n,e)=>e.id;function zz(n,e){n&1&&(x(0,"div",3),F(1," Nickname must have at least 8 characters. "),k())}function Gz(n,e){if(n&1&&(x(0,"option",8),F(1),k()),n&2){let t=e.$implicit;Ie("ngValue",t.title),U(),vt(" ",t.title," ")}}function Wz(n,e){if(n&1){let t=qt();x(0,"li")(1,"div",11)(2,"span"),F(3),k(),x(4,"span"),F(5),k(),x(6,"div",12),Ne(7,"div",13),k(),x(8,"div",14)(9,"button",15),de("click",function(){let i=Ge(t).$implicit,o=_e();return We(o.goToDetails(i.id))}),F(10,"Details"),k(),x(11,"button",16),de("click",function(){let i=Ge(t).$implicit,o=_e();return We(o.removePlayer(i.id))}),F(12,"Remove"),k()()()()}if(n&2){let t=e.$implicit,r=_e();U(3),Er(" ",t.nickname," - ",r.getPlayerLevelForPlayer(t).level.title," (Level ",r.getPlayerLevelForPlayer(t).level.level,") "),U(2),vt("- Clan: ",r.getClanName(t)),U(2),aa("width",r.getPlayerLevelForPlayer(t).progress,"%")}}function Kz(n,e){n&1&&(x(0,"li"),F(1,"No players found."),k())}var Fx=(()=>{class n{constructor(t,r,i){this.router=t,this.playerService=r,this.clansService=i,this.players=this.playerService.players(),this.playerForm=new fn({nickname:new it("",{validators:[Be.required,Be.minLength(3)],nonNullable:!0})}),this.filterForm=new fn({levelTitle:new it(null)}),this.search=Re("",{}),this.playerLevels=Cs,this.filteredPlayers=Sn(()=>{let o=this.filterForm.get("levelTitle")?.value,s=this.search().toLowerCase();return this.players().filter(a=>!(o&&sr(a.xp??0).level.title!==o||s&&!a.nickname.toLowerCase().includes(s)))},{})}ngOnInit(){}createPlayer(){return v(this,null,function*(){if(this.playerForm.invalid){this.playerForm.markAllAsTouched();return}let t=this.playerForm.getRawValue();yield this.playerService.addPlayer(t.nickname),this.playerForm.reset()})}onSearchChange(t){this.search.set(t??"")}goToDetails(t){t&&this.router.navigate(["/players",t])}removePlayer(t){return v(this,null,function*(){t&&(this.clansService.getAll().forEach(r=>{r.memberIds.includes(t)&&this.clansService.removePlayerFromClan(r.id,t)}),yield this.playerService.removePlayer(t))})}getPlayerLevelForPlayer(t){return sr(t.xp??0)}getClanName(t){return t.clanId?this.clansService.getById(t.clanId)?.name??"-":"-"}static{this.\u0275fac=function(r){return new(r||n)(B(rt),B(ao),B(co))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-players"]],decls:26,vars:6,consts:[[1,"player-form"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Nickname (min 8 chars)","formControlName","nickname"],[1,"error"],["type","submit",1,"create-btn",3,"disabled"],[1,"filter-form"],[3,"formGroup"],["formControlName","levelTitle"],[3,"ngValue"],[3,"searchChange"],[1,"player-list"],[1,"player-card"],[1,"progress-bar"],[1,"progress"],[1,"actions"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(x(0,"div",0)(1,"h3"),F(2,"Create New Player"),k(),x(3,"form",1),de("ngSubmit",function(){return i.createPlayer()}),Ne(4,"input",2),Ve(5,zz,2,0,"div",3),x(6,"button",4),F(7," Create Player "),k()()(),x(8,"div",5)(9,"h3"),F(10,"Filter by Level"),k(),x(11,"form",6)(12,"select",7)(13,"option",8),F(14,"All Levels"),k(),$t(15,Gz,2,2,"option",8,Hz),k()(),x(17,"h3"),F(18,"Search by Nickname"),k(),x(19,"app-search",9),de("searchChange",function(s){return i.onSearchChange(s)}),k()(),x(20,"h2"),F(21,"Players"),k(),x(22,"ul",10),$t(23,Wz,13,6,"li",null,qz),Ve(25,Kz,2,0,"li"),k()),r&2&&(U(3),Ie("formGroup",i.playerForm),U(2),je(i.playerForm.controls.nickname.invalid&&i.playerForm.controls.nickname.touched?5:-1),U(),Ie("disabled",i.playerForm.invalid),U(5),Ie("formGroup",i.filterForm),U(2),Ie("ngValue",null),U(2),Ht(i.playerLevels),U(8),Ht(i.filteredPlayers()),U(2),je(i.filteredPlayers().length?-1:25))},dependencies:[Zt,Mn,Vi,Ca,ba,Nn,ji,Xt,br,er,Xn,Xo,Ta],encapsulation:2})}}return n})();var Lx=n=>["/quests",n],TD=(n,e)=>e.id;function Qz(n,e){if(n&1){let t=qt();x(0,"span",6),de("click",function(){Ge(t);let i=_e(2);return We(i.goToClan())}),F(1),k()}if(n&2){let t=_e(2);U(),yt(t.clan.name)}}function Yz(n,e){n&1&&(x(0,"span"),F(1,"-"),k())}function Jz(n,e){if(n&1&&(x(0,"p"),F(1),k()),n&2){let t=_e(2);U(),vt(" XP do \u010Fal\u0161ieho levelu: ",((t.levelInfo==null||t.levelInfo.nextLevel==null?null:t.levelInfo.nextLevel.xpRequired)??0)-t.player.xp," ")}}function Zz(n,e){if(n&1){let t=qt();x(0,"li")(1,"a",7),F(2),k(),F(3),x(4,"button",5),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.completeQuest(i.id))}),F(5,"Ozna\u010Di\u0165 dokon\u010Den\xFD"),k(),x(6,"button",5),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.removeQuest(i.id))}),F(7,"Odstr\xE1ni\u0165"),k()()}if(n&2){let t=e.$implicit;U(),Ie("routerLink",ca(3,Lx,t.id)),U(),yt(t.title),U(),vt(" (XP: ",t.xp,") ")}}function Xz(n,e){n&1&&(x(0,"li"),F(1,"\u017Diadne akt\xEDvne questy"),k())}function e6(n,e){if(n&1){let t=qt();x(0,"li")(1,"a",7),F(2),k(),F(3),x(4,"button",5),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.reopenQuest(i.id))}),F(5,"Ozna\u010Di\u0165 akt\xEDvny"),k(),x(6,"button",5),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.removeQuest(i.id))}),F(7,"Odstr\xE1ni\u0165"),k()()}if(n&2){let t=e.$implicit;U(),Ie("routerLink",ca(3,Lx,t.id)),U(),yt(t.title),U(),vt(" (XP: ",t.xp,") ")}}function t6(n,e){n&1&&(x(0,"li"),F(1,"\u017Diadne dokon\u010Den\xE9 questy"),k())}function n6(n,e){if(n&1&&(x(0,"option",4),F(1),k()),n&2){let t=e.$implicit;Ie("ngValue",t.id),U(),yt(t.title)}}function r6(n,e){if(n&1){let t=qt();x(0,"h2"),F(1),k(),x(2,"div"),F(3," Clan: "),Ve(4,Qz,2,1,"span",0)(5,Yz,2,0,"span"),k(),x(6,"h3"),F(7),k(),x(8,"div",1),Ne(9,"div",2),k(),Ve(10,Jz,2,1,"p"),x(11,"h3"),F(12,"Akt\xEDvne questy"),k(),x(13,"ul"),$t(14,Zz,8,5,"li",null,TD),Ve(16,Xz,2,0,"li"),k(),x(17,"h3"),F(18,"Dokon\u010Den\xE9 questy"),k(),x(19,"ul"),$t(20,e6,8,5,"li",null,TD),Ve(22,t6,2,0,"li"),k(),x(23,"h4"),F(24,"Prida\u0165 nov\xFD quest"),k(),x(25,"select",3),Lh("ngModelChange",function(i){Ge(t);let o=_e();return $v(o.selectedQuestId,i)||(o.selectedQuestId=i),We(i)}),x(26,"option",4),F(27,"-- Vyber quest --"),k(),$t(28,n6,2,2,"option",4,TD),k(),x(30,"button",5),de("click",function(){Ge(t);let i=_e();return We(i.addQuest())}),F(31,"Prida\u0165 quest"),k()}if(n&2){let t=_e();U(),yt(t.player.nickname),U(3),je(t.clan?4:5),U(3),Oh(" Level: ",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.title," (",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.level,") "),U(2),aa("width",t.levelInfo==null?null:t.levelInfo.progress,"%"),U(),je(t.levelInfo!=null&&t.levelInfo.nextLevel?10:-1),U(4),Ht(t.player.activeQuests),U(2),je(t.player.activeQuests!=null&&t.player.activeQuests.length?-1:16),U(4),Ht(t.player.completedQuests),U(2),je(t.player.completedQuests!=null&&t.player.completedQuests.length?-1:22),U(3),Fh("ngModel",t.selectedQuestId),U(),Ie("ngValue",void 0),U(2),Ht(t.allQuests)}}var Vx=(()=>{class n{constructor(t,r,i,o,s){this.route=t,this.router=r,this.playerService=i,this.clansService=o,this.questsService=s,this.allQuests=[]}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.player=this.playerService.getPlayerById(t),this.player&&(this.player.clanId&&(this.clan=this.clansService.getById(this.player.clanId)),this.allQuests=this.questsService.quests(),this.updateLevel()))}updateLevel(){if(!this.player)return;let t=(this.player.completedQuests??[]).reduce((r,i)=>r+(i.xp??0),0);this.player.xp=t,this.levelInfo=sr(t)}addQuest(){return v(this,null,function*(){if(!this.player||!this.selectedQuestId)return;let t=this.questsService.getQuestById(this.selectedQuestId);if(!t||(this.player.activeQuests??[]).some(i=>i.id===this.selectedQuestId))return;let r={id:t.id,title:t.title,description:t.description,xp:t.xp};yield this.playerService.addQuest(this.player.id,r),this.refreshPlayer(),this.selectedQuestId=void 0})}removeQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.removeQuest(this.player.id,t),this.refreshPlayer())})}completeQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.completeQuest(this.player.id,t),this.refreshPlayer())})}reopenQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.reopenQuest(this.player.id,t),this.refreshPlayer())})}goToClan(){this.clan&&this.router.navigate(["/clan",this.clan.id])}refreshPlayer(){this.player?.id&&(this.player=this.playerService.getPlayerById(this.player.id),this.updateLevel())}static{this.\u0275fac=function(r){return new(r||n)(B(Nt),B(rt),B(ao),B(co),B(dc))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-player-detail"]],decls:2,vars:1,consts:[[1,"clan-link"],[1,"progress-bar"],[1,"progress"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"click"],[1,"clan-link",3,"click"],[3,"routerLink"]],template:function(r,i){r&1&&(x(0,"div"),Ve(1,r6,32,11),k()),r&2&&(U(),je(i.player?1:-1))},dependencies:[Zt,ER,Ca,ba,ji,Xt,$_,Xo,Rn],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}.player-detail[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:1rem;padding:2rem;box-shadow:0 4px 12px #00000014}.player-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem;margin-top:1.5rem;margin-bottom:.5rem}.clan-link[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600;cursor:pointer;text-decoration:underline;transition:color .2s}.clan-link[_ngcontent-%COMP%]:hover{color:#2563eb}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;padding:.75rem 1rem;border-radius:.75rem;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 6px #0000000d;transition:transform .2s,box-shadow .2s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#111827;text-decoration:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.3rem .6rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;font-size:1rem;margin-right:.5rem;min-width:200px}"]})}}return n})();var i6=(n,e)=>e.id;function o6(n,e){n&1&&(x(0,"div",3),F(1," Name must have at least 8 characters. "),k())}function s6(n,e){n&1&&(x(0,"div",3),F(1," Capacity must be at least 1. "),k())}function a6(n,e){if(n&1){let t=qt();x(0,"div",8)(1,"div",9)(2,"div",10),F(3),k(),x(4,"div",11),F(5),k()(),x(6,"div")(7,"button",12),de("click",function(){let i=Ge(t).$implicit,o=_e();return We(o.openDetail(i.id))}),F(8,"Detail"),k(),x(9,"button",13),de("click",function(){let i=Ge(t).$implicit,o=_e();return We(o.deleteClan(i.id))}),F(10,"Delete"),k()()()}if(n&2){let t=e.$implicit;U(3),Er(" ",t.name," (",t.memberIds.length,"/",t.capacity,") "),U(2),vt(" ",t.description," ")}}var jx=(()=>{class n{constructor(t,r,i){this.clansService=t,this.playerService=r,this.router=i,this.clans=this.clansService.clans(),this.search=Re("",{}),this.filteredClans=Sn(()=>{let o=this.search().toLowerCase();return this.clans().filter(s=>s.name.toLowerCase().startsWith(o))},{}),this.clanForm=new fn({name:new it("",{validators:[Be.required,Be.minLength(8)]}),description:new it(""),capacity:new it(5,{validators:[Be.required,Be.min(1)]})})}createClan(){if(this.clanForm.invalid){this.clanForm.markAllAsTouched();return}let t=this.clanForm.getRawValue(),r={id:String(Date.now()),name:t.name,description:t.description,capacity:t.capacity,memberIds:[]};this.clansService.addClan(r).then(()=>{this.clanForm.reset({capacity:5})})}deleteClan(t){let r=this.clansService.getById(t);r&&confirm(`Delete clan "${r.name}"?`)&&this.clansService.removeClan(t).then(()=>{this.playerService.getAll().forEach(i=>{i.clanId===t&&i.id&&this.playerService.setPlayerClan(i.id,void 0)})})}openDetail(t){this.router.navigate(["/clan",t])}onSearchChange(t){this.search.set(t)}static{this.\u0275fac=function(r){return new(r||n)(B(co),B(ao),B(rt))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-clans"]],decls:23,vars:3,consts:[[1,"clan-page"],[1,"form-card",3,"ngSubmit","formGroup"],["formControlName","name"],[1,"error"],["formControlName","description"],["type","number","formControlName","capacity"],["type","submit"],[3,"searchChange"],[1,"clan-card"],[1,"clan-info"],[1,"title"],[1,"small"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(x(0,"div",0)(1,"h2"),F(2,"Create New Clan"),k(),x(3,"form",1),de("ngSubmit",function(){return i.createClan()}),x(4,"label"),F(5," Name: "),Ne(6,"input",2),k(),Ve(7,o6,2,0,"div",3),x(8,"label"),F(9," Description: "),Ne(10,"textarea",4),k(),x(11,"label"),F(12," Capacity: "),Ne(13,"input",5),k(),Ve(14,s6,2,0,"div",3),x(15,"button",6),F(16,"Create Clan"),k()(),Ne(17,"hr"),x(18,"h2"),F(19,"Clans"),k(),x(20,"app-search",7),de("searchChange",function(s){return i.onSearchChange(s)}),k(),$t(21,a6,11,4,"div",8,i6),k()),r&2&&(U(3),Ie("formGroup",i.clanForm),U(4),je(i.clanForm.controls.name.invalid&&i.clanForm.controls.name.touched?7:-1),U(7),je(i.clanForm.controls.capacity.invalid&&i.clanForm.controls.capacity.touched?14:-1),U(7),Ht(i.filteredClans()))},dependencies:[Zt,Mn,Vi,Nn,Hu,Xt,br,er,Xn,Ta],styles:[".clan-page[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:20px;font-family:Arial,sans-serif}.form-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background:#fafafa;padding:15px;border-radius:8px;margin-bottom:20px;border:1px solid #ddd}.form-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:6px;border-radius:4px;border:1px solid #ccc}.form-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;padding:6px 14px}.error[_ngcontent-%COMP%]{color:#c70000;font-size:13px}.clan-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border:1px solid #ddd;padding:10px 12px;border-radius:8px;margin-bottom:10px}.clan-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:16px}button.danger[_ngcontent-%COMP%]{background:#d9534f;color:#fff;border:none;padding:6px 10px;border-radius:4px}"]})}}return n})();var SD=()=>({xp:0}),c6=(n,e)=>e.id;function u6(n,e){if(n&1&&(x(0,"option",3),F(1),k()),n&2){let t=e.$implicit,r=_e(2);Ie("ngValue",t.id),U(),Er(" ",t.nickname," (Level ",r.getPlayerLevelForPlayer(t).level.level," - ",r.getPlayerLevelForPlayer(t).level.title,") ")}}function l6(n,e){if(n&1){let t=qt();x(0,"li")(1,"span",5),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.goToPlayerDetail(i))}),F(2),k(),Ne(3,"progress",6),x(4,"button",7),de("click",function(){let i=Ge(t).$implicit,o=_e(2);return We(o.removePlayer(i))}),F(5," Remove "),k()()}if(n&2){let t,r=e.$implicit,i=_e(2);U(2),Er(" ",((t=i.playerService.getPlayerById(r))==null?null:t.nickname)||"Unknown Player"," (Level ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(4,SD)).level.level," - ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(5,SD)).level.title,") "),U(),Ie("value",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(6,SD)).progress)}}function d6(n,e){if(n&1){let t=qt();x(0,"h2"),F(1),k(),x(2,"p"),F(3),k(),x(4,"h3"),F(5,"Add Player"),k(),x(6,"form",0)(7,"select",1)(8,"option",2),F(9,"Select a player"),k(),$t(10,u6,2,4,"option",3,c6),k(),x(12,"button",4),de("click",function(){Ge(t);let i=_e();return We(i.addPlayer())}),F(13,"Add"),k()(),x(14,"h3"),F(15,"Members"),k(),x(16,"ul"),$t(17,l6,6,7,"li",null,Lv),k()}if(n&2){let t=_e();U(),Er("",t.clan.name," (",t.clan.memberIds==null?null:t.clan.memberIds.length,"/",t.clan.capacity,")"),U(2),yt(t.clan.description),U(3),Ie("formGroup",t.addPlayerForm),U(2),Ie("ngValue",null),U(2),Ht(t.availablePlayers),U(7),Ht(t.clan.memberIds)}}function h6(n,e){n&1&&(x(0,"p"),F(1,"Clan not found."),k())}var Ux=(()=>{class n{constructor(t,r,i,o){this.route=t,this.clansService=r,this.playerService=i,this.router=o,this.availablePlayers=[],this.addPlayerForm=new fn({playerId:new it(null,Be.required)})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id")??"";this.clan=this.clansService.getById(t),this.clan&&this.refreshAvailablePlayers()}refreshAvailablePlayers(){if(!this.clan)return;let t=this.playerService.getAll();this.availablePlayers=t.filter(r=>r.id!=null&&!this.clansService.getAll().some(i=>i.memberIds.includes(r.id)))}addPlayer(){if(!this.clan)return;let t=this.addPlayerForm.value.playerId;t&&this.clansService.addPlayerToClan(this.clan.id,t).then(r=>{r?(this.playerService.setPlayerClan(t,this.clan.id),this.addPlayerForm.reset(),this.refreshAvailablePlayers()):alert("Cannot add player: either clan is full or player already in another clan.")})}removePlayer(t){this.clan&&this.clansService.removePlayerFromClan(this.clan.id,t).then(r=>{r&&(this.playerService.setPlayerClan(t,void 0),this.refreshAvailablePlayers())})}goToPlayerDetail(t){this.router.navigate(["/players",t])}getPlayerLevelForPlayer(t){return sr(t?.xp??0)}static{this.\u0275fac=function(r){return new(r||n)(B(Nt),B(co),B(ao),B(rt))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-clan-detail"]],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","playerId"],["disabled","","selected","",3,"ngValue"],[3,"ngValue"],["type","button",3,"click"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],["max","100",3,"value"],[2,"margin-left","8px",3,"click"]],template:function(r,i){r&1&&Ve(0,d6,19,6)(1,h6,2,0,"p"),r&2&&je(i.clan?0:1)},dependencies:[Zt,Mn,Vi,Ca,ba,ji,Xt,br,er,Xn],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:1.5rem;margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#4b5563}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;margin-right:.5rem;font-size:.95rem}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.4rem .8rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button.add-btn[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;margin-left:.5rem}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;margin-top:.5rem}li[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:.6rem 1rem;margin-bottom:.5rem;border-radius:.75rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 4px #0000000d}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#2563eb}"]})}}return n})();var f6=()=>["/"];function p6(n,e){if(n&1&&(x(0,"div",4),F(1),k()),n&2){let t=_e();U(),yt(t.error())}}var Bx=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.error=Re(null,{}),this.loginForm=new fn({email:new it("",{validators:[Be.required,Be.email],nonNullable:!0}),password:new it("",{validators:[Be.required,Be.minLength(6)],nonNullable:!0})})}submit(){return v(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:t,password:r}=this.loginForm.getRawValue();try{yield gp(this.auth,t,r),this.error.set(null),yield this.router.navigate(["/"])}catch(i){this.error.set(i?.message??"Sign in failed")}})}static{this.\u0275fac=function(r){return new(r||n)(B(hs),B(rt))}}static{this.\u0275cmp=ke({type:n,selectors:[["app-login"]],decls:17,vars:4,consts:[[1,"login-card"],[3,"ngSubmit","formGroup"],["formControlName","email","type","email"],["formControlName","password","type","password"],[1,"error"],["type","submit"],[3,"routerLink"]],template:function(r,i){r&1&&(x(0,"div",0)(1,"h2"),F(2,"Login"),k(),x(3,"form",1),de("ngSubmit",function(){return i.submit()}),x(4,"label"),F(5," Email "),Ne(6,"input",2),k(),x(7,"label"),F(8," Password "),Ne(9,"input",3),k(),Ve(10,p6,2,1,"div",4),x(11,"button",5),F(12,"Sign in"),k()(),x(13,"p"),F(14," Don't have an account? "),x(15,"a",6),F(16,"Go home"),k()()()),r&2&&(U(3),Ie("formGroup",i.loginForm),U(7),je(i.error()?10:-1),U(5),Ie("routerLink",Gr(3,f6)))},dependencies:[Zt,Mn,Vi,Nn,Xt,br,er,Xn,Xo,Rn],styles:[".login-card[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:30px;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 8px #0000001a;background:#fff}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-weight:500;color:#555;gap:5px}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px;transition:border-color .2s}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 5px #007bff80}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .2s}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.login-card[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{padding:10px;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px;text-align:center}.login-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px}.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();var $x=[{path:"",component:GA},{path:"quests",component:kx},{path:"quests/:id",component:Ox},{path:"players",component:Fx},{path:"players/:id",component:Vx},{path:"clan",component:jx},{path:"clan/:id",component:Ux},{path:"login",component:Bx}];var g6=()=>({exact:!0}),Hx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ke({type:n,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"app-header"],[1,"menu"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/quests","routerLinkActive","active"],["routerLink","/clan","routerLinkActive","active"],["routerLink","/players","routerLinkActive","active"]],template:function(r,i){r&1&&(x(0,"header",0)(1,"h1"),F(2,"Quest OverFlow"),k(),x(3,"nav",1)(4,"a",2),F(5,"Home"),k(),x(6,"a",3),F(7,"Quests"),k(),x(8,"a",4),F(9,"Clans"),k(),x(10,"a",5),F(11,"Players"),k()()()),r&2&&(U(4),Ie("routerLinkActiveOptions",Gr(1,g6)))},dependencies:[Rn,P_],styles:[".app-header[_ngcontent-%COMP%]{background-color:#282c34;color:#fff;padding:1rem;text-align:center;border-radius:8px}.menu[_ngcontent-%COMP%]{margin-top:.5rem}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 1rem;font-weight:700;transition:color .2s ease-in-out}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#61dafb}.menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{text-decoration:underline}"]})}}return n})();var qx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ke({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,i){r&1&&(Ne(0,"app-header"),x(1,"main",0),Ne(2,"router-outlet"),k())},dependencies:[xu,Hx],styles:["[_nghost-%COMP%]{--content-padding: 10px}header[_ngcontent-%COMP%]{display:block;height:60px;padding:var(--content-padding);box-shadow:0 5px 25px var(--shadow-color)}.content[_ngcontent-%COMP%]{padding:var(--content-padding)}"]})}}return n})();var m6={apiKey:"AIzaSyBjdYRHO0xPvlBDBu9USu986ENcquO_Z4s",authDomain:"angular-b02e9.firebaseapp.com",projectId:"angular-b02e9",storageBucket:"angular-b02e9.firebasestorage.app",messagingSenderId:"411151949286",appId:"1:411151949286:web:103eb2a6522f85ddd3ca27",measurementId:"G-7P0XHYK2TY"};o_(qx,{providers:[w0({eventCoalescing:!0}),x_($x),XR(()=>eN(m6)),Px(()=>xx()),oM(()=>sM())]});
