var kP=Object.defineProperty,OP=Object.defineProperties;var FP=Object.getOwnPropertyDescriptors;var fl=Object.getOwnPropertySymbols;var vD=Object.prototype.hasOwnProperty,_D=Object.prototype.propertyIsEnumerable;var yD=(n,e,t)=>e in n?kP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||={})vD.call(e,t)&&yD(n,t,e[t]);if(fl)for(var t of fl(e))_D.call(e,t)&&yD(n,t,e[t]);return n},W=(n,e)=>OP(n,FP(e));var Yp=(n,e)=>{var t={};for(var r in n)vD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fl)for(var r of fl(n))e.indexOf(r)<0&&_D.call(n,r)&&(t[r]=n[r]);return t};var w=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Tt=null,pl=!1,eg=1,LP=null,kt=Symbol("SIGNAL");function J(n){let e=Tt;return Tt=n,e}function ml(){return Tt}var tc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nc(n){if(pl)throw new Error("");if(Tt===null)return;Tt.consumerOnSignalRead(n);let e=Tt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Tt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Tt.producers,t!==void 0&&t.producer===n)){Tt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Tt&&(!r||jP(i,Tt)))return;let o=os(Tt),s={producer:n,consumer:Tt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Tt.producersTail=s,e!==void 0?e.nextProducer=s:Tt.producers=s,o&&DD(n,s)}function ED(){eg++}function tg(n){if(!(os(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===eg)){if(!n.producerMustRecompute(n)&&!vl(n)){Xp(n);return}n.producerRecomputeValue(n),Xp(n)}}function ng(n){if(n.consumers===void 0)return;let e=pl;pl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||VP(r)}}finally{pl=e}}function rg(){return Tt?.consumerAllowSignalWrites!==!1}function VP(n){n.dirty=!0,ng(n),n.consumerMarkedDirty?.(n)}function Xp(n){n.dirty=!1,n.lastCleanEpoch=eg}function rc(n){return n&&ID(n),J(n)}function ID(n){n.producersTail=void 0,n.recomputing=!0}function yl(n,e){J(e),n&&wD(n)}function wD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(os(n))do t=ig(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function vl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(tg(t),r!==t.version))return!0}return!1}function ic(n){if(os(n)){let e=n.producers;for(;e!==void 0;)e=ig(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function DD(n,e){let t=n.consumersTail,r=os(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)DD(i.producer,i)}function ig(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!os(e)){let o=e.producers;for(;o!==void 0;)o=ig(o)}return t}function os(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function og(n){LP?.(n)}function jP(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function sg(n,e){return Object.is(n,e)}function _l(n,e){let t=Object.create(UP);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(tg(t),nc(t),t.value===gl)throw t.error;return t.value};return r[kt]=t,og(t),r}var Jp=Symbol("UNSET"),Zp=Symbol("COMPUTING"),gl=Symbol("ERRORED"),UP=W(R({},tc),{value:Jp,dirty:!0,error:null,equal:sg,kind:"computed",producerMustRecompute(n){return n.value===Jp||n.value===Zp},producerRecomputeValue(n){if(n.value===Zp)throw new Error("");let e=n.value;n.value=Zp;let t=rc(n),r,i=!1;try{r=n.computation(),J(null),i=e!==Jp&&e!==gl&&r!==gl&&n.equal(e,r)}catch(o){r=gl,n.error=o}finally{yl(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function BP(){throw new Error}var CD=BP;function bD(n){CD(n)}function ag(n){CD=n}var $P=null;function cg(n,e){let t=Object.create(El);t.value=n,e!==void 0&&(t.equal=e);let r=()=>TD(t);return r[kt]=t,og(t),[r,s=>oc(t,s),s=>SD(t,s)]}function TD(n){return nc(n),n.value}function oc(n,e){rg()||bD(n),n.equal(n.value,e)||(n.value=e,HP(n))}function SD(n,e){rg()||bD(n),oc(n,e(n.value))}var El=W(R({},tc),{equal:sg,value:void 0,kind:"signal"});function HP(n){n.version++,ED(),ng(n),$P?.(n)}function ug(n){let e=J(null);try{return n()}finally{J(e)}}function ne(n){return typeof n=="function"}function ss(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Il=ss(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $i(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Il?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AD(o)}catch(s){e=e??[],s instanceof Il?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Il(e)}}add(e){var t;if(e&&e!==this)if(this.closed)AD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$i(t,e)}remove(e){let{_finalizers:t}=this;t&&$i(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var lg=ze.EMPTY;function wl(n){return n instanceof ze||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function AD(n){ne(n)?n():n.unsubscribe()}var wn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var as={setTimeout(n,e,...t){let{delegate:r}=as;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=as;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Dl(n){as.setTimeout(()=>{let{onUnhandledError:e}=wn;if(e)e(n);else throw n})}function sc(){}var RD=dg("C",void 0,void 0);function ND(n){return dg("E",void 0,n)}function MD(n){return dg("N",n,void 0)}function dg(n,e,t){return{kind:n,value:e,error:t}}var Hi=null;function cs(n){if(wn.useDeprecatedSynchronousErrorHandling){let e=!Hi;if(e&&(Hi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Hi;if(Hi=null,t)throw r}}else n()}function PD(n){wn.useDeprecatedSynchronousErrorHandling&&Hi&&(Hi.errorThrown=!0,Hi.error=n)}var qi=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wl(e)&&e.add(this)):this.destination=GP}static create(e,t,r){return new us(e,t,r)}next(e){this.isStopped?fg(MD(e),this):this._next(e)}error(e){this.isStopped?fg(ND(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fg(RD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qP=Function.prototype.bind;function hg(n,e){return qP.call(n,e)}var pg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cl(r)}else Cl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cl(t)}}},us=class extends qi{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&wn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hg(e.next,o),error:e.error&&hg(e.error,o),complete:e.complete&&hg(e.complete,o)}):i=e}this.destination=new pg(i)}};function Cl(n){wn.useDeprecatedSynchronousErrorHandling?PD(n):Dl(n)}function zP(n){throw n}function fg(n,e){let{onStoppedNotification:t}=wn;t&&as.setTimeout(()=>t(n,e))}var GP={closed:!0,next:sc,error:zP,complete:sc};var ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dn(n){return n}function bl(...n){return gg(n)}function gg(n){return n.length===0?Dn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=KP(t)?t:new us(t,r,i);return cs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=xD(r),new r((i,o)=>{let s=new us({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ls](){return this}pipe(...t){return gg(t)(this)}toPromise(t){return t=xD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function xD(n){var e;return(e=n??wn.Promise)!==null&&e!==void 0?e:Promise}function WP(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function KP(n){return n&&n instanceof qi||WP(n)&&wl(n)}function QP(n){return ne(n?.lift)}function Ie(n){return e=>{if(QP(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(n,e,t,r,i){return new mg(n,e,t,r,i)}var mg=class extends qi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var kD=ss(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kD}next(t){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lg:(this.currentObservers=null,o.push(t),new ze(()=>{this.currentObservers=null,$i(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new Tl(e,t),n})(),Tl=class extends Ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:lg}};var vt=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yg={now(){return(yg.delegate||Date).now()},delegate:void 0};var Sl=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var ac={setInterval(n,e,...t){let{delegate:r}=ac;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ac;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ds=class extends Sl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ac.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ac.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$i(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var hs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};hs.now=yg.now;var fs=class extends hs{constructor(e,t=hs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var vg=new fs(ds);var Al=class extends ds{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Rl=class extends fs{};var _g=new Rl(Al);var Wt=new ae(n=>n.complete());function OD(n){return n&&ne(n.schedule)}function FD(n){return n[n.length-1]}function Nl(n){return ne(FD(n))?n.pop():void 0}function ii(n){return OD(FD(n))?n.pop():void 0}function VD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function LD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zi(n){return this instanceof zi?(this.v=n,this):new zi(n)}function jD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(A){return Promise.resolve(A).then(y,p)}}function a(y,A){r[y]&&(i[y]=function(P){return new Promise(function(N,j){o.push([y,P,N,j])>1||u(y,P)})},A&&(i[y]=A(i[y])))}function u(y,A){try{l(r[y](A))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof zi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,A){y(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function UD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof LD=="function"?LD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function Pl(n){return ne(n?.then)}function xl(n){return ne(n[ls])}function kl(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Ol(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fl=YP();function Ll(n){return ne(n?.[Fl])}function Vl(n){return jD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield zi(t.read());if(i)return yield zi(void 0);yield yield zi(r)}}finally{t.releaseLock()}})}function jl(n){return ne(n?.getReader)}function Je(n){if(n instanceof ae)return n;if(n!=null){if(xl(n))return JP(n);if(Ml(n))return ZP(n);if(Pl(n))return XP(n);if(kl(n))return BD(n);if(Ll(n))return ex(n);if(jl(n))return tx(n)}throw Ol(n)}function JP(n){return new ae(e=>{let t=n[ls]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZP(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function XP(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Dl)})}function ex(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function BD(n){return new ae(e=>{nx(n,e).catch(t=>e.error(t))})}function tx(n){return BD(Vl(n))}function nx(n,e){var t,r,i,o;return VD(this,void 0,void 0,function*(){try{for(t=UD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function oi(n,e=0){return Ie((t,r)=>{t.subscribe(we(r,i=>Kt(r,n,()=>r.next(i),e),()=>Kt(r,n,()=>r.complete(),e),i=>Kt(r,n,()=>r.error(i),e)))})}function si(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $D(n,e){return Je(n).pipe(si(e),oi(e))}function HD(n,e){return Je(n).pipe(si(e),oi(e))}function qD(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zD(n,e){return new ae(t=>{let r;return Kt(t,e,()=>{r=n[Fl](),Kt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function Ul(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{Kt(t,e,()=>{let r=n[Symbol.asyncIterator]();Kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function GD(n,e){return Ul(Vl(n),e)}function WD(n,e){if(n!=null){if(xl(n))return $D(n,e);if(Ml(n))return qD(n,e);if(Pl(n))return HD(n,e);if(kl(n))return Ul(n,e);if(Ll(n))return zD(n,e);if(jl(n))return GD(n,e)}throw Ol(n)}function Me(n,e){return e?WD(n,e):Je(n)}function oe(...n){let e=ii(n);return Me(n,e)}function Eg(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function Bl(n){return!!n&&(n instanceof ae||ne(n.lift)&&ne(n.subscribe))}var Gi=ss(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ye(n,e){return Ie((t,r)=>{let i=0;t.subscribe(we(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:rx}=Array;function ix(n,e){return rx(e)?n(...e):n(e)}function $l(n){return ye(e=>ix(n,e))}var{isArray:ox}=Array,{getPrototypeOf:sx,prototype:ax,keys:cx}=Object;function Hl(n){if(n.length===1){let e=n[0];if(ox(e))return{args:e,keys:null};if(ux(e)){let t=cx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function ux(n){return n&&typeof n=="object"&&sx(n)===ax}function ql(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function zl(...n){let e=ii(n),t=Nl(n),{args:r,keys:i}=Hl(n);if(r.length===0)return Me([],e);let o=new ae(lx(r,e,i?s=>ql(i,s):Dn));return t?o.pipe($l(t)):o}function lx(n,e,t=Dn){return r=>{KD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)KD(e,()=>{let l=Me(n[u],e),h=!1;l.subscribe(we(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function KD(n,e,t){n?Kt(t,n,e):e()}function QD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?A(P):u.push(P),A=P=>{o&&e.next(P),l++;let N=!1;Je(t(P,h++)).subscribe(we(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let j=u.shift();s?Kt(e,s,()=>A(j)):A(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(we(e,y,()=>{p=!0,m()})),()=>{a?.()}}function _t(n,e,t=1/0){return ne(e)?_t((r,i)=>ye((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>QD(r,i,n,t)))}function ai(n=1/0){return _t(Dn,n)}function YD(){return ai(1)}function ps(...n){return YD()(Me(n,ii(n)))}function cc(n){return new ae(e=>{Je(n()).subscribe(e)})}function Ig(...n){let e=Nl(n),{args:t,keys:r}=Hl(n),i=new ae(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Je(t[h]).subscribe(we(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ql(r,a):a),o.complete())}))}});return e?i.pipe($l(e)):i}function Jt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(we(r,o=>n.call(e,o,i++)&&r.next(o)))})}function gs(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(we(t,void 0,void 0,s=>{o=Je(n(s,gs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ms(n,e){return ne(e)?_t(n,e,1):_t(n,1)}function wg(n){return Ie((e,t)=>{let r=!1;e.subscribe(we(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function br(n){return n<=0?()=>Wt:Ie((e,t)=>{let r=0;e.subscribe(we(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function JD(n=dx){return Ie((e,t)=>{let r=!1;e.subscribe(we(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dx(){return new Gi}function Dg(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Tr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Jt((i,o)=>n(i,o,r)):Dn,br(1),t?wg(e):JD(()=>new Gi))}function Gl(n){return n<=0?()=>Wt:Ie((e,t)=>{let r=[];e.subscribe(we(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wl(...n){let e=ii(n);return Ie((t,r)=>{(e?ps(n,t,e):ps(n,t)).subscribe(r)})}function Cn(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(we(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(n(u,h)).subscribe(i=we(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function uc(n){return Ie((e,t)=>{Je(n).subscribe(we(t,()=>t.complete(),sc)),!t.closed&&e.subscribe(t)})}function Ot(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(we(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dn}var Cg;function Kl(){return Cg}function Jn(n){let e=Cg;return Cg=n,e}var ZD=Symbol("NotFound");function ys(n){return n===ZD||n?.name==="\u0275NotFound"}var ci=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ug=new ci("21.0.1");var Xl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,t){super(Zi(e,t)),this.code=e}};function px(n){return`NG0${Math.abs(n)}`}function Zi(n,e){return`${px(n)}${e?": "+e:""}`}var gc=globalThis;function De(n){for(let e in n)if(n[e]===De)return e;throw Error("")}function rC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ar(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ar).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Bg(n,e){return n?e?`${n} ${e}`:n:e||""}var gx=De({__forward_ref__:De});function en(n){return n.__forward_ref__=en,n.toString=function(){return Ar(this())},n}function Et(n){return $g(n)?n():n}function $g(n){return typeof n=="function"&&n.hasOwnProperty(gx)&&n.__forward_ref__===en}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function mc(n){return mx(n,ed)}function Hg(n){return mc(n)!==null}function mx(n,e){return n.hasOwnProperty(e)&&n[e]||null}function yx(n){let e=n?.[ed]??null;return e||null}function Tg(n){return n&&n.hasOwnProperty(Yl)?n[Yl]:null}var ed=De({\u0275prov:De}),Yl=De({\u0275inj:De}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qg(n){return n&&!!n.\u0275providers}var zg=De({\u0275cmp:De}),Gg=De({\u0275dir:De}),Wg=De({\u0275pipe:De}),Kg=De({\u0275mod:De}),dc=De({\u0275fac:De}),Xi=De({__NG_ELEMENT_ID__:De}),XD=De({__NG_ENV_ID__:De});function Xn(n){return typeof n=="string"?n:n==null?"":String(n)}function iC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xn(n)}var oC=De({ngErrorCode:De}),vx=De({ngErrorMessage:De}),_x=De({ngTokenPath:De});function Qg(n,e){return sC("",-200,e)}function td(n,e){throw new G(-201,!1)}function sC(n,e,t){let r=new G(e,n);return r[oC]=e,r[vx]=n,t&&(r[_x]=t),r}function Ex(n){return n[oC]}var Sg;function aC(){return Sg}function Zt(n){let e=Sg;return Sg=n,e}function Yg(n,e,t){let r=mc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;td(n,"Injector")}var Ix={},Wi=Ix,Ag="__NG_DI_FLAG__",Rg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ki(t)||0;try{return this.injector.get(e,r&8?null:Wi,r)}catch(i){if(ys(i))return i;throw i}}};function wx(n,e=0){let t=Kl();if(t===void 0)throw new G(-203,!1);if(t===null)return Yg(n,void 0,e);{let r=Dx(e),i=t.retrieve(n,r);if(ys(i)){if(r.optional)return null;throw i}return i}}function Z(n,e=0){return(aC()||wx)(Et(n),e)}function M(n,e){return Z(n,Ki(e))}function Ki(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dx(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ng(n){let e=[];for(let t=0;t<n.length;t++){let r=Et(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Cx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function cC(n,e){return n[Ag]=e,n.prototype[Ag]=e,n}function Cx(n){return n[Ag]}function Qi(n,e){let t=n.hasOwnProperty(dc);return t?n[dc]:null}function uC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function lC(n){return n.flat(Number.POSITIVE_INFINITY)}function nd(n,e){n.forEach(t=>Array.isArray(t)?nd(t,e):e(t))}function Jg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function hC(n,e,t){let r=_s(n,e);return r>=0?n[r|1]=t:(r=~r,dC(n,r,e,t)),r}function rd(n,e){let t=_s(n,e);if(t>=0)return n[t|1]}function _s(n,e){return bx(n,e,1)}function bx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var li={},Xt=[],di=new q(""),Zg=new q("",-1),Xg=new q(""),hc=class{get(e,t=Wi){if(t===Wi){let i=sC("",-201);throw i.name="\u0275NotFound",i}return t}};function em(n){return n[Kg]||null}function Nr(n){return n[zg]||null}function tm(n){return n[Gg]||null}function fC(n){return n[Wg]||null}function bn(n){return{\u0275providers:n}}function pC(...n){return{\u0275providers:nm(!0,n),\u0275fromNgModule:!0}}function nm(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return nd(e,s=>{let a=s;Jl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gC(i,o),t}function gC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rm(i,o=>{e(o,r)})}}function Jl(n,e,t,r){if(n=Et(n),!n)return!1;let i=null,o=Tg(n),s=!o&&Nr(n);if(!o&&!s){let u=n.ngModule;if(o=Tg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Jl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{nd(o.imports,h=>{Jl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gC(l,e)}if(!a){let l=Qi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Xt},i),e({provide:Xg,useValue:i,multi:!0},i),e({provide:di,useValue:()=>Z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;rm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rm(n,e){for(let t of n)qg(t)&&(t=t.\u0275providers),Array.isArray(t)?rm(t,e):e(t)}var Tx=De({provide:String,useValue:De});function mC(n){return n!==null&&typeof n=="object"&&Tx in n}function Sx(n){return!!(n&&n.useExisting)}function Ax(n){return!!(n&&n.useFactory)}function Yi(n){return typeof n=="function"}function yC(n){return!!n.useClass}var vc=new q(""),Ql={},eC={},bg;function _c(){return bg===void 0&&(bg=new hc),bg}var Ze=class{},Ji=class extends Ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Pg(e,s=>this.processProvider(s)),this.records.set(Zg,vs(void 0,this)),i.has("environment")&&this.records.set(Ze,vs(void 0,this));let o=this.records.get(vc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Xg,Xt,{self:!0}))}retrieve(e,t){let r=Ki(t)||0;try{return this.get(e,Wi,r)}catch(i){if(ys(i))return i;throw i}}destroy(){lc(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return lc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){lc(this);let t=Jn(this),r=Zt(void 0),i;try{return e()}finally{Jn(t),Zt(r)}}get(e,t=Wi,r){if(lc(this),e.hasOwnProperty(XD))return e[XD](this);let i=Ki(r),o,s=Jn(this),a=Zt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=xx(e)&&mc(e);h&&this.injectableDefInScope(h)?l=vs(Mg(e),Ql):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?_c():this.parent;return t=i&8&&t===Wi?null:t,u.get(e,t)}catch(u){let l=Ex(u);throw l===-200||l===-201?new G(l,null):u}finally{Zt(a),Jn(s)}}resolveInjectorInitializers(){let e=J(null),t=Jn(this),r=Zt(void 0),i;try{let o=this.get(di,Xt,{self:!0});for(let s of o)s()}finally{Jn(t),Zt(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ar(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Et(e);let t=Yi(e)?e:Et(e&&e.provide),r=Nx(e);if(!Yi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vs(void 0,Ql,!0),i.factory=()=>Ng(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===eC)throw Qg(Ar(e));return t.value===Ql&&(t.value=eC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Px(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Et(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Mg(n){let e=mc(n),t=e!==null?e.factory:Qi(n);if(t!==null)return t;if(n instanceof q)throw new G(204,!1);if(n instanceof Function)return Rx(n);throw new G(204,!1)}function Rx(n){if(n.length>0)throw new G(204,!1);let t=yx(n);return t!==null?()=>t.factory(n):()=>new n}function Nx(n){if(mC(n))return vs(void 0,n.useValue);{let e=im(n);return vs(e,Ql)}}function im(n,e,t){let r;if(Yi(n)){let i=Et(n);return Qi(i)||Mg(i)}else if(mC(n))r=()=>Et(n.useValue);else if(Ax(n))r=()=>n.useFactory(...Ng(n.deps||[]));else if(Sx(n))r=(i,o)=>Z(Et(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Et(n&&(n.useClass||n.provide));if(Mx(n))r=()=>new i(...Ng(n.deps));else return Qi(i)||Mg(i)}return r}function lc(n){if(n.destroyed)throw new G(205,!1)}function vs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mx(n){return!!n.deps}function Px(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function xx(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Pg(n,e){for(let t of n)Array.isArray(t)?Pg(t,e):t&&qg(t)?Pg(t.\u0275providers,e):e(t)}function et(n,e){let t;n instanceof Ji?(lc(n),t=n):t=new Rg(n);let r,i=Jn(t),o=Zt(void 0);try{return e()}finally{Jn(i),Zt(o)}}function vC(){return aC()!==void 0||Kl()!=null}var Tn=0,Q=1,X=2,at=3,dn=4,hn=5,Es=6,Is=7,Ge=8,Mr=9,er=10,Fe=11,ws=12,om=13,eo=14,tn=15,hi=16,to=17,tr=18,Ec=19,sm=20,Sr=21,id=22,Ic=23,nn=24,no=25,ro=26,It=27,_C=1,am=6,fi=7,wc=8,io=9,Ue=10;function nr(n){return Array.isArray(n)&&typeof n[_C]=="object"}function Sn(n){return Array.isArray(n)&&n[_C]===!0}function cm(n){return(n.flags&4)!==0}function pi(n){return n.componentOffset>-1}function od(n){return(n.flags&1)===1}function rr(n){return!!n.template}function Ds(n){return(n[X]&512)!==0}function oo(n){return(n[X]&256)===256}var EC="svg",IC="math";function fn(n){for(;Array.isArray(n);)n=n[Tn];return n}function um(n,e){return fn(e[n])}function An(n,e){return fn(e[n.index])}function Dc(n,e){return n.data[e]}function pn(n,e){let t=e[n];return nr(t)?t:t[Tn]}function wC(n){return(n[X]&4)===4}function sd(n){return(n[X]&128)===128}function DC(n){return Sn(n[at])}function ir(n,e){return e==null?null:n[e]}function lm(n){n[to]=0}function dm(n){n[X]&1024||(n[X]|=1024,sd(n)&&Cs(n))}function CC(n,e){for(;n>0;)e=e[eo],n--;return e}function Cc(n){return!!(n[X]&9216||n[nn]?.dirty)}function ad(n){n[er].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),Cc(n)&&Cs(n)}function Cs(n){n[er].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!sd(e)));)e=ui(e)}function hm(n,e){if(oo(n))throw new G(911,!1);n[Sr]===null&&(n[Sr]=[]),n[Sr].push(e)}function bC(n,e){if(n[Sr]===null)return;let t=n[Sr].indexOf(e);t!==-1&&n[Sr].splice(t,1)}function ui(n){let e=n[at];return Sn(e)?e[at]:e}function fm(n){return n[Is]??=[]}function pm(n){return n.cleanup??=[]}function TC(n,e,t,r){let i=fm(e);i.push(t),n.firstCreatePass&&pm(n).push(r,i.length-1)}var ue={lFrame:jC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xg=!1;function SC(){return ue.lFrame.elementDepthCount}function AC(){ue.lFrame.elementDepthCount++}function gm(){ue.lFrame.elementDepthCount--}function RC(){return ue.bindingsEnabled}function NC(){return ue.skipHydrationRootTNode!==null}function mm(n){return ue.skipHydrationRootTNode===n}function ym(){ue.skipHydrationRootTNode=null}function ce(){return ue.lFrame.lView}function wt(){return ue.lFrame.tView}function Be(n){return ue.lFrame.contextLView=n,n[Ge]}function $e(n){return ue.lFrame.contextLView=null,n}function Dt(){let n=vm();for(;n!==null&&n.type===64;)n=n.parent;return n}function vm(){return ue.lFrame.currentTNode}function MC(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bs(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function _m(){return ue.lFrame.isParent}function PC(){ue.lFrame.isParent=!1}function Em(){return xg}function Im(n){let e=xg;return xg=n,e}function wm(){let n=ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Dm(){return ue.lFrame.bindingIndex}function xC(n){return ue.lFrame.bindingIndex=n}function so(){return ue.lFrame.bindingIndex++}function cd(n){let e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function kC(){return ue.lFrame.inI18n}function OC(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,ud(e)}function FC(){return ue.lFrame.currentDirectiveIndex}function ud(n){ue.lFrame.currentDirectiveIndex=n}function LC(n){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Cm(){return ue.lFrame.currentQueryIndex}function ld(n){ue.lFrame.currentQueryIndex=n}function kx(n){let e=n[Q];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function bm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=kx(o),i===null||(o=o[eo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=VC();return r.currentTNode=e,r.lView=n,!0}function dd(n){let e=VC(),t=n[Q];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VC(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?jC(n):e}function jC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function UC(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Tm=UC;function hd(){let n=UC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function BC(n){return(ue.lFrame.contextLView=CC(n,ue.lFrame.contextLView))[Ge]}function or(){return ue.lFrame.selectedIndex}function gi(n){ue.lFrame.selectedIndex=n}function fd(){let n=ue.lFrame;return Dc(n.tView,n.selectedIndex)}function $C(){return ue.lFrame.currentNamespace}var HC=!0;function pd(){return HC}function gd(n){HC=n}function kg(n,e=null,t=null,r){let i=Sm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Sm(n,e=null,t=null,r,i=new Set){let o=[t||Xt,pC(n)];return r=r||(typeof n=="object"?void 0:Ar(n)),new Ji(o,e||_c(),r||null,i)}var Xe=class n{static THROW_IF_NOT_FOUND=Wi;static NULL=new hc;static create(e,t){if(Array.isArray(e))return kg({name:""},t,e,"");{let r=e.name??"";return kg({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>Z(Zg)});static __NG_ELEMENT_ID__=-1},tt=new q(""),Rn=(()=>{class n{static __NG_ELEMENT_ID__=Ox;static __NG_ENV_ID__=t=>t}return n})(),Og=class extends Rn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return oo(this._lView)}onDestroy(e){let t=this._lView;return hm(t,e),()=>bC(t,e)}};function Ox(){return new Og(ce())}var Am=!1,sr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new vt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fg=class extends Ye{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vC()&&(this.destroyRef=M(Rn,{optional:!0})??void 0,this.pendingTasks=M(sr,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Pe=Fg;function Zl(...n){}function Rm(n){let e,t;function r(){n=Zl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Nm(n){return queueMicrotask(()=>n()),()=>{n=Zl}}var Mm="isAngularZone",fc=Mm+"_ID",Fx=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pe(!1);onMicrotaskEmpty=new Pe(!1);onStable=new Pe(!1);onError=new Pe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Am}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Lx,Zl,Zl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Lx={};function Pm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Rm(()=>{n.callbackScheduled=!1,Lg(n),n.isCheckStableRunning=!0,Pm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lg(n)}function jx(n){let e=()=>{Vx(n)},t=Fx++;n._inner=n._inner.fork({name:"angular",properties:{[Mm]:!0,[fc]:t,[fc+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Ux(u))return r.invokeTask(o,s,a,u);try{return tC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),nC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return tC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Bx(u)&&e(),nC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Lg(n),Pm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Lg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nC(n){n._nesting--,Pm(n)}var pc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pe;onMicrotaskEmpty=new Pe;onStable=new Pe;onError=new Pe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Ux(n){return qC(n,"__ignore_ng_zone__")}function Bx(n){return qC(n,"__scheduler_tick__")}function qC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},gn=new q("",{factory:()=>{let n=M(Ce),e=M(Ze),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Zn),t.handleError(r))})}}}),zC={provide:di,useValue:()=>{let n=M(Zn,{optional:!0})},multi:!0};function Re(n,e){let[t,r,i]=cg(n,e?.equal),o=t,s=o[kt];return o.set=r,o.update=i,o.asReadonly=GC.bind(o),o}function GC(){let n=this[kt];if(n.readonlyFn===void 0){let e=()=>this();e[kt]=n,n.readonlyFn=e}return n.readonlyFn}var md=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=$x}return n})();function $x(){return new md(ce(),Dt())}var Rr=class{},Ts=new q("",{factory:()=>!0});var yd=new q(""),Ss=(()=>{class n{internalPendingTasks=M(sr);scheduler=M(Rr);errorHandler=M(gn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),xm=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Vg})}return n})(),Vg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},jg=class{[kt];constructor(e){this[kt]=e}destroy(){this[kt].destroy()}};function ct(n){return ug(n)}function Os(n){return{toString:n}.toString()}var vd="__parameters__";function Jx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Zx(n,e,t){return Os(()=>{let r=Jx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(vd)?u[vd]:Object.defineProperty(u,vd,{value:[]})[vd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xr=cC(Zx("Optional"),8);function Xx(n){return typeof n=="function"}function Ib(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var bd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},mn=(()=>{let n=()=>wb;return n.ngInherit=!0,n})();function wb(n){return n.type.prototype.ngOnChanges&&(n.setInput=tk),ek}function ek(){let n=Cb(this),e=n?.current;if(e){let t=n.previous;if(t===li)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tk(n,e,t,r,i){let o=this.declaredInputs[r],s=Cb(n)||nk(n,{previous:li,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new bd(l&&l.currentValue,t,u===li),Ib(n,e,i,t)}var Db="__ngSimpleChanges__";function Cb(n){return n[Db]||null}function nk(n,e){return n[Db]=e}var WC=[];var be=function(n,e=null,t){for(let r=0;r<WC.length;r++){let i=WC[r];i(n,e,t)}},me=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(me||{});function rk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=wb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ik(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Id(n,e,t){bb(n,e,3,t)}function wd(n,e,t,r){(n[X]&3)===t&&bb(n,e,t,r)}function km(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function bb(n,e,t,r){let i=r!==void 0?n[to]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[to]+=65536),(a<o||o==-1)&&(ok(n,t,e,u),n[to]=(n[to]&4294901760)+u+2),u++}function KC(n,e){be(me.LifecycleHookStart,n,e);let t=J(null);try{e.call(n)}finally{J(t),be(me.LifecycleHookEnd,n,e)}}function ok(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[X]>>14<n[to]>>16&&(n[X]&3)===e&&(n[X]+=16384,KC(a,o)):KC(a,o)}var Rs=-1,co=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function sk(n){return(n.flags&8)!==0}function ak(n){return(n.flags&16)!==0}function ck(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];uk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Tb(n){return n===3||n===4||n===6}function uk(n){return n.charCodeAt(0)===64}function Ns(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?QC(n,t,i,null,e[++r]):QC(n,t,i,null,null))}}return n}function QC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Sb(n){return n!==Rs}function Td(n){return n&32767}function lk(n){return n>>16}function Sd(n,e){let t=lk(n),r=e;for(;t>0;)r=r[eo],t--;return r}var zm=!0;function YC(n){let e=zm;return zm=n,e}var dk=256,Ab=dk-1,Rb=5,hk=0,ar={};function fk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xi)&&(r=t[Xi]),r==null&&(r=t[Xi]=hk++);let i=r&Ab,o=1<<i;e.data[n+(i>>Rb)]|=o}function Ad(n,e){let t=Nb(n,e);if(t!==-1)return t;let r=e[Q];r.firstCreatePass&&(n.injectorIndex=e.length,Om(r.data,n),Om(e,null),Om(r.blueprint,null));let i=_y(n,e),o=n.injectorIndex;if(Sb(i)){let s=Td(i),a=Sd(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Om(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Nb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _y(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Ob(i),r===null)return Rs;if(t++,i=i[eo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Rs}function Gm(n,e,t){fk(n,e,t)}function pk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Tb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Mb(n,e,t){if(t&8||n!==void 0)return n;td(e,"NodeInjector")}function Pb(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Mr],o=Zt(void 0);try{return i?i.get(e,r,t&8):Yg(e,r,t&8)}finally{Zt(o)}}return Mb(r,e,t)}function xb(n,e,t,r=0,i){if(n!==null){if(e[X]&2048&&!(r&2)){let s=vk(n,e,t,r,ar);if(s!==ar)return s}let o=kb(n,e,t,r,ar);if(o!==ar)return o}return Pb(e,t,r,i)}function kb(n,e,t,r,i){let o=mk(t);if(typeof o=="function"){if(!bm(e,n,r))return r&1?Mb(i,t,r):Pb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))td(t);else return s}finally{Tm()}}else if(typeof o=="number"){let s=null,a=Nb(n,e),u=Rs,l=r&1?e[tn][hn]:null;for((a===-1||r&4)&&(u=a===-1?_y(n,e):e[a+8],u===Rs||!ZC(r,!1)?a=-1:(s=e[Q],a=Td(u),e=Sd(u,e)));a!==-1;){let h=e[Q];if(JC(o,a,h.data)){let p=gk(a,e,t,s,r,l);if(p!==ar)return p}u=e[a+8],u!==Rs&&ZC(r,e[Q].data[a+8]===l)&&JC(o,a,e)?(s=h,a=Td(u),e=Sd(u,e)):a=-1}}return i}function gk(n,e,t,r,i,o){let s=e[Q],a=s.data[n+8],u=r==null?pi(a)&&zm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Dd(a,s,t,u,l);return h!==null?Sc(e,s,h,a,i):ar}function Dd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let A=s[y];if(y<u&&t===A||y>=u&&A.type===t)return y}if(i){let y=s[u];if(y&&rr(y)&&y.type===t)return u}return null}function Sc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof co){let a=o;if(a.resolving){let y=iC(s[t]);throw Qg(y)}let u=YC(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Zt(a.injectImpl):null,m=bm(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&rk(t,s[t],e)}finally{p!==null&&Zt(p),YC(u),a.resolving=!1,Tm()}}return o}function mk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Xi)?n[Xi]:void 0;return typeof e=="number"?e>=0?e&Ab:yk:e}function JC(n,e,t){let r=1<<n;return!!(t[e+(n>>Rb)]&r)}function ZC(n,e){return!(n&2)&&!(n&1&&e)}var ao=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xb(this._tNode,this._lView,e,Ki(r),t)}};function yk(){return new ao(Dt(),ce())}function xn(n){return Os(()=>{let e=n.prototype.constructor,t=e[dc]||Wm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[dc]||Wm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wm(n){return $g(n)?()=>{let e=Wm(Et(n));return e&&e()}:Qi(n)}function vk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!Ds(s);){let a=kb(o,s,t,r|2,ar);if(a!==ar)return a;let u=o.parent;if(!u){let l=s[sm];if(l){let h=l.get(t,ar,r);if(h!==ar)return h}u=Ob(s),s=s[eo]}o=u}return i}function Ob(n){let e=n[Q],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function xc(n){return pk(Dt(),n)}function _k(){return Fs(Dt(),ce())}function Fs(n,e){return new Ft(An(n,e))}var Ft=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=_k}return n})();function Ek(n){return n instanceof Ft?n.nativeElement:n}function Ik(){return this._results[Symbol.iterator]()}var Rd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ye}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=lC(e);(this._changesDetected=!uC(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Ik};function Fb(n){return(n.flags&128)===128}var Ey=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Ey||{}),Lb=new Map,wk=0;function Dk(){return wk++}function Ck(n){Lb.set(n[Ec],n)}function Km(n){Lb.delete(n[Ec])}var XC="__ngContext__";function Ms(n,e){nr(e)?(n[XC]=e[Ec],Ck(e)):n[XC]=e}function Vb(n){return Ub(n[ws])}function jb(n){return Ub(n[dn])}function Ub(n){for(;n!==null&&!Sn(n);)n=n[dn];return n}var bk;function Iy(n){bk=n}var Hd=new q("",{factory:()=>Tk}),Tk="ng";var qd=new q(""),po=new q("",{providedIn:"platform",factory:()=>"unknown"});var zd=new q("",{factory:()=>M(tt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Bb="r";var $b="di";var Hb=!1,qb=new q("",{factory:()=>Hb});var wy=new q("");var Sk=(n,e,t,r)=>{};function Ak(n,e,t,r){Sk(n,e,t,r)}function Dy(n){return(n.flags&32)===32}var Rk=()=>null;function zb(n,e,t=!1){return Rk(n,e,t)}function Gb(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ld(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function Qm(n,e,t){ld(0);let r=J(null);try{e(n,t)}finally{J(r)}}function Wb(n,e,t){if(cm(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var Mn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Mn||{});var _d;function Nk(){if(_d===void 0&&(_d=null,gc.trustedTypes))try{_d=gc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _d}function eb(n){return Nk()?.createScriptURL(n)||n}var Nd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xl})`}};function kc(n){return n instanceof Nd?n.changingThisBreaksApplicationSecurity:n}function Cy(n,e){let t=Kb(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Xl})`)}return t===e}function Kb(n){return n instanceof Nd&&n.getTypeName()||null}var Mk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qb(n){return n=String(n),n.match(Mk)?n:"unsafe:"+n}var Gd=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Gd||{});function Yb(n){let e=Zb();return e?e.sanitize(Gd.URL,n)||"":Cy(n,"URL")?kc(n):Qb(Xn(n))}function Jb(n){let e=Zb();if(e)return eb(e.sanitize(Gd.RESOURCE_URL,n)||"");if(Cy(n,"ResourceURL"))return eb(kc(n));throw new G(904,!1)}function Pk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Jb:Yb}function by(n,e,t){return Pk(e,t)(n)}function Zb(){let n=ce();return n&&n[er].sanitizer}function Xb(n){return n instanceof Function?n():n}function xk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var eT="ng-template";function kk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ty(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ty(n){return n.type===4&&n.value!==eT}function Ok(n,e,t){let r=n.type===4&&!t?eT:n.value;return e===r}function Fk(n,e,t){let r=4,i=n.attrs,o=i!==null?jk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Nn(r)&&!Nn(u))return!1;if(s&&Nn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Ok(n,u,t)||u===""&&e.length===1){if(Nn(r))return!1;s=!0}}else if(r&8){if(i===null||!kk(n,i,u,t)){if(Nn(r))return!1;s=!0}}else{let l=e[++a],h=Lk(u,i,Ty(n),t);if(h===-1){if(Nn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nn(r))return!1;s=!0}}}}return Nn(r)||s}function Nn(n){return(n&1)===0}function Lk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Uk(e,n)}function Vk(n,e,t=!1){for(let r=0;r<e.length;r++)if(Fk(n,e[r],t))return!0;return!1}function jk(n){for(let e=0;e<n.length;e++){let t=n[e];if(Tb(t))return e}return n.length}function Uk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function tb(n,e){return n?":not("+e.trim()+")":e}function Bk(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nn(s)&&(e+=tb(o,i),i=""),r=s,o=o||!Nn(r);t++}return i!==""&&(e+=tb(o,i)),e}function $k(n){return n.map(Bk).join(",")}function Hk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Lt={};function qk(n,e){return n.createText(e)}function zk(n,e,t){n.setValue(e,t)}function tT(n,e,t){return n.createElement(e,t)}function Md(n,e,t,r,i){n.insertBefore(e,t,r,i)}function nT(n,e,t){n.appendChild(e,t)}function nb(n,e,t,r,i){r!==null?Md(n,e,t,r,i):nT(n,e,t)}function rT(n,e,t,r){n.removeChild(null,e,t,r)}function Gk(n,e,t){n.setAttribute(e,"style",t)}function Wk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function iT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ck(n,e,r),i!==null&&Wk(n,e,i),o!==null&&Gk(n,e,o)}function Sy(n,e,t,r,i,o,s,a,u,l,h){let p=It+r,m=p+i,y=Kk(p,m),A=typeof l=="function"?l():l;return y[Q]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function Kk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Lt);return t}function Qk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Sy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ay(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Tn]=i,p[X]=r|4|128|8|64|1024,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),lm(p),p[at]=p[eo]=n,p[Ge]=t,p[er]=s||n&&n[er],p[Fe]=a||n&&n[Fe],p[Mr]=u||n&&n[Mr]||null,p[hn]=o,p[Ec]=Dk(),p[Es]=h,p[sm]=l,p[tn]=e.type==2?n[tn]:p,p}function Yk(n,e,t){let r=An(e,n),i=Qk(t),o=n[er].rendererFactory,s=Ry(n,Ay(n,i,null,oT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function oT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function sT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ry(n,e){return n[ws]?n[om][dn]=e:n[ws]=e,n[om]=e,e}function U(n=1){aT(wt(),ce(),or()+n,!1)}function aT(n,e,t,r){if(!r)if((e[X]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Id(e,o,t)}else{let o=n.preOrderHooks;o!==null&&wd(e,o,0,t)}gi(t)}var Wd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Wd||{});function Ym(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Wd.SignalBased)!==0&&(u=e[o][kt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Ib(e,u,o,r)}finally{J(i)}}var Pr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Pr||{}),Jk;function Ny(n,e){return Jk(n,e)}var uo=new Set,Kd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Kd||{}),go=new q(""),rb=new Set;function kn(n){rb.has(n)||(rb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var My=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),cT=[0,1,2,3],uT=(()=>{class n{ngZone=M(Ce);scheduler=M(Rr);errorHandler=M(Zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(go,{optional:!0})}execute(){let t=this.sequences.size>0;t&&be(me.AfterRenderHooksStart),this.executing=!0;for(let r of cT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&be(me.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[no]??=[]).push(t),Cs(r),r[X]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Kd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Pd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[no];e&&(this.view[no]=e.filter(t=>t!==this))}};function Oc(n,e){let t=e?.injector??M(Xe);return kn("NgAfterNextRender"),Xk(n,t,e,!0)}function Zk(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Xk(n,e,t,r){let i=e.get(My);i.impl??=e.get(uT);let o=e.get(go,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Rn):null,a=e.get(md,null,{optional:!0}),u=new Pd(i.impl,Zk(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var lT=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function dT(n,e,t){let r=n.get(lT);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function eO(n,e){let t=n.get(lT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function tO(n,e){for(let[t,r]of e)dT(n,r.animateFns)}function ib(n,e,t,r){let i=n?.[ro]?.enter;e!==null&&i&&i.has(t.index)&&tO(r,i)}function As(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Sn(i)?u=i:nr(i)&&(l=!0,i=i[Tn]);let h=fn(i);n===0&&r!==null?(ib(a,r,o,t),s==null?nT(e,r,h):Md(e,r,h,s||null,!0)):n===1&&r!==null?(ib(a,r,o,t),Md(e,r,h,s||null,!0)):n===2?ob(a,o,t,p=>{rT(e,h,l,p)}):n===3&&ob(a,o,t,()=>{e.destroyNode(h)}),u!=null&&pO(e,n,t,u,o,r,s)}}function nO(n,e){hT(n,e),e[Tn]=null,e[hn]=null}function rO(n,e,t,r,i,o){r[Tn]=i,r[hn]=e,Yd(n,r,t,1,i,o)}function hT(n,e){e[er].changeDetectionScheduler?.notify(9),Yd(n,e,e[Fe],2,null,null)}function iO(n){let e=n[ws];if(!e)return Fm(n[Q],n);for(;e;){let t=null;if(nr(e))t=e[ws];else{let r=e[Ue];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)nr(e)&&Fm(e[Q],e),e=e[at];e===null&&(e=n),nr(e)&&Fm(e[Q],e),t=e&&e[dn]}e=t}}function Py(n,e){let t=n[io],r=t.indexOf(e);t.splice(r,1)}function Qd(n,e){if(oo(e))return;let t=e[Fe];t.destroyNode&&Yd(n,e,t,3,null,null),iO(e)}function Fm(n,e){if(oo(e))return;let t=J(null);try{e[X]&=-129,e[X]|=256,e[nn]&&ic(e[nn]),aO(n,e),sO(n,e),e[Q].type===1&&e[Fe].destroy();let r=e[hi];if(r!==null&&Sn(e[at])){r!==e[at]&&Py(r,e);let i=e[tr];i!==null&&i.detachView(n)}Km(e)}finally{J(t)}}function ob(n,e,t,r){let i=n?.[ro];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&uo.add(n),dT(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),oO(n,r)}else n&&uo.delete(n),r(!1)},i)}function oO(n,e){let t=n[ro]?.running;if(t){t.then(()=>{n[ro].running=void 0,uo.delete(n),e(!0)});return}e(!1)}function sO(n,e){let t=n.cleanup,r=e[Is];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Is]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ic];if(o!==null){e[Ic]=null;for(let s of o)s.destroy()}}function aO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof co)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];be(me.LifecycleHookStart,a,u);try{u.call(a)}finally{be(me.LifecycleHookEnd,a,u)}}else{be(me.LifecycleHookStart,i,o);try{o.call(i)}finally{be(me.LifecycleHookEnd,i,o)}}}}}function cO(n,e,t){return uO(n,e.parent,t)}function uO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Tn];if(pi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Mn.None||i===Mn.Emulated)return null}return An(r,t)}function lO(n,e,t){return hO(n,e,t)}function dO(n,e,t){return n.type&40?An(n,t):null}var hO=dO,sb;function xy(n,e,t,r){let i=cO(n,r,e),o=e[Fe],s=r.parent||e[hn],a=lO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)nb(o,i,t[u],a,!1);else nb(o,i,t,a,!1);sb!==void 0&&sb(o,r,e,t,i)}function bc(n,e){if(e!==null){let t=e.type;if(t&3)return An(e,n);if(t&4)return Jm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return bc(n,r);{let i=n[e.index];return Sn(i)?Jm(-1,i):fn(i)}}else{if(t&128)return bc(n,e.next);if(t&32)return Ny(e,n)()||fn(n[e.index]);{let r=fT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[tn]);return bc(i,r)}else return bc(n,e.next)}}}return null}function fT(n,e){if(e!==null){let r=n[tn][hn],i=e.projection;return r.projection[i]}return null}function Jm(n,e){let t=Ue+n+1;if(t<e.length){let r=e[t],i=r[Q].firstChild;if(i!==null)return bc(r,i)}return e[fi]}function ky(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Mr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&Ms(fn(u),r),t.flags|=2),!Dy(t))if(l&8)ky(n,e,t.child,r,i,o,!1),As(e,n,a,i,u,t,o,r);else if(l&32){let h=Ny(t,r),p;for(;p=h();)As(e,n,a,i,p,t,o,r);As(e,n,a,i,u,t,o,r)}else l&16?fO(n,e,r,t,i,o):As(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Yd(n,e,t,r,i,o){ky(t,r,n.firstChild,e,i,o,!1)}function fO(n,e,t,r,i,o){let s=t[tn],u=s[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];As(e,n,t[Mr],i,h,r,o,t)}else{let l=u,h=s[at];Fb(r)&&(l.flags|=128),ky(n,e,l,h,i,o,!0)}}function pO(n,e,t,r,i,o,s){let a=r[fi],u=fn(r);a!==u&&As(e,n,t,o,a,i,s);for(let l=Ue;l<r.length;l++){let h=r[l];Yd(h[Q],h,n,e,o,a)}}function gO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Pr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pr.Important),n.setStyle(t,r,i,o))}}function pT(n,e,t,r,i){let o=or(),s=r&2;try{gi(-1),s&&e.length>It&&aT(n,e,It,!1);let a=s?me.TemplateUpdateStart:me.TemplateCreateStart;be(a,i,t),t(r,i)}finally{gi(o);let a=s?me.TemplateUpdateEnd:me.TemplateCreateEnd;be(a,i,t)}}function gT(n,e,t){wO(n,e,t),(t.flags&64)===64&&DO(n,e,t)}function Oy(n,e,t=An){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function mO(n,e,t,r){let o=r.get(qb,Hb)||t===Mn.ShadowDom||t===Mn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return yO(s),s}function yO(n){vO(n)}var vO=()=>null;function _O(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function mT(n,e,t,r,i,o){let s=e[Q];if(Fy(n,s,e,t,r)){pi(n)&&IO(e,n.index);return}n.type&3&&(t=_O(t)),EO(n,e,t,r,i,o)}function EO(n,e,t,r,i,o){if(n.type&3){let s=An(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function IO(n,e){let t=pn(e,n);t[X]&16||(t[X]|=64)}function wO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;pi(t)&&Yk(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ad(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Sc(e,n,s,t);if(Ms(u,e),o!==null&&AO(e,s-r,u,a,t,o),rr(a)){let l=pn(t.index,e);l[Ge]=Sc(e,n,s,t)}}}function DO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=FC();try{gi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];ud(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CO(u,l)}}finally{gi(-1),ud(s)}}function CO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function bO(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Vk(e,o.selectors,!1)&&(r??=[],rr(o)?r.unshift(o):r.push(o))}return r}function TO(n,e,t,r,i,o){let s=An(n,e);SO(e[Fe],s,o,n.value,t,r,i)}function SO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Xn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function AO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Ym(r,t,u,l)}}function yT(n,e,t,r,i){let o=It+t,s=e[Q],a=i(s,e,n,r,t);e[o]=a,bs(n,!0);let u=n.type===2;return u?(iT(e[Fe],a,n),(SC()===0||od(n))&&Ms(a,e),AC()):Ms(a,e),pd()&&(!u||!Dy(n))&&xy(s,e,a,n),n}function vT(n){let e=n;return _m()?PC():(e=e.parent,bs(e,!1)),e}function RO(n,e){let t=n[Mr];if(!t)return;let r;try{r=t.get(gn,null)}catch{r=null}r?.(e)}function Fy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Ym(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Ym(h,l,r,i),a=!0}return a}function NO(n,e){let t=pn(e,n),r=t[Q];MO(r,t);let i=t[Tn];i!==null&&t[Es]===null&&(t[Es]=zb(i,t[Mr])),be(me.ComponentStart);try{Ly(r,t,t[Ge])}finally{be(me.ComponentEnd,t[Ge])}}function MO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ly(n,e,t){dd(e);try{let r=n.viewQuery;r!==null&&Qm(1,r,t);let i=n.template;i!==null&&pT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[tr]?.finishViewCreation(n),n.staticContentQueries&&Gb(n,e),n.staticViewQueries&&Qm(2,n.viewQuery,t);let o=n.components;o!==null&&PO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,hd()}}function PO(n,e){for(let t=0;t<e.length;t++)NO(n,e[t])}function Jd(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[X]&4096?4096:16,u=Ay(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[hi]=l;let h=n[tr];return h!==null&&(u[tr]=h.createEmbeddedView(o)),Ly(o,u,t),u}finally{J(i)}}function Ac(n,e){return!e||e.firstChild===null||Fb(n)}function Rc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(fn(o)),Sn(o)&&_T(o,r);let s=t.type;if(s&8)Rc(n,e,t.child,r);else if(s&32){let a=Ny(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=fT(e,t);if(Array.isArray(a))r.push(...a);else{let u=ui(e[tn]);Rc(u[Q],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function _T(n,e){for(let t=Ue;t<n.length;t++){let r=n[t],i=r[Q].firstChild;i!==null&&Rc(r[Q],r,i,e)}n[fi]!==n[Tn]&&e.push(n[fi])}function ET(n){if(n[no]!==null){for(let e of n[no])e.impl.addSequence(e);n[no].length=0}}var IT=[];function xO(n){return n[nn]??kO(n)}function kO(n){let e=IT.pop()??Object.create(FO);return e.lView=n,e}function OO(n){n.lView[nn]!==n&&(n.lView=null,IT.push(n))}var FO=W(R({},tc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Cs(n.lView)},consumerOnSignalRead(){this.lView[nn]=this}});function LO(n){let e=n[nn]??Object.create(VO);return e.lView=n,e}var VO=W(R({},tc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!wT(e[Q]);)e=ui(e);e&&dm(e)},consumerOnSignalRead(){this.lView[nn]=this}});function wT(n){return n.type!==2}function DT(n){if(n[Ic]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ic])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[X]&8192)}}var jO=100;function CT(n,e=0){let r=n[er].rendererFactory,i=!1;i||r.begin?.();try{UO(n,e)}finally{i||r.end?.()}}function UO(n,e){let t=Em();try{Im(!0),Zm(n,e);let r=0;for(;Cc(n);){if(r===jO)throw new G(103,!1);r++,Zm(n,1)}}finally{Im(t)}}function BO(n,e,t,r){if(oo(e))return;let i=e[X],o=!1,s=!1;dd(e);let a=!0,u=null,l=null;o||(wT(n)?(l=xO(e),u=rc(l)):ml()===null?(a=!1,l=LO(e),u=rc(l)):e[nn]&&(ic(e[nn]),e[nn]=null));try{lm(e),xC(n.bindingStartIndex),t!==null&&pT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Id(e,y,null)}else{let y=n.preOrderHooks;y!==null&&wd(e,y,0,null),km(e,0)}if(s||$O(e),DT(e),bT(e,0),n.contentQueries!==null&&Gb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Id(e,y)}else{let y=n.contentHooks;y!==null&&wd(e,y,1),km(e,1)}qO(n,e);let p=n.components;p!==null&&ST(e,p,0);let m=n.viewQuery;if(m!==null&&Qm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Id(e,y)}else{let y=n.viewHooks;y!==null&&wd(e,y,2),km(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[id]){for(let y of e[id])y();e[id]=null}o||(ET(e),e[X]&=-73)}catch(h){throw o||Cs(e),h}finally{l!==null&&(yl(l,u),a&&OO(l)),hd()}}function bT(n,e){for(let t=Vb(n);t!==null;t=jb(t))for(let r=Ue;r<t.length;r++){let i=t[r];TT(i,e)}}function $O(n){for(let e=Vb(n);e!==null;e=jb(e)){if(!(e[X]&2))continue;let t=e[io];for(let r=0;r<t.length;r++){let i=t[r];dm(i)}}}function HO(n,e,t){be(me.ComponentStart);let r=pn(e,n);try{TT(r,t)}finally{be(me.ComponentEnd,r[Ge])}}function TT(n,e){sd(n)&&Zm(n,e)}function Zm(n,e){let r=n[Q],i=n[X],o=n[nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vl(o)),s||=!1,o&&(o.dirty=!1),n[X]&=-9217,s)BO(r,n,r.template,n[Ge]);else if(i&8192){let a=J(null);try{DT(n),bT(n,1);let u=r.components;u!==null&&ST(n,u,1),ET(n)}finally{J(a)}}}function ST(n,e,t){for(let r=0;r<e.length;r++)HO(n,e[r],t)}function qO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gi(~i);else{let o=i,s=t[++r],a=t[++r];OC(s,o);let u=e[o];be(me.HostBindingsUpdateStart,u);try{a(2,u)}finally{be(me.HostBindingsUpdateEnd,u)}}}}finally{gi(-1)}}function Vy(n,e){let t=Em()?64:1088;for(n[er].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=ui(n);if(Ds(n)&&!r)return n;n=r}return null}function AT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function RT(n,e){let t=Ue+e;if(t<n.length)return n[t]}function Zd(n,e,t,r=!0){let i=e[Q];if(zO(i,e,n,t),r){let s=Jm(t,n),a=e[Fe],u=a.parentNode(n[fi]);u!==null&&rO(i,n[hn],a,e,u,s)}let o=e[Es];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function NT(n,e){let t=Nc(n,e);return t!==void 0&&Qd(t[Q],t),t}function Nc(n,e){if(n.length<=Ue)return;let t=Ue+e,r=n[t];if(r){let i=r[hi];i!==null&&i!==n&&Py(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=yc(n,Ue+e);nO(r[Q],r);let s=o[tr];s!==null&&s.detachView(o[Q]),r[at]=null,r[dn]=null,r[X]&=-129}return r}function zO(n,e,t,r){let i=Ue+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Ue?(e[dn]=t[i],Jg(t,Ue+r,e)):(t.push(e),e[dn]=null),e[at]=t;let s=e[hi];s!==null&&t!==s&&MT(s,e);let a=e[tr];a!==null&&a.insertView(n),ad(e),e[X]|=128}function MT(n,e){let t=n[io],r=e[at];if(nr(r))n[X]|=2;else{let i=r[at][tn];e[tn]!==i&&(n[X]|=2)}t===null?n[io]=[e]:t.push(e)}var mi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Q];return Rc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ge]}set context(e){this._lView[Ge]=e}get destroyed(){return oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(Sn(e)){let t=e[wc],r=t?t.indexOf(this):-1;r>-1&&(Nc(e,r),yc(t,r))}this._attachedToViewContainer=!1}Qd(this._lView[Q],this._lView)}onDestroy(e){hm(this._lView,e)}markForCheck(){Vy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){ad(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,CT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ds(this._lView),t=this._lView[hi];t!==null&&!e&&Py(t,this._lView),hT(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=Ds(this._lView),r=this._lView[hi];r!==null&&!t&&MT(r,this._lView),ad(this._lView)}};var Ps=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=GO;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Jd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new mi(o)}}return n})();function GO(){return jy(Dt(),ce())}function jy(n,e){return n.type&4?new Ps(e,n,Fs(n,e)):null}function Xd(n,e,t,r,i){let o=n.data[e];if(o===null)o=WO(n,e,t,r,i),kC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=MC();o.injectorIndex=s===null?-1:s.injectorIndex}return bs(o,!0),o}function WO(n,e,t,r,i){let o=vm(),s=_m(),a=s?o:o&&o.parent,u=n.data[e]=QO(n,a,t,e,r,i);return KO(n,u,o,s),u}function KO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function QO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return NC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function YO(n){let e=n[am]??[],r=n[at][Fe],i=[];for(let o of e)o.data[$b]!==void 0?i.push(o):JO(o,r);n[am]=i}function JO(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Bb];for(;t<i;){let o=r.nextSibling;rT(e,r,!1),r=o,t++}}}var ZO=()=>null,XO=()=>null;function Xm(n,e){return ZO(n,e)}function PT(n,e,t){return XO(n,e,t)}var xT=class{},eh=class{},ey=class{resolveComponentFactory(e){throw new G(917,!1)}},Fc=class{static NULL=new ey},lo=class{},On=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>e1()}return n})();function e1(){let n=ce(),e=Dt(),t=pn(e.index,n);return(nr(t)?t:n)[Fe]}var kT=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var Cd={},ty=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Cd,r);return i!==Cd||t===Cd?i:this.parentInjector.get(e,t,r)}};function xd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Bg(i,a);else if(o==2){let u=a,l=e[++s];r=Bg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B(n,e=0){let t=ce();if(t===null)return Z(n,e);let r=Dt();return xb(r,t,Et(n),e)}function Uy(){let n="invalid";throw new Error(n)}function t1(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}i1(n,e,t,a,o,u,l)}o!==null&&r!==null&&n1(t,r,o)}function n1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function r1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function i1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&rr(y)&&(u=!0,r1(n,t,m)),Gm(Ad(t,e),n,y.type)}l1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=sT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Ns(t.mergedAttrs,y.hostAttrs),s1(n,t,e,p,y),u1(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let A=y.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}o1(n,t,o)}function o1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ab(0,e,i,r),ab(1,e,i,r),ub(e,r,!1);else{let o=t.get(i);cb(0,e,o,r),cb(1,e,o,r),ub(e,r,!0)}}}function ab(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),OT(e,o)}}function cb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),OT(e,s)}}function OT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ub(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ty(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function s1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qi(i.type,!0)),s=new co(o,rr(i),B,null);n.blueprint[r]=s,t[r]=s,a1(n,e,r,sT(n,t,i.hostVars,Lt),i)}function a1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;c1(s)!=a&&s.push(a),s.push(t,r,o)}}function c1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function u1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;rr(e)&&(t[""]=n)}}function l1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function FT(n,e,t,r,i,o,s,a){let u=e[Q],l=u.consts,h=ir(l,s),p=Xd(u,n,t,r,h);return o&&t1(u,e,p,ir(l,a),i),p.mergedAttrs=Ns(p.mergedAttrs,p.attrs),p.attrs!==null&&xd(p,p.attrs,!1),p.mergedAttrs!==null&&xd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function LT(n,e){ik(n,e),cm(e)&&n.queries.elementEnd(e)}function d1(n,e,t,r,i,o){let s=e.consts,a=ir(s,i),u=Xd(e,n,t,r,a);if(u.mergedAttrs=Ns(u.mergedAttrs,u.attrs),o!=null){let l=ir(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&xd(u,u.attrs,!1),u.mergedAttrs!==null&&xd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function VT(n,e,t){return n[e]=t}function h1(n,e){return n[e]}function Pn(n,e,t){if(t===Lt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function jT(n,e,t,r){let i=Pn(n,e,t);return Pn(n,e+1,r)||i}function f1(n,e,t,r,i){let o=jT(n,e,t,r);return Pn(n,e+2,i)||o}function Lm(n,e,t){return function r(i){let o=pi(n)?pn(n.index,e):e;Vy(o,5);let s=e[Ge],a=lb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=lb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function lb(n,e,t,r){let i=J(null);try{return be(me.OutputStart,e,t),t(r)!==!1}catch(o){return RO(n,o),!1}finally{be(me.OutputEnd,e,t),J(i)}}function p1(n,e,t,r,i,o,s,a){let u=od(n),l=!1,h=null;if(!r&&u&&(h=m1(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=An(n,t),m=r?r(p):p;Ak(t,m,o,a);let y=i.listen(m,o,a);if(!g1(o)){let A=r?P=>r(fn(P[n.index])):n.index;UT(A,e,t,o,a,y,!1)}}return l}function g1(n){return n.startsWith("animation")||n.startsWith("transition")}function m1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Is],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function UT(n,e,t,r,i,o,s){let a=e.firstCreatePass?pm(e):null,u=fm(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function db(n,e,t,r,i,o){let s=e[t],a=e[Q],l=a.data[t].outputs[r],p=s[l].subscribe(o);UT(n.index,a,e,i,o,p,!0)}var ny=Symbol("BINDING");var kd=class extends Fc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new ho(t,this.ngModule)}};function y1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Wd.SignalBased)!==0};return i&&(o.transform=i),o})}function v1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _1(n,e,t){let r=e instanceof Ze?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ty(t,r):t}function E1(n){let e=n.get(lo,null);if(e===null)throw new G(407,!1);let t=n.get(kT,null),r=n.get(Rr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function I1(n,e){let t=BT(n);return tT(e,t,t==="svg"?EC:t==="math"?IC:null)}function BT(n){return(n.selectors[0][0]||"div").toLowerCase()}var ho=class extends eh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=y1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=v1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$k(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){be(me.DynamicComponentStart);let a=J(null);try{let u=this.componentDef,l=w1(r,u,s,o),h=_1(u,i||this.ngModule,e),p=E1(h),m=p.rendererFactory.createRenderer(null,u),y=r?mO(m,r,u.encapsulation,h):I1(u,m),A=s?.some(hb)||o?.some(j=>typeof j!="function"&&j.bindings.some(hb)),P=Ay(null,l,null,512|oT(u),null,null,p,m,h,null,zb(y,h,!0));P[It]=y,dd(P);let N=null;try{let j=FT(It,P,2,"#host",()=>l.directiveRegistry,!0,0);iT(m,y,j),Ms(y,P),gT(l,P,j),Wb(l,j,P),LT(l,j),t!==void 0&&C1(j,this.ngContentSelectors,t),N=pn(j.index,P),P[Ge]=N[Ge],Ly(l,P,null)}catch(j){throw N!==null&&Km(N),Km(P),j}finally{be(me.DynamicComponentEnd),hd()}return new Od(this.componentType,P,!!A)}finally{J(a)}}};function w1(n,e,t,r){let i=n?["ng-version","21.0.1"]:Hk(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[ny].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[ny].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=tm(p);u.push(m)}return Sy(0,null,D1(o,s),1,a,u,null,null,null,[i],null)}function D1(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function hb(n){let e=n[ny].kind;return e==="input"||e==="twoWay"}var Od=class extends xT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Dc(t[Q],It),this.location=Fs(this._tNode,t),this.instance=pn(this._tNode.index,t)[Ge],this.hostView=this.changeDetectorRef=new mi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Fy(r,i[Q],i,e,t);this.previousInputValues.set(e,t);let s=pn(r.index,i);Vy(s,1)}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function C1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mo=(()=>{class n{static __NG_ELEMENT_ID__=b1}return n})();function b1(){let n=Dt();return HT(n,ce())}var T1=mo,$T=class extends T1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fs(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=_y(this._hostTNode,this._hostLView);if(Sb(e)){let t=Sd(e,this._hostLView),r=Td(e),i=t[Q].data[r+8];return new ao(i,t)}else return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Xm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Ac(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!Xx(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new ho(Nr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(Ze,null);j&&(o=j)}let m=Nr(h.componentType??{}),y=Xm(this._lContainer,m?.id??null),A=y?.firstChild??null,P=h.create(p,i,A,o,s,a);return this.insertImpl(P.hostView,l,Ac(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(DC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[at],l=new $T(u,u[hn],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Zd(s,i,o,r),e.attachToViewContainerRef(),Jg(Vm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Nc(this._lContainer,t);r&&(yc(Vm(this._lContainer),t),Qd(r[Q],r))}detach(e){let t=this._adjustIndex(e,-1),r=Nc(this._lContainer,t);return r&&yc(Vm(this._lContainer),t)!=null?new mi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fb(n){return n[wc]}function Vm(n){return n[wc]||(n[wc]=[])}function HT(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=AT(r,e,null,n),e[n.index]=t,Ry(e,t)),A1(t,e,n,r),new $T(t,n,e)}function S1(n,e){let t=n[Fe],r=t.createComment(""),i=An(e,n),o=t.parentNode(i);return Md(t,o,r,t.nextSibling(i),!1),r}var A1=M1,R1=()=>!1;function N1(n,e,t){return R1(n,e,t)}function M1(n,e,t,r){if(n[fi])return;let i;t.type&8?i=fn(r):i=S1(e,t),n[fi]=i}var ry=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},iy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)By(e,t).matches!==null&&this.queries[t].setDirty()}},oy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=j1(e):this.predicate=e}},sy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ay=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,P1(t,o)),this.matchTNodeWithReadOption(e,t,Dd(t,e,o,!1,!1))}else r===Ps?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Dd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ft||i===mo||i===Ps&&t.type&4)this.addMatch(t.index,-2);else{let o=Dd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function P1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function x1(n,e){return n.type&11?Fs(n,e):n.type&4?jy(n,e):null}function k1(n,e,t,r){return t===-1?x1(e,n):t===-2?O1(n,e,r):Sc(n,n[Q],t,e)}function O1(n,e,t){if(t===Ft)return Fs(e,n);if(t===Ps)return jy(e,n);if(t===mo)return HT(e,n)}function qT(n,e,t,r){let i=e[tr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(k1(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function cy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=qT(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ue;p<h.length;p++){let m=h[p];m[hi]===m[at]&&cy(m[Q],m,l,r)}if(h[io]!==null){let p=h[io];for(let m=0;m<p.length;m++){let y=p[m];cy(y[Q],y,l,r)}}}}}return r}function F1(n,e){return n[tr].queries[e].queryList}function L1(n,e,t){let r=new Rd((t&4)===4);return TC(n,e,r,r.destroy),(e[tr]??=new iy).queries.push(new ry(r))-1}function V1(n,e,t,r){let i=wt();if(i.firstCreatePass){let o=Dt();U1(i,new oy(e,t,r),o.index),B1(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return L1(i,ce(),t)}function j1(n){return n.split(",").map(e=>e.trim())}function U1(n,e,t){n.queries===null&&(n.queries=new sy),n.queries.track(new ay(e,t))}function B1(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function By(n,e){return n.queries.getByIndex(e)}function $1(n,e){let t=n[Q],r=By(t,e);return r.crossesNgTemplate?cy(t,n,e,[]):qT(t,n,r,e)}var xs=class{},th=class{};var Fd=class extends xs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new kd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=em(e);this._bootstrapComponents=Xb(o.bootstrap),this._r3Injector=Sm(e,t,[{provide:xs,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver},...r],Ar(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ld=class extends th{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Fd(this.moduleType,e,[])}};var Mc=class extends xs{injector;componentFactoryResolver=new kd(this);instance=null;constructor(e){super();let t=new Ji([...e.providers,{provide:xs,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],e.parent||_c(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ls(n,e,t=null){return new Mc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var H1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=nm(!1,t.type),i=r.length>0?Ls([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Z(Ze))})}return n})();function Le(n){return Os(()=>{let e=zT(n),t=W(R({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ey.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(H1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mn.Emulated,styles:n.styles||Xt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&kn("NgStandalone"),GT(t);let r=n.dependencies;return t.directiveDefs=pb(r,q1),t.pipeDefs=pb(r,fC),t.id=W1(t),t})}function q1(n){return Nr(n)||tm(n)}function Fn(n){return Os(()=>({type:n.type,bootstrap:n.bootstrap||Xt,declarations:n.declarations||Xt,imports:n.imports||Xt,exports:n.exports||Xt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function z1(n,e){if(n==null)return li;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Wd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function G1(n){if(n==null)return li;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xe(n){return Os(()=>{let e=zT(n);return GT(e),e})}function zT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||li,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Xt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:z1(n.inputs,e),outputs:G1(n.outputs),debugInfo:null}}function GT(n){n.features?.forEach(e=>e(n))}function pb(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function W1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function K1(n){return Object.getPrototypeOf(n.prototype).constructor}function Vt(n){let e=K1(n.type),t=!0,r=[n];for(;e;){let i;if(rr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=jm(n.inputs),s.declaredInputs=jm(n.declaredInputs),s.outputs=jm(n.outputs);let a=i.hostBindings;a&&X1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&J1(n,u),l&&Z1(n,l),Q1(n,i),rC(n.outputs,i.outputs),rr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Vt&&(t=!1)}}e=Object.getPrototypeOf(e)}Y1(r)}function Q1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Y1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ns(i.hostAttrs,t=Ns(t,i.hostAttrs))}}function jm(n){return n===li?{}:n===Xt?[]:n}function J1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Z1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function X1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function eF(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ns(n.mergedAttrs,n.attrs);let h=n.tView=Sy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),bs(n,!1);let u=tF(t,e,n,r);pd()&&xy(t,e,u,n),Ms(u,e);let l=AT(u,e,u,n);e[r+It]=l,Ry(e,l),N1(l,n,e)}function Vd(n,e,t,r,i,o,s,a,u,l,h){let p=t+It,m;if(e.firstCreatePass){if(m=Xd(e,p,4,s||null,a||null),l!=null){let y=ir(e.consts,l);m.localNames=[];for(let A=0;A<y.length;A+=2)m.localNames.push(y[A],-1)}}else m=e.data[p];return eF(m,n,e,t,r,i,o,u),l!=null&&Oy(n,m,h),m}var tF=nF;function nF(n,e,t,r){return gd(!0),e[Fe].createComment("")}var $y=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function WT(n){return typeof n=="function"&&n[kt]!==void 0}function Hy(n){return WT(n)&&typeof n.set=="function"}var qy=new q("");function yo(n){return!!n&&typeof n.then=="function"}function KT(n){return!!n&&typeof n.subscribe=="function"}var zy=new q("");function nh(n){return bn([{provide:zy,multi:!0,useValue:n}])}var Gy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(zy,{optional:!0})??[];injector=M(Xe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=et(this.injector,i);if(yo(o))t.push(o);else if(KT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lc=new q("");function QT(){ag(()=>{let n="";throw new G(600,n)})}function YT(n){return n.isBoundToModule}var rF=10;var kr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(gn);afterRenderManager=M(My);zonelessEnabled=M(Ts);rootEffectScheduler=M(xm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ye;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(sr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ye(t=>!t))}constructor(){M(go,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Xe.NULL){return this._injector.get(Ce).run(()=>{be(me.BootstrapComponentStart);let s=t instanceof eh;if(!this._injector.get(Gy).done){let A="";throw new G(405,A)}let u;s?u=t:u=this._injector.get(Fc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=YT(u)?void 0:this._injector.get(xs),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(qy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Tc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),be(me.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(me.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw be(me.ChangeDetectionEnd),new G(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),be(me.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(lo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<rF;){be(me.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{be(me.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Cc(i))continue;let o=r&&!this.zonelessEnabled?0:1;CT(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Tc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Lc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Tc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Vc(n,e,t,r){let i=ce(),o=so();if(Pn(i,o,e)){let s=wt(),a=fd();TO(a,i,n,e,t,r)}return Vc}var G9=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var uy=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Um(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function iF(n,e,t,r){let i,o,s=0,a=n.length-1,u=void 0;if(Array.isArray(e)){J(r);let l=e.length-1;for(J(null);s<=a&&s<=l;){let h=n.at(s),p=e[s],m=Um(s,h,s,p,t);if(m!==0){m<0&&n.updateValue(s,p),s++;continue}let y=n.at(a),A=e[l],P=Um(a,y,l,A,t);if(P!==0){P<0&&n.updateValue(a,A),a--,l--;continue}let N=t(s,h),j=t(a,y),ie=t(s,p);if(Object.is(ie,j)){let de=t(l,A);Object.is(de,N)?(n.swap(s,a),n.updateValue(a,A),l--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new jd,o??=mb(n,s,a,t),ly(n,i,s,ie))n.updateValue(s,p),s++,a++;else if(o.has(ie))i.set(N,n.detach(s)),a--;else{let de=n.create(s,e[s]);n.attach(s,de),s++,a++}}for(;s<=l;)gb(n,i,t,s,e[s]),s++}else if(e!=null){J(r);let l=e[Symbol.iterator]();J(null);let h=l.next();for(;!h.done&&s<=a;){let p=n.at(s),m=h.value,y=Um(s,p,s,m,t);if(y!==0)y<0&&n.updateValue(s,m),s++,h=l.next();else{i??=new jd,o??=mb(n,s,a,t);let A=t(s,m);if(ly(n,i,s,A))n.updateValue(s,m),s++,a++,h=l.next();else if(!o.has(A))n.attach(s,n.create(s,m)),s++,a++,h=l.next();else{let P=t(s,p);i.set(P,n.detach(s)),a--}}}for(;!h.done;)gb(n,i,t,n.length,h.value),h=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function ly(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function gb(n,e,t,r,i){if(ly(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function mb(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var jd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function We(n,e,t,r,i,o,s,a){kn("NgControlFlow");let u=ce(),l=wt(),h=ir(l.consts,o);return Vd(u,l,n,e,t,r,i,h,256,s,a),Wy}function Wy(n,e,t,r,i,o,s,a){kn("NgControlFlow");let u=ce(),l=wt(),h=ir(l.consts,o);return Vd(u,l,n,e,t,r,i,h,512,s,a),Wy}function Ke(n,e){kn("NgControlFlow");let t=ce(),r=so(),i=t[r]!==Lt?t[r]:-1,o=i!==-1?Ud(t,It+i):void 0,s=0;if(Pn(t,r,n)){let a=J(null);try{if(o!==void 0&&NT(o,s),n!==-1){let u=It+n,l=Ud(t,u),h=py(t[Q],u),p=PT(l,h,t),m=Jd(t,h,e,{dehydratedView:p});Zd(l,m,s,Ac(h,p))}}finally{J(a)}}else if(o!==void 0){let a=RT(o,s);a!==void 0&&(a[Ge]=e)}}var dy=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ue}};function Ky(n,e){return e}var hy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function jt(n,e,t,r,i,o,s,a,u,l,h,p,m){kn("NgControlFlow");let y=ce(),A=wt(),P=u!==void 0,N=ce(),j=a?s.bind(N[tn][Ge]):s,ie=new hy(P,j);N[It+n]=ie,Vd(y,A,n+1,e,t,r,i,ir(A.consts,o),256),P&&Vd(y,A,n+2,u,l,h,p,ir(A.consts,m),512)}var fy=class extends uy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ue}at(e){return this.getLView(e)[Ge].$implicit}attach(e,t){let r=t[Es];this.needsIndexUpdate||=e!==this.length,Zd(this.lContainer,t,e,Ac(this.templateTNode,r)),oF(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,sF(this.lContainer,e),aF(this.lContainer,e)}create(e,t){let r=Xm(this.lContainer,this.templateTNode.tView.ssrId),i=Jd(this.hostLView,this.templateTNode,new dy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Qd(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ge].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ge].$index=e}getLView(e){return cF(this.lContainer,e)}};function Ut(n){let e=J(null),t=or();try{let r=ce(),i=r[Q],o=r[t],s=t+1,a=Ud(r,s);if(o.liveCollection===void 0){let l=py(i,s);o.liveCollection=new fy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(iF(u,n,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=so(),h=u.length===0;if(Pn(r,l,h)){let p=t+2,m=Ud(r,p);if(h){let y=py(i,p),A=PT(m,y,r),P=Jd(r,y,void 0,{dehydratedView:A});Zd(m,P,0,Ac(y,A))}else i.firstUpdatePass&&YO(m),NT(m,0)}}}finally{J(e)}}function Ud(n,e){return n[e]}function oF(n,e){if(n.length<=Ue)return;let t=Ue+e,r=n[t],i=r?r[ro]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Mr];eO(o,i),uo.delete(r),i.detachedLeaveAnimationFns=void 0}}function sF(n,e){if(n.length<=Ue)return;let t=Ue+e,r=n[t],i=r?r[ro]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function aF(n,e){return Nc(n,e)}function cF(n,e){return RT(n,e)}function py(n,e){return Dc(n,e)}function Se(n,e,t){let r=ce(),i=so();if(Pn(r,i,e)){let o=wt(),s=fd();mT(s,r,n,e,r[Fe],t)}return Se}function yb(n,e,t,r,i){Fy(e,n,t,i?"class":"style",r)}function F(n,e,t,r){let i=ce(),o=i[Q],s=n+It,a=o.firstCreatePass?FT(s,i,2,e,bO,RC(),t,r):o.data[s];if(yT(a,i,n,e,JT),od(a)){let u=i[Q];gT(u,i,a),Wb(u,a,i)}return r!=null&&Oy(i,a),F}function O(){let n=wt(),e=Dt(),t=vT(e);return n.firstCreatePass&&LT(n,t),mm(t)&&ym(),gm(),t.classesWithoutHost!=null&&sk(t)&&yb(n,t,ce(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ak(t)&&yb(n,t,ce(),t.stylesWithoutHost,!1),O}function ke(n,e,t,r){return F(n,e,t,r),O(),ke}function Ln(n,e,t,r){let i=ce(),o=i[Q],s=n+It,a=o.firstCreatePass?d1(s,o,2,e,t,r):o.data[s];return yT(a,i,n,e,JT),r!=null&&Oy(i,a),Ln}function Qt(){let n=Dt(),e=vT(n);return mm(e)&&ym(),gm(),Qt}var JT=(n,e,t,r,i)=>(gd(!0),tT(e[Fe],r,$C()));function Bt(){return ce()}var jc="en-US";var uF=jc;function ZT(n){typeof n=="string"&&(uF=n.toLowerCase().replace(/_/g,"-"))}function pe(n,e,t){let r=ce(),i=wt(),o=Dt();return XT(i,r,r[Fe],o,n,e,t),pe}function XT(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Lm(r,e,o),p1(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Lm(r,e,o),db(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Lm(r,e,o),db(r,e,p,i,i,u)}}function ve(n=1){return BC(n)}function Qy(n,e,t,r){V1(n,e,t,r)}function Yy(n){let e=ce(),t=wt(),r=Cm();ld(r+1);let i=By(t,r);if(n.dirty&&wC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=$1(e,r);n.reset(o,Ek),n.notifyOnChanges()}return!0}return!1}function Jy(){return F1(ce(),Cm())}function Ed(n,e){return n<<17|e<<2}function fo(n){return n>>17&32767}function lF(n){return(n&2)==2}function dF(n,e){return n&131071|e<<17}function gy(n){return n|2}function ks(n){return(n&131068)>>2}function Bm(n,e){return n&-131069|e<<2}function hF(n){return(n&1)===1}function my(n){return n|1}function fF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fo(s),u=ks(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||_s(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=fo(n[a+1]);n[r+1]=Ed(m,a),m!==0&&(n[m+1]=Bm(n[m+1],r)),n[a+1]=dF(n[a+1],r)}else n[r+1]=Ed(a,0),a!==0&&(n[a+1]=Bm(n[a+1],r)),a=r;else n[r+1]=Ed(u,0),a===0?a=r:n[u+1]=Bm(n[u+1],r),u=r;l&&(n[r+1]=gy(n[r+1])),vb(n,h,r,!0),vb(n,h,r,!1),pF(e,h,n,r,o),s=Ed(a,u),o?e.classBindings=s:e.styleBindings=s}function pF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&_s(o,e)>=0&&(t[r+1]=my(t[r+1]))}function vb(n,e,t,r){let i=n[t+1],o=e===null,s=r?fo(i):ks(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];gF(u,e)&&(a=!0,n[s+1]=r?my(l):gy(l)),s=r?fo(l):ks(l)}a&&(n[t+1]=r?gy(i):my(i))}function gF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_s(n,e)>=0:!1}function Vs(n,e,t){return eS(n,e,t,!1),Vs}function Uc(n,e){return eS(n,e,null,!0),Uc}function eS(n,e,t,r){let i=ce(),o=wt(),s=cd(2);if(o.firstUpdatePass&&yF(o,n,s,r),e!==Lt&&Pn(i,s,e)){let a=o.data[or()];wF(o,a,i,i[Fe],n,i[s+1]=DF(e,t),r,s)}}function mF(n,e){return e>=n.expandoStartIndex}function yF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[or()],s=mF(n,t);CF(o,r)&&e===null&&!s&&(e=!1),e=vF(i,o,e,r),fF(i,o,e,t,s,r)}}function vF(n,e,t,r){let i=LC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$m(null,n,e,t,r),t=Pc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$m(i,n,e,t,r),o===null){let u=_F(n,e,r);u!==void 0&&Array.isArray(u)&&(u=$m(null,n,e,u[1],r),u=Pc(u,e.attrs,r),EF(n,e,r,u))}else o=IF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function _F(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ks(r)!==0)return n[fo(r)]}function EF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fo(i)]=r}function IF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Pc(r,s,t)}return Pc(r,e.attrs,t)}function $m(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Pc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Pc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),hC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function wF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=hF(l)?_b(u,e,t,i,ks(l),s):void 0;if(!Bd(h)){Bd(o)||lF(l)&&(o=_b(u,null,t,i,a,s));let p=um(or(),t);gO(r,s,p,i,o)}}function _b(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Lt&&(m=p?Xt:void 0);let y=p?rd(m,r):h===r?m:void 0;if(l&&!Bd(y)&&(y=rd(u,r)),Bd(y)&&(a=y,s))return a;let A=n[i+1];i=s?fo(A):ks(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=rd(u,r))}return a}function Bd(n){return n!==void 0}function DF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ar(kc(n)))),n}function CF(n,e){return(n.flags&(e?8:16))!==0}function L(n,e=""){let t=ce(),r=wt(),i=n+It,o=r.firstCreatePass?Xd(r,i,1,e,null):r.data[i],s=bF(r,t,o,e,n);t[i]=s,pd()&&xy(r,t,s,o),bs(o,!1)}var bF=(n,e,t,r,i)=>(gd(!0),qk(e[Fe],r));function TF(n,e,t,r=""){return Pn(n,so(),t)?e+Xn(t)+r:Lt}function SF(n,e,t,r,i,o=""){let s=Dm(),a=jT(n,s,t,i);return cd(2),a?e+Xn(t)+r+Xn(i)+o:Lt}function AF(n,e,t,r,i,o,s,a=""){let u=Dm(),l=f1(n,u,t,i,s);return cd(3),l?e+Xn(t)+r+Xn(i)+o+Xn(s)+a:Lt}function St(n){return ft("",n),St}function ft(n,e,t){let r=ce(),i=TF(r,n,e,t);return i!==Lt&&Zy(r,or(),i),ft}function rh(n,e,t,r,i){let o=ce(),s=SF(o,n,e,t,r,i);return s!==Lt&&Zy(o,or(),s),rh}function cr(n,e,t,r,i,o,s){let a=ce(),u=AF(a,n,e,t,r,i,o,s);return u!==Lt&&Zy(a,or(),u),cr}function Zy(n,e,t){let r=um(e,n);zk(n[Fe],r,t)}function ih(n,e,t){Hy(e)&&(e=e());let r=ce(),i=so();if(Pn(r,i,e)){let o=wt(),s=fd();mT(s,r,n,e,r[Fe],t)}return ih}function Xy(n,e){let t=Hy(n);return t&&n.set(e),t}function oh(n,e){let t=ce(),r=wt(),i=Dt();return XT(r,t,t[Fe],i,n,e),oh}function RF(n,e,t){let r=wt();if(r.firstCreatePass){let i=rr(n);yy(t,r.data,r.blueprint,i,!0),yy(e,r.data,r.blueprint,i,!1)}}function yy(n,e,t,r,i){if(n=Et(n),Array.isArray(n))for(let o=0;o<n.length;o++)yy(n[o],e,t,r,i);else{let o=wt(),s=ce(),a=Dt(),u=Yi(n)?n:Et(n.provide),l=im(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Yi(n)||!n.multi){let y=new co(l,i,B,null),A=qm(u,e,i?h:h+m,p);A===-1?(Gm(Ad(a,s),o,u),Hm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[A]=y,s[A]=y)}else{let y=qm(u,e,h+m,p),A=qm(u,e,h,h+m),P=y>=0&&t[y],N=A>=0&&t[A];if(i&&!N||!i&&!P){Gm(Ad(a,s),o,u);let j=PF(i?MF:NF,t.length,i,r,l,n);!i&&N&&(t[A].providerFactory=j),Hm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=tS(t[i?A:y],l,!i&&r);Hm(o,n,y>-1?y:A,j)}!i&&r&&N&&t[A].componentProviders++}}}function Hm(n,e,t,r){let i=Yi(e),o=yC(e);if(i||o){let u=(o?Et(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function tS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function NF(n,e,t,r,i){return vy(this.multi,[])}function MF(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Sc(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),vy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],vy(o,s);return s}function vy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function PF(n,e,t,r,i,o){let s=new co(n,t,B,null);return s.multi=[],s.index=e,s.componentProviders=0,tS(s,i,r&&!t),s}function ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>RF(r,i?i(n):n,e)}}function ev(n,e,t){let r=wm()+n,i=ce();return i[r]===Lt?VT(i,r,t?e.call(t):e()):h1(i,r)}function js(n,e,t,r){return kF(ce(),wm(),n,e,t,r)}function xF(n,e){let t=n[e];return t===Lt?void 0:t}function kF(n,e,t,r,i,o){let s=e+t;return Pn(n,s,i)?VT(n,s+1,o?r.call(o,i):r(i)):xF(n,s+1)}var $d=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tv=(()=>{class n{compileModuleSync(t){return new Ld(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=em(t),o=Xb(i.declarations).reduce((s,a)=>{let u=Nr(a);return u&&s.push(new ho(u)),s},[]);return new $d(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nS=(()=>{class n{applicationErrorHandler=M(gn);appRef=M(kr);taskService=M(sr);ngZone=M(Ce);zonelessEnabled=M(Ts);tracing=M(go,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(fc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(yd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Nm:Rm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(fc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Nm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rS(){return[{provide:Rr,useExisting:nS},{provide:Ce,useClass:pc},{provide:Ts,useValue:!0}]}function OF(){return typeof $localize<"u"&&$localize.locale||jc}var nv=new q("",{factory:()=>M(nv,{optional:!0,skipSelf:!0})||OF()});function yn(n,e){return _l(n,e?.equal)}var sS=Symbol("InputSignalNode#UNSET"),qF=W(R({},El),{transformFn:void 0,applyValueToInputSignal(n,e){oc(n,e)}});function aS(n,e){let t=Object.create(qF);t.value=n,t.transformFn=e?.transform;function r(){if(nc(t),t.value===sS){let i=null;throw new G(-950,i)}return t.value}return r[kt]=t,r}var ah=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>xc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function iS(n,e){return aS(n,e)}function zF(n){return aS(sS,n)}var cS=(iS.required=zF,iS);var GF=(()=>{class n{zone=M(Ce);changeDetectionScheduler=M(Rr);applicationRef=M(kr);applicationErrorHandler=M(gn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WF=new q("",{factory:()=>!1});function KF({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new Ce(W(R({},lS()),{scheduleInRootZone:e})),[{provide:Ts,useValue:!1},{provide:Ce,useFactory:n},{provide:di,multi:!0,useFactory:()=>{let t=M(GF,{optional:!0});return()=>t.initialize()}},{provide:di,multi:!0,useFactory:()=>{let t=M(QF);return()=>{t.initialize()}}},{provide:yd,useValue:e??Am}]}function uS(n){let e=n?.scheduleInRootZone,t=KF({ngZoneFactory:()=>{let r=lS(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&kn("NgZone_CoalesceEvent"),new Ce(r)},scheduleInRootZone:e});return bn([{provide:WF,useValue:!0},t])}function lS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var QF=(()=>{class n{subscription=new ze;initialized=!1;zone=M(Ce);pendingTasks=M(sr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rv=new q(""),YF=new q("");function Bc(n){return!n.moduleRef}function JF(n){let e=Bc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{Bc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(gn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Bc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(rv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(rv);s.add(o),n.moduleRef.onDestroy(()=>{Tc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return XF(r,t,()=>{let o=e.get(sr),s=o.add(),a=e.get(Gy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(nv,jc);if(ZT(u||jc),!e.get(YF,!0))return Bc(n)?e.get(kr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Bc(n)){let h=e.get(kr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return ZF?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var ZF;function XF(n,e,t){try{let r=t();return yo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var sh=null;function eL(n=[],e){return Xe.create({name:e,providers:[{provide:vc,useValue:"platform"},{provide:rv,useValue:new Set([()=>sh=null])},...n]})}function tL(n=[]){if(sh)return sh;let e=eL(n);return sh=e,QT(),nL(e),e}function nL(n){let e=n.get(qd,null);et(n,()=>{e?.forEach(t=>t())})}function iv(){return!1}var Or=(()=>{class n{static __NG_ELEMENT_ID__=rL}return n})();function rL(n){return iL(Dt(),ce(),(n&16)===16)}function iL(n,e,t){if(pi(n)&&!t){let r=pn(n.index,e);return new mi(r,r)}else if(n.type&175){let r=e[tn];return new mi(r,e)}return null}function dS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;be(me.BootstrapApplicationStart);try{let o=i?.injector??tL(r),s=[rS(),zC,...t||[]],a=new Mc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return JF({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{be(me.BootstrapApplicationEnd)}}function vo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function hS(n){let e=Nr(n);if(!e)return null;let t=new ho(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var gS=null;function vn(){return gS}function ov(n){gS??=n}var $c=class{},Hc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(mS),providedIn:"platform"})}return n})(),sv=new q(""),mS=(()=>{class n extends Hc{_location;_history;_doc=M(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vn().getBaseHref(this._doc)}onPopState(t){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ch(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function fS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Vn(n){return n&&n[0]!=="?"?`?${n}`:n}var jn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(lh),providedIn:"root"})}return n})(),uh=new q(""),lh=(()=>{class n extends jn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ch(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Vn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Hc),Z(uh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yi=(()=>{class n{_subject=new Ye;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=aL(fS(pS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Vn(r))}normalize(t){return n.stripTrailingSlash(sL(this._basePath,pS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Vn;static joinWithSlash=ch;static stripTrailingSlash=fS;static \u0275fac=function(r){return new(r||n)(Z(jn))};static \u0275prov=H({token:n,factory:()=>oL(),providedIn:"root"})}return n})();function oL(){return new yi(Z(jn))}function sL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function pS(n){return n.replace(/\/index.html$/,"")}function aL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var av=(()=>{class n extends jn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ch(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Hc),Z(uh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Us=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=ln({})}return n})();function cv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qc=class{};var yS="browser";var vS=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new uv(M(tt),window)})}return n})(),uv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(W(R({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=uL(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Zi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(W(R({},t),{left:i-s[0],top:o-s[1]}))}};function uL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var zc=class{_doc;constructor(e){this._doc=e}manager},dh=(()=>{class n extends zc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Z(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),ph=new q(""),fv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof dh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof dh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(ph),Z(Ce))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),lv="ng-app-id";function _S(n){for(let e of n)e.remove()}function ES(n,e){let t=e.createElement("style");return t.textContent=n,t}function dL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${lv}="${e}"],link[${lv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(lv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function hv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var pv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,dL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ES);r?.forEach(i=>this.addUsage(i,this.external,hv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(_S(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])_S(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ES(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,hv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(tt),Z(Hd),Z(zd,8),Z(po))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),dv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gv=/%COMP%/g;var wS="%COMP%",hL=`_nghost-${wS}`,fL=`_ngcontent-${wS}`,pL=!0,gL=new q("",{factory:()=>pL});function mL(n){return fL.replace(gv,n)}function yL(n){return hL.replace(gv,n)}function DS(n,e){return e.map(t=>t.replace(gv,n))}var mv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Gc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof fh?i.applyToHost(t):i instanceof Wc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Mn.Emulated:o=new fh(u,l,r,this.appId,h,s,a,p,m);break;case Mn.ShadowDom:return new hh(u,t,r,s,a,this.nonce,p,m,l);case Mn.ExperimentalIsolatedShadowDom:return new hh(u,t,r,s,a,this.nonce,p,m);default:o=new Wc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(fv),Z(pv),Z(Hd),Z(gL),Z(tt),Z(Ce),Z(zd),Z(go,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Gc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(dv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=dv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=dv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pr.DashCase|Pr.Important)?e.style.setProperty(t,r,i&Pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=vn().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function IS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hh=class extends Gc{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=DS(r.id,h);for(let m of h){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=hv(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Wc=class extends Gc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?DS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&uo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},fh=class extends Wc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=mL(h),this.hostAttr=yL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var gh=class n extends $c{supportsDOMEvents=!0;static makeCurrent(){ov(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vL();return t==null?null:_L(t)}resetBaseElement(){Kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cv(document.cookie,e)}},Kc=null;function vL(){return Kc=Kc||document.head.querySelector("base"),Kc?Kc.getAttribute("href"):null}function _L(n){return new URL(n,document.baseURI).pathname}var EL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),CS=["alt","control","meta","shift"],IL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bS=(()=>{class n extends zc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),CS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=IL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),CS.forEach(s=>{if(s!==i){let a=wL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function yv(n,e,t){let r=R({rootComponent:n,platformRef:t?.platformRef},DL(e));return dS(r)}function DL(n){return{appProviders:[...AL,...n?.providers??[]],platformProviders:SL}}function CL(){gh.makeCurrent()}function bL(){return new Zn}function TL(){return Iy(document),document}var SL=[{provide:po,useValue:yS},{provide:qd,useValue:CL,multi:!0},{provide:tt,useFactory:TL}];var AL=[{provide:vc,useValue:"root"},{provide:Zn,useFactory:bL},{provide:ph,useClass:dh,multi:!0},{provide:ph,useClass:bS,multi:!0},mv,pv,fv,{provide:lo,useExisting:mv},{provide:qc,useClass:EL},[]];var TS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Z(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ee="primary",ou=Symbol("RouteTitle"),wv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function wo(n){return new wv(n)}function OS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ih(n){return new Promise((e,t)=>{n.pipe(Tr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function ML(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lr(n[t],e[t]))return!1;return!0}function lr(n,e){let t=n?Dv(n):void 0,r=e?Dv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!FS(n[i],e[i]))return!1;return!0}function Dv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function FS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function LS(n){return n.length>0?n[n.length-1]:null}function Do(n){return Bl(n)?n:yo(n)?Me(Promise.resolve(n)):oe(n)}function VS(n){return Bl(n)?Ih(n):Promise.resolve(n)}var PL={exact:US,subset:BS},jS={exact:xL,subset:kL,ignored:()=>!0};function SS(n,e,t){return PL[t.paths](n.root,e.root,t.matrixParams)&&jS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function xL(n,e){return lr(n,e)}function US(n,e,t){if(!Eo(n.segments,e.segments)||!vh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!US(n.children[r],e.children[r],t))return!1;return!0}function kL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FS(n[t],e[t]))}function BS(n,e,t){return $S(n,e,e.segments,t)}function $S(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Eo(i,t)||e.hasChildren()||!vh(i,t,r))}else if(n.segments.length===t.length){if(!Eo(n.segments,t)||!vh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!BS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Eo(n.segments,i)||!vh(n.segments,i,r)||!n.children[ee]?!1:$S(n.children[ee],e,o,r)}}function vh(n,e,t){return e.every((r,i)=>jS[t](n[i].parameters,r.parameters))}var Bn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wo(this.queryParams),this._queryParamMap}toString(){return LL.serialize(this)}},_e=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _h(this)}},vi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=wo(this.parameters),this._parameterMap}toString(){return qS(this)}};function OL(n,e){return Eo(n,e)&&n.every((t,r)=>lr(t.parameters,e[r].parameters))}function Eo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function FL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ee&&(t=t.concat(e(i,r)))}),t}var Co=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Fr,providedIn:"root"})}return n})(),Fr=class{parse(e){let t=new bv(e);return new Bn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Qc(e.root,!0)}`,r=UL(e.queryParams),i=typeof e.fragment=="string"?`#${VL(e.fragment)}`:"";return`${t}${r}${i}`}},LL=new Fr;function _h(n){return n.segments.map(e=>qS(e)).join("/")}function Qc(n,e){if(!n.hasChildren())return _h(n);if(e){let t=n.children[ee]?Qc(n.children[ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${Qc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=FL(n,(r,i)=>i===ee?[Qc(n.children[ee],!1)]:[`${i}:${Qc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ee]!=null?`${_h(n)}/${t[0]}`:`${_h(n)}/(${t.join("//")})`}}function HS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mh(n){return HS(n).replace(/%3B/gi,";")}function VL(n){return encodeURI(n)}function Cv(n){return HS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Eh(n){return decodeURIComponent(n)}function AS(n){return Eh(n.replace(/\+/g,"%20"))}function qS(n){return`${Cv(n.path)}${jL(n.parameters)}`}function jL(n){return Object.entries(n).map(([e,t])=>`;${Cv(e)}=${Cv(t)}`).join("")}function UL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${mh(t)}=${mh(i)}`).join("&"):`${mh(t)}=${mh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var BL=/^[^\/()?;#]+/;function vv(n){let e=n.match(BL);return e?e[0]:""}var $L=/^[^\/()?;=#]+/;function HL(n){let e=n.match($L);return e?e[0]:""}var qL=/^[^=?&#]+/;function zL(n){let e=n.match(qL);return e?e[0]:""}var GL=/^[^&#]+/;function WL(n){let e=n.match(GL);return e?e[0]:""}var bv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ee]=new _e(e,t)),r}parseSegment(){let e=vv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new vi(Eh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=HL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vv(this.remaining);i&&(r=i,this.capture(r))}e[Eh(t)]=Eh(r)}parseQueryParam(e){let t=zL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=WL(this.remaining);s&&(r=s,this.capture(r))}let i=AS(t),o=AS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();t[o??ee]=Object.keys(s).length===1&&s[ee]?s[ee]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function zS(n){return n.segments.length>0?new _e([],{[ee]:n}):n}function GS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=GS(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new _e(n.segments,e);return KL(t)}function KL(n){if(n.numberOfChildren===1&&n.children[ee]){let e=n.children[ee];return new _e(n.segments.concat(e.segments),e.children)}return n}function _i(n){return n instanceof Bn}function WS(n,e,t=null,r=null,i=new Fr){let o=KS(n);return QS(o,e,t,r,i)}function KS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new _e(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=zS(r);return e??i}function QS(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return _v(o,o,o,t,r,i);let s=QL(e);if(s.toRoot())return _v(o,o,new _e([],{}),t,r,i);let a=YL(s,o,n),u=a.processChildren?Jc(a.segmentGroup,a.index,s.commands):JS(a.segmentGroup,a.index,s.commands);return _v(o,a.segmentGroup,u,t,r,i)}function wh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xc(n){return typeof n=="object"&&n!=null&&n.outlets}function RS(n,e,t){n||="\u0275";let r=new Bn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function _v(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>RS(l,p,o)):RS(l,h,o);let a;n===e?a=t:a=YS(n,e,t);let u=zS(GS(a));return new Bn(u,s,i)}function YS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=YS(o,e,t)}),new _e(n.segments,r)}var Dh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wh(r[0]))throw new G(4003,!1);let i=r.find(Xc);if(i&&i!==LS(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Dh(t,e,r)}var $s=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function YL(n,e,t){if(n.isAbsolute)return new $s(e,!0,0);if(!t)return new $s(e,!1,NaN);if(t.parent===null)return new $s(t,!0,0);let r=wh(n.commands[0])?0:1,i=t.segments.length-1+r;return JL(t,i,n.numberOfDoubleDots)}function JL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new $s(r,!1,i-o)}function ZL(n){return Xc(n[0])?n[0].outlets:{[ee]:n}}function JS(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return Jc(n,e,t);let r=XL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,r.pathIndex),{});return o.children[ee]=new _e(n.segments.slice(r.pathIndex),n.children),Jc(o,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?Tv(n,e,t):r.match?Jc(n,0,i):Tv(n,e,t)}function Jc(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=ZL(t),i={};if(Object.keys(r).some(o=>o!==ee)&&n.children[ee]&&n.numberOfChildren===1&&n.children[ee].segments.length===0){let o=Jc(n.children[ee],e,t);return new _e(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=JS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(n.segments,i)}}function XL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Xc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!MS(u,l,s))return o;r+=2}else{if(!MS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Tv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Xc(o)){let u=eV(o.outlets);return new _e(r,u)}if(i===0&&wh(t[0])){let u=n.segments[e];r.push(new vi(u.path,NS(t[0]))),i++;continue}let s=Xc(o)?o.outlets[ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&wh(a)?(r.push(new vi(s,NS(a))),i+=2):(r.push(new vi(s,{})),i++)}return new _e(r,{})}function eV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Tv(new _e([],{}),0,r))}),e}function NS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function MS(n,e,t){return n==t.path&&lr(e,t.parameters)}var Hs="imperative",ut=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ut||{}),on=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ei=class extends on{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends on{urlAfterRedirects;type=ut.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})($t||{}),zs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(zs||{}),dr=class extends on{reason;code;type=ut.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hr=class extends on{reason;code;type=ut.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Gs=class extends on{error;target;type=ut.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eu=class extends on{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ch=class extends on{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bh=class extends on{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Th=class extends on{urlAfterRedirects;state;type=ut.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends on{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class{route;type=ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rh=class{route;type=ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nh=class{snapshot;type=ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mh=class{snapshot;type=ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ph=class{snapshot;type=ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xh=class{snapshot;type=ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ws=class{routerEvent;position;anchor;type=ut.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},tu=class{},Ks=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function tV(n){return!(n instanceof tu)&&!(n instanceof Ks)}function nV(n,e){return n.providers&&!n._injector&&(n._injector=Ls(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Un(n){return n.outlet||ee}function rV(n,e){let t=n.filter(r=>Un(r)===e);return t.push(...n.filter(r=>Un(r)!==e)),t}function Js(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Js(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new bo(this.rootInjector)}},bo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Z(Ze))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Sv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Sv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Av(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Av(e,this._root).map(t=>t.value)}};function Sv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Sv(n,t);if(r)return r}return null}function Av(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Av(n,t);if(r.length)return r.unshift(e),r}return[]}var rn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var nu=class extends Oh{snapshot;constructor(e,t){super(e),this.snapshot=t,kv(this,e)}toString(){return this.snapshot.toString()}};function ZS(n){let e=iV(n),t=new vt([new vi("",{})]),r=new vt({}),i=new vt({}),o=new vt({}),s=new vt(""),a=new At(t,r,o,s,i,ee,n,e.root);return a.snapshot=e.root,new nu(new rn(a,[]),e)}function iV(n){let e={},t={},r={},o=new Io([],e,r,"",t,ee,n,null,{});return new ru("",new rn(o,[]))}var At=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ye(l=>l[ou]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>wo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>wo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:R(R({},e.params),n.params),data:R(R({},e.data),n.data),resolve:R(R(R(R({},n.data),e.data),i?.data),n._resolvedData)}:r={params:R({},n.params),data:R({},n.data),resolve:R(R({},n.data),n._resolvedData??{})},i&&e0(i)&&(r.resolve[ou]=i.title),r}var Io=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ou]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ru=class extends Oh{url;constructor(e,t){super(t),this.url=e,kv(this,t)}toString(){return XS(this._root)}};function kv(n,e){e.value._routerState=n,e.children.forEach(t=>kv(n,t))}function XS(n){let e=n.children.length>0?` { ${n.children.map(XS).join(", ")} } `:"";return`${n.value}${e}`}function Ev(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),lr(e.params,t.params)||n.paramsSubject.next(t.params),ML(e.url,t.url)||n.urlSubject.next(t.url),lr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Rv(n,e){let t=lr(n.params,e.params)&&OL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Rv(n.parent,e.parent))}function e0(n){return typeof n.title=="string"||n.title===null}var t0=new q(""),su=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new Pe;deactivateEvents=new Pe;attachEvents=new Pe;detachEvents=new Pe;routerOutletData=cS(void 0,{});parentContexts=M(bo);location=M(mo);changeDetector=M(Or);inputBinder=M(au,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Nv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mn]})}return n})(),Nv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===At?this.route:e===bo?this.childContexts:e===t0?this.outletData:this.parent.get(e,t)}},au=new q(""),Ov=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=zl([r.queryParams,r.params,r.data]).pipe(Cn(([o,s,a],u)=>(a=R(R(R({},o),s),a),u===0?oe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=hS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Fv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Le({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ke(0,"router-outlet")},dependencies:[su],encapsulation:2})}return n})();function Lv(n){let e=n.children&&n.children.map(Lv),t=e?W(R({},n),{children:e}):R({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ee&&(t.component=Fv),t}function oV(n,e,t){let r=iu(n,e._root,t?t._root:void 0);return new nu(r,e)}function iu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=sV(n,e,t);return new rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>iu(n,a)),s}}let r=aV(e.value),i=e.children.map(o=>iu(n,o));return new rn(r,i)}}function sV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return iu(n,r,i);return iu(n,r)})}function aV(n){return new At(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var Qs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},n0="ngNavigationCancelingError";function Lh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=_i(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r0(!1,$t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function r0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[n0]=!0,t.cancellationCode=e,t}function cV(n){return i0(n)&&_i(n.url)}function i0(n){return!!n&&n[n0]}var uV=(n,e,t,r)=>ye(i=>(new Mv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Mv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ev(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Bs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Bs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Bs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Bs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new xh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ev(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ev(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Vh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function lV(n,e,t){let r=n._root,i=e?e._root:null;return Yc(r,i,t,[r.value])}function dV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Hg(n)?n:e.get(n):r}function Yc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Bs(e);return n.children.forEach(s=>{hV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zc(a,t.getContext(s),i)),i}function hV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=fV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yc(n,e,a?a.children:null,r,i):Yc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qs(a.outlet.component,s))}else s&&Zc(e,a,i),i.canActivateChecks.push(new Vh(r)),o.component?Yc(n,null,a?a.children:null,r,i):Yc(n,null,t,r,i);return i}function fV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Eo(n.url,e.url)||!lr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rv(n,e)||!lr(n.queryParams,e.queryParams);case"paramsChange":default:return!Rv(n,e)}}function Zc(n,e,t){let r=Bs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Zc(s,e.children.getContext(o),t):Zc(s,null,t):Zc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qs(e.outlet.component,i)):t.canDeactivateChecks.push(new qs(null,i)):t.canDeactivateChecks.push(new qs(null,i))}function cu(n){return typeof n=="function"}function pV(n){return typeof n=="boolean"}function gV(n){return n&&cu(n.canLoad)}function mV(n){return n&&cu(n.canActivate)}function yV(n){return n&&cu(n.canActivateChild)}function vV(n){return n&&cu(n.canDeactivate)}function _V(n){return n&&cu(n.canMatch)}function o0(n){return n instanceof Gi||n?.name==="EmptyError"}var yh=Symbol("INITIAL_VALUE");function Ys(){return Cn(n=>zl(n.map(e=>e.pipe(br(1),Wl(yh)))).pipe(ye(e=>{for(let t of e)if(t!==!0){if(t===yh)return yh;if(t===!1||EV(t))return t}return!0}),Jt(e=>e!==yh),br(1)))}function EV(n){return _i(n)||n instanceof Qs}function s0(n){return n.aborted?oe(void 0).pipe(br(1)):new ae(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function a0(n){return uc(s0(n))}function IV(n,e){return _t(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?oe(W(R({},t),{guardsResult:!0})):wV(s,r,i,n).pipe(_t(a=>a&&pV(a)?DV(r,o,n,e):oe(a)),ye(a=>W(R({},t),{guardsResult:a})))})}function wV(n,e,t,r){return Me(n).pipe(_t(i=>AV(i.component,i.route,t,e,r)),Tr(i=>i!==!0,!0))}function DV(n,e,t,r){return Me(e).pipe(ms(i=>ps(bV(i.route.parent,r),CV(i.route,r),SV(n,i.path,t),TV(n,i.route,t))),Tr(i=>i!==!0,!0))}function CV(n,e){return n!==null&&e&&e(new Ph(n)),oe(!0)}function bV(n,e){return n!==null&&e&&e(new Nh(n)),oe(!0)}function TV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>cc(()=>{let s=Js(e)??t,a=Zs(o,s),u=mV(a)?a.canActivate(e,n):et(s,()=>a(e,n));return Do(u).pipe(Tr())}));return oe(i).pipe(Ys())}function SV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>dV(s)).filter(s=>s!==null).map(s=>cc(()=>{let a=s.guards.map(u=>{let l=Js(s.node)??t,h=Zs(u,l),p=yV(h)?h.canActivateChild(r,n):et(l,()=>h(r,n));return Do(p).pipe(Tr())});return oe(a).pipe(Ys())}));return oe(o).pipe(Ys())}function AV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let u=Js(e)??i,l=Zs(a,u),h=vV(l)?l.canDeactivate(n,e,t,r):et(u,()=>l(n,e,t,r));return Do(h).pipe(Tr())});return oe(s).pipe(Ys())}function RV(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return oe(!0);let s=o.map(a=>{let u=Zs(a,n),l=gV(u)?u.canLoad(e,t):et(n,()=>u(e,t)),h=Do(l);return i?h.pipe(a0(i)):h});return oe(s).pipe(Ys(),c0(r))}function c0(n){return bl(Ot(e=>{if(typeof e!="boolean")throw Lh(n,e)}),ye(e=>e===!0))}function NV(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let u=Zs(a,n),l=_V(u)?u.canMatch(e,t):et(n,()=>u(e,t)),h=Do(l);return i?h.pipe(a0(i)):h});return oe(s).pipe(Ys(),c0(r))}var _o=class u0 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,u0.prototype)}},Pv=class l0 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,l0.prototype)}};function MV(n){throw new G(4e3,!1)}function PV(n){throw r0(!1,$t.GuardRejected)}var xV=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){return w(this,null,function*(){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ee])throw MV(`${e.redirectTo}`);i=i.children[ee]}})}applyRedirectCommands(e,t,r,i,o){return w(this,null,function*(){let s=yield kV(t,i,o);if(s instanceof Bn)throw new Pv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Pv(a);return a})}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Bn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new _e(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function kV(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ih(Do(et(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var xv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OV(n,e,t,r,i,o){let s=d0(n,e,t);return s.matched?(r=nV(e,r),NV(r,e,t,i,o).pipe(ye(a=>a===!0?s:R({},xv)))):oe(s)}function d0(n,e,t){if(e.path==="**")return FV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?R({},xv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OS)(t,n,e);if(!i)return R({},xv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?R(R({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function FV(n){return{matched:!0,parameters:n.length>0?LS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function PS(n,e,t,r){return t.length>0&&jV(n,t,r)?{segmentGroup:new _e(e,VV(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&UV(n,t,r)?{segmentGroup:new _e(n.segments,LV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function LV(n,e,t,r){let i={};for(let o of t)if(Uh(n,e,o)&&!r[Un(o)]){let s=new _e([],{});i[Un(o)]=s}return R(R({},r),i)}function VV(n,e){let t={};t[ee]=e;for(let r of n)if(r.path===""&&Un(r)!==ee){let i=new _e([],{});t[Un(r)]=i}return t}function jV(n,e,t){return t.some(r=>Uh(n,e,r)&&Un(r)!==ee)}function UV(n,e,t){return t.some(r=>Uh(n,e,r))}function Uh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function BV(n,e,t){return e.length===0&&!n.children[t]}var $V=class{};function HV(n,e,t,r,i,o,s="emptyOnly",a){return w(this,null,function*(){return new zV(n,e,t,r,i,s,o,a).recognize()})}var qV=31,zV=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new xV(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){return w(this,null,function*(){let e=PS(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=yield this.match(e),i=new rn(r,t),o=new ru("",i),s=WS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(e){return w(this,null,function*(){let t=new Io([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,e,ee,t),rootSnapshot:t}}catch(r){if(r instanceof Pv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _o?this.noMatchError(r):r}})}processSegmentGroup(e,t,r,i,o){return w(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=yield this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof rn?[s]:[]})}processChildren(e,t,r,i){return w(this,null,function*(){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=rV(t,u),p=yield this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=h0(s);return GV(a),a})}processSegment(e,t,r,i,o,s,a){return w(this,null,function*(){for(let u of t)try{return yield this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof _o||o0(l))continue;throw l}if(BV(r,i,o))return new $V;throw new _o(r)})}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return w(this,null,function*(){if(Un(r)!==s&&(s===ee||!Uh(i,o,r)))throw new _o(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new _o(i)})}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){return w(this,null,function*(){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=d0(t,i,o);if(!u)throw new _o(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qV&&(this.allowRedirects=!1));let y=new Io(o,l,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,xS(i),Un(i),i.component??i._loadedComponent??null,i,kS(i)),A=Fh(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=yield this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),N=yield this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,N.concat(m),s,!1,a)})}matchSegmentAgainstRoute(e,t,r,i,o,s){return w(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield Ih(OV(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new _o(t);e=r._injector??e;let{routes:u}=yield this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new Io(p,h,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,xS(r),Un(r),r.component??r._loadedComponent??null,r,kS(r)),A=Fh(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data);let{segmentGroup:P,slicedSegments:N}=PS(t,p,m,u);if(N.length===0&&P.hasChildren()){let de=yield this.processChildren(l,u,P,y);return new rn(y,de)}if(u.length===0&&N.length===0)return new rn(y,[]);let j=Un(r)===o,ie=yield this.processSegment(l,u,P,N,j?ee:o,!0,y);return new rn(y,ie instanceof rn?[ie]:[])})}getChildConfig(e,t,r){return w(this,null,function*(){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield Ih(RV(e,t,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw PV(t)}return{routes:[],injector:e}})}};function GV(n){n.sort((e,t)=>e.value.outlet===ee?-1:t.value.outlet===ee?1:e.value.outlet.localeCompare(t.value.outlet))}function WV(n){let e=n.value.routeConfig;return e&&e.path===""}function h0(n){let e=[],t=new Set;for(let r of n){if(!WV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=h0(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!t.has(r))}function xS(n){return n.data||{}}function kS(n){return n.resolve||{}}var KV=new q("",{factory:()=>HV});function QV(n,e,t,r,i,o,s){let a=n.get(KV);return _t(u=>oe(u).pipe(Cn(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),ye(({state:l,tree:h})=>W(R({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function YV(n,e){return _t(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of f0(u))s.add(l);let a=0;return Me(s).pipe(ms(u=>o.has(u)?JV(u,r,n,e):(u.data=Fh(u,u.parent,n).resolve,oe(void 0))),Ot(()=>a++),Gl(1),_t(u=>a===s.size?oe(t):Wt))})}function f0(n){let e=n.children.map(t=>f0(t)).flat();return[n,...e]}function JV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!e0(i)&&(o[ou]=i.title),cc(()=>(n.data=Fh(n,n.parent,t).resolve,ZV(o,n,e,r).pipe(ye(s=>(n._resolvedData=s,n.data=R(R({},n.data),s),null)))))}function ZV(n,e,t,r){let i=Dv(n);if(i.length===0)return oe({});let o={};return Me(i).pipe(_t(s=>XV(n[s],e,t,r).pipe(Tr(),Ot(a=>{if(a instanceof Qs)throw Lh(new Fr,a);o[s]=a}))),Gl(1),ye(()=>o),gs(s=>o0(s)?Wt:Eg(s)))}function XV(n,e,t,r){let i=Js(e)??r,o=Zs(n,i),s=o.resolve?o.resolve(e,t):et(i,()=>o(e,t));return Do(s)}function Iv(n){return Cn(e=>{let t=n(e);return t?Me(t).pipe(ye(()=>e)):oe(e)})}var Vv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(t){return t.data[ou]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(p0),providedIn:"root"})}return n})(),p0=(()=>{class n extends Vv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Z(TS))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ii=new q("",{factory:()=>({})}),To=new q(""),Bh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(tv);loadComponent(t,r){return w(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=w(this,null,function*(){try{let o=yield VS(et(t,()=>r.loadComponent())),s=yield y0(m0(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=w(this,null,function*(){try{let o=yield g0(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g0(n,e,t,r){return w(this,null,function*(){let i=yield VS(et(t,()=>n.loadChildren())),o=yield y0(m0(i)),s;o instanceof th||Array.isArray(o)?s=o:s=yield e.compileModuleAsync(o),r&&r(n);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,u=a.get(To,[],{optional:!0,self:!0}).flat()),{routes:u.map(Lv),injector:a}})}function e2(n){return n&&typeof n=="object"&&"default"in n}function m0(n){return e2(n)?n.default:n}function y0(n){return w(this,null,function*(){return n})}var $h=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(t2),providedIn:"root"})}return n})(),t2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jv=new q(""),Uv=new q("");function v0(n,e,t){let r=n.get(Uv),i=n.get(tt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),n2(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&et(n,()=>u({transition:a,from:e,to:t})),s}function n2(n){return new Promise(e=>{Oc({read:()=>setTimeout(e)},{injector:n})})}var r2=()=>{},Bv=new q(""),Hh=(()=>{class n{currentNavigation=Re(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Re(null,{});events=new Ye;transitionAbortWithErrorSubject=new Ye;configLoader=M(Bh);environmentInjector=M(Ze);destroyRef=M(Rn);urlSerializer=M(Co);rootContexts=M(bo);location=M(yi);inputBindingEnabled=M(au,{optional:!0})!==null;titleStrategy=M(Vv);options=M(Ii,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M($h);createViewTransition=M(jv,{optional:!0});navigationErrorHandler=M(Bv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>oe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ah(i)),r=i=>this.events.next(new Rh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ct(()=>{this.transitions?.next(W(R({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new vt(null),this.transitions.pipe(Jt(r=>r!==null),Cn(r=>{let i=!1,o=new AbortController;return oe(r).pipe(Cn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",$t.SupersededByNewNavigation),Wt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?W(R({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new hr(s.id,this.urlSerializer.serialize(s.rawUrl),"",zs.IgnoredSameUrlNavigation)),s.resolve(!1),Wt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return oe(s).pipe(Cn(h=>(this.events.next(new Ei(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Wt:Promise.resolve(h))),QV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ot(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new eu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:A}=s,P=new Ei(h,this.urlSerializer.serialize(p),m,y);this.events.next(P);let N=ZS(this.rootComponentType).snapshot;return this.currentTransition=r=W(R({},s),{targetSnapshot:N,urlAfterRedirects:p,extras:W(R({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(j=>(j.finalUrl=p,j)),oe(r)}else return this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",zs.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Wt}),Ot(s=>{let a=new Ch(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ye(s=>(this.currentTransition=r=W(R({},s),{guards:lV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),IV(this.environmentInjector,s=>this.events.next(s)),Ot(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Lh(this.urlSerializer,s.guardsResult);let a=new bh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Jt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",$t.GuardRejected),!1)),Iv(s=>{if(s.guards.canActivateChecks.length!==0)return oe(s).pipe(Ot(a=>{let u=new Th(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Cn(a=>{let u=!1;return oe(a).pipe(YV(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",$t.NoDataFromResolver)}}))}),Ot(a=>{let u=new Sh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Iv(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Js(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?oe(s):Me(Promise.all(u).then(()=>s))}),Iv(()=>this.afterPreactivation()),Cn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Me(u).pipe(ye(()=>r)):oe(r)}),ye(s=>{let a=oV(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=W(R({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Ot(()=>{this.events.next(new tu)}),uV(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),br(1),uc(s0(o.signal).pipe(Jt(()=>!i&&!r.targetRouterState),Ot(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",$t.Aborted)}))),Ot({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=r2,a)),this.lastSuccessfulNavigation.set(ct(this.currentNavigation)),this.events.next(new sn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),uc(this.transitionAbortWithErrorSubject.pipe(Ot(s=>{throw s}))),Dg(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",$t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),gs(s=>{if(this.destroyed)return r.resolve(!1),Wt;if(i=!0,i0(s))this.events.next(new dr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),cV(s)?this.events.next(new Ks(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Gs(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Qs){let{message:l,cancellationCode:h}=Lh(this.urlSerializer,u);this.events.next(new dr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ks(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Wt}))}))}cancelNavigationTransition(t,r,i){let o=new dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ct(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i2(n){return n!==Hs}var _0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(o2),providedIn:"root"})}return n})(),jh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},o2=(()=>{class n extends jh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$v=(()=>{class n{urlSerializer=M(Co);options=M(Ii,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(yi);urlHandlingStrategy=M($h);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Bn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=ZS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(E0),providedIn:"root"})}return n})(),E0=(()=>{class n extends $v{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ei?this.updateStateMemento():t instanceof hr?this.commitTransition(r):t instanceof eu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof tu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof dr&&t.code!==$t.SupersededByNewNavigation&&t.code!==$t.Redirect?this.restoreHistory(r):t instanceof Gs?this.restoreHistory(r,!0):t instanceof sn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=R(R({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=R(R({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qh(n,e){n.events.pipe(Jt(t=>t instanceof sn||t instanceof dr||t instanceof Gs||t instanceof hr),ye(t=>t instanceof sn||t instanceof hr?0:(t instanceof dr?t.code===$t.Redirect||t.code===$t.SupersededByNewNavigation:!1)?2:1),Jt(t=>t!==2),br(1)).subscribe(()=>{e()})}var s2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M($y);stateManager=M($v);options=M(Ii,{optional:!0})||{};pendingTasks=M(sr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Hh);urlSerializer=M(Co);location=M(yi);urlHandlingStrategy=M($h);injector=M(Ze);_events=new Ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(_0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(To,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(au,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ct(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof dr&&r.code!==$t.Redirect&&r.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0;else if(r instanceof Ks){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=R({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||i2(i.source)},s);this.scheduleNavigation(a,Hs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}tV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=R({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(gn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ct(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Lv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=R(R({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=KS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return QS(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=_i(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Hs,null,r)}navigate(t,r={skipLocationChange:!1}){return c2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Zi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=R({},s2):r===!1?i=R({},a2):i=r,_i(t))return SS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return SS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return qh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function c2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new G(4008,!1)}var fr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Re(null,{});get href(){return ct(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ye;applicationErrorHandler=M(gn);options=M(Ii,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new ah("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof sn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_i(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:_i(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(B(pt),B(At),xc("tabindex"),B(On),B(Ft),B(jn))};static \u0275dir=xe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&pe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Vc("href",i.reactiveHref(),by)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",vo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",vo],replaceUrl:[2,"replaceUrl","replaceUrl",vo],routerLink:"routerLink"},features:[mn]})}return n})(),qv=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Pe;link=M(fr,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof sn&&this.update()})}ngAfterContentInit(){oe(this.links.changes,oe(null)).pipe(ai()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(t).pipe(ai()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=u2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(B(pt),B(Ft),B(On),B(Or))};static \u0275dir=xe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Qy(o,fr,5),r&2){let s;Yy(s=Jy())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[mn]})}return n})();function u2(n){return!!n.paths}var uu=class{};var I0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Jt(t=>t instanceof sn),ms(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ls(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Me(i).pipe(ai())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=Me(this.loader.loadChildren(t,r)):i=oe(null);let o=i.pipe(_t(s=>s===null?oe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Me([o,s]).pipe(ai())}else return o})}static \u0275fac=function(r){return new(r||n)(Z(pt),Z(Ze),Z(uu),Z(Bh))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),w0=new q(""),l2=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Hs;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ei?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof hr&&t.code===zs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Ws))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>w(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ws(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Uy()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function zv(n,...e){return bn([{provide:To,multi:!0,useValue:n},[],{provide:At,useFactory:D0},{provide:Lc,multi:!0,useFactory:C0},e.map(t=>t.\u0275providers)])}function D0(){return M(pt).routerState.root}function lu(n,e){return{\u0275kind:n,\u0275providers:e}}function C0(){let n=M(Xe);return e=>{let t=n.get(kr);if(e!==t.components[0])return;let r=n.get(pt),i=n.get(b0);n.get(Gv)===1&&r.initialNavigation(),n.get(A0,null,{optional:!0})?.setUpPreloading(),n.get(w0,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var b0=new q("",{factory:()=>new Ye}),Gv=new q("",{factory:()=>1});function T0(){let n=[{provide:wy,useValue:!0},{provide:Gv,useValue:0},nh(()=>{let e=M(Xe);return e.get(sv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(pt),o=e.get(b0);qh(i,()=>{r(!0)}),e.get(Hh).afterPreactivation=()=>(r(!0),o.closed?oe(void 0):o),i.initialNavigation()}))})];return lu(2,n)}function S0(){let n=[nh(()=>{M(pt).setUpLocationChangeListener()}),{provide:Gv,useValue:2}];return lu(3,n)}var A0=new q("");function R0(n){return lu(0,[{provide:A0,useExisting:I0},{provide:uu,useExisting:n}])}function N0(){return lu(8,[Ov,{provide:au,useExisting:Ov}])}function M0(n){kn("NgRouterViewTransitions");let e=[{provide:jv,useValue:v0},{provide:Uv,useValue:R({skipNextTransition:!!n?.skipInitialTransition},n)}];return lu(9,e)}var P0=[yi,{provide:Co,useClass:Fr},pt,bo,{provide:At,useFactory:D0},Bh,[]],Wv=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[P0,[],{provide:To,multi:!0,useValue:t},[],r?.errorHandler?{provide:Bv,useValue:r.errorHandler}:[],{provide:Ii,useValue:r||{}},r?.useHash?h2():f2(),d2(),r?.preloadingStrategy?R0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?p2(r):[],r?.bindToComponentInputs?N0().\u0275providers:[],r?.enableViewTransitions?M0().\u0275providers:[],g2()]}}static forChild(t){return{ngModule:n,providers:[{provide:To,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=ln({})}return n})();function d2(){return{provide:w0,useFactory:()=>{let n=M(vS),e=M(Ce),t=M(Ii),r=M(Hh),i=M(Co);return t.scrollOffset&&n.setOffset(t.scrollOffset),new l2(i,r,n,e,t)}}}function h2(){return{provide:jn,useClass:av}}function f2(){return{provide:jn,useClass:lh}}function p2(n){return[n.initialNavigation==="disabled"?S0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?T0().\u0275providers:[]]}var Hv=new q("");function g2(){return[{provide:Hv,useFactory:C0},{provide:Lc,multi:!0,useExisting:Hv}]}var x0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"home"]],template:function(r,i){r&1&&(Ln(0,"section",0)(1,"h2"),L(2,"Vitaj v Quest OverFlow!"),Qt(),Ln(3,"p"),L(4,"Tu m\xF4\u017Ee\u0161 spravova\u0165 svoje dobrodru\u017Estv\xE1, sledova\u0165 sk\xFAsenosti a plni\u0165 \xFAlohy ako prav\xFD hrdina!"),Qt()())},encapsulation:2})}}return n})();var B0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(B(On),B(Ft))};static \u0275dir=xe({type:n})}return n})(),nf=(()=>{class n extends B0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275dir=xe({type:n,features:[Vt]})}return n})(),Ao=new q("");var m2={provide:Ao,useExisting:en(()=>pr),multi:!0};function y2(){let n=vn()?vn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var v2=new q(""),pr=(()=>{class n extends B0{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!y2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(B(On),B(Ft),B(v2,8))};static \u0275dir=xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&pe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ur([m2]),Vt]})}return n})();function Yv(n){return n==null||Jv(n)===0}function Jv(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var rf=new q(""),of=new q(""),_2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gt=class{static min(e){return E2(e)}static max(e){return I2(e)}static required(e){return w2(e)}static requiredTrue(e){return D2(e)}static email(e){return C2(e)}static minLength(e){return b2(e)}static maxLength(e){return T2(e)}static pattern(e){return S2(e)}static nullValidator(e){return $0()}static compose(e){return K0(e)}static composeAsync(e){return Y0(e)}};function E2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function I2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function w2(n){return Yv(n.value)?{required:!0}:null}function D2(n){return n.value===!0?null:{required:!0}}function C2(n){return Yv(n.value)||_2.test(n.value)?null:{email:!0}}function b2(n){return e=>{let t=e.value?.length??Jv(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function T2(n){return e=>{let t=e.value?.length??Jv(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function S2(n){if(!n)return $0;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Yv(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function $0(n){return null}function H0(n){return n!=null}function q0(n){return yo(n)?Me(n):n}function z0(n){let e={};return n.forEach(t=>{e=t!=null?R(R({},e),t):e}),Object.keys(e).length===0?null:e}function G0(n,e){return e.map(t=>t(n))}function A2(n){return!n.validate}function W0(n){return n.map(e=>A2(e)?e:t=>e.validate(t))}function K0(n){if(!n)return null;let e=n.filter(H0);return e.length==0?null:function(t){return z0(G0(t,e))}}function Q0(n){return n!=null?K0(W0(n)):null}function Y0(n){if(!n)return null;let e=n.filter(H0);return e.length==0?null:function(t){let r=G0(t,e).map(q0);return Ig(r).pipe(ye(z0))}}function J0(n){return n!=null?Y0(W0(n)):null}function k0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Z0(n){return n._rawValidators}function X0(n){return n._rawAsyncValidators}function Kv(n){return n?Array.isArray(n)?n:[n]:[]}function Gh(n,e){return Array.isArray(n)?n.includes(e):n===e}function O0(n,e){let t=Kv(e);return Kv(n).forEach(i=>{Gh(t,i)||t.push(i)}),t}function F0(n,e){return Kv(e).filter(t=>!Gh(n,t))}var Wh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Q0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=J0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},So=class extends Wh{name;get formDirective(){return null}get path(){return null}},Lr=class extends Wh{_parent=null;name=null;valueAccessor=null},Kh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var _n=(()=>{class n extends Kh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Lr,2))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Uc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Vt]})}return n})(),Di=(()=>{class n extends Kh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(So,10))};static \u0275dir=xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Uc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Vt]})}return n})();var hu="VALID",zh="INVALID",Xs="PENDING",fu="DISABLED",wi=class{},Qh=class extends wi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},pu=class extends wi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},gu=class extends wi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ea=class extends wi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Qv=class extends wi{source;constructor(e){super(),this.source=e}},Yh=class extends wi{source;constructor(e){super(),this.source=e}};function eA(n){return(sf(n)?n.validators:n)||null}function R2(n){return Array.isArray(n)?Q0(n):n||null}function tA(n,e){return(sf(e)?e.asyncValidators:n)||null}function N2(n){return Array.isArray(n)?J0(n):n||null}function sf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function M2(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[t])throw new G(1001,"")}function P2(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new G(1002,"")})}var Jh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ct(this.statusReactive)}set status(e){ct(()=>this.statusReactive.set(e))}_status=yn(()=>this.statusReactive(),{});statusReactive=Re(void 0,{});get valid(){return this.status===hu}get invalid(){return this.status===zh}get pending(){return this.status==Xs}get disabled(){return this.status===fu}get enabled(){return this.status!==fu}errors;get pristine(){return ct(this.pristineReactive)}set pristine(e){ct(()=>this.pristineReactive.set(e))}_pristine=yn(()=>this.pristineReactive(),{});pristineReactive=Re(!0,{});get dirty(){return!this.pristine}get touched(){return ct(this.touchedReactive)}set touched(e){ct(()=>this.touchedReactive.set(e))}_touched=yn(()=>this.touchedReactive(),{});touchedReactive=Re(!1,{});get untouched(){return!this.touched}_events=new Ye;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(O0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(O0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F0(e,this._rawAsyncValidators))}hasValidator(e){return Gh(this._rawValidators,e)}hasAsyncValidator(e){return Gh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(W(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new gu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(W(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new pu(!0,r))}markAsPending(e={}){this.status=Xs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ea(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(W(R({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fu,this.errors=null,this._forEachChild(i=>{i.disable(W(R({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qh(this.value,r)),this._events.next(new ea(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hu,this._forEachChild(r=>{r.enable(W(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hu||this.status===Xs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qh(this.value,t)),this._events.next(new ea(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(W(R({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fu:hu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=q0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ea(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?fu:this.errors?zh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xs)?Xs:this._anyControlsHaveStatus(zh)?zh:hu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new pu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=R2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=N2(this._rawAsyncValidators)}},$n=class extends Jh{constructor(e,t,r){super(eA(t),tA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){P2(this,!0,e),Object.keys(e).forEach(r=>{M2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,W(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Yh(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mu=new q("",{factory:()=>af}),af="always";function nA(n,e){return[...e.path,n]}function Zh(n,e,t=af){Zv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),k2(n,e),F2(n,e),O2(n,e),x2(n,e)}function Xh(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ef(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function x2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Zv(n,e){let t=Z0(n);e.validator!==null?n.setValidators(k0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=X0(n);e.asyncValidator!==null?n.setAsyncValidators(k0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ef(e._rawValidators,i),ef(e._rawAsyncValidators,i)}function tf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Z0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=X0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return ef(e._rawValidators,r),ef(e._rawAsyncValidators,r),t}function k2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rA(n,e)})}function O2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function F2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function L2(n,e){n==null,Zv(n,e)}function V2(n,e){return tf(n,e)}function Xv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function j2(n){return Object.getPrototypeOf(n.constructor)===nf}function U2(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function e_(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===pr?t=o:j2(o)?r=o:i=o}),i||r||t||null}function B2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function L0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function V0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ct=class extends Jh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(eA(t),tA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(V0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Yh(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){L0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){L0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){V0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $2=n=>n instanceof Ct;var H2={provide:Lr,useExisting:en(()=>t_)},j0=Promise.resolve(),t_=(()=>{class n extends Lr{_changeDetectorRef;callSetDisabledState;control=new Ct;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Pe;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=e_(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Zh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){j0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&vo(r);j0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nA(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(B(So,9),B(rf,10),B(of,10),B(Ao,10),B(Or,8),B(mu,8))};static \u0275dir=xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ur([H2]),Vt,mn]})}return n})();var ta=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),q2={provide:Ao,useExisting:en(()=>yu),multi:!0},yu=(()=>{class n extends nf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&pe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ur([q2]),Vt]})}return n})();var z2=(()=>{class n extends So{callSetDisabledState;get submitted(){return ct(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=yn(()=>this._submittedReactive(),{});_submittedReactive=Re(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(tf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Zh(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Xh(t.control||null,t,!1),B2(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,U2(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Qv(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Xh(r||null,t),$2(i)&&(Zh(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);L2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&V2(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Zv(this.form,this),this._oldForm&&tf(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(B(rf,10),B(of,10),B(mu,8))};static \u0275dir=xe({type:n,features:[Vt,mn]})}return n})();var n_=new q(""),G2={provide:Lr,useExisting:en(()=>r_)},r_=(()=>{class n extends Lr{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Pe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=e_(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&Xh(r,this,!1),Zh(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Xv(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Xh(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(B(rf,10),B(of,10),B(Ao,10),B(n_,8),B(mu,8))};static \u0275dir=xe({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[ur([G2]),Vt,mn]})}return n})();var W2={provide:Lr,useExisting:en(()=>Vr)},Vr=(()=>{class n extends Lr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Pe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=e_(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Xv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return nA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(B(So,13),B(rf,10),B(of,10),B(Ao,10),B(n_,8))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ur([W2]),Vt,mn]})}return n})();var K2={provide:So,useExisting:en(()=>jr)},jr=(()=>{class n extends z2{form=null;ngSubmit=new Pe;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&pe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ur([K2]),Vt]})}return n})(),Q2={provide:Ao,useExisting:en(()=>Ci),multi:!0};function iA(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Y2(n){return n.split(":")[0]}var Ci=(()=>{class n extends nf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=M(kr).injector;destroyRef=M(Rn);cdr=M(Or);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Oc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=iA(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Y2(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&pe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([Q2]),Vt]})}return n})(),na=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(iA(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(B(Ft),B(On),B(Ci,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),J2={provide:Ao,useExisting:en(()=>oA),multi:!0};function U0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Z2(n){return n.split(":")[0]}var oA=(()=>{class n extends nf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Z2(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xn(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&pe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([J2]),Vt]})}return n})(),ra=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(U0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(U0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(Ft),B(On),B(oA,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var sA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=ln({})}return n})();var aA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mu,useValue:t.callSetDisabledState??af}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=ln({imports:[sA]})}return n})(),gr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:n_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:mu,useValue:t.callSetDisabledState??af}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Fn({type:n});static \u0275inj=ln({imports:[sA]})}return n})();var oa=(()=>{class n{constructor(){this.searchChange=new Pe,this.searchControl=new Ct(""),this.searchControl.valueChanges.subscribe(t=>{this.searchChange.emit(t??"")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["app-search"]],outputs:{searchChange:"searchChange"},decls:1,vars:1,consts:[["placeholder","Search...",1,"search-input",3,"formControl"]],template:function(r,i){r&1&&ke(0,"input",0),r&2&&Se("formControl",i.searchControl)},dependencies:[gr,pr,_n,r_],encapsulation:2})}}return n})();var cA=()=>{};var dA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},X2=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):X2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new o_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},o_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ej=function(n){let e=dA(n);return cf.encodeByteArray(e,!0)},_u=function(n){return ej(n).replace(/\./g,"")},uf=function(n){try{return cf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tj=()=>a_().__FIREBASE_DEFAULTS__,nj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&uf(n[1]);return e&&JSON.parse(e)},lf=()=>{try{return cA()||tj()||nj()||rj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hA=n=>lf()?.emulatorHosts?.[n],fA=n=>{let e=hA(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},c_=()=>lf()?.config,pA=n=>lf()?.[`_${n}`];var Ro=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function No(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function u_(n){return w(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function gA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=R({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_u(JSON.stringify(t)),_u(JSON.stringify(s)),""].join(".")}var vu={};function ij(){let n={prod:[],emulator:[]};for(let e of Object.keys(vu))vu[e]?n.emulator.push(e):n.prod.push(e);return n}function oj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var uA=!1;function l_(n,e){if(typeof window>"u"||typeof document>"u"||!No(window.location.host)||vu[n]===e||vu[n]||uA)return;vu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=ij().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{uA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=oj(r),y=t("text"),A=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),N=document.getElementById(P)||document.createElement("a"),j=t("preprendIcon"),ie=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let de=m.element;a(de),h(N,P);let Mt=l();u(ie,j),de.append(ie,A,N,Mt),document.body.appendChild(de)}o?(A.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function sj(){let n=lf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EA(){return!sj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eu(){try{return typeof indexedDB=="object"}catch{return!1}}function IA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var aj="FirebaseError",En=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hn.prototype.create)}},Hn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?cj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new En(i,a,r)}};function cj(n,e){return n.replace(uj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uj=/\{\$([^}]+)}/g;function Mo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(lA(o)&&lA(s)){if(!Mo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function lA(n){return n!==null&&typeof n=="object"}function d_(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wA(n,e){let t=new s_(n,e);return t.subscribe.bind(t)}var s_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");lj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=i_),i.error===void 0&&(i.error=i_),i.complete===void 0&&(i.complete=i_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function i_(){}var Vte=14400*1e3;function cn(n){return n&&n._delegate?n._delegate:n}var Ht=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Po="[DEFAULT]";var h_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ro;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hj(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dj(n){return n===Po?void 0:n}function hj(n){return n.instantiationMode==="EAGER"}var df=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new h_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fj=[],le=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(le||{}),pj={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},gj=le.INFO,mj={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},yj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=mj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mr=class{constructor(e){this.name=e,this._logLevel=gj,this._logHandler=yj,this._userLogHandler=null,fj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var vj=(n,e)=>e.some(t=>n instanceof t),DA,CA;function _j(){return DA||(DA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ej(){return CA||(CA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bA=new WeakMap,p_=new WeakMap,TA=new WeakMap,f_=new WeakMap,m_=new WeakMap;function Ij(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(yr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&bA.set(t,n)}).catch(()=>{}),m_.set(e,n),e}function wj(n){if(p_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});p_.set(n,e)}var g_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return p_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SA(n){g_=n(g_)}function Dj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(hf(this),e,...t);return TA.set(r,e.sort?e.sort():[e]),yr(r)}:Ej().includes(n)?function(...e){return n.apply(hf(this),e),yr(bA.get(this))}:function(...e){return yr(n.apply(hf(this),e))}}function Cj(n){return typeof n=="function"?Dj(n):(n instanceof IDBTransaction&&wj(n),vj(n,_j())?new Proxy(n,g_):n)}function yr(n){if(n instanceof IDBRequest)return Ij(n);if(f_.has(n))return f_.get(n);let e=Cj(n);return e!==n&&(f_.set(n,e),m_.set(e,n)),e}var hf=n=>m_.get(n);function RA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=yr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(yr(s.result),u.oldVersion,u.newVersion,yr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var bj=["get","getKey","getAll","getAllKeys","count"],Tj=["put","add","delete","clear"],y_=new Map;function AA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(y_.get(e))return y_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Tj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bj.includes(t)))return;let o=function(s,...a){return w(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return y_.set(e,o),o}SA(n=>W(R({},n),{get:(e,t,r)=>AA(e,t)||n.get(e,t,r),has:(e,t)=>!!AA(e,t)||n.has(e,t)}));var __=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Sj(n){return n.getComponent()?.type==="VERSION"}var E_="@firebase/app",NA="0.14.6";var Ur=new mr("@firebase/app"),Aj="@firebase/app-compat",Rj="@firebase/analytics-compat",Nj="@firebase/analytics",Mj="@firebase/app-check-compat",Pj="@firebase/app-check",xj="@firebase/auth",kj="@firebase/auth-compat",Oj="@firebase/database",Fj="@firebase/data-connect",Lj="@firebase/database-compat",Vj="@firebase/functions",jj="@firebase/functions-compat",Uj="@firebase/installations",Bj="@firebase/installations-compat",$j="@firebase/messaging",Hj="@firebase/messaging-compat",qj="@firebase/performance",zj="@firebase/performance-compat",Gj="@firebase/remote-config",Wj="@firebase/remote-config-compat",Kj="@firebase/storage",Qj="@firebase/storage-compat",Yj="@firebase/firestore",Jj="@firebase/ai",Zj="@firebase/firestore-compat",Xj="firebase",eU="12.6.0";var I_="[DEFAULT]",tU={[E_]:"fire-core",[Aj]:"fire-core-compat",[Nj]:"fire-analytics",[Rj]:"fire-analytics-compat",[Pj]:"fire-app-check",[Mj]:"fire-app-check-compat",[xj]:"fire-auth",[kj]:"fire-auth-compat",[Oj]:"fire-rtdb",[Fj]:"fire-data-connect",[Lj]:"fire-rtdb-compat",[Vj]:"fire-fn",[jj]:"fire-fn-compat",[Uj]:"fire-iid",[Bj]:"fire-iid-compat",[$j]:"fire-fcm",[Hj]:"fire-fcm-compat",[qj]:"fire-perf",[zj]:"fire-perf-compat",[Gj]:"fire-rc",[Wj]:"fire-rc-compat",[Kj]:"fire-gcs",[Qj]:"fire-gcs-compat",[Yj]:"fire-fst",[Zj]:"fire-fst-compat",[Jj]:"fire-vertex","fire-js":"fire-js",[Xj]:"fire-js-all"};var Iu=new Map,nU=new Map,w_=new Map;function MA(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qn(n){let e=n.name;if(w_.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;w_.set(e,n);for(let t of Iu.values())MA(t,n);for(let t of nU.values())MA(t,n);return!0}function ff(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Br(n){return n==null?!1:n.settings!==void 0}var rU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Hn("app","Firebase",rU);var D_=class{constructor(e,t,r){this._isDeleted=!1,this._options=R({},e),this._config=R({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}};var sa=eU;function T_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=R({name:I_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bi.create("bad-app-name",{appName:String(i)});if(t||(t=c_()),!t)throw bi.create("no-options");let o=Iu.get(i);if(o){if(Mo(t,o.options)&&Mo(r,o.config))return o;throw bi.create("duplicate-app",{appName:i})}let s=new df(i);for(let u of w_.values())s.addComponent(u);let a=new D_(t,r,s);return Iu.set(i,a),a}function aa(n=I_){let e=Iu.get(n);if(!e&&n===I_&&c_())return T_();if(!e)throw bi.create("no-app",{appName:n});return e}function pf(){return Array.from(Iu.values())}function Qe(n,e,t){let r=tU[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(s.join(" "));return}qn(new Ht(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var iU="firebase-heartbeat-database",oU=1,wu="firebase-heartbeat-store",v_=null;function OA(){return v_||(v_=RA(iU,oU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),v_}function sU(n){return w(this,null,function*(){try{let t=(yield OA()).transaction(wu),r=yield t.objectStore(wu).get(FA(n));return yield t.done,r}catch(e){if(e instanceof En)Ur.warn(e.message);else{let t=bi.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(t.message)}}})}function PA(n,e){return w(this,null,function*(){try{let r=(yield OA()).transaction(wu,"readwrite");yield r.objectStore(wu).put(e,FA(n)),yield r.done}catch(t){if(t instanceof En)Ur.warn(t.message);else{let r=bi.create("idb-set",{originalErrorMessage:t?.message});Ur.warn(r.message)}}})}function FA(n){return`${n.name}!${n.options.appId}`}var aU=1024,cU=30,C_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new b_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cU){let i=lU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ur.warn(e)}})}getHeartbeatsHeader(){return w(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=xA(),{heartbeatsToSend:t,unsentEntries:r}=uU(this._heartbeatsCache.heartbeats),i=_u(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ur.warn(e),""}})}};function xA(){return new Date().toISOString().substring(0,10)}function uU(n,e=aU){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var b_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Eu()?IA().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return PA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return PA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function kA(n){return _u(JSON.stringify({version:2,heartbeats:n})).length}function lU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dU(n){qn(new Ht("platform-logger",e=>new __(e),"PRIVATE")),qn(new Ht("heartbeat",e=>new C_(e),"PRIVATE")),Qe(E_,NA,n),Qe(E_,NA,"esm2020"),Qe("fire-js","")}dU("");var hU="firebase",fU="12.6.0";Qe(hU,fU,"app");function LA(n){n===void 0&&(n=M(Xe));let e=n.get(Ss);return t=>new ae(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ko=new ci("ANGULARFIRE2_VERSION");function mf(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ua=(n,e)=>{let t=e?[e]:pf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ca=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(ca||{}),VA=iv()&&typeof Zone<"u"?ca.WARN:ca.SILENT;var gf=class{zone;delegate;constructor(e,t=_g){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Oo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(Ce);this.outsideAngular=t.runOutsideAngular(()=>new gf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new gf(typeof Zone>"u"?void 0:Zone.current,vg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jA=!1;function pU(n,e){!jA&&(VA>ca.SILENT||iv())&&(jA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),VA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function gU(n){let e=M(Ce,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function xo(n){let e=M(Ce,{optional:!0});return e?e.run(()=>n()):n()}var mU=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),et(t,()=>xo(()=>n.apply(void 0,r)))),zn=(n,e,t)=>(t||=e?ca.WARN:ca.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(Oo),s=M(Ss),a=M(Ze)}catch{return pU(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=xo(()=>s.add())),i[l]=mU(i[l],r,a));let u=gU(()=>n.apply(this,i));return e?u instanceof ae?u.pipe(si(o.outsideAngular),oi(o.insideAngular),LA(a)):u instanceof Promise?xo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>et(a,()=>xo(()=>h(m))),m=>et(a,()=>xo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:xo(()=>u):u instanceof ae?u.pipe(si(o.outsideAngular),oi(o.insideAngular)):xo(()=>u)});var Fo=class{constructor(e){return e}},Du=class{constructor(){return pf()}};function yU(n){return n&&n.length===1?n[0]:new Fo(aa())}var S_=new q("angularfire2._apps"),vU={provide:Fo,useFactory:yU,deps:[[new xr,S_]]},_U={provide:Du,deps:[[new xr,S_]]};function EU(n){return(e,t)=>{let r=t.get(po);Qe("angularfire",ko.full,"core"),Qe("angularfire",ko.full,"app"),Qe("angular",Ug.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Fo(i)}}function UA(n,...e){return bn([vU,_U,{provide:S_,useFactory:EU(n),multi:!0,deps:[Ce,Xe,Oo,...e]}])}var BA=zn(T_,!0);var IU=new Map,wU={activated:!1,tokenObservers:[]},DU={initialized:!1,enabled:!1};function Gn(n){return IU.get(n)||R({},wU)}function zA(){return DU}var CU="https://content-firebaseappcheck.googleapis.com/v1";var bU="exchangeDebugToken",$A={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Bne=1440*60*1e3;var N_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return w(this,null,function*(){this.stop();try{this.pending=new Ro,this.pending.promise.catch(t=>{}),yield TU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ro,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function TU(n){return new Promise(e=>{setTimeout(e,n)})}var SU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ti=new Hn("appCheck","AppCheck",SU);function GA(n){if(!Gn(n).activated)throw Ti.create("use-before-activation",{appName:n.name})}function WA(r,i){return w(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Ti.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ti.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ti.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function KA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${CU}/projects/${t}/apps/${r}:${bU}?key=${i}`,body:{debug_token:e}}}var AU="firebase-app-check-database",RU=1,M_="firebase-app-check-store";var yf=null;function NU(){return yf||(yf=new Promise((n,e)=>{try{let t=indexedDB.open(AU,RU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(Ti.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(M_,{keyPath:"compositeKey"})}}}catch(t){e(Ti.create("storage-open",{originalErrorMessage:t?.message}))}}),yf)}function MU(n,e){return PU(xU(n),e)}function PU(n,e){return w(this,null,function*(){let r=(yield NU()).transaction(M_,"readwrite"),o=r.objectStore(M_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{a(Ti.create("storage-set",{originalErrorMessage:u.target.error?.message}))}})})}function xU(n){return`${n.options.appId}-${n.name}`}var Cu=new mr("@firebase/app-check");function A_(n,e){return Eu()?MU(n,e).catch(t=>{Cu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QA(){return zA().enabled}function YA(){return w(this,null,function*(){let n=zA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var kU={error:"UNKNOWN_ERROR"};function OU(n){return cf.encodeString(JSON.stringify(n),!1)}function P_(n,e=!1,t=!1){return w(this,null,function*(){let r=n.app;GA(r);let i=Gn(r),o=i.token,s;if(o&&!bu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(bu(l)?o=l:yield A_(r,void 0))}if(!e&&o&&bu(o))return{token:o.token};let a=!1;if(QA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=WA(KA(r,yield YA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield A_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Cu.warn(l.message):t&&Cu.error(l),R_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Gn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Cu.warn(l.message):t&&Cu.error(l),s=l}let u;return o?s?bu(o)?u={token:o.token,internalError:s}:u=R_(s):(u={token:o.token},i.token=o,yield A_(r,o)):u=R_(s),a&&jU(r,u),u})}function FU(n){return w(this,null,function*(){let e=n.app;GA(e);let{provider:t}=Gn(e);if(QA()){let r=yield YA(),{token:i}=yield WA(KA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function LU(n,e,t,r){let{app:i}=n,o=Gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&bu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),HA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HA(n))}function JA(n,e){let t=Gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HA(n){let{app:e}=n,t=Gn(e),r=t.tokenRefresher;r||(r=VU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VU(n){let{app:e}=n;return new N_(()=>w(null,null,function*(){let t=Gn(e),r;if(t.token?r=yield P_(n,!0):r=yield P_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$A.RETRIAL_MIN_WAIT,$A.RETRIAL_MAX_WAIT)}function jU(n,e){let t=Gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bu(n){return n.expireTimeMillis-Date.now()>0}function R_(n){return{token:OU(kU),error:n}}var x_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Gn(this.app);for(let t of e)JA(this.app,t.next);return Promise.resolve()}};function UU(n,e){return new x_(n,e)}function BU(n){return{getToken:e=>P_(n,e),getLimitedUseToken:()=>FU(n),addTokenListener:e=>LU(n,"INTERNAL",e),removeTokenListener:e=>JA(n.app,e)}}var $U="@firebase/app-check",HU="0.11.0";var qU="app-check",qA="app-check-internal";function zU(){qn(new Ht(qU,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return UU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qA).initialize()})),qn(new Ht(qA,n=>{let e=n.getProvider("app-check").getImmediate();return BU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qe($U,HU)}zU();var GU="app-check";var vf=class{constructor(){return ua(GU)}};var WU=["localhost","0.0.0.0","127.0.0.1"],ere=typeof window<"u"&&WU.includes(window.location.hostname);function oR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sR=oR,aR=new Hn("auth","Firebase",oR());var wf=new mr("@firebase/auth");function QU(n,...e){wf.logLevel<=le.WARN&&wf.warn(`Auth (${sa}): ${n}`,...e)}function Ef(n,...e){wf.logLevel<=le.ERROR&&wf.error(`Auth (${sa}): ${n}`,...e)}function ZA(n,...e){throw z_(n,...e)}function q_(n,...e){return z_(n,...e)}function cR(n,e,t){let r=W(R({},sR()),{[e]:t});return new Hn("auth","Firebase",r).create(e,{appName:n.name})}function If(n){return cR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return aR.create(n,...e)}function Ee(n,e,...t){if(!n)throw z_(e,...t)}function Tu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ef(e),new Error(e)}function Df(n,e){n||Tu(e)}function YU(){return XA()==="http:"||XA()==="https:"}function XA(){return typeof self<"u"&&self.location?.protocol||null}function JU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YU()||vA()||"connection"in navigator)?navigator.onLine:!0}function ZU(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var jo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Df(t>e,"Short delay should be less than long delay!"),this.isMobile=mA()||_A()}get(){return JU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function XU(n,e){Df(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Cf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nB=new jo(3e4,6e4);function uR(n,e){return n.tenantId&&!e.tenantId?W(R({},e),{tenantId:n.tenantId}):e}function Rf(o,s,a,u){return w(this,arguments,function*(n,e,t,r,i={}){return lR(n,i,()=>w(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=d_(R({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=R({method:e,headers:m},l);return yA()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&No(n.emulatorConfig.host)&&(y.credentials="include"),Cf.fetch()(yield dR(n,n.config.apiHost,t,p),y)}))})}function lR(n,e,t){return w(this,null,function*(){n._canInitEmulator=!1;let r=R(R({},eB),e);try{let i=new F_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw _f(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _f(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw _f(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw _f(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw cR(n,h,l);ZA(n,h)}}catch(i){if(i instanceof En)throw i;ZA(n,"network-request-failed",{message:String(i)})}})}function dR(n,e,t,r){return w(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?XU(n.config,i):`${n.config.apiScheme}://${i}`;return tB.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var F_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(q_(this.auth,"network-request-failed")),nB.get())})}};function _f(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=q_(n,e,r);return i.customData._tokenResponse=t,i}function rB(n,e){return w(this,null,function*(){return Rf(n,"POST","/v1/accounts:delete",e)})}function bf(n,e){return w(this,null,function*(){return Rf(n,"POST","/v1/accounts:lookup",e)})}function Su(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function G_(n,e=!1){return w(this,null,function*(){let t=cn(n),r=yield t.getIdToken(e),i=hR(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Su(k_(i.auth_time)),issuedAtTime:Su(k_(i.iat)),expirationTime:Su(k_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function k_(n){return Number(n)*1e3}function hR(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{let i=uf(t);return i?JSON.parse(i):(Ef("Failed to decode base64 JWT payload"),null)}catch(i){return Ef("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eR(n){let e=hR(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function L_(n,e,t=!1){return w(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof En&&iB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function iB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var V_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),t)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ru=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Tf(n){return w(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield L_(n,bf(e,{idToken:t}));Ee(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?fR(i.providerUserInfo):[],s=oB(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ru(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)})}function W_(n){return w(this,null,function*(){let e=cn(n);yield Tf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function oB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fR(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Yp(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function sB(n,e){return w(this,null,function*(){let t=yield lR(n,{},()=>w(null,null,function*(){let r=d_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield dR(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&No(n.emulatorConfig.host)&&(u.credentials="include"),Cf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aB(n,e){return w(this,null,function*(){return Rf(n,"POST","/v2/accounts:revokeToken",uR(n,e))})}var Au=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=eR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return w(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield sB(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Tu("not implemented")}};function Si(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Lo=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Yp(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ru(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let t=yield L_(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return G_(this,e)}reload(){return W_(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>R({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(W(R({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Tf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Br(this.auth.app))return Promise.reject(If(this.auth));let e=yield this.getIdToken();return yield L_(this,rB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return W(R({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>R({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:A,stsTokenManager:P}=t;Ee(p&&P,e,"internal-error");let N=Au.fromJSON(this.name,P);Ee(typeof p=="string",e,"internal-error"),Si(r,e.name),Si(i,e.name),Ee(typeof m=="boolean",e,"internal-error"),Ee(typeof y=="boolean",e,"internal-error"),Si(o,e.name),Si(s,e.name),Si(a,e.name),Si(u,e.name),Si(l,e.name),Si(h,e.name);let j=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return A&&Array.isArray(A)&&(j.providerData=A.map(ie=>R({},ie))),u&&(j._redirectEventId=u),j}static _fromIdTokenResponse(e,t,r=!1){return w(this,null,function*(){let i=new Au;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Tf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return w(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Au;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ru(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var tR=new Map;function Vo(n){Df(n instanceof Function,"Expected a class definition");let e=tR.get(n);return e?(Df(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tR.set(n,e),e)}var cB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(t,r){return w(this,null,function*(){this.storage[t]=r})}_get(t){return w(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return w(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),j_=cB;function O_(n,e,t){return`firebase:${n}:${e}:${t}`}var Sf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=O_(this.userKey,i.apiKey,o),this.fullPersistenceKey=O_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield bf(this.auth,{idToken:e}).catch(()=>{});return t?Lo._fromGetAccountInfoResponse(this.auth,t,e):null}return Lo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return w(this,null,function*(){if(!t.length)return new n(Vo(j_),e,r);let i=(yield Promise.all(t.map(l=>w(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Vo(j_),s=O_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield bf(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Lo._fromGetAccountInfoResponse(e,m,h)}else p=Lo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>w(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function nR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pB(e))return"Blackberry";if(gB(e))return"Webos";if(lB(e))return"Safari";if((e.includes("chrome/")||dB(e))&&!e.includes("edge/"))return"Chrome";if(fB(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uB(n=an()){return/firefox\//i.test(n)}function lB(n=an()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dB(n=an()){return/crios\//i.test(n)}function hB(n=an()){return/iemobile/i.test(n)}function fB(n=an()){return/android/i.test(n)}function pB(n=an()){return/blackberry/i.test(n)}function gB(n=an()){return/webos/i.test(n)}function pR(n,e=[]){let t;switch(n){case"Browser":t=nR(an());break;case"Worker":t=`${nR(an())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sa}/${r}`}var U_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mB(t){return w(this,arguments,function*(n,e={}){return Rf(n,"GET","/v2/passwordPolicy",uR(n,e))})}var yB=6,B_=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var $_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Af(this),this.idTokenSubscription=new Af(this),this.beforeStateQueue=new U_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vo(t)),this._initializationPromise=this.queue(()=>w(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Sf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let t=yield bf(this,{idToken:e}),r=yield Lo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){if(Br(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return w(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ZU()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Br(this.app))return Promise.reject(If(this));let t=e?cn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return w(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Br(this.app)?Promise.reject(If(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Br(this.app)?Promise.reject(If(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Vo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield mB(this),t=new B_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aB(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vo(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield Sf.create(this,[Vo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return w(this,null,function*(){if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&QU(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function vB(n){return cn(n)}var Af=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wA(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _B={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EB(n){_B=n}function IB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var dre=IB("rcb"),hre=new jo(3e4,6e4);var fre=new jo(2e3,1e4);var pre=600*1e3;var gre=new jo(3e4,6e4);var mre=new jo(5e3,15e3);var yre=encodeURIComponent("fac");var rR="@firebase/auth",iR="1.11.1";var H_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CB(n){qn(new Ht("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pR(n)},l=new $_(r,i,o,u);return wB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qn(new Ht("auth-internal",e=>{let t=vB(e.getProvider("auth").getImmediate());return(r=>new H_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(rR,iR,DB(n)),Qe(rR,iR,"esm2020")}var bB=300,vre=pA("authIdTokenMaxAge")||bB;function TB(){return document.getElementsByTagName("head")?.[0]??document}EB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=q_("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",TB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CB("Browser");var C$="auth";var Nf=class{constructor(){return ua(C$)}};var gR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mR={};var $r,K_;(function(){var n;function e(D,v){function E(){}E.prototype=v.prototype,D.F=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.D=function(C,I,T){for(var _=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)_[Gt-2]=arguments[Gt];return v.prototype[I].apply(C,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);let C=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)C[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)C[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],I=D.g[2];let T=D.g[3],_;_=v+(T^E&(I^T))+C[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+C[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+C[2]+606105819&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+C[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+C[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+C[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+C[6]+2821735955&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+C[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+C[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+C[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+C[10]+4294925233&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+C[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+C[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+C[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+C[14]+2792965006&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+C[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^T&(E^I))+C[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+C[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+C[11]+643717713&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+C[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+C[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+C[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+C[15]+3634488961&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+C[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+C[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+C[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+C[3]+4107603335&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+C[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+C[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+C[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+C[7]+1735328473&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+C[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^T)+C[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+C[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+C[11]+1839030562&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+C[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+C[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+C[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+C[7]+4139469664&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+C[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+C[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+C[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+C[3]+3572445317&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+C[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+C[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+C[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+C[15]+530742520&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+C[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~T))+C[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+C[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+C[14]+2878612391&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+C[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+C[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+C[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+C[10]+4293915773&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+C[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+C[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+C[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+C[6]+2734768916&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+C[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+C[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+C[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+C[2]+718787259&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.v=function(D,v){v===void 0&&(v=D.length);let E=v-this.blockSize,C=this.C,I=this.h,T=0;for(;T<v;){if(I==0)for(;T<=E;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<v;)if(C[I++]=D.charCodeAt(T++),I==this.blockSize){i(this,C),I=0;break}}else for(;T<v;)if(C[I++]=D[T++],I==this.blockSize){i(this,C),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;v=this.o*8;for(var E=D.length-8;E<D.length;++E)D[E]=v&255,v/=256;for(this.v(D),D=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)D[v++]=this.g[E]>>>C&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;let E=[],C=!0;for(let I=D.length-1;I>=0;I--){let T=D[I]|0;C&&T==v||(E[I]=T,C=!1)}this.g=E}var a={};function u(D){return-128<=D&&D<128?o(D,function(v){return new s([v|0],v<0?-1:0)}):new s([D|0],D<0?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(D<0)return N(l(-D));let v=[],E=1;for(let C=0;D>=E;C++)v[C]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),C=p;for(let T=0;T<D.length;T+=8){var I=Math.min(8,D.length-T);let _=parseInt(D.substring(T,T+I),v);I<8?(I=l(Math.pow(v,I)),C=C.j(I).add(l(_))):(C=C.j(E),C=C.add(l(_)))}return C}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();let D=0,v=1;for(let E=0;E<this.g.length;E++){let C=this.i(E);D+=(C>=0?C:4294967296+C)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(P(this))return"-"+N(this).toString(D);let v=l(Math.pow(D,6));var E=this;let C="";for(;;){let I=Mt(E,v).g;E=j(E,I.j(v));let T=((E.g.length>0?E.g[0]:E.h)>>>0).toString(D);if(E=I,A(E))return T+C;for(;T.length<6;)T="0"+T;C=T+C}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(let v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=j(this,D),P(D)?-1:A(D)?0:1};function N(D){let v=D.g.length,E=[];for(let C=0;C<v;C++)E[C]=~D.g[C];return new s(E,~D.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(D){let v=Math.max(this.g.length,D.g.length),E=[],C=0;for(let I=0;I<=v;I++){let T=C+(this.i(I)&65535)+(D.i(I)&65535),_=(T>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);C=_>>>16,T&=65535,_&=65535,E[I]=_<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(D,v){return D.add(N(v))}n.j=function(D){if(A(this)||A(D))return p;if(P(this))return P(D)?N(this).j(N(D)):N(N(this).j(D));if(P(D))return N(this.j(N(D)));if(this.l(y)<0&&D.l(y)<0)return l(this.m()*D.m());let v=this.g.length+D.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<D.g.length;I++){let T=this.i(C)>>>16,_=this.i(C)&65535,Gt=D.i(I)>>>16,Jr=D.i(I)&65535;E[2*C+2*I]+=_*Jr,ie(E,2*C+2*I),E[2*C+2*I+1]+=T*Jr,ie(E,2*C+2*I+1),E[2*C+2*I+1]+=_*Gt,ie(E,2*C+2*I+1),E[2*C+2*I+2]+=T*Gt,ie(E,2*C+2*I+2)}for(D=0;D<v;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=v;D<2*v;D++)E[D]=0;return new s(E,0)};function ie(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function de(D,v){this.g=D,this.h=v}function Mt(D,v){if(A(v))throw Error("division by zero");if(A(D))return new de(p,p);if(P(D))return v=Mt(N(D),v),new de(N(v.g),N(v.h));if(P(v))return v=Mt(D,N(v)),new de(N(v.g),v.h);if(D.g.length>30){if(P(D)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,C=v;C.l(D)<=0;)E=zt(E),C=zt(C);var I=dt(E,1),T=dt(C,1);for(C=dt(C,2),E=dt(E,2);!A(C);){var _=T.add(C);_.l(D)<=0&&(I=I.add(E),T=_),C=dt(C,1),E=dt(E,1)}return v=j(D,I.j(v)),new de(I,v)}for(I=p;D.l(v)>=0;){for(E=Math.max(1,Math.floor(D.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),T=l(E),_=T.j(v);P(_)||_.l(D)>0;)E-=C,T=l(E),_=T.j(v);A(T)&&(T=m),I=I.add(T),D=j(D,_)}return new de(I,D)}n.B=function(D){return Mt(this,D).h},n.and=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&D.i(C);return new s(E,this.h&D.h)},n.or=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|D.i(C);return new s(E,this.h|D.h)},n.xor=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^D.i(C);return new s(E,this.h^D.h)};function zt(D){let v=D.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=D.i(C)<<1|D.i(C-1)>>>31;return new s(E,D.h)}function dt(D,v){let E=v>>5;v%=32;let C=D.g.length-E,I=[];for(let T=0;T<C;T++)I[T]=v>0?D.i(T+E)>>>v|D.i(T+E+1)<<32-v:D.i(T+E);return new s(I,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,K_=mR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,$r=mR.Integer=s}).apply(typeof gR<"u"?gR:typeof self<"u"?self:typeof window<"u"?window:{});var Mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hr={};var Q_,b$,la,Y_,Nu,Pf,J_,Z_,X_;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mf=="object"&&Mf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(g,b,S){for(var V=Array(arguments.length-2),se=2;se<arguments.length;se++)V[se-2]=arguments[se];return d.prototype[b].apply(g,V)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function A(c,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=c.length||0;let S=b.length||0;c.length=f+S;for(let V=0;V<S;V++)c[f+V]=b[V]}else c.push(b)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function j(){var c=D;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,f){let g=de.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var de=new P(()=>new Mt,c=>c.reset());class Mt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,dt=!1,D=new ie,v=()=>{let c=Promise.resolve(void 0);zt=()=>{c.then(E)}};function E(){for(var c;c=j();){try{c.h.call(c.g)}catch(f){N(f)}var d=de;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}dt=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function Gt(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Gt,I),Gt.prototype.init=function(c,d){let f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Gt.Z.h.call(this)},Gt.prototype.h=function(){Gt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Jr="closure_listenable_"+(Math.random()*1e6|0),rP=0;function iP(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++rP,this.da=this.fa=!1}function Ju(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zu(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function oP(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function gw(c){let d={};for(let f in c)d[f]=c[f];return d}let mw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yw(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let S=0;S<mw.length;S++)f=mw[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function Xu(c){this.src=c,this.g={},this.h=0}Xu.prototype.add=function(c,d,f,g,b){let S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);let V=Sp(c,d,g,b);return V>-1?(d=c[V],f||(d.fa=!1)):(d=new iP(d,this.src,S,!!g,b),d.fa=f,c.push(d)),d};function Tp(c,d){let f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=b>=0)&&Array.prototype.splice.call(g,b,1),S&&(Ju(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Sp(c,d,f,g){for(let b=0;b<c.length;++b){let S=c[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var Ap="closure_lm_"+(Math.random()*1e6|0),Rp={};function vw(c,d,f,g,b){if(g&&g.once)return Ew(c,d,f,g,b);if(Array.isArray(d)){for(let S=0;S<d.length;S++)vw(c,d[S],f,g,b);return null}return f=xp(f),c&&c[Jr]?c.J(d,f,a(g)?!!g.capture:!!g,b):_w(c,d,f,!1,g,b)}function _w(c,d,f,g,b,S){if(!d)throw Error("Invalid event type");let V=a(b)?!!b.capture:!!b,se=Mp(c);if(se||(c[Ap]=se=new Xu(c)),f=se.add(d,f,g,V,S),f.proxy)return f;if(g=sP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)T||(b=V),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(ww(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sP(){function c(f){return d.call(c.src,c.listener,f)}let d=aP;return c}function Ew(c,d,f,g,b){if(Array.isArray(d)){for(let S=0;S<d.length;S++)Ew(c,d[S],f,g,b);return null}return f=xp(f),c&&c[Jr]?c.K(d,f,a(g)?!!g.capture:!!g,b):_w(c,d,f,!0,g,b)}function Iw(c,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)Iw(c,d[S],f,g,b);else g=a(g)?!!g.capture:!!g,f=xp(f),c&&c[Jr]?(c=c.i,S=String(d).toString(),S in c.g&&(d=c.g[S],f=Sp(d,f,g,b),f>-1&&(Ju(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[S],c.h--)))):c&&(c=Mp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Sp(d,f,g,b)),(f=c>-1?d[c]:null)&&Np(f))}function Np(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Jr])Tp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(ww(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Mp(d))?(Tp(f,c),f.h==0&&(f.src=null,d[Ap]=null)):Ju(c)}}}function ww(c){return c in Rp?Rp[c]:Rp[c]="on"+c}function aP(c,d){if(c.da)c=!0;else{d=new Gt(d,this);let f=c.listener,g=c.ha||c.src;c.fa&&Np(c),c=f.call(g,d)}return c}function Mp(c){return c=c[Ap],c instanceof Xu?c:null}var Pp="__closure_events_fn_"+(Math.random()*1e9>>>0);function xp(c){return typeof c=="function"?c:(c[Pp]||(c[Pp]=function(d){return c.handleEvent(d)}),c[Pp])}function bt(){C.call(this),this.i=new Xu(this),this.M=this,this.G=null}p(bt,C),bt.prototype[Jr]=!0,bt.prototype.removeEventListener=function(c,d,f,g){Iw(this,c,d,f,g)};function Pt(c,d){var f,g=c.G;if(g)for(f=[];g;g=g.G)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var b=d;d=new I(g,c),yw(d,b)}b=!0;let S,V;if(f)for(V=f.length-1;V>=0;V--)S=d.g=f[V],b=el(S,g,!0,d)&&b;if(S=d.g=c,b=el(S,g,!0,d)&&b,b=el(S,g,!1,d)&&b,f)for(V=0;V<f.length;V++)S=d.g=f[V],b=el(S,g,!1,d)&&b}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let g=0;g<f.length;g++)Ju(f[g]);delete c.g[d],c.h--}}this.G=null},bt.prototype.J=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},bt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function el(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let S=0;S<d.length;++S){let V=d[S];if(V&&!V.da&&V.capture==f){let se=V.listener,st=V.ha||V.src;V.fa&&Tp(c.i,V),b=se.call(st,g)!==!1&&b}}return b&&!g.defaultPrevented}function cP(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function Dw(c){c.g=cP(()=>{c.g=null,c.i&&(c.i=!1,Dw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class uP extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dw(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ja(c){C.call(this),this.h=c,this.g={}}p(ja,C);var Cw=[];function bw(c){Zu(c.g,function(d,f){this.g.hasOwnProperty(f)&&Np(d)},c),c.g={}}ja.prototype.N=function(){ja.Z.N.call(this),bw(this)},ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kp=s.JSON.stringify,lP=s.JSON.parse,dP=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function Tw(){}function Sw(){}var Ua={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Op(){I.call(this,"d")}p(Op,I);function Fp(){I.call(this,"c")}p(Fp,I);var Li={},Aw=null;function tl(){return Aw=Aw||new bt}Li.Ia="serverreachability";function Rw(c){I.call(this,Li.Ia,c)}p(Rw,I);function Ba(c){let d=tl();Pt(d,new Rw(d))}Li.STAT_EVENT="statevent";function Nw(c,d){I.call(this,Li.STAT_EVENT,c),this.stat=d}p(Nw,I);function xt(c){let d=tl();Pt(d,new Nw(d,c))}Li.Ja="timingevent";function Mw(c,d){I.call(this,Li.Ja,c),this.size=d}p(Mw,I);function $a(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Ha(){this.g=!0}Ha.prototype.ua=function(){this.g=!1};function hP(c,d,f,g,b,S){c.info(function(){if(c.g)if(S){var V="",se=S.split("&");for(let Ae=0;Ae<se.length;Ae++){var st=se[Ae].split("=");if(st.length>1){let ht=st[0];st=st[1];let Yn=ht.split("_");V=Yn.length>=2&&Yn[1]=="type"?V+(ht+"="+st+"&"):V+(ht+"=redacted&")}}}else V=null;else V=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+V})}function fP(c,d,f,g,b,S,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+V})}function ns(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+gP(c,f)+(g?" "+g:"")})}function pP(c,d){c.info(function(){return"TIMEOUT: "+d})}Ha.prototype.info=function(){};function gP(c,d){if(!c.g)return d;if(!d)return null;try{let S=JSON.parse(d);if(S){for(c=0;c<S.length;c++)if(Array.isArray(S[c])){var f=S[c];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let V=1;V<g.length;V++)g[V]=""}}}}return kp(S)}catch{return d}}var nl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pw={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xw;function Lp(){}p(Lp,Tw),Lp.prototype.g=function(){return new XMLHttpRequest},xw=new Lp;function qa(c){return encodeURIComponent(String(c))}function mP(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function Zr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.S=g||1,this.V=new ja(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kw}function kw(){this.i=null,this.g="",this.h=!1}var Ow={},Vp={};function jp(c,d,f){c.M=1,c.A=il(Qn(d)),c.u=f,c.R=!0,Fw(c,null)}function Fw(c,d){c.F=Date.now(),rl(c),c.B=Qn(c.A);var f=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),Qw(f.i,"t",g),c.C=0,f=c.j.L,c.h=new kw,c.g=fD(c.j,f?d:null,!c.u),c.P>0&&(c.O=new uP(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,g=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(Cw[0]=b.toString()),b=Cw);for(let S=0;S<b.length;S++){let V=vw(f,b[S],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.J?gw(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ba(),hP(c.i,c.v,c.B,c.l,c.S,c.u)}Zr.prototype.ba=function(c){c=c.target;let d=this.O;d&&ti(c)==3?d.j():this.Y(c)},Zr.prototype.Y=function(c){try{if(c==this.g)e:{let se=ti(this.g),st=this.g.ya(),Ae=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||nD(this.g)))){this.K||se!=4||st==7||(st==8||Ae<=0?Ba(3):Ba(2)),Up(this);var d=this.g.ca();this.X=d;var f=yP(this);if(this.o=d==200,fP(this.i,this.v,this.B,this.l,this.S,se,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var S=g;break t}}S=null}if(c=S)ns(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bp(this,c);else{this.o=!1,this.m=3,xt(12),Vi(this),za(this);break e}}if(this.R){c=!0;let ht;for(;!this.K&&this.C<f.length;)if(ht=vP(this,f),ht==Vp){se==4&&(this.m=4,xt(14),c=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ow){this.m=4,xt(15),ns(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else ns(this.i,this.l,ht,null),Bp(this,ht);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||f.length!=0||this.h.h||(this.m=1,xt(16),c=!1),this.o=this.o&&c,!c)ns(this.i,this.l,f,"[Invalid Chunked Response]"),Vi(this),za(this);else if(f.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Kp(V),V.P=!0,xt(11))}}else ns(this.i,this.l,f,null),Bp(this,f);se==4&&Vi(this),this.o&&!this.K&&(se==4?uD(this.j,this):(this.o=!1,rl(this)))}else PP(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Vi(this),za(this)}}}catch{}finally{}};function yP(c){if(!Lw(c))return c.g.la();let d=nD(c.g);if(d==="")return"";let f="",g=d.length,b=ti(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vi(c),za(c),"";c.h.i=new s.TextDecoder}for(let S=0;S<g;S++)c.h.h=!0,f+=c.h.i.decode(d[S],{stream:!(b&&S==g-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function Lw(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function vP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Vp:(f=Number(d.substring(f,g)),isNaN(f)?Ow:(g+=1,g+f>d.length?Vp:(d=d.slice(g,g+f),c.C=g+f,d)))}Zr.prototype.cancel=function(){this.K=!0,Vi(this)};function rl(c){c.T=Date.now()+c.H,Vw(c,c.H)}function Vw(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=$a(l(c.aa,c),d)}function Up(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Zr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(pP(this.i,this.B),this.M!=2&&(Ba(),xt(17)),Vi(this),this.m=2,za(this)):Vw(this,this.T-c)};function za(c){c.j.I==0||c.K||uD(c.j,c)}function Vi(c){Up(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,bw(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Bp(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||$p(f.h,c))){if(!c.L&&$p(f.h,c)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)ll(f),cl(f);else break e;Wp(f),xt(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=$a(l(f.Va,f),6e3));Bw(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ui(f,11)}else if((c.L||f.g==c)&&ll(f),!_(d))for(b=f.Ba.g.parse(d),d=0;d<b.length;d++){let Ae=b[d],ht=Ae[0];if(!(ht<=f.K))if(f.K=ht,Ae=Ae[1],f.I==2)if(Ae[0]=="c"){f.M=Ae[1],f.ba=Ae[2];let Yn=Ae[3];Yn!=null&&(f.ka=Yn,f.j.info("VER="+f.ka));let Bi=Ae[4];Bi!=null&&(f.za=Bi,f.j.info("SVER="+f.za));let ni=Ae[5];ni!=null&&typeof ni=="number"&&ni>0&&(g=1.5*ni,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let ri=c.g;if(ri){let hl=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var S=g.h;S.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Hp(S,S.h),S.h=null))}if(g.G){let Qp=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Qp&&(g.wa=Qp,Ne(g.J,g.G,Qp))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var V=c;if(g.na=hD(g,g.L?g.ba:null,g.W),V.L){$w(g.h,V);var se=V,st=g.O;st&&(se.H=st),se.D&&(Up(se),rl(se)),g.g=V}else aD(g);f.i.length>0&&ul(f)}else Ae[0]!="stop"&&Ae[0]!="close"||Ui(f,7);else f.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ui(f,7):Gp(f):Ae[0]!="noop"&&f.l&&f.l.qa(Ae),f.A=0)}}Ba(4)}catch{}}var _P=class{constructor(c,d){this.g=c,this.map=d}};function jw(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bw(c){return c.h?1:c.g?c.g.size:0}function $p(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Hp(c,d){c.g?c.g.add(d):c.h=d}function $w(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}jw.prototype.cancel=function(){if(this.i=Hw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Hw(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EP(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let g=c[f].indexOf("="),b,S=null;g>=0?(b=c[f].substring(0,g),S=c[f].substring(g+1)):b=c[f],d(b,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Xr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Xr?(this.l=c.l,Ga(this,c.j),this.o=c.o,this.g=c.g,Wa(this,c.u),this.h=c.h,qp(this,Yw(c.i)),this.m=c.m):c&&(d=String(c).match(qw))?(this.l=!1,Ga(this,d[1]||"",!0),this.o=Ka(d[2]||""),this.g=Ka(d[3]||"",!0),Wa(this,d[4]),this.h=Ka(d[5]||"",!0),qp(this,d[6]||"",!0),this.m=Ka(d[7]||"")):(this.l=!1,this.i=new Ya(null,this.l))}Xr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(Qa(d,zw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qa(d,zw,!0),"@"),c.push(qa(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Qa(f,f.charAt(0)=="/"?DP:wP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Qa(f,bP)),c.join("")},Xr.prototype.resolve=function(c){let d=Qn(this),f=!!c.j;f?Ga(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var g=c.h;if(f)Wa(d,c.u);else if(f=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let S=[];for(let V=0;V<b.length;){let se=b[V++];se=="."?g&&V==b.length&&S.push(""):se==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),g&&V==b.length&&S.push("")):(S.push(se),g=!0)}g=S.join("/")}else g=b}return f?d.h=g:f=c.i.toString()!=="",f?qp(d,Yw(c.i)):f=!!c.m,f&&(d.m=c.m),d};function Qn(c){return new Xr(c)}function Ga(c,d,f){c.j=f?Ka(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Wa(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function qp(c,d,f){d instanceof Ya?(c.i=d,TP(c.i,c.l)):(f||(d=Qa(d,CP)),c.i=new Ya(d,c.l))}function Ne(c,d,f){c.i.set(d,f)}function il(c){return Ne(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ka(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,IP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function IP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zw=/[#\/\?@]/g,wP=/[#\?:]/g,DP=/[#\?]/g,CP=/[#\?@]/g,bP=/#/g;function Ya(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ji(c){c.g||(c.g=new Map,c.h=0,c.i&&EP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ya.prototype,n.add=function(c,d){ji(this),this.i=null,c=rs(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Gw(c,d){ji(c),d=rs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ww(c,d){return ji(c),d=rs(c,d),c.g.has(d)}n.forEach=function(c,d){ji(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)};function Kw(c,d){ji(c);let f=[];if(typeof d=="string")Ww(c,d)&&(f=f.concat(c.g.get(rs(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}n.set=function(c,d){return ji(this),this.i=null,c=rs(this,c),Ww(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=Kw(this,c),c.length>0?String(c[0]):d):d};function Qw(c,d,f){Gw(c,d),f.length>0&&(c.i=null,c.g.set(rs(c,d),y(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let b=qa(f);f=Kw(this,f);for(let S=0;S<f.length;S++){let V=b;f[S]!==""&&(V+="="+qa(f[S])),c.push(V)}}return this.i=c.join("&")};function Yw(c){let d=new Ya;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function rs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function TP(c,d){d&&!c.j&&(ji(c),c.i=null,c.g.forEach(function(f,g){let b=g.toLowerCase();g!=b&&(Gw(this,g),Qw(this,b,f))},c)),c.j=d}function SP(c,d){let f=new Ha;if(s.Image){let g=new Image;g.onload=h(ei,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(ei,f,"TestLoadImage: error",!1,d,g),g.onabort=h(ei,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(ei,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function AP(c,d){let f=new Ha,g=new AbortController,b=setTimeout(()=>{g.abort(),ei(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?ei(f,"TestPingServer: ok",!0,d):ei(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),ei(f,"TestPingServer: error",!1,d)})}function ei(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function RP(){this.g=new dP}function ol(c){this.i=c.Sb||null,this.h=c.ab||!1}p(ol,Tw),ol.prototype.g=function(){return new sl(this.i,this.h)};function sl(c,d){bt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(sl,bt),n=sl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Za(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jw(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jw(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ja(this):Za(this),this.readyState==3&&Jw(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ja(this))},n.Na=function(c){this.g&&(this.response=c,Ja(this))},n.ga=function(){this.g&&Ja(this)};function Ja(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Za(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Za(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Zw(c){let d="";return Zu(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function zp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Zw(f),typeof c=="string"?f!=null&&qa(f):Ne(c,d,f))}function je(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(je,bt);var NP=/^https?$/i,MP=["POST","PUT"];n=je.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xw.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Xw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(MP,d,void 0)>=0)||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,V]of f)this.g.setRequestHeader(S,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(S){Xw(this,S)}};function Xw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,eD(c),al(c)}function eD(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pt(this,"complete"),Pt(this,"abort"),al(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?tD(this):this.Xa())},n.Xa=function(){tD(this)};function tD(c){if(c.h&&typeof o<"u"){if(c.v&&ti(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pt(c,"readystatechange"),ti(c)==4){c.h=!1;try{let S=c.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=S===0){let V=String(c.D).match(qw)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),g=!NP.test(V?V.toLowerCase():"")}f=g}if(f)Pt(c,"complete"),Pt(c,"success");else{c.o=6;try{var b=ti(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",eD(c)}}finally{al(c)}}}}function al(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||Pt(c,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ti(c){return c.g?c.g.readyState:0}n.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),lP(d)}};function nD(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function PP(c){let d={};c=(c.g&&ti(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(_(c[g]))continue;var f=mP(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}oP(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function rD(c){this.za=0,this.i=[],this.j=new Ha,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,c),this.Za=Xa("retryDelaySeedMs",1e4,c),this.Ta=Xa("forwardChannelMaxRetries",2,c),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new jw(c&&c.concurrentRequestLimit),this.Ba=new RP,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rD.prototype,n.ka=8,n.I=1,n.connect=function(c,d,f,g){xt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=hD(this,null,this.W),ul(this)};function Gp(c){if(iD(c),c.I==3){var d=c.V++,f=Qn(c.J);if(Ne(f,"SID",c.M),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),ec(c,f),d=new Zr(c,c.j,d),d.M=2,d.A=il(Qn(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=fD(d.j,null),d.g.ea(d.A)),d.F=Date.now(),rl(d)}dD(c)}function cl(c){c.g&&(Kp(c),c.g.cancel(),c.g=null)}function iD(c){cl(c),c.v&&(s.clearTimeout(c.v),c.v=null),ll(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function ul(c){if(!Uw(c.h)&&!c.m){c.m=!0;var d=c.Ea;zt||v(),dt||(zt(),dt=!0),D.add(d,c),c.D=0}}function xP(c,d){return Bw(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=$a(l(c.Ea,c,d),lD(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new Zr(this,this.j,c),S=this.o;if(this.U&&(S?(S=gw(S),yw(S,this.U)):S=this.U),this.u!==null||this.R||(b.J=S,S=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=sD(this,b,d),f=Qn(this.J),Ne(f,"RID",c),Ne(f,"CVER",22),this.G&&Ne(f,"X-HTTP-Session-Id",this.G),ec(this,f),S&&(this.R?d="headers="+qa(Zw(S))+"&"+d:this.u&&zp(f,this.u,S)),Hp(this.h,b),this.Ra&&Ne(f,"TYPE","init"),this.S?(Ne(f,"$req",d),Ne(f,"SID","null"),b.U=!0,jp(b,f,null)):jp(b,f,d),this.I=2}}else this.I==3&&(c?oD(this,c):this.i.length==0||Uw(this.h)||oD(this))};function oD(c,d){var f;d?f=d.l:f=c.V++;let g=Qn(c.J);Ne(g,"SID",c.M),Ne(g,"RID",f),Ne(g,"AID",c.K),ec(c,g),c.u&&c.o&&zp(g,c.u,c.o),f=new Zr(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=sD(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Hp(c.h,f),jp(f,g,d)}function ec(c,d){c.H&&Zu(c.H,function(f,g){Ne(d,g,f)}),c.l&&Zu({},function(f,g){Ne(d,g,f)})}function sD(c,d,f){f=Math.min(c.i.length,f);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let se=-1;for(;;){let st=["count="+f];se==-1?f>0?(se=b[0].g,st.push("ofs="+se)):se=0:st.push("ofs="+se);let Ae=!0;for(let ht=0;ht<f;ht++){var S=b[ht].g;let Yn=b[ht].map;if(S-=se,S<0)se=Math.max(0,b[ht].g-100),Ae=!1;else try{S="req"+S+"_"||"";try{var V=Yn instanceof Map?Yn:Object.entries(Yn);for(let[Bi,ni]of V){let ri=ni;a(ni)&&(ri=kp(ni)),st.push(S+Bi+"="+encodeURIComponent(ri))}}catch(Bi){throw st.push(S+"type="+encodeURIComponent("_badmap")),Bi}}catch{g&&g(Yn)}}if(Ae){V=st.join("&");break e}}V=void 0}return c=c.i.splice(0,f),d.G=c,V}function aD(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;zt||v(),dt||(zt(),dt=!0),D.add(d,c),c.A=0}}function Wp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=$a(l(c.Da,c),lD(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,cD(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=$a(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),cl(this),cD(this))};function Kp(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function cD(c){c.g=new Zr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Qn(c.na);Ne(d,"RID","rpc"),Ne(d,"SID",c.M),Ne(d,"AID",c.K),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ne(d,"TO",c.ia),Ne(d,"TYPE","xmlhttp"),ec(c,d),c.u&&c.o&&zp(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=il(Qn(d)),f.u=null,f.R=!0,Fw(f,c)}n.Va=function(){this.C!=null&&(this.C=null,cl(this),Wp(this),xt(19))};function ll(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function uD(c,d){var f=null;if(c.g==d){ll(c),Kp(c),c.g=null;var g=2}else if($p(c.h,d))f=d.G,$w(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;g=tl(),Pt(g,new Mw(g,f)),ul(c)}else aD(c);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&xP(c,d)||g==2&&Wp(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function lD(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function Ui(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),g=c.Ua;let b=!g;g=new Xr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ga(g,"https"),il(g),b?SP(g.toString(),f):AP(g.toString(),f)}else xt(2);c.I=0,c.l&&c.l.pa(d),dD(c),iD(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function dD(c){if(c.I=0,c.ja=[],c.l){let d=Hw(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ja,d),A(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function hD(c,d,f){var g=f instanceof Xr?Qn(f):new Xr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Wa(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let S=new Xr(null);g&&Ga(S,g),d&&(S.g=d),b&&Wa(S,b),f&&(S.h=f),g=S}return f=c.G,d=c.wa,f&&d&&Ne(g,f,d),Ne(g,"VER",c.ka),ec(c,g),g}function fD(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new je(new ol({ab:f})):new je(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pD(){}n=pD.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function dl(){}dl.prototype.g=function(c,d){return new Yt(c,d)};function Yt(c,d){bt.call(this),this.g=new rD(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new is(this)}p(Yt,bt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Gp(this.g)},Yt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=kp(c),c=f);d.i.push(new _P(d.Ya++,c)),d.I==3&&ul(d)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,Yt.Z.N.call(this)};function gD(c){Op.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(gD,Op);function mD(){Fp.call(this),this.status=1}p(mD,Fp);function is(c){this.g=c}p(is,pD),is.prototype.ra=function(){Pt(this.g,"a")},is.prototype.qa=function(c){Pt(this.g,new gD(c))},is.prototype.pa=function(c){Pt(this.g,new mD)},is.prototype.oa=function(){Pt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,X_=Hr.createWebChannelTransport=function(){return new dl},Z_=Hr.getStatEventTarget=function(){return tl()},J_=Hr.Event=Li,Pf=Hr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nl.NO_ERROR=0,nl.TIMEOUT=8,nl.HTTP_ERROR=6,Nu=Hr.ErrorCode=nl,Pw.COMPLETE="complete",Y_=Hr.EventType=Pw,Sw.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",bt.prototype.listen=bt.prototype.J,la=Hr.WebChannel=Sw,b$=Hr.FetchXmlHttpFactory=ol,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,Q_=Hr.XhrIo=je}).apply(typeof Mf<"u"?Mf:typeof self<"u"?self:typeof window<"u"?window:{});var yR="@firebase/firestore",vR="4.9.2";var mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");var ka="12.3.0";var qo=new mr("@firebase/firestore");function da(){return qo.logLevel}function $(n,...e){if(qo.logLevel<=le.DEBUG){let t=e.map(UI);qo.debug(`Firestore (${ka}): ${n}`,...t)}}function zr(n,...e){if(qo.logLevel<=le.ERROR){let t=e.map(UI);qo.error(`Firestore (${ka}): ${n}`,...t)}}function Ea(n,...e){if(qo.logLevel<=le.WARN){let t=e.map(UI);qo.warn(`Firestore (${ka}): ${n}`,...t)}}function UI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Y(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sN(n,r,t)}function sN(n,e,t){let r=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zr(r),new Error(r)}function Te(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sN(e,i,r)}function te(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var jf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mt.UNAUTHENTICATED))}shutdown(){}},sE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},aE=class{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new jf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new mt(e)}},cE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},uE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Uf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Uf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Uf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function T$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Fu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=T$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function dE(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return eE(i)===eE(o)?he(i,o):eE(i)?1:-1}return he(n.length,e.length)}var S$=55296,A$=57343;function eE(n){let e=n.charCodeAt(0);return e>=S$&&e<=A$}function Ia(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var _R="__name__",Bf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Y(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return he(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):dE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}},Ve=class n extends Bf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},R$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,un=class n extends Bf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return R$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_R}static keyField(){return new n([_R])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ve.fromString(e))}static fromName(e){return new n(Ve.fromString(e).popFirst(5))}static empty(){return new n(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ve(e.slice()))}};function aN(n,e,t){if(!t)throw new z(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N$(n,e,t,r){if(e===!0&&r===!0)throw new z(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ER(n){if(!K.isDocumentKey(n))throw new z(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IR(n){if(K.isDocumentKey(n))throw new z(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function BI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y(12329,{type:typeof n})}function ma(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=BI(n);throw new z(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function it(n,e){let t={typeString:n};return e&&(t.value=e),t}function Wu(n,e){if(!cN(n))throw new z(x.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(x.INVALID_ARGUMENT,t);return!0}var wR=-62135596800,DR=1e6,ot=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DR);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wR)throw new z(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DR}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-wR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:it("string",ot._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};var re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ot(0,0))}static max(){return new n(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lu=-1,hE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};hE.UNKNOWN_ID=-1;function M$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new zo(i,K.empty(),e)}function P$(n){return new zo(n.readTime,n.key,Lu)}var zo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),K.empty(),Lu)}static max(){return new n(re.max(),K.empty(),Lu)}};function x$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var k$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Oa(n){return w(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==k$)throw n;$("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function O$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fa(n){return n.name==="IndexedDbTransactionError"}var $I=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),HI=-1;function yp(n){return n==null}function Vu(n){return n===0&&1/n==-1/0}function F$(n){return typeof n=="number"&&Number.isInteger(n)&&!Vu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var uN="";function L$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CR(e)),e=V$(n.get(t),e);return CR(e)}function V$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case uN:t+="";break;default:t+=o}}return t}function CR(n){return n+uN+""}var j$="remoteDocuments",lN="owner";var dN="mutationQueues";var hN="mutations";var fN="documentMutations",U$="remoteDocumentsV14";var pN="remoteDocumentGlobal";var gN="targets";var mN="targetDocuments";var yN="targetGlobal",vN="collectionParents";var _N="clientMetadata";var EN="bundles";var IN="namedQueries";var B$="indexConfiguration";var $$="indexState";var H$="indexEntries";var wN="documentOverlays";var q$="globals";var z$=[dN,hN,fN,j$,gN,lN,yN,mN,_N,pN,vN,EN,IN],wie=[...z$,wN],G$=[dN,hN,fN,U$,gN,lN,yN,mN,_N,pN,vN,EN,IN,wN],W$=G$,K$=[...W$,B$,$$,H$];var Die=[...K$,q$];function bR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qe=class n{constructor(e,t){this.comparator=e,this.root=t||_r.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}},ga=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_r=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new _r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yt=class n{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $f(this.data.getIterator())}getIteratorFrom(e){return new $f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$f=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vr=class n{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new n([])}unionWith(e){let t=new yt(un.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hf("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var Q$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(n){if(Te(!!n,39018),typeof n=="string"){let e=0,t=Q$.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wr(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}var CN="server_timestamp",bN="__type__",TN="__previous_value__",SN="__local_write_time__";function qI(n){return(n?.mapValue?.fields||{})[bN]?.stringValue===CN}function vp(n){let e=n.mapValue.fields[TN];return qI(e)?vp(e):e}function ju(n){let e=Gr(n.mapValue.fields[SN].timestampValue);return new ot(e.seconds,e.nanos)}var pE=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},qf="(default)",zf=class n{constructor(e,t){this.projectId=e,this.database=t||qf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zI="__type__",AN="__max__",xf={mapValue:{fields:{__type__:{stringValue:AN}}}},GI="__vector__",wa="value";function xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qI(n)?4:NN(n)?9007199254740991:RN(n)?10:11:Y(28295,{value:n})}function wr(n,e){if(n===e)return!0;let t=xi(n);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ju(n).isEqual(ju(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Gr(i.timestampValue),a=Gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Wr(i.bytesValue).isEqual(Wr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?Vu(s)===Vu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ia(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bR(s)!==bR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!wr(s[u],a[u])))return!1;return!0})(n,e);default:return Y(52216,{left:n})}}function Uu(n,e){return(n.values||[]).find(t=>wr(t,e))!==void 0}function Da(n,e){if(n===e)return 0;let t=xi(n),r=xi(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return TR(n.timestampValue,e.timestampValue);case 4:return TR(ju(n),ju(e));case 5:return dE(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Wr(o),u=Wr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=he(a[l],u[l]);if(h!==0)return h}return he(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=he(Oe(o.latitude),Oe(s.latitude));return a!==0?a:he(Oe(o.longitude),Oe(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SR(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[wa]?.arrayValue,h=u[wa]?.arrayValue,p=he(l?.values?.length||0,h?.values?.length||0);return p!==0?p:SR(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===xf.mapValue&&s===xf.mapValue)return 0;if(o===xf.mapValue)return 1;if(s===xf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=dE(u[p],h[p]);if(m!==0)return m;let y=Da(a[u[p]],l[h[p]]);if(y!==0)return y}return he(u.length,h.length)})(n.mapValue,e.mapValue);default:throw Y(23264,{he:t})}}function TR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=Gr(n),r=Gr(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function SR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Da(t[i],r[i]);if(o)return o}return he(t.length,r.length)}function Ca(n){return gE(n)}function gE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Gr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return K.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=gE(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gE(t.fields[s])}`;return i+"}"})(n.mapValue):Y(61005,{value:n})}function Ff(n){switch(xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vp(n);return e?16+Ff(e):16;case 5:return 2*n.stringValue.length;case 6:return Wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Ff(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Jo(r.fields,(o,s)=>{i+=o.length+Ff(s)}),i})(n.mapValue);default:throw Y(13486,{value:n})}}function mE(n){return!!n&&"integerValue"in n}function WI(n){return!!n&&"arrayValue"in n}function AR(n){return!!n&&"nullValue"in n}function RR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lf(n){return!!n&&"mapValue"in n}function RN(n){return(n?.mapValue?.fields||{})[zI]?.stringValue===GI}function Pu(n){if(n.geoPointValue)return{geoPointValue:R({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:R({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Jo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return R({},n)}function NN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AN}var bie={mapValue:{fields:{[zI]:{stringValue:GI},[wa]:{arrayValue:{}}}}};var Wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=un.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Pu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Pu(this.value))}};function MN(n){let e=[];return Jo(n.fields,(t,r)=>{let i=new un([t]);if(Lf(r)){let o=MN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new vr(e)}var Kn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),Wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ba=class{constructor(e,t){this.position=e,this.inclusive=t}};function NR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),t.key):r=Da(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}var Ta=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Y$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gf=class{},lt=class n extends Gf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vE(e,t,r):t==="array-contains"?new IE(e,r):t==="in"?new wE(e,r):t==="not-in"?new DE(e,r):t==="array-contains-any"?new CE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _E(e,r):new EE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Da(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(Da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dr=class n extends Gf{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return PN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function PN(n){return n.op==="and"}function xN(n){return J$(n)&&PN(n)}function J$(n){for(let e of n.filters)if(e instanceof Dr)return!1;return!0}function yE(n){if(n instanceof lt)return n.field.canonicalString()+n.op.toString()+Ca(n.value);if(xN(n))return n.filters.map(e=>yE(e)).join(",");{let e=n.filters.map(t=>yE(t)).join(",");return`${n.op}(${e})`}}function kN(n,e){return n instanceof lt?(function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&wr(r.value,i.value)})(n,e):n instanceof Dr?(function(r,i){return i instanceof Dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&kN(s,i.filters[a]),!0):!1})(n,e):void Y(19439)}function ON(n){return n instanceof lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ca(t.value)}`})(n):n instanceof Dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ON).join(" ,")+"}"})(n):"Filter"}var vE=class extends lt{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},_E=class extends lt{constructor(e,t){super(e,"in",t),this.keys=FN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},EE=class extends lt{constructor(e,t){super(e,"not-in",t),this.keys=FN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function FN(n,e){return(e.arrayValue?.values||[]).map(t=>K.fromName(t.referenceValue))}var IE=class extends lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return WI(t)&&Uu(t.arrayValue,this.value)}},wE=class extends lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Uu(this.value.arrayValue,t)}},DE=class extends lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uu(this.value.arrayValue,t)}},CE=class extends lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!WI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}};var bE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function PR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new bE(n,e,t,r,i,o,s)}function KI(n){let e=te(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),yp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ca(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ca(r)).join(",")),e.Te=t}return e.Te}function QI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MR(n.startAt,e.startAt)&&MR(n.endAt,e.endAt)}function TE(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Sa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Z$(n,e,t,r,i,o,s,a){return new Sa(n,e,t,r,i,o,s,a)}function YI(n){return new Sa(n)}function xR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function X$(n){return n.collectionGroup!==null}function xu(n){let e=te(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yt(un.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ta(o,r))}),t.has(un.keyField().canonicalString())||e.Ie.push(new Ta(un.keyField(),r))}return e.Ie}function Er(n){let e=te(n);return e.Ee||(e.Ee=eH(e,xu(n))),e.Ee}function eH(n,e){if(n.limitType==="F")return PR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ta(i.field,o)});let t=n.endAt?new ba(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ba(n.startAt.position,n.startAt.inclusive):null;return PR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function SE(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _p(n,e){return QI(Er(n),Er(e))&&n.limitType===e.limitType}function LN(n){return`${KI(Er(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ON(i)).join(", ")}]`),yp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ca(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ca(i)).join(",")),`Target(${r})`})(Er(n))}; limitType=${n.limitType})`}function Ep(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of xu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=NR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,xu(r),i)||r.endAt&&!(function(s,a,u){let l=NR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,xu(r),i))})(n,e)}function tH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VN(n){return(e,t)=>{let r=!1;for(let i of xu(n)){let o=nH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function nH(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Da(u,l):Y(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:n.dir})}}var Kr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return DN(this.inner)}size(){return this.innerSize}};var rH=new qe(K.comparator);function Qr(){return rH}var jN=new qe(K.comparator);function Mu(...n){let e=jN;for(let t of n)e=e.insert(t.key,t);return e}function UN(n){let e=jN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Uo(){return ku()}function BN(){return ku()}function ku(){return new Kr(n=>n.toString(),(n,e)=>n.isEqual(e))}var iH=new qe(K.comparator),oH=new yt(K.comparator);function fe(...n){let e=oH;for(let t of n)e=e.add(t);return e}var sH=new yt(he);function aH(){return sH}function JI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function $N(n){return{integerValue:""+n}}function cH(n,e){return F$(e)?$N(e):JI(n,e)}var Aa=class{constructor(){this._=void 0}};function uH(n,e,t){return n instanceof Ra?(function(i,o){let s={fields:{[bN]:{stringValue:CN},[SN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qI(o)&&(o=vp(o)),o&&(s.fields[TN]=o),{mapValue:s}})(t,e):n instanceof Go?qN(n,e):n instanceof Wo?zN(n,e):(function(i,o){let s=HN(i,o),a=kR(s)+kR(i.Ae);return mE(s)&&mE(i.Ae)?$N(a):JI(i.serializer,a)})(n,e)}function lH(n,e,t){return n instanceof Go?qN(n,e):n instanceof Wo?zN(n,e):t}function HN(n,e){return n instanceof Na?(function(r){return mE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ra=class extends Aa{},Go=class extends Aa{constructor(e){super(),this.elements=e}};function qN(n,e){let t=GN(e);for(let r of n.elements)t.some(i=>wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Wo=class extends Aa{constructor(e){super(),this.elements=e}};function zN(n,e){let t=GN(e);for(let r of n.elements)t=t.filter(i=>!wr(i,r));return{arrayValue:{values:t}}}var Na=class extends Aa{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function kR(n){return Oe(n.integerValue||n.doubleValue)}function GN(n){return WI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function dH(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Go&&i instanceof Go||r instanceof Wo&&i instanceof Wo?Ia(r.elements,i.elements,wr):r instanceof Na&&i instanceof Na?wr(r.Ae,i.Ae):r instanceof Ra&&i instanceof Ra})(n.transform,e.transform)}var AE=class{constructor(e,t){this.version=e,this.transformResults=t}},Ai=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ma=class{};function WN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bu(n.key,Ai.none()):new Ko(n.key,n.data,Ai.none());{let t=n.data,r=Wn.empty(),i=new yt(un.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yr(n.key,r,new vr(i.toArray()),Ai.none())}}function hH(n,e,t){n instanceof Ko?(function(i,o,s){let a=i.value.clone(),u=FR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Yr?(function(i,o,s){if(!Vf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=FR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(KN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ou(n,e,t,r){return n instanceof Ko?(function(o,s,a,u){if(!Vf(o.precondition,s))return a;let l=o.value.clone(),h=LR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yr?(function(o,s,a,u){if(!Vf(o.precondition,s))return a;let l=LR(o.fieldTransforms,u,s),h=s.data;return h.setAll(KN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Vf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function fH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=HN(r.transform,i||null);o!=null&&(t===null&&(t=Wn.empty()),t.set(r.field,o))}return t||null}function OR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ia(r,i,(o,s)=>dH(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ko=class extends Ma{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yr=class extends Ma{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function KN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function FR(n,e,t){let r=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,lH(s,a,t[i]))}return r}function LR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,uH(o,s,e))}return r}var Bu=class extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},RE=class extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var NE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&hH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=BN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=WN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(t,r)=>OR(t,r))&&Ia(this.baseMutations,e.baseMutations,(t,r)=>OR(t,r))}},ME=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return iH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var PE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nt,ge;function pH(n){switch(n){case x.OK:return Y(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return Y(15467,{code:n})}}function QN(n){if(n===void 0)return zr("GRPC error has no .code"),x.UNKNOWN;switch(n){case nt.OK:return x.OK;case nt.CANCELLED:return x.CANCELLED;case nt.UNKNOWN:return x.UNKNOWN;case nt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case nt.INTERNAL:return x.INTERNAL;case nt.UNAVAILABLE:return x.UNAVAILABLE;case nt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case nt.NOT_FOUND:return x.NOT_FOUND;case nt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case nt.ABORTED:return x.ABORTED;case nt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case nt.DATA_LOSS:return x.DATA_LOSS;default:return Y(39323,{code:n})}}(ge=nt||(nt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var gH=null;function mH(){return new TextEncoder}var yH=new $r([4294967295,4294967295],0);function VR(n){let e=mH().encode(n),t=new K_;return t.update(e),new Uint8Array(t.digest())}function jR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $r([t,r],0),new $r([i,o],0)]}var kE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bo(`Invalid padding: ${t}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$r.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply($r.fromNumber(r)));return i.compare(yH)===1&&(i=new $r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=VR(e),[r,i]=jR(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=VR(e),[r,i]=jR(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Bo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new qe(he),Qr(),fe())}},$u=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var ya=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Kf=class{constructor(e,t){this.targetId=e,this.Ce=t}},Qf=class{constructor(e,t,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yf=class{constructor(){this.ve=0,this.Fe=UR(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),t=fe(),r=fe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new $u(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=UR()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},OE=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qr(),this.Je=kf(),this.He=kf(),this.Ye=new qe(he)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(TE(o))if(r===0){let s=new K(o.path);this.et(t,s,Kn.newNoDocument(s,re.min()))}else Te(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}gH?.lt((function(h,p,m,y,A){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(P.bloomFilter={applied:A===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:j=>y?.mightContain(j)??!1}),P})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Wr(r).toUint8Array()}catch(u){if(u instanceof Hf)return Ea("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new kE(s,i,o)}catch(u){return Ea(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&TE(a.target)){let u=new K(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Kn.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=fe();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Wf(e,t,this.Ye,this.je,r);return this.je=Qr(),this.Je=kf(),this.He=kf(),this.Ye=new qe(he),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yf,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new yt(he),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new yt(he),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yf),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function kf(){return new qe(K.comparator)}function UR(){return new qe(K.comparator)}var vH={asc:"ASCENDING",desc:"DESCENDING"},_H={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EH={and:"AND",or:"OR"},FE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LE(n,e){return n.useProto3Json||yp(e)?e:{value:e}}function Jf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IH(n,e){return Jf(n,e.toTimestamp())}function Ir(n){return Te(!!n,49232),re.fromTimestamp((function(t){let r=Gr(t);return new ot(r.seconds,r.nanos)})(n))}function ZI(n,e){return VE(n,e).canonicalString()}function VE(n,e){let t=(function(i){return new Ve(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JN(n){let e=Ve.fromString(n);return Te(nM(e),10190,{key:e.toString()}),e}function jE(n,e){return ZI(n.databaseId,e.path)}function tE(n,e){let t=JN(e);if(t.get(1)!==n.databaseId.projectId)throw new z(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(XN(t))}function ZN(n,e){return ZI(n.databaseId,e)}function wH(n){let e=JN(n);return e.length===4?Ve.emptyPath():XN(e)}function UE(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XN(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BR(n,e,t){return{name:jE(n,e),fields:t.value.mapValue.fields}}function DH(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?x.UNKNOWN:QN(l.code);return new z(h,l.message||"")})(s);t=new Qf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=tE(n,r.document.name),o=Ir(r.document.updateTime),s=r.document.createTime?Ir(r.document.createTime):re.min(),a=new Wn({mapValue:{fields:r.document.fields}}),u=Kn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ya(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=tE(n,r.document),o=r.readTime?Ir(r.readTime):re.min(),s=Kn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ya([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=tE(n,r.document),o=r.removedTargetIds||[];t=new ya([],o,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xE(i,o),a=r.targetId;t=new Kf(a,s)}}return t}function CH(n,e){let t;if(e instanceof Ko)t={update:BR(n,e.key,e.value)};else if(e instanceof Bu)t={delete:jE(n,e.key)};else if(e instanceof Yr)t={update:BR(n,e.key,e.data),updateMask:xH(e.fieldMask)};else{if(!(e instanceof RE))return Y(16599,{Vt:e.type});t={verify:jE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ra)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Go)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Y(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:IH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)})(n,e.precondition)),t}function bH(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Ir(i.updateTime):Ir(o);return s.isEqual(re.min())&&(s=Ir(o)),new AE(s,i.transformResults||[])})(t,e))):[]}function TH(n,e){return{documents:[ZN(n,e.path)]}}function SH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZN(n,i);let o=(function(l){if(l.length!==0)return tM(Dr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:fa(m.field),direction:NH(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=LE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function AH(n){let e=wH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=eM(p);return m instanceof Dr&&xN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(A){return new Ta(pa(A.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,yp(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ba(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ba(y,m)})(t.endAt)),Z$(e,i,s,o,a,"F",u,l)}function RH(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=pa(t.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pa(t.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=pa(t.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=pa(t.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}})(n):n.fieldFilter!==void 0?(function(t){return lt.create(pa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Dr.create(t.compositeFilter.filters.map(r=>eM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}})(t.compositeFilter.op))})(n):Y(30097,{filter:n})}function NH(n){return vH[n]}function MH(n){return _H[n]}function PH(n){return EH[n]}function fa(n){return{fieldPath:n.canonicalString()}}function pa(n){return un.fromServerFormat(n.fieldPath)}function tM(n){return n instanceof lt?(function(t){if(t.op==="=="){if(RR(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NAN"}};if(AR(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RR(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NAN"}};if(AR(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(t.field),op:MH(t.op),value:t.value}}})(n):n instanceof Dr?(function(t){let r=t.getFilters().map(i=>tM(i));return r.length===1?r[0]:{compositeFilter:{op:PH(t.op),filters:r}}})(n):Y(54877,{filter:n})}function xH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hu=class n{constructor(e,t,r,i,o=re.min(),s=re.min(),a=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var BE=class{constructor(e){this.yt=e}};function kH(n){let e=AH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?SE(e,e.limit,"L"):e}var Zf=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Vu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Gr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Wr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?NN(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):RN(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Y(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=wa,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Oe(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),K.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Zf.Kt=new Zf;var $E=class{constructor(){this.Cn=new HE}addToCollectionParentIndex(e,t){return this.Cn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(zo.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(zo.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},HE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yt(Ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(Ve.comparator)).toArray()}};var Tie=new Uint8Array(0);var $R={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rM=41943040,In=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(rM,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var qu=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var HR="LruGarbageCollector",OH=1048576;function qR([n,e],[t,r]){let i=he(n,t);return i===0?he(e,r):i}var qE=class{constructor(e){this.Ir=e,this.buffer=new yt(qR),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},zE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(HR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>w(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fa(t)?$(HR,"Ignoring IndexedDB error during garbage collection: ",t):yield Oa(t)}yield this.Vr(3e5)}))}},GE=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve($I.ce);let r=new qE(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve($R)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$R):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),da()<=le.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function FH(n,e){return new GE(n,e)}var WE=class{constructor(){this.changes=new Kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var KE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var QE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ou(r.mutation,i,vr.empty(),ot.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=Uo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Mu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Uo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Qr(),s=ku(),a=(function(){return ku()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Yr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ou(h.mutation,l,h.mutation.getFieldMask(),ot.now())):s.set(l.key,vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new KE(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=ku(),i=new qe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||vr.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=BN();h.forEach(m=>{if(!o.has(m)){let y=WN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X$(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):k.resolve(Uo()),a=Lu,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:UN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=Mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Mu();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=(function(p,m){return new Sa(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Kn.newInvalidDocument(h)))});let a=Mu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ou(h.mutation,l,vr.empty(),ot.now()),Ep(t,l)&&(a=a.insert(u,l))}),a})}};var YE=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return k.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:kH(i.bundledQuery),readTime:Ir(i.readTime)}})(t)),k.resolve()}};var JE=class{constructor(){this.overlays=new qe(K.comparator),this.qr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Uo();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Uo(),o=t.length+1,s=new K(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new qe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Uo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Uo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new PE(t,r));let o=this.qr.get(t);o===void 0&&(o=fe(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var ZE=class{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var zu=class{constructor(){this.Qr=new yt(rt.$r),this.Ur=new yt(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new rt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new rt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new K(new Ve([])),r=new rt(t,e),i=new rt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new K(new Ve([])),r=new rt(t,e),i=new rt(t,e+1),o=fe();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return K.comparator(e.key,t.key)||he(e.Yr,t.Yr)}static Kr(e,t){return he(e.Yr,t.Yr)||K.comparator(e.key,t.key)}};var XE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new yt(rt.$r)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new NE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new rt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,t){return k.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?HI:this.tr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rt(t,0),i=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(he);return t.forEach(i=>{let o=new rt(i,0),s=new rt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new rt(new K(o),0),a=new yt(he);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),k.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(t.mutations,i=>{let o=new rt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new rt(t,0),i=this.Zr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var eI=class{constructor(e){this.ri=e,this.docs=(function(){return new qe(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=Qr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Kn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Qr(),s=t.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||x$(P$(h),r)<=0||(i.has(h.key)||Ep(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y(9500)}ii(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tI(this)}getSize(e){return k.resolve(this.size)}},tI=class extends WE{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var nI=class{constructor(e){this.persistence=e,this.si=new Kr(t=>KI(t),QI),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new zu,this.targetCount=0,this.ai=qu.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),k.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new qu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Pr(t),k.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this._i.containsKey(t))}};var Xf=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new $I(0),this.li=!1,this.li=!0,this.hi=new ZE,this.referenceDelegate=e(this),this.Pi=new nI(this),this.indexManager=new $E,this.remoteDocumentCache=(function(i){return new eI(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new BE(t),this.Ii=new YE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new XE(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new rI(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return k.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},rI=class extends fE{constructor(e){super(),this.currentSequenceNumber=e}},iI=class n{constructor(e){this.persistence=e,this.Ri=new zu,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,r=>{let i=K.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return k.or([()=>k.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},ep=class n{constructor(e,t){this.persistence=e,this.pi=new Kr(r=>L$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FH(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return k.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ff(e.data.value)),t}br(e,t,r){return k.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var oI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var sI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var aI=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return EA()?8:O$(an())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sI;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(da()<=le.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(da()<=le.DEBUG&&$("QueryEngine","Query:",ha(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(da()<=le.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):k.resolve())}ys(e,t){if(xR(t))return k.resolve(null);let r=Er(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=SE(t,null,"F"),r=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,SE(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return xR(t)||i.isEqual(re.min())?k.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?k.resolve(null):(da()<=le.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.vs(e,s,t,M$(i,Lu)).next(a=>a))})}Ds(e,t){let r=new yt(VN(e));return t.forEach((i,o)=>{Ep(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return da()<=le.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ps.getDocumentsMatchingQuery(e,t,zo.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var XI="LocalStore",LH=3e8,cI=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new qe(he),this.xs=new Kr(o=>KI(o),QI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function VH(n,e,t,r){return new cI(n,e,t,r)}function iM(n,e){return w(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jH(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=k.resolve();return m.forEach(A=>{y=y.next(()=>h.getEntry(u,A)).next(P=>{let N=l.docVersions.get(A);Te(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oM(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function UH(n,e){let t=te(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,N,j){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=LH?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=Qr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(BH(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(re.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function BH(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Qr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):$(XI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function $H(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=HI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HH(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Hu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function uI(n,e,t){return w(this,null,function*(){let r=te(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Fa(s))throw s;$(XI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function zR(n,e,t){let r=te(n),i=re.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=te(u),m=p.xs.get(h);return m!==void 0?k.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,s,Er(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:re.min(),t?o:fe())).next(a=>(qH(r,tH(e),a),{documents:a,Qs:o})))}function qH(n,e,t){let r=n.Os.get(e)||re.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var tp=class{constructor(){this.activeTargetIds=aH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lI=class{constructor(){this.Mo=new tp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dI=class{Oo(e){}shutdown(){}};var GR="ConnectivityMonitor",np=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(GR,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){$(GR,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Of=null;function hI(){return Of===null?Of=(function(){return 268435456+Math.round(2147483648*Math.random())})():Of++,"0x"+Of.toString(16)}var nE="RestConnection",zH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fI=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===qf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=hI(),a=this.zo(e,t.toUriEncodedString());$(nE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=No(l);return this.Jo(e,a,u,r,h).then(p=>($(nE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ea(nE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=zH[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var pI=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Rt="WebChannelConnection",gI=class extends fI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=hI();return new Promise((a,u)=>{let l=new Q_;l.setWithCredentials(!0),l.listenOnce(Y_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nu.NO_ERROR:let p=l.getResponseJson();$(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Nu.TIMEOUT:$(Rt,`RPC '${e}' ${s} timed out`),u(new z(x.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:let m=l.getStatus();if($(Rt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let A=y?.error;if(A&&A.status&&A.message){let P=(function(j){let ie=j.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(ie)>=0?ie:x.UNKNOWN})(A.status);u(new z(P,A.message))}else u(new z(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(x.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{$(Rt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(Rt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=hI(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=X_(),a=Z_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");$(Rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,y=!1,A=new pI({Yo:N=>{y?$(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||($(Rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),$(Rt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),P=(N,j,ie)=>{N.listen(j,de=>{try{ie(de)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return P(p,la.EventType.OPEN,()=>{y||($(Rt,`RPC '${e}' stream ${i} transport opened.`),A.o_())}),P(p,la.EventType.CLOSE,()=>{y||(y=!0,$(Rt,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(p))}),P(p,la.EventType.ERROR,N=>{y||(y=!0,Ea(Rt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),A.a_(new z(x.UNAVAILABLE,"The operation could not be completed")))}),P(p,la.EventType.MESSAGE,N=>{if(!y){let j=N.data[0];Te(!!j,16349);let ie=j,de=ie?.error||ie[0]?.error;if(de){$(Rt,`RPC '${e}' stream ${i} received error:`,de);let Mt=de.status,zt=(function(v){let E=nt[v];if(E!==void 0)return QN(E)})(Mt),dt=de.message;zt===void 0&&(zt=x.INTERNAL,dt="Unknown error status: "+Mt+" with message "+de.message),y=!0,A.a_(new z(zt,dt)),p.close()}else $(Rt,`RPC '${e}' stream ${i} received:`,j),A.u_(j)}}),P(a,J_.STAT_EVENT,N=>{N.stat===Pf.PROXY?$(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Pf.NOPROXY&&$(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function rE(){return typeof document<"u"?document:null}function Ip(n){return new FE(n,!0)}var rp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var WR="PersistentStream",ip=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return w(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return w(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return w(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new z(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>w(this,null,function*(){this.state=0,this.start()}))}z_(e){return $(WR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():($(WR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mI=class extends ip{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=DH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Ir(s.readTime):re.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=UE(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=TE(u)?{documents:TH(o,u)}:{query:SH(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=YN(o,s.resumeToken);let l=LE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=Jf(o,s.snapshotVersion.toTimestamp());let l=LE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=RH(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=UE(this.serializer),t.removeTarget=e,this.q_(t)}},yI=class extends ip{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=bH(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=UE(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CH(this.serializer,r))};this.q_(t)}};var vI=class{},_I=class extends vI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,VE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(x.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,VE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(x.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},EI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zr(t),this.aa=!1):$("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Qo="RemoteStore",II=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>w(this,null,function*(){Zo(this)&&($(Qo,"Restarting streams for network reachability change."),yield(function(u){return w(this,null,function*(){let l=te(u);l.Ea.add(4),yield Ku(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield wp(l)})})(this))}))}),this.Ra=new EI(r,i)}};function wp(n){return w(this,null,function*(){if(Zo(n))for(let e of n.da)yield e(!0)})}function Ku(n){return w(this,null,function*(){for(let e of n.da)yield e(!1)})}function sM(n,e){let t=te(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rw(t)?nw(t):La(t).O_()&&tw(t,e))}function ew(n,e){let t=te(n),r=La(t);t.Ia.delete(e),r.O_()&&aM(t,e),t.Ia.size===0&&(r.O_()?r.L_():Zo(t)&&t.Ra.set("Unknown"))}function tw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}La(n).Y_(e)}function aM(n,e){n.Va.Ue(e),La(n).Z_(e)}function nw(n){n.Va=new OE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),La(n).start(),n.Ra.ua()}function rw(n){return Zo(n)&&!La(n).x_()&&n.Ia.size>0}function Zo(n){return te(n).Ea.size===0}function cM(n){n.Va=void 0}function GH(n){return w(this,null,function*(){n.Ra.set("Online")})}function WH(n){return w(this,null,function*(){n.Ia.forEach((e,t)=>{tw(n,e)})})}function KH(n,e){return w(this,null,function*(){cM(n),rw(n)?(n.Ra.ha(e),nw(n)):n.Ra.set("Unknown")})}function QH(n,e,t){return w(this,null,function*(){if(n.Ra.set("Online"),e instanceof Qf&&e.state===2&&e.cause)try{yield(function(i,o){return w(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){$(Qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield op(n,r)}else if(e instanceof ya?n.Va.Ze(e):e instanceof Kf?n.Va.st(e):n.Va.tt(e),!t.isEqual(re.min()))try{let r=yield oM(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),aM(o,u);let p=new Hu(h.target,u,l,h.sequenceNumber);tw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){$(Qo,"Failed to raise snapshot:",r),yield op(n,r)}})}function op(n,e,t){return w(this,null,function*(){if(!Fa(e))throw e;n.Ea.add(1),yield Ku(n),n.Ra.set("Offline"),t||(t=()=>oM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>w(null,null,function*(){$(Qo,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield wp(n)}))})}function uM(n,e){return e().catch(t=>op(n,t,e))}function Dp(n){return w(this,null,function*(){let e=te(n),t=ki(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:HI;for(;YH(e);)try{let i=yield $H(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,JH(e,i)}catch(i){yield op(e,i)}lM(e)&&dM(e)})}function YH(n){return Zo(n)&&n.Ta.length<10}function JH(n,e){n.Ta.push(e);let t=ki(n);t.O_()&&t.X_&&t.ea(e.mutations)}function lM(n){return Zo(n)&&!ki(n).x_()&&n.Ta.length>0}function dM(n){ki(n).start()}function ZH(n){return w(this,null,function*(){ki(n).ra()})}function XH(n){return w(this,null,function*(){let e=ki(n);for(let t of n.Ta)e.ea(t.mutations)})}function e4(n,e,t){return w(this,null,function*(){let r=n.Ta.shift(),i=ME.from(r,e,t);yield uM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dp(n)})}function t4(n,e){return w(this,null,function*(){e&&ki(n).X_&&(yield(function(r,i){return w(this,null,function*(){if((function(s){return pH(s)&&s!==x.ABORTED})(i.code)){let o=r.Ta.shift();ki(r).B_(),yield uM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Dp(r)}})})(n,e)),lM(n)&&dM(n)})}function KR(n,e){return w(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),$(Qo,"RemoteStore received new credentials");let r=Zo(t);t.Ea.add(3),yield Ku(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield wp(t)})}function n4(n,e){return w(this,null,function*(){let t=te(n);e?(t.Ea.delete(2),yield wp(t)):e||(t.Ea.add(2),yield Ku(t),t.Ra.set("Unknown"))})}function La(n){return n.ma||(n.ma=(function(t,r,i){let o=te(t);return o.sa(),new mI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:GH.bind(null,n),t_:WH.bind(null,n),r_:KH.bind(null,n),H_:QH.bind(null,n)}),n.da.push(e=>w(null,null,function*(){e?(n.ma.B_(),rw(n)?nw(n):n.Ra.set("Unknown")):(yield n.ma.stop(),cM(n))}))),n.ma}function ki(n){return n.fa||(n.fa=(function(t,r,i){let o=te(t);return o.sa(),new yI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZH.bind(null,n),r_:t4.bind(null,n),ta:XH.bind(null,n),na:e4.bind(null,n)}),n.da.push(e=>w(null,null,function*(){e?(n.fa.B_(),yield Dp(n)):(yield n.fa.stop(),n.Ta.length>0&&($(Qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var wI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iw(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Fa(n))return new z(x.UNAVAILABLE,`${e}: ${n}`);throw n}var sp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=Mu(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ap=class{constructor(){this.ga=new qe(K.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Pa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,sp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var DI=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},CI=class{constructor(){this.queries=QR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=te(t),o=i.queries;i.queries=QR(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new z(x.ABORTED,"Firestore shutting down"))}};function QR(){return new Kr(n=>LN(n),_p)}function r4(n,e){return w(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new DI,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=iw(s,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ow(t)})}function i4(n,e){return w(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function o4(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&ow(t)}function s4(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function ow(n){n.Ca.forEach(e=>{e.next()})}var bI,YR;(YR=bI||(bI={})).Ma="default",YR.Cache="cache";var TI=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bI.Cache}};var cp=class{constructor(e){this.key=e}},up=class{constructor(e){this.key=e}},SI=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=VN(e),this.tu=new sp(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new ap,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Ep(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?A!==P&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,A){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:N})}};return P(y)-P(A)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Pa(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ap,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new up(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new cp(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=fe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},sw="SyncEngine",AI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},RI=class{constructor(e){this.key=e,this.hu=!1}},NI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Kr(a=>LN(a),_p),this.Iu=new Map,this.Eu=new Set,this.du=new qe(K.comparator),this.Au=new Map,this.Ru=new zu,this.Vu={},this.mu=new Map,this.fu=qu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function a4(n,e,t=!0){return w(this,null,function*(){let r=yM(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield hM(r,e,t,!0),i})}function c4(n,e){return w(this,null,function*(){let t=yM(n);yield hM(t,e,!0,!1)})}function hM(n,e,t,r){return w(this,null,function*(){let i=yield HH(n.localStore,Er(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield u4(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&sM(n.remoteStore,i),a})}function u4(n,e,t,r,i){return w(this,null,function*(){n.pu=(p,m,y)=>(function(P,N,j,ie){return w(this,null,function*(){let de=N.view.ru(j);de.Cs&&(de=yield zR(P.localStore,N.query,!1).then(({documents:D})=>N.view.ru(D,de)));let Mt=ie&&ie.targetChanges.get(N.targetId),zt=ie&&ie.targetMismatches.get(N.targetId)!=null,dt=N.view.applyChanges(de,P.isPrimaryClient,Mt,zt);return ZR(P,N.targetId,dt.au),dt.snapshot})})(n,p,m,y);let o=yield zR(n.localStore,e,!0),s=new SI(e,o.Qs),a=s.ru(o.documents),u=$u.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ZR(n,t,l.au);let h=new AI(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function l4(n,e,t){return w(this,null,function*(){let r=te(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!_p(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ew(r.remoteStore,i.targetId),MI(r,i.targetId)}).catch(Oa))):(MI(r,i.targetId),yield uI(r.localStore,i.targetId,!0))})}function d4(n,e){return w(this,null,function*(){let t=te(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ew(t.remoteStore,r.targetId))})}function h4(n,e,t){return w(this,null,function*(){let r=_4(n);try{let i=yield(function(s,a){let u=te(s),l=ot.now(),h=a.reduce((y,A)=>y.add(A.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=Qr(),P=fe();return u.Ns.getEntries(y,h).next(N=>{A=N,A.forEach((j,ie)=>{ie.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,A)).next(N=>{p=N;let j=[];for(let ie of a){let de=fH(ie,p.get(ie.key).overlayedDocument);de!=null&&j.push(new Yr(ie.key,de,MN(de.value.mapValue),Ai.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:UN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new qe(he)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Qu(r,i.changes),yield Dp(r.remoteStore)}catch(i){let o=iw(i,"Failed to persist write");t.reject(o)}})}function fM(n,e){return w(this,null,function*(){let t=te(n);try{let r=yield UH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Te(s.hu,14607):i.removedDocuments.size>0&&(Te(s.hu,42227),s.hu=!1))}),yield Qu(t,r,e)}catch(r){yield Oa(r)}})}function JR(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=te(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&ow(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f4(n,e,t){return w(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new qe(K.comparator);s=s.insert(o,Kn.newNoDocument(o,re.min()));let a=fe().add(o),u=new Wf(re.min(),new Map,new qe(he),s,a);yield fM(r,u),r.du=r.du.remove(o),r.Au.delete(e),aw(r)}else yield uI(r.localStore,e,!1).then(()=>MI(r,e,t)).catch(Oa)})}function p4(n,e){return w(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield jH(t.localStore,e);gM(t,r,null),pM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qu(t,i)}catch(i){yield Oa(i)}})}function g4(n,e,t){return w(this,null,function*(){let r=te(n);try{let i=yield(function(s,a){let u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Te(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);gM(r,e,t),pM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qu(r,i)}catch(i){yield Oa(i)}})}function pM(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function gM(n,e,t){let r=te(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function MI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||mM(n,r)})}function mM(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ew(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),aw(n))}function ZR(n,e,t){for(let r of t)r instanceof cp?(n.Ru.addReference(r.key,e),m4(n,r)):r instanceof up?($(sw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mM(n,r.key)):Y(19791,{wu:r})}function m4(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||($(sw,"New document in limbo: "+t),n.Eu.add(r),aw(n))}function aw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new K(Ve.fromString(e)),r=n.fu.next();n.Au.set(r,new RI(t)),n.du=n.du.insert(t,r),sM(n.remoteStore,new Hu(Er(YI(t.path)),r,"TargetPurposeLimboResolution",$I.ce))}}function Qu(n,e,t){return w(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=oI.As(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield(function(u,l){return w(this,null,function*(){let h=te(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,m=>k.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>k.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Fa(p))throw p;$(XI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),A=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(A);h.Ms=h.Ms.insert(m,P)}}})})(r.localStore,o))})}function y4(n,e){return w(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){$(sw,"User change. New user:",e.toKey());let r=yield iM(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new z(x.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qu(t,r.Ls)}})}function v4(n,e){let t=te(n),r=t.Au.get(e);if(r&&r.hu)return fe().add(r.key);{let i=fe(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function yM(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f4.bind(null,e),e.Pu.H_=o4.bind(null,e.eventManager),e.Pu.yu=s4.bind(null,e.eventManager),e}function _4(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g4.bind(null,e),e}var vM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return w(this,null,function*(){this.serializer=Ip(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return VH(this.persistence,new aI,t.initialUser,this.serializer)}Cu(t){return new Xf(iI.mi,this.serializer)}Du(t){return new lI}terminate(){return w(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),PI=class extends vM{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof ep,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zE(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new Xf(r=>ep.mi(r,t),this.serializer)}};var E4=(()=>{class n{initialize(t,r){return w(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y4.bind(null,this.syncEngine),yield n4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new CI})()}createDatastore(t){let r=Ip(t.databaseInfo.databaseId),i=(function(s){return new gI(s)})(t.databaseInfo);return(function(s,a,u,l){return new _I(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new II(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>JR(this.syncEngine,r,0),(function(){return np.v()?new np:new dI})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new NI(o,s,a,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){yield(function(r){return w(this,null,function*(){let i=te(r);$(Qo,"RemoteStore shutting down."),i.Ea.add(5),yield Ku(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var xI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Oi="FirestoreClient",kI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=Fu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>w(this,null,function*(){$(Oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($(Oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=iw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function iE(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$(Oi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>w(null,null,function*(){r.isEqual(i)||(yield iM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function XR(n,e){return w(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield I4(n);$(Oi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KR(e.remoteStore,i)),n._onlineComponents=e})}function I4(n){return w(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$(Oi,"Using user provided OfflineComponentProvider");try{yield iE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),yield iE(n,new vM)}}else $(Oi,"Using default OfflineComponentProvider"),yield iE(n,new PI(void 0));return n._offlineComponents})}function _M(n){return w(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($(Oi,"Using user provided OnlineComponentProvider"),yield XR(n,n._uninitializedComponentsProvider._online)):($(Oi,"Using default OnlineComponentProvider"),yield XR(n,new E4))),n._onlineComponents})}function w4(n){return _M(n).then(e=>e.syncEngine)}function eN(n){return w(this,null,function*(){let e=yield _M(n),t=e.eventManager;return t.onListen=a4.bind(null,e.syncEngine),t.onUnlisten=l4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d4.bind(null,e.syncEngine),t})}function EM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tN=new Map;var IM="firestore.googleapis.com",nN=!0,lp=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IM,this.ssl=nN}else this.host=e.host,this.ssl=e.ssl??nN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OH)throw new z(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EM(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oE;switch(r.type){case"firstParty":return new uE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=tN.get(t);r&&($("ComponentProvider","Removing Datastore"),tN.delete(t),r.terminate())})(this),Promise.resolve()}};function wM(n,e,t,r={}){n=ma(n,xa);let i=No(e),o=n._getSettings(),s=W(R({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(u_(`https://${a}`),l_("Firestore",!0)),o.host!==IM&&o.host!==a&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=W(R({},o),{host:a,ssl:i,emulatorOptions:r});if(!Mo(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=mt.MOCK_USER;else{l=gA(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new z(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mt(p)}n._authCredentials=new sE(new jf(l,h))}}var dp=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wu(t,n._jsonSchema))return new n(e,r||null,new K(Ve.fromString(t.referencePath)))}};qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:it("string",qt._jsonSchemaVersion),referencePath:it("string")};var Ri=class n extends dp{constructor(e,t,r){super(e,t,YI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function DM(n,e,...t){if(n=cn(n),aN("collection","path",e),n instanceof xa){let r=Ve.fromString(e,...t);return IR(r),new Ri(n,null,r)}{if(!(n instanceof qt||n instanceof Ri))throw new z(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return IR(r),new Ri(n.firestore,null,r)}}function cw(n,e,...t){if(n=cn(n),arguments.length===1&&(e=Fu.newId()),aN("doc","path",e),n instanceof xa){let r=Ve.fromString(e,...t);return ER(r),new qt(n,null,new K(r))}{if(!(n instanceof qt||n instanceof Ri))throw new z(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return ER(r),new qt(n.firestore,n instanceof Ri?n.converter:null,new K(r))}}var rN="AsyncQueue",hp=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rp(this,"async_queue_retry"),this._c=()=>{let r=rE();r&&$(rN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=rE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=rE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return w(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;$(rN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",iN(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=wI.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:iN(this.nc)})}verifyOperationInProgress(){}Tc(){return w(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function iN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function oN(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Yo=class extends xa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hp(e),this._firestoreClient=void 0,yield e}})}};function CM(n,e){let t=typeof n=="object"?n:aa(),r=typeof n=="string"?n:e||qf,i=ff(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fA("firestore");o&&wM(i,...o)}return i}function bM(n){if(n._terminated)throw new z(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||D4(n),n._firestoreClient}function D4(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new pE(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,EM(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new kI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Ni=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nt.fromBase64String(e))}catch(t){throw new z(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:it("string",Ni._jsonSchemaVersion),bytes:it("string")};var Gu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fp=class{constructor(e){this._methodName=e}};var Mi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:it("string",Mi._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};var Pi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:it("string",Pi._jsonSchemaVersion),vectorValues:it("object")};var C4=/^__.*__$/,OI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ko(e,this.data,t,this.fieldTransforms)}};function TM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:n})}}var FI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(R(R({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TM(this.Ac)&&C4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},LI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ip(e)}Cc(e,t,r,i=!1){return new FI({Ac:e,methodName:t,Dc:r,path:un.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function b4(n){let e=n._freezeSettings(),t=Ip(n._databaseId);return new LI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function T4(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);NM("Data must be an object, but it was:",s,r);let a=AM(r,s),u,l;if(o.merge)u=new vr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=S4(e,p,t);if(!s.contains(m))throw new z(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);R4(h,m)||h.push(m)}u=new vr(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new OI(new Wn(a),u,l)}function SM(n,e){if(RM(n=cn(n)))return NM("Unsupported field value:",e,n),AM(n,e);if(n instanceof fp)return(function(r,i){if(!TM(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=SM(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ot.fromDate(r);return{timestampValue:Jf(i.serializer,o)}}if(r instanceof ot){let o=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jf(i.serializer,o)}}if(r instanceof Mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ni)return{bytesValue:YN(i.serializer,r._byteString)};if(r instanceof qt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ZI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pi)return(function(s,a){return{mapValue:{fields:{[zI]:{stringValue:GI},[wa]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return JI(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${BI(r)}`)})(n,e)}function AM(n,e){let t={};return DN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(n,(r,i)=>{let o=SM(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Mi||n instanceof Ni||n instanceof qt||n instanceof fp||n instanceof Pi)}function NM(n,e,t){if(!RM(t)||!cN(t)){let r=BI(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function S4(n,e,t){if((e=cn(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return MM(n,e);throw pp("Field path arguments must be of type string or ",n,!1,void 0,t)}var A4=new RegExp("[~\\*/\\[\\]]");function MM(n,e,t){if(e.search(A4)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gu(...e.split("."))._internalPath}catch{throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(x.INVALID_ARGUMENT,a+n+u)}function R4(n,e){return n.some(t=>t.isEqual(e))}var gp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(PM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},VI=class extends gp{data(){return super.data()}};function PM(n,e){return typeof e=="string"?MM(n,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}function N4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jI=class{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Jo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[wa].arrayValue?.values?.map(r=>Oe(r.doubleValue));return new Pi(t)}convertGeoPoint(e){return new Mi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ju(e));default:return null}}convertTimestamp(e){let t=Gr(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ve.fromString(e);Te(nM(r),9688,{name:e});let i=new zf(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(t)||zr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function M4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $o=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ho=class n extends gp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(PM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ho._jsonSchema={type:it("string",Ho._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};var va=class extends Ho{data(e={}){return super.data(e)}},_a=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $o(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new va(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:P4(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:n})}}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:it("string",_a._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};var mp=class extends jI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ni(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}};function xM(n){return OM(ma(n.firestore,Yo),[new Bu(n._key,Ai.none())])}function kM(n,e){let t=ma(n.firestore,Yo),r=cw(n),i=M4(n.converter,e);return OM(t,[T4(b4(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ai.exists(!1))]).then(()=>r)}function uw(n,...e){n=cn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oN(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(oN(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof qt)s=ma(n.firestore,Yo),a=YI(n._key.path),o={next:u=>{e[r]&&e[r](x4(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=ma(n,dp);s=ma(u.firestore,Yo),a=u._query;let l=new mp(s);o={next:h=>{e[r]&&e[r](new _a(s,l,u,h))},error:e[r+1],complete:e[r+2]},N4(n._query)}return(function(l,h,p,m){let y=new xI(m),A=new TI(h,y,p);return l.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return r4(yield eN(l),A)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return i4(yield eN(l),A)}))}})(bM(s),a,i,o)}function OM(n,e){return(function(r,i){let o=new qr;return r.asyncQueue.enqueueAndForget(()=>w(null,null,function*(){return h4(yield w4(r),i,o)})),o.promise})(bM(n),e)}function x4(n,e,t){let r=t.docs.get(e._key),i=new mp(n);return new Ho(n,i,e._key,r,new $o(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ka=i})(sa),qn(new Ht("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Yo(new aE(r.getProvider("auth-internal")),new lE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zf(l.options.projectId,h)})(s,i),s);return o=R({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qe(yR,vR,e),Qe(yR,vR,"esm2020")})();var Cp=function(){return Cp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Cp.apply(this,arguments)};var F4={includeMetadataChanges:!1};function FM(n,e){return e===void 0&&(e=F4),new ae(function(t){var r=uw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function LM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Cp(Cp({},r),(t={},t[e.idField]=n.id,t))}function VM(n){return FM(n,{includeMetadataChanges:!0}).pipe(ye(function(e){return e.docs}))}function jM(n,e){return e===void 0&&(e={}),VM(n).pipe(ye(function(t){return t.map(function(r){return LM(r,e)})}))}var Xo=class{constructor(e){return e}},UM="firestore",lw=class{constructor(){return ua(UM)}};var dw=new q("angularfire2.firestore-instances");function L4(n,e){let t=mf(UM,n,e);return t&&new Xo(t)}function V4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xo(r)}}var j4={provide:lw,deps:[[new xr,dw]]},U4={provide:Xo,useFactory:L4,deps:[[new xr,dw],Fo]};function BM(n,...e){return Qe("angularfire",ko.full,"fst"),bn([U4,j4,{provide:dw,useFactory:V4(n),multi:!0,deps:[Ce,Xe,Oo,Du,[new xr,Nf],[new xr,vf],...e]}])}var $M=zn(jM,!0);var hw=zn(kM,!0,2);var HM=zn(DM,!0,2);var qM=zn(xM,!0,2);var zM=zn(cw,!0,2);var GM=zn(CM,!0);var Va=(()=>{class n{constructor(){this.firestore=M(Xo),this.questsCollection=HM(this.firestore,"quests"),this._quests=Re([],{}),this.loadQuests()}loadQuests(){$M(this.questsCollection,{idField:"id"}).pipe(ye(r=>r.sort((i,o)=>(o.id??"").localeCompare(i.id??"")))).subscribe(r=>{this._quests.set(r)})}quests(){return this._quests.asReadonly()()}getQuestById(t){return this._quests().find(r=>r.id===t)}addCustomQuest(t){return w(this,null,function*(){let r={title:t.title,description:t.description,xp:t.xp,imageUrl:"assets/default.png",difficulty:"medium"},i=yield hw(this.questsCollection,r)})}deleteQuest(t){return w(this,null,function*(){if(!t)return;let r=zM(this.firestore,"quests",t);yield qM(r)})}addDefaultQuestsIfEmpty(){return w(this,null,function*(){if(this._quests().length===0){let t=[{title:"Find the Lost Sword",description:"Retrieve the legendary sword from the ancient ruins.",xp:40,imageUrl:"assets/sword.png",difficulty:"medium"},{title:"Rescue the Villagers",description:"Save the villagers captured by goblins.",xp:120,imageUrl:"assets/villagers.png",difficulty:"hard"},{title:"Collect Herbs",description:"Gather 10 healing herbs for the village healer.",xp:60,imageUrl:"assets/herbs.png",difficulty:"easy"}];for(let r of t)yield hw(this.questsCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var B4=n=>["/quests",n],$4=(n,e)=>e.id;function H4(n,e){n&1&&(F(0,"p",3),L(1,"Title must be at least 8 characters."),O())}function q4(n,e){if(n&1){let t=Bt();F(0,"div",8)(1,"h3",9),L(2),O(),F(3,"p"),L(4),O(),F(5,"p")(6,"strong"),L(7,"XP:"),O(),L(8),O(),F(9,"button",10),pe("click",function(i){let o=Be(t).$implicit;return ve().deleteQuest(o.id),$e(i.stopPropagation())}),L(10," Delete "),O()()}if(n&2){let t=e.$implicit;Se("routerLink",js(4,B4,t.id)),U(2),St(t.title),U(2),St(t.description),U(4),ft(" ",t.xp)}}function z4(n,e){n&1&&(F(0,"p"),L(1,"No quests match your search."),O())}var WM=(()=>{class n{constructor(t){this.questsService=t,this.search=Re("",{}),this.questForm=new $n({title:new Ct("",{validators:[gt.required,gt.minLength(8)],nonNullable:!0}),description:new Ct("",{validators:[gt.required],nonNullable:!0}),xp:new Ct(0,{validators:[gt.required,gt.min(1)],nonNullable:!0})}),this.filteredQuests=yn(()=>{let r=this.search().toLowerCase();return this.questsService.quests().filter(i=>i.title.toLowerCase().includes(r))},{})}onSearchChange(t){this.search.set(t??"")}createQuest(){return w(this,null,function*(){if(this.questForm.invalid)return;let{title:t,description:r,xp:i}=this.questForm.getRawValue();yield this.questsService.addCustomQuest({title:t,description:r,xp:i}),this.questForm.reset({title:"",description:"",xp:0})})}deleteQuest(t){return w(this,null,function*(){yield this.questsService.deleteQuest(t)})}static{this.\u0275fac=function(r){return new(r||n)(B(Va))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-quests"]],decls:18,vars:5,consts:[[3,"searchChange"],[1,"create-form",3,"formGroup"],["type","text","formControlName","title","placeholder","Title"],[1,"error"],["formControlName","description","placeholder","Description"],["type","number","formControlName","xp","placeholder","XP"],["type","button",1,"create-btn",3,"click","disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"p-4","bg-gray-800","text-white","rounded-xl","shadow","hover:bg-gray-700","transition","cursor-pointer",3,"routerLink"],[1,"text-xl","font-bold"],[1,"mt-2","bg-red-500","hover:bg-red-600","text-white","px-3","py-1","rounded",3,"click"]],template:function(r,i){if(r&1&&(F(0,"h2"),L(1,"Available Quests"),O(),F(2,"p"),L(3),O(),F(4,"app-search",0),pe("searchChange",function(s){return i.onSearchChange(s)}),O(),F(5,"div",1)(6,"h3"),L(7,"Create New Quest"),O(),ke(8,"input",2),We(9,H4,2,0,"p",3),ke(10,"textarea",4)(11,"input",5),F(12,"button",6),pe("click",function(){return i.createQuest()}),L(13," Create Quest "),O()(),F(14,"div",7),jt(15,q4,11,6,"div",8,$4),We(17,z4,2,0,"p"),O()),r&2){let o;U(3),ft("Total quests: ",i.questsService.quests().length),U(2),Se("formGroup",i.questForm),U(4),Ke((o=i.questForm.get("title"))!=null&&o.invalid&&((o=i.questForm.get("title"))!=null&&o.touched)?9:-1),U(3),Se("disabled",i.questForm.invalid),U(3),Ut(i.filteredQuests()),U(2),Ke(i.filteredQuests().length?-1:17)}},dependencies:[Us,fr,gr,pr,yu,_n,Di,jr,Vr,oa],styles:["h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;color:#222}p[_ngcontent-%COMP%]{font-size:1rem;color:#000;margin-bottom:1rem}button[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;border:none;transition:background .2s ease}button.bg-green-500[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff}button.bg-green-500[_ngcontent-%COMP%]:hover{background-color:#16a34a}button.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}button.bg-red-500[_ngcontent-%COMP%]:hover{background-color:#b91c1c}button.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem}@media(min-width:640px){.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.lg\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}div[p-4][_ngcontent-%COMP%]{padding:1rem}div.bg-gray-800[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#fff;box-shadow:0 4px 10px #0003;transition:transform .2s ease,background .2s ease}div.bg-gray-800[_ngcontent-%COMP%]:hover{background-color:#374151;transform:translateY(-3px)}h3.text-xl[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:.5rem}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}div.bg-gray-800[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.25rem .5rem;font-size:.9rem}.create-form[_ngcontent-%COMP%]{background:#1f2937;padding:20px;border-radius:12px;margin-bottom:24px;color:#fff;box-shadow:0 4px 12px #0000004d}.create-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:12px;font-weight:600}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:#111827;border:1px solid #374151;padding:10px;border-radius:8px;color:#fff;margin-bottom:12px;font-size:.95rem;transition:border .2s,background .2s}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#0f172a;outline:none}.create-btn[_ngcontent-%COMP%]{width:100%;background:#10b981;padding:10px;border-radius:8px;font-weight:600;transition:.2s;color:#fff}.create-btn[_ngcontent-%COMP%]:disabled{background:#374151;color:#9ca3af;cursor:not-allowed}.create-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669}.error[_ngcontent-%COMP%]{font-size:.85rem;color:#f87171;margin-top:-8px;margin-bottom:12px}"]})}}return n})();function G4(n,e){if(n&1&&(Ln(0,"p")(1,"strong"),L(2,"Difficulty:"),Qt(),L(3),Qt()),n&2){let t=ve(2);U(3),ft(" ",t.quest.difficulty)}}function W4(n,e){if(n&1&&(Ln(0,"div",0)(1,"h2"),L(2),Qt(),Ln(3,"p"),L(4),Qt(),Ln(5,"p")(6,"strong"),L(7,"XP:"),Qt(),L(8),Qt(),We(9,G4,4,1,"p"),Qt()),n&2){let t=ve();U(2),St(t.quest.title),U(2),St(t.quest.description),U(4),ft(" ",t.quest.xp),U(),Ke(t.quest.difficulty?9:-1)}}function K4(n,e){n&1&&(Ln(0,"p"),L(1,"Quest sa nena\u0161iel."),Qt())}var KM=(()=>{class n{constructor(t,r){this.route=t,this.questsService=r}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");this.quest=this.questsService.getQuestById(t??"")}static{this.\u0275fac=function(r){return new(r||n)(B(At),B(Va))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-quest-detail"]],decls:2,vars:1,consts:[[1,"quest-detail"]],template:function(r,i){r&1&&We(0,W4,10,4,"div",0)(1,K4,2,0,"p"),r&2&&Ke(i.quest?0:1)},styles:[".quest-detail[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:1rem;box-shadow:0 4px 12px #00000026;max-width:600px;margin:2rem auto;transition:transform .2s ease,box-shadow .2s ease}.quest-detail[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0003}.quest-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:1rem;text-align:center}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#4b5563;margin-bottom:.75rem;line-height:1.5}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#111827}p[_ngcontent-%COMP%]{font-size:1rem;color:#ef4444;text-align:center;margin-top:2rem}"]})}}return n})();var es=[{level:1,xpRequired:0,title:"Novice"},{level:2,xpRequired:100,title:"Apprentice"},{level:3,xpRequired:300,title:"Adept"},{level:4,xpRequired:600,title:"Expert"},{level:5,xpRequired:1e3,title:"Master"},{level:6,xpRequired:2e3,title:"Grandmaster"},{level:7,xpRequired:3500,title:"Legend"},{level:8,xpRequired:5500,title:"Mythic"},{level:9,xpRequired:8e3,title:"Immortal"},{level:10,xpRequired:12e3,title:"Eternal"}];function ts(n){let e=es[0],t;for(let i=0;i<es.length;i++)n>=es[i].xpRequired&&(e=es[i],t=es[i+1]);let r=0;if(t){let i=e.xpRequired,o=t.xpRequired;r=(n-i)/(o-i)*100}else r=100;return{level:e,nextLevel:t,progress:r}}var Cr=(()=>{class n{constructor(){this._clans=Re([{id:1,name:"Warriors",description:"Strong and proud.",capacity:5,memberIds:[]},{id:2,name:"Rangers",description:"Stealth and speed.",capacity:4,memberIds:[]}],{})}getAll(){return this._clans()}getById(t){return this._clans().find(r=>r.id===t)}addClan(t){t.memberIds||(t.memberIds=[]),this._clans.update(r=>[...r,t])}removeClan(t){this._clans.update(r=>r.filter(i=>i.id!==t))}addPlayerToClan(t,r){let i=this.getById(t);return!i||(i.memberIds||(i.memberIds=[]),i.memberIds.includes(r))||i.memberIds.length>=i.capacity?!1:(i.memberIds.push(r),this._clans.update(o=>[...o]),!0)}removePlayerFromClan(t,r){let i=this.getById(t);if(!i||!i.memberIds)return!1;let o=i.memberIds.length;return i.memberIds=i.memberIds.filter(s=>s!==r),i.memberIds.length===o?!1:(this._clans.update(s=>[...s]),!0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Fi=(()=>{class n{constructor(t){this.clansService=t,this._players=Re([{id:1,nickname:"Alice",xp:0,activeQuests:[],completedQuests:[]},{id:2,nickname:"Bob",xp:0,activeQuests:[],completedQuests:[]},{id:3,nickname:"Cara",xp:0,activeQuests:[],completedQuests:[]}],{})}getAll(){return this._players()}getPlayerById(t){return this._players().find(r=>r.id===t)}addPlayer(t){this._players.update(r=>[...r,t])}removePlayer(t){this.clansService.getAll().forEach(r=>{r.memberIds?.includes(t)&&(r.memberIds=r.memberIds.filter(i=>i!==t))}),this._players.update(r=>r.filter(i=>i.id!==t))}addQuest(t,r){this._players.update(i=>i.map(o=>o.id!==t||(o.activeQuests??[]).some(a=>a.id===r.id)?o:W(R({},o),{activeQuests:[...o.activeQuests??[],r]})))}removeQuest(t,r){this._players.update(i=>i.map(o=>o.id!==t?o:W(R({},o),{activeQuests:(o.activeQuests??[]).filter(s=>s.id!==r),completedQuests:(o.completedQuests??[]).filter(s=>s.id!==r)})))}completeQuest(t,r){this._players.update(i=>i.map(o=>{if(o.id!==t)return o;let s=(o.activeQuests??[]).findIndex(h=>h.id===r);if(s===-1)return o;let a=o.activeQuests[s],u=o.activeQuests.filter((h,p)=>p!==s),l=[...o.completedQuests??[],a];return W(R({},o),{activeQuests:u,completedQuests:l})}))}reopenQuest(t,r){this._players.update(i=>i.map(o=>{if(o.id!==t)return o;let s=(o.completedQuests??[]).findIndex(h=>h.id===r);if(s===-1)return o;let a=o.completedQuests[s],u=o.completedQuests.filter((h,p)=>p!==s),l=[...o.activeQuests??[],a];return W(R({},o),{activeQuests:l,completedQuests:u})}))}setPlayerClan(t,r){this._players.update(i=>i.map(o=>o.id===t?W(R({},o),{clanId:r}):o))}static{this.\u0275fac=function(r){return new(r||n)(Z(Cr))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Q4=(n,e)=>e.title,Y4=(n,e)=>e.id;function J4(n,e){n&1&&(F(0,"div",3),L(1," Nickname must have at least 8 characters. "),O())}function Z4(n,e){if(n&1&&(F(0,"option",8),L(1),O()),n&2){let t=e.$implicit;Se("ngValue",t.title),U(),ft(" ",t.title," ")}}function X4(n,e){if(n&1){let t=Bt();F(0,"li")(1,"div",11)(2,"span"),L(3),O(),F(4,"span"),L(5),O(),F(6,"div",12),ke(7,"div",13),O(),F(8,"div",14)(9,"button",15),pe("click",function(){let i=Be(t).$implicit,o=ve();return $e(o.goToDetails(i.id))}),L(10,"Details"),O(),F(11,"button",16),pe("click",function(){let i=Be(t).$implicit,o=ve();return $e(o.removePlayer(i.id))}),L(12,"Remove"),O()()()()}if(n&2){let t=e.$implicit,r=ve();U(3),cr(" ",t.nickname," - ",r.getPlayerLevelForPlayer(t).level.title," (Level ",r.getPlayerLevelForPlayer(t).level.level,") "),U(2),ft("- Clan: ",r.getClanName(t)),U(2),Vs("width",r.getPlayerLevelForPlayer(t).progress,"%")}}function eq(n,e){n&1&&(F(0,"li"),L(1,"No players found."),O())}var QM=(()=>{class n{constructor(t,r,i){this.playerService=t,this.clansService=r,this.router=i,this.players=Re([],{}),this.search=Re("",{}),this.playerLevels=es,this.playerForm=new $n({nickname:new Ct("",{validators:[gt.required,gt.minLength(8)]})}),this.filterForm=new $n({levelTitle:new Ct(null)}),this.filteredPlayers=yn(()=>{let o=this.filterForm.controls.levelTitle.value,s=this.search().toLowerCase();return this.players().filter(a=>{let u=!o||ts(a.xp??0).level.title===o,l=!s||a.nickname.toLowerCase().startsWith(s);return u&&l})},{}),this.refreshPlayers()}refreshPlayers(){this.players.set(this.playerService.getAll())}onSearchChange(t){this.search.set(t)}getPlayerLevelForPlayer(t){return ts(t.xp??0)}getClanName(t){if(!t.clanId)return"-";let r=this.clansService.getById(t.clanId);return r?r.name:"-"}createPlayer(){if(this.playerForm.invalid){this.playerForm.markAllAsTouched();return}let t=this.playerForm.controls.nickname.value,r={id:Date.now(),nickname:t,xp:0,activeQuests:[],completedQuests:[]};this.playerService.addPlayer(r),this.playerForm.reset(),this.refreshPlayers()}removePlayer(t){this.playerService.removePlayer(t),this.refreshPlayers()}goToDetails(t){this.router.navigate(["/players",t])}static{this.\u0275fac=function(r){return new(r||n)(B(Fi),B(Cr),B(pt))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-players"]],decls:26,vars:6,consts:[[1,"player-form"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Nickname (min 8 chars)","formControlName","nickname"],[1,"error"],["type","submit",1,"create-btn",3,"disabled"],[1,"filter-form"],[3,"formGroup"],["formControlName","levelTitle"],[3,"ngValue"],[3,"searchChange"],[1,"player-list"],[1,"player-card"],[1,"progress-bar"],[1,"progress"],[1,"actions"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"h3"),L(2,"Create New Player"),O(),F(3,"form",1),pe("ngSubmit",function(){return i.createPlayer()}),ke(4,"input",2),We(5,J4,2,0,"div",3),F(6,"button",4),L(7," Create Player "),O()()(),F(8,"div",5)(9,"h3"),L(10,"Filter by Level"),O(),F(11,"form",6)(12,"select",7)(13,"option",8),L(14,"All Levels"),O(),jt(15,Z4,2,2,"option",8,Q4),O()(),F(17,"h3"),L(18,"Search by Nickname"),O(),F(19,"app-search",9),pe("searchChange",function(s){return i.onSearchChange(s)}),O()(),F(20,"h2"),L(21,"Players"),O(),F(22,"ul",10),jt(23,X4,13,6,"li",null,Y4),We(25,eq,2,0,"li"),O()),r&2&&(U(3),Se("formGroup",i.playerForm),U(2),Ke(i.playerForm.controls.nickname.invalid&&i.playerForm.controls.nickname.touched?5:-1),U(),Se("disabled",i.playerForm.invalid),U(5),Se("formGroup",i.filterForm),U(2),Se("ngValue",null),U(2),Ut(i.playerLevels),U(8),Ut(i.filteredPlayers()),U(2),Ke(i.filteredPlayers().length?-1:25))},dependencies:[gr,ta,na,ra,pr,Ci,_n,Di,jr,Vr,oa],styles:[".player-form[_ngcontent-%COMP%]{background:#1f2937;padding:20px;margin-bottom:20px;border-radius:12px;color:#fff;box-shadow:0 4px 12px #0000004d}.player-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:12px;font-size:1.3rem;font-weight:600}.player-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#111827;border:1px solid #374151;padding:10px;color:#fff;border-radius:8px;margin-bottom:12px}.player-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none}.create-btn[_ngcontent-%COMP%]{width:100%;background:#10b981;padding:10px;border-radius:8px;font-weight:600;transition:.2s;color:#fff}.create-btn[_ngcontent-%COMP%]:disabled{background:#374151;color:#9ca3af}.create-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669}.error[_ngcontent-%COMP%]{color:#f87171;font-size:.85rem;margin-top:-8px;margin-bottom:10px}.player-list[_ngcontent-%COMP%]{list-style:none;padding:0}.player-card[_ngcontent-%COMP%]{background:#1f2937;padding:15px;margin-bottom:10px;border-radius:10px;display:flex;flex-direction:column;color:#fff}.actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:10px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3b82f6;padding:6px 10px;border-radius:6px;color:#fff;border:none}.actions[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{background:#ef4444}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.85}"]})}}return n})();var YM=n=>["/quests",n],pw=(n,e)=>e.id;function tq(n,e){if(n&1){let t=Bt();F(0,"span",6),pe("click",function(){Be(t);let i=ve(2);return $e(i.goToClan())}),L(1),O()}if(n&2){let t=ve(2);U(),St(t.clan.name)}}function nq(n,e){n&1&&(F(0,"span"),L(1,"-"),O())}function rq(n,e){if(n&1&&(F(0,"p"),L(1),O()),n&2){let t=ve(2);U(),ft(" XP do \u010Fal\u0161ieho levelu: ",((t.levelInfo==null||t.levelInfo.nextLevel==null?null:t.levelInfo.nextLevel.xpRequired)??0)-t.player.xp," ")}}function iq(n,e){if(n&1){let t=Bt();F(0,"li")(1,"a",7),L(2),O(),L(3),F(4,"button",5),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.completeQuest(i.id))}),L(5,"Ozna\u010Di\u0165 dokon\u010Den\xFD"),O(),F(6,"button",5),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.removeQuest(i.id))}),L(7,"Odstr\xE1ni\u0165"),O()()}if(n&2){let t=e.$implicit;U(),Se("routerLink",js(3,YM,t.id)),U(),St(t.title),U(),ft(" (XP: ",t.xp,") ")}}function oq(n,e){n&1&&(F(0,"li"),L(1,"\u017Diadne akt\xEDvne questy"),O())}function sq(n,e){if(n&1){let t=Bt();F(0,"li")(1,"a",7),L(2),O(),L(3),F(4,"button",5),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.reopenQuest(i.id))}),L(5,"Ozna\u010Di\u0165 akt\xEDvny"),O(),F(6,"button",5),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.removeQuest(i.id))}),L(7,"Odstr\xE1ni\u0165"),O()()}if(n&2){let t=e.$implicit;U(),Se("routerLink",js(3,YM,t.id)),U(),St(t.title),U(),ft(" (XP: ",t.xp,") ")}}function aq(n,e){n&1&&(F(0,"li"),L(1,"\u017Diadne dokon\u010Den\xE9 questy"),O())}function cq(n,e){if(n&1&&(F(0,"option",4),L(1),O()),n&2){let t=e.$implicit;Se("ngValue",t.id),U(),St(t.title)}}function uq(n,e){if(n&1){let t=Bt();F(0,"h2"),L(1),O(),F(2,"div"),L(3," Clan: "),We(4,tq,2,1,"span",0)(5,nq,2,0,"span"),O(),F(6,"h3"),L(7),O(),F(8,"div",1),ke(9,"div",2),O(),We(10,rq,2,1,"p"),F(11,"h3"),L(12,"Akt\xEDvne questy"),O(),F(13,"ul"),jt(14,iq,8,5,"li",null,pw),We(16,oq,2,0,"li"),O(),F(17,"h3"),L(18,"Dokon\u010Den\xE9 questy"),O(),F(19,"ul"),jt(20,sq,8,5,"li",null,pw),We(22,aq,2,0,"li"),O(),F(23,"h4"),L(24,"Prida\u0165 nov\xFD quest"),O(),F(25,"select",3),oh("ngModelChange",function(i){Be(t);let o=ve();return Xy(o.selectedQuestId,i)||(o.selectedQuestId=i),$e(i)}),F(26,"option",4),L(27,"-- Vyber quest --"),O(),jt(28,cq,2,2,"option",4,pw),O(),F(30,"button",5),pe("click",function(){Be(t);let i=ve();return $e(i.addQuest())}),L(31,"Prida\u0165 quest"),O()}if(n&2){let t=ve();U(),St(t.player.nickname),U(3),Ke(t.clan?4:5),U(3),rh(" Level: ",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.title," (",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.level,") "),U(2),Vs("width",t.levelInfo==null?null:t.levelInfo.progress,"%"),U(),Ke(t.levelInfo!=null&&t.levelInfo.nextLevel?10:-1),U(4),Ut(t.player.activeQuests),U(2),Ke(t.player.activeQuests!=null&&t.player.activeQuests.length?-1:16),U(4),Ut(t.player.completedQuests),U(2),Ke(t.player.completedQuests!=null&&t.player.completedQuests.length?-1:22),U(3),ih("ngModel",t.selectedQuestId),U(),Se("ngValue",void 0),U(2),Ut(t.allQuests)}}var JM=(()=>{class n{constructor(t,r,i,o,s){this.route=t,this.router=r,this.playerService=i,this.clansService=o,this.questsService=s,this.allQuests=[]}ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"));this.player=this.playerService.getPlayerById(t),this.player&&(this.player.clanId&&(this.clan=this.clansService.getById(this.player.clanId)),this.allQuests=this.questsService.quests(),this.updateLevel())}updateLevel(){if(!this.player)return;let t=(this.player.completedQuests??[]).reduce((r,i)=>r+(i.xp??0),0);this.player.xp=t,this.levelInfo=ts(t)}addQuest(){if(!this.player||!this.selectedQuestId)return;let t=this.questsService.getQuestById(this.selectedQuestId);if(!t||(this.player.activeQuests??[]).some(i=>i.id===this.selectedQuestId))return;let r={id:t.id,title:t.title,description:t.description,xp:t.xp};this.playerService.addQuest(this.player.id,r),this.refreshPlayer(),this.selectedQuestId=void 0}removeQuest(t){this.player&&(this.playerService.removeQuest(this.player.id,t),this.refreshPlayer())}completeQuest(t){this.player&&(this.playerService.completeQuest(this.player.id,t),this.refreshPlayer())}reopenQuest(t){this.player&&(this.playerService.reopenQuest(this.player.id,t),this.refreshPlayer())}goToClan(){this.clan&&this.router.navigate(["/clan",this.clan.id])}refreshPlayer(){this.player&&(this.player=this.playerService.getPlayerById(this.player.id),this.updateLevel())}static{this.\u0275fac=function(r){return new(r||n)(B(At),B(pt),B(Fi),B(Cr),B(Va))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-player-detail"]],decls:2,vars:1,consts:[[1,"clan-link"],[1,"progress-bar"],[1,"progress"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"click"],[1,"clan-link",3,"click"],[3,"routerLink"]],template:function(r,i){r&1&&(F(0,"div"),We(1,uq,32,11),O()),r&2&&(U(),Ke(i.player?1:-1))},dependencies:[Us,aA,na,ra,Ci,_n,t_,Wv,fr],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}.player-detail[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:1rem;padding:2rem;box-shadow:0 4px 12px #00000014}.player-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem;margin-top:1.5rem;margin-bottom:.5rem}.clan-link[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600;cursor:pointer;text-decoration:underline;transition:color .2s}.clan-link[_ngcontent-%COMP%]:hover{color:#2563eb}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;padding:.75rem 1rem;border-radius:.75rem;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 6px #0000000d;transition:transform .2s,box-shadow .2s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#111827;text-decoration:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.3rem .6rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;font-size:1rem;margin-right:.5rem;min-width:200px}"]})}}return n})();var lq=(n,e)=>e.id;function dq(n,e){n&1&&(F(0,"div",3),L(1," Name must have at least 8 characters. "),O())}function hq(n,e){n&1&&(F(0,"div",3),L(1," Capacity must be at least 1. "),O())}function fq(n,e){if(n&1){let t=Bt();F(0,"div",8)(1,"div",9)(2,"div",10),L(3),O(),F(4,"div",11),L(5),O()(),F(6,"div")(7,"button",12),pe("click",function(){let i=Be(t).$implicit,o=ve();return $e(o.openDetail(i.id))}),L(8,"Detail"),O(),F(9,"button",13),pe("click",function(){let i=Be(t).$implicit,o=ve();return $e(o.deleteClan(i.id))}),L(10,"Delete"),O()()()}if(n&2){let t=e.$implicit;U(3),cr(" ",t.name," (",t.memberIds==null?null:t.memberIds.length,"/",t.capacity,") "),U(2),ft(" ",t.description," ")}}var ZM=(()=>{class n{constructor(t,r,i){this.clansService=t,this.playerService=r,this.router=i,this.clans=Re([],{}),this.search=Re("",{}),this.filteredClans=yn(()=>{let o=this.search().toLowerCase();return this.clans().filter(s=>s.name.toLowerCase().startsWith(o))},{}),this.clanForm=new $n({name:new Ct("",{validators:[gt.required,gt.minLength(8)]}),description:new Ct(""),capacity:new Ct(5,{validators:[gt.required,gt.min(1)]})}),this.refresh()}refresh(){this.clans.set(this.clansService.getAll())}createClan(){if(this.clanForm.invalid){this.clanForm.markAllAsTouched();return}let t=this.clanForm.getRawValue(),r={id:Date.now(),name:t.name,description:t.description,capacity:t.capacity,memberIds:[]};this.clansService.addClan(r),this.clanForm.reset({capacity:5}),this.refresh()}deleteClan(t){let r=this.clansService.getById(t);r&&confirm(`Delete clan "${r.name}"?`)&&(this.clansService.removeClan(t),this.playerService.getAll().forEach(i=>{i.clanId===t&&this.playerService.setPlayerClan(i.id,void 0)}),this.refresh())}openDetail(t){this.router.navigate(["/clan",t])}onSearchChange(t){this.search.set(t)}static{this.\u0275fac=function(r){return new(r||n)(B(Cr),B(Fi),B(pt))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-clans"]],decls:23,vars:3,consts:[[1,"clan-page"],[1,"form-card",3,"ngSubmit","formGroup"],["formControlName","name"],[1,"error"],["formControlName","description"],["type","number","formControlName","capacity"],["type","submit"],[3,"searchChange"],[1,"clan-card"],[1,"clan-info"],[1,"title"],[1,"small"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"h2"),L(2,"Create New Clan"),O(),F(3,"form",1),pe("ngSubmit",function(){return i.createClan()}),F(4,"label"),L(5," Name: "),ke(6,"input",2),O(),We(7,dq,2,0,"div",3),F(8,"label"),L(9," Description: "),ke(10,"textarea",4),O(),F(11,"label"),L(12," Capacity: "),ke(13,"input",5),O(),We(14,hq,2,0,"div",3),F(15,"button",6),L(16,"Create Clan"),O()(),ke(17,"hr"),F(18,"h2"),L(19,"Clans"),O(),F(20,"app-search",7),pe("searchChange",function(s){return i.onSearchChange(s)}),O(),jt(21,fq,11,4,"div",8,lq),O()),r&2&&(U(3),Se("formGroup",i.clanForm),U(4),Ke(i.clanForm.controls.name.invalid&&i.clanForm.controls.name.touched?7:-1),U(7),Ke(i.clanForm.controls.capacity.invalid&&i.clanForm.controls.capacity.touched?14:-1),U(7),Ut(i.filteredClans()))},dependencies:[gr,ta,pr,yu,_n,Di,jr,Vr,oa],styles:[".clan-page[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:20px;font-family:Arial,sans-serif}.form-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background:#fafafa;padding:15px;border-radius:8px;margin-bottom:20px;border:1px solid #ddd}.form-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:6px;border-radius:4px;border:1px solid #ccc}.form-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;padding:6px 14px}.error[_ngcontent-%COMP%]{color:#c70000;font-size:13px}.clan-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border:1px solid #ddd;padding:10px 12px;border-radius:8px;margin-bottom:10px}.clan-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:16px}button.danger[_ngcontent-%COMP%]{background:#d9534f;color:#fff;border:none;padding:6px 10px;border-radius:4px}"]})}}return n})();var pq=(n,e)=>e.id;function gq(n,e){if(n&1&&(F(0,"option",3),L(1),O()),n&2){let t=e.$implicit,r=ve(2);Se("ngValue",t.id),U(),cr(" ",t.nickname," (Level ",r.getPlayerLevelForPlayer(t).level.level," - ",r.getPlayerLevelForPlayer(t).level.title,") ")}}function mq(n,e){if(n&1){let t=Bt();F(0,"li")(1,"span",5),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.goToPlayerDetail(i))}),L(2),O(),ke(3,"progress",6),F(4,"button",7),pe("click",function(){let i=Be(t).$implicit,o=ve(2);return $e(o.removePlayer(i))}),L(5," Removererhgfgdf "),O()()}if(n&2){let t,r=e.$implicit,i=ve(2);U(2),cr(" ",((t=i.playerService.getPlayerById(r))==null?null:t.nickname)||"Unknown Player"," (Level ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)).level.level," - ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)).level.title,") "),U(),Se("value",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)).progress)}}function yq(n,e){if(n&1){let t=Bt();F(0,"h2"),L(1),O(),F(2,"p"),L(3),O(),F(4,"h3"),L(5,"Add Player"),O(),F(6,"form",0)(7,"select",1)(8,"option",2),L(9,"Select a player"),O(),jt(10,gq,2,4,"option",3,pq),O(),F(12,"button",4),pe("click",function(){Be(t);let i=ve();return $e(i.addPlayer())}),L(13,"Add"),O()(),F(14,"h3"),L(15,"Members"),O(),F(16,"ul"),jt(17,mq,6,4,"li",null,Ky),O()}if(n&2){let t=ve();U(),cr("",t.clan.name," (",t.clan.memberIds==null?null:t.clan.memberIds.length,"/",t.clan.capacity,")"),U(2),St(t.clan.description),U(3),Se("formGroup",t.addPlayerForm),U(2),Se("ngValue",null),U(2),Ut(t.availablePlayers),U(7),Ut(t.clan.memberIds)}}function vq(n,e){n&1&&(F(0,"p"),L(1,"Clan not found."),O())}var XM=(()=>{class n{constructor(t,r,i,o){this.route=t,this.clansService=r,this.playerService=i,this.router=o,this.availablePlayers=[],this.addPlayerForm=new $n({playerId:new Ct(null,gt.required)})}ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"));this.clan=this.clansService.getById(t),this.clan&&this.refreshAvailablePlayers()}refreshAvailablePlayers(){if(!this.clan)return;let t=this.playerService.getAll();this.availablePlayers=t.filter(r=>!this.clansService.getAll().some(i=>i.memberIds?.includes(r.id)))}addPlayer(){if(!this.clan)return;let t=this.addPlayerForm.value.playerId;if(t==null)return;this.clansService.addPlayerToClan(this.clan.id,t)?(this.playerService.setPlayerClan(t,this.clan.id),this.addPlayerForm.reset(),this.refreshAvailablePlayers()):alert("Cannot add player: either clan is full or player already in another clan.")}removePlayer(t){if(!this.clan)return;this.clansService.removePlayerFromClan(this.clan.id,t)&&(this.playerService.setPlayerClan(t,void 0),this.refreshAvailablePlayers())}goToPlayerDetail(t){this.router.navigate(["/players",t])}getPlayerLevelForPlayer(t){return ts(t.xp??0)}static{this.\u0275fac=function(r){return new(r||n)(B(At),B(Cr),B(Fi),B(pt))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-clan-detail"]],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","playerId"],["disabled","","selected","",3,"ngValue"],[3,"ngValue"],["type","button",3,"click"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],["max","100",3,"value"],[2,"margin-left","8px",3,"click"]],template:function(r,i){r&1&&We(0,yq,19,6)(1,vq,2,0,"p"),r&2&&Ke(i.clan?0:1)},dependencies:[gr,ta,na,ra,Ci,_n,Di,jr,Vr],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:1.5rem;margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#4b5563}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;margin-right:.5rem;font-size:.95rem}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.4rem .8rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button.add-btn[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;margin-left:.5rem}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;margin-top:.5rem}li[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:.6rem 1rem;margin-bottom:.5rem;border-radius:.75rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 4px #0000000d}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#2563eb}"]})}}return n})();var eP=[{path:"",component:x0},{path:"quests",component:WM},{path:"quests/:id",component:KM},{path:"players",component:QM},{path:"players/:id",component:JM},{path:"clan",component:ZM},{path:"clan/:id",component:XM}];var _q=()=>({exact:!0}),tP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"app-header"],[1,"menu"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/quests","routerLinkActive","active"],["routerLink","/clan","routerLinkActive","active"],["routerLink","/players","routerLinkActive","active"]],template:function(r,i){r&1&&(F(0,"header",0)(1,"h1"),L(2,"Quest OverFlow"),O(),F(3,"nav",1)(4,"a",2),L(5,"Home"),O(),F(6,"a",3),L(7,"Quests"),O(),F(8,"a",4),L(9,"Clans"),O(),F(10,"a",5),L(11,"Players"),O()()()),r&2&&(U(4),Se("routerLinkActiveOptions",ev(1,_q)))},dependencies:[fr,qv],styles:[".app-header[_ngcontent-%COMP%]{background-color:#282c34;color:#fff;padding:1rem;text-align:center;border-radius:8px}.menu[_ngcontent-%COMP%]{margin-top:.5rem}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 1rem;font-weight:700;transition:color .2s ease-in-out}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#61dafb}.menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{text-decoration:underline}"]})}}return n})();var nP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,i){r&1&&(ke(0,"app-header"),F(1,"main",0),ke(2,"router-outlet"),O())},dependencies:[su,tP],styles:["[_nghost-%COMP%]{--content-padding: 10px}header[_ngcontent-%COMP%]{display:block;height:60px;padding:var(--content-padding);box-shadow:0 5px 25px var(--shadow-color)}.content[_ngcontent-%COMP%]{padding:var(--content-padding)}"]})}}return n})();var Eq={apiKey:"AIzaSyBjdYRHO0xPvlBDBu9USu986ENcquO_Z4s",authDomain:"angular-b02e9.firebaseapp.com",projectId:"angular-b02e9",storageBucket:"angular-b02e9.firebasestorage.app",messagingSenderId:"411151949286",appId:"1:411151949286:web:103eb2a6522f85ddd3ca27",measurementId:"G-7P0XHYK2TY"};yv(nP,{providers:[uS({eventCoalescing:!0}),zv(eP),UA(()=>BA(Eq)),BM(()=>GM())]});
