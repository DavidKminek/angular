var $k=Object.defineProperty,Hk=Object.defineProperties;var qk=Object.getOwnPropertyDescriptors;var Xl=Object.getOwnPropertySymbols,zk=Object.getPrototypeOf,XC=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,Gk=Reflect.get;var ZC=(n,e,t)=>e in n?$k(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,M=(n,e)=>{for(var t in e||={})XC.call(e,t)&&ZC(n,t,e[t]);if(Xl)for(var t of Xl(e))eb.call(e,t)&&ZC(n,t,e[t]);return n},Y=(n,e)=>Hk(n,qk(e));var Xg=(n,e)=>{var t={};for(var r in n)XC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Xl)for(var r of Xl(n))e.indexOf(r)<0&&eb.call(n,r)&&(t[r]=n[r]);return t};var vi=(n,e,t)=>Gk(zk(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Mt=null,ed=!1,rm=1,Wk=null,jt=Symbol("SIGNAL");function Z(n){let e=Mt;return Mt=n,e}function nd(){return Mt}var Pc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xc(n){if(ed)throw new Error("");if(Mt===null)return;Mt.consumerOnSignalRead(n);let e=Mt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Mt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Mt.producers,t!==void 0&&t.producer===n)){Mt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Mt&&(!r||Qk(i,Mt)))return;let o=Ps(Mt),s={producer:n,consumer:Mt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Mt.producersTail=s,e!==void 0?e.nextProducer=s:Mt.producers=s,o&&ib(n,s)}function tb(){rm++}function im(n){if(!(Ps(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===rm)){if(!n.producerMustRecompute(n)&&!id(n)){nm(n);return}n.producerRecomputeValue(n),nm(n)}}function om(n){if(n.consumers===void 0)return;let e=ed;ed=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Kk(r)}}finally{ed=e}}function sm(){return Mt?.consumerAllowSignalWrites!==!1}function Kk(n){n.dirty=!0,om(n),n.consumerMarkedDirty?.(n)}function nm(n){n.dirty=!1,n.lastCleanEpoch=rm}function kc(n){return n&&nb(n),Z(n)}function nb(n){n.producersTail=void 0,n.recomputing=!0}function rd(n,e){Z(e),n&&rb(n)}function rb(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ps(n))do t=am(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function id(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(im(t),r!==t.version))return!0}return!1}function Oc(n){if(Ps(n)){let e=n.producers;for(;e!==void 0;)e=am(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function ib(n,e){let t=n.consumersTail,r=Ps(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)ib(i.producer,i)}function am(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ps(e)){let o=e.producers;for(;o!==void 0;)o=am(o)}return t}function Ps(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function cm(n){Wk?.(n)}function Qk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function um(n,e){return Object.is(n,e)}function od(n,e){let t=Object.create(Yk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(im(t),xc(t),t.value===td)throw t.error;return t.value};return r[jt]=t,cm(t),r}var em=Symbol("UNSET"),tm=Symbol("COMPUTING"),td=Symbol("ERRORED"),Yk=Y(M({},Pc),{value:em,dirty:!0,error:null,equal:um,kind:"computed",producerMustRecompute(n){return n.value===em||n.value===tm},producerRecomputeValue(n){if(n.value===tm)throw new Error("");let e=n.value;n.value=tm;let t=kc(n),r,i=!1;try{r=n.computation(),Z(null),i=e!==em&&e!==td&&r!==td&&n.equal(e,r)}catch(o){r=td,n.error=o}finally{rd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Jk(){throw new Error}var ob=Jk;function sb(n){ob(n)}function lm(n){ob=n}var Zk=null;function dm(n,e){let t=Object.create(sd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>ab(t);return r[jt]=t,cm(t),[r,s=>Fc(t,s),s=>cb(t,s)]}function ab(n){return xc(n),n.value}function Fc(n,e){sm()||sb(n),n.equal(n.value,e)||(n.value=e,Xk(n))}function cb(n,e){sm()||sb(n),Fc(n,e(n.value))}var sd=Y(M({},Pc),{equal:um,value:void 0,kind:"signal"});function Xk(n){n.version++,tb(),om(n),Zk?.(n)}function hm(n){let e=Z(null);try{return n()}finally{Z(e)}}function re(n){return typeof n=="function"}function xs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ad=xs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function _o(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof ad?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ub(o)}catch(s){e=e??[],s instanceof ad?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ad(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ub(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&_o(t,e)}remove(e){let{_finalizers:t}=this;t&&_o(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var fm=Je.EMPTY;function cd(n){return n instanceof Je||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function ub(n){re(n)?n():n.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ks={setTimeout(n,e,...t){let{delegate:r}=ks;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ks;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ud(n){ks.setTimeout(()=>{let{onUnhandledError:e}=kn;if(e)e(n);else throw n})}function Lc(){}var lb=pm("C",void 0,void 0);function db(n){return pm("E",void 0,n)}function hb(n){return pm("N",n,void 0)}function pm(n,e,t){return{kind:n,value:e,error:t}}var Eo=null;function Os(n){if(kn.useDeprecatedSynchronousErrorHandling){let e=!Eo;if(e&&(Eo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Eo;if(Eo=null,t)throw r}}else n()}function fb(n){kn.useDeprecatedSynchronousErrorHandling&&Eo&&(Eo.errorThrown=!0,Eo.error=n)}var Io=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cd(e)&&e.add(this)):this.destination=nO}static create(e,t,r){return new Fs(e,t,r)}next(e){this.isStopped?mm(hb(e),this):this._next(e)}error(e){this.isStopped?mm(db(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?mm(lb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eO=Function.prototype.bind;function gm(n,e){return eO.call(n,e)}var ym=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ld(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ld(r)}else ld(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ld(t)}}},Fs=class extends Io{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gm(e.next,o),error:e.error&&gm(e.error,o),complete:e.complete&&gm(e.complete,o)}):i=e}this.destination=new ym(i)}};function ld(n){kn.useDeprecatedSynchronousErrorHandling?fb(n):ud(n)}function tO(n){throw n}function mm(n,e){let{onStoppedNotification:t}=kn;t&&ks.setTimeout(()=>t(n,e))}var nO={closed:!0,next:Lc,error:tO,complete:Lc};var Ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function On(n){return n}function dd(...n){return vm(n)}function vm(n){return n.length===0?On:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=iO(t)?t:new Fs(t,r,i);return Os(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=pb(r),new r((i,o)=>{let s=new Fs({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ls](){return this}pipe(...t){return vm(t)(this)}toPromise(t){return t=pb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pb(n){var e;return(e=n??kn.Promise)!==null&&e!==void 0?e:Promise}function rO(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function iO(n){return n&&n instanceof Io||rO(n)&&cd(n)}function oO(n){return re(n?.lift)}function De(n){return e=>{if(oO(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(n,e,t,r,i){return new _m(n,e,t,r,i)}var _m=class extends Io{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var gb=xs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new hd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new gb}next(t){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Os(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?fm:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,_o(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new hd(e,t),n})(),hd=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:fm}};var St=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Em={now(){return(Em.delegate||Date).now()},delegate:void 0};var fd=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var Vc={setInterval(n,e,...t){let{delegate:r}=Vc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Vc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Vs=class extends fd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Vc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Vc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_o(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var js=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};js.now=Em.now;var Us=class extends js{constructor(e,t=js.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Im=new Us(Vs);var pd=class extends Vs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var gd=class extends Us{};var wm=new gd(pd);var Yt=new le(n=>n.complete());function mb(n){return n&&re(n.schedule)}function yb(n){return n[n.length-1]}function md(n){return re(yb(n))?n.pop():void 0}function _i(n){return mb(yb(n))?n.pop():void 0}function _b(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function vb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wo(n){return this instanceof wo?(this.v=n,this):new wo(n)}function Eb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(x){return new Promise(function(N,U){o.push([y,x,N,U])>1||u(y,x)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(x){g(o[0][3],x)}}function l(y){y.value instanceof wo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ib(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vb=="function"?vb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var yd=n=>n&&typeof n.length=="number"&&typeof n!="function";function vd(n){return re(n?.then)}function _d(n){return re(n[Ls])}function Ed(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Id(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wd=sO();function Dd(n){return re(n?.[wd])}function Cd(n){return Eb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wo(t.read());if(i)return yield wo(void 0);yield yield wo(r)}}finally{t.releaseLock()}})}function bd(n){return re(n?.getReader)}function tt(n){if(n instanceof le)return n;if(n!=null){if(_d(n))return aO(n);if(yd(n))return cO(n);if(vd(n))return uO(n);if(Ed(n))return wb(n);if(Dd(n))return lO(n);if(bd(n))return dO(n)}throw Id(n)}function aO(n){return new le(e=>{let t=n[Ls]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cO(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function uO(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ud)})}function lO(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wb(n){return new le(e=>{hO(n,e).catch(t=>e.error(t))})}function dO(n){return wb(Cd(n))}function hO(n,e){var t,r,i,o;return _b(this,void 0,void 0,function*(){try{for(t=Ib(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ei(n,e=0){return De((t,r)=>{t.subscribe(Ce(r,i=>Jt(r,n,()=>r.next(i),e),()=>Jt(r,n,()=>r.complete(),e),i=>Jt(r,n,()=>r.error(i),e)))})}function Ii(n,e=0){return De((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Db(n,e){return tt(n).pipe(Ii(e),Ei(e))}function Cb(n,e){return tt(n).pipe(Ii(e),Ei(e))}function bb(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Tb(n,e){return new le(t=>{let r;return Jt(t,e,()=>{r=n[wd](),Jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Td(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{Jt(t,e,()=>{let r=n[Symbol.asyncIterator]();Jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Sb(n,e){return Td(Cd(n),e)}function Ab(n,e){if(n!=null){if(_d(n))return Db(n,e);if(yd(n))return bb(n,e);if(vd(n))return Cb(n,e);if(Ed(n))return Td(n,e);if(Dd(n))return Tb(n,e);if(bd(n))return Sb(n,e)}throw Id(n)}function ke(n,e){return e?Ab(n,e):tt(n)}function ae(...n){let e=_i(n);return ke(n,e)}function Dm(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Sd(n){return!!n&&(n instanceof le||re(n.lift)&&re(n.subscribe))}var Do=xs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(n,e){return De((t,r)=>{let i=0;t.subscribe(Ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:fO}=Array;function pO(n,e){return fO(e)?n(...e):n(e)}function Ad(n){return ge(e=>pO(n,e))}var{isArray:gO}=Array,{getPrototypeOf:mO,prototype:yO,keys:vO}=Object;function Rd(n){if(n.length===1){let e=n[0];if(gO(e))return{args:e,keys:null};if(_O(e)){let t=vO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _O(n){return n&&typeof n=="object"&&mO(n)===yO}function Nd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Md(...n){let e=_i(n),t=md(n),{args:r,keys:i}=Rd(n);if(r.length===0)return ke([],e);let o=new le(EO(r,e,i?s=>Nd(i,s):On));return t?o.pipe(Ad(t)):o}function EO(n,e,t=On){return r=>{Rb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Rb(e,()=>{let l=ke(n[u],e),h=!1;l.subscribe(Ce(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Rb(n,e,t){n?Jt(t,n,e):e()}function Nb(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?S(x):u.push(x),S=x=>{o&&e.next(x),l++;let N=!1;tt(t(x,h++)).subscribe(Ce(e,U=>{i?.(U),o?y(U):e.next(U)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let U=u.shift();s?Jt(e,s,()=>S(U)):S(U)}g()}catch(U){e.error(U)}}))};return n.subscribe(Ce(e,y,()=>{p=!0,g()})),()=>{a?.()}}function At(n,e,t=1/0){return re(e)?At((r,i)=>ge((o,s)=>e(r,o,i,s))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),De((r,i)=>Nb(r,i,n,t)))}function wi(n=1/0){return At(On,n)}function Mb(){return wi(1)}function Bs(...n){return Mb()(ke(n,_i(n)))}function jc(n){return new le(e=>{tt(n()).subscribe(e)})}function Cm(...n){let e=md(n),{args:t,keys:r}=Rd(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;tt(t[h]).subscribe(Ce(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Nd(r,a):a),o.complete())}))}});return e?i.pipe(Ad(e)):i}function en(n,e){return De((t,r)=>{let i=0;t.subscribe(Ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function $s(n){return De((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ce(t,void 0,void 0,s=>{o=tt(n(s,$s(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Hs(n,e){return re(e)?At(n,e,1):At(n,1)}function bm(n){return De((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vr(n){return n<=0?()=>Yt:De((e,t)=>{let r=0;e.subscribe(Ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pb(n=IO){return De((e,t)=>{let r=!1;e.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IO(){return new Do}function Tm(n){return De((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?en((i,o)=>n(i,o,r)):On,Vr(1),t?bm(e):Pb(()=>new Do))}function Pd(n){return n<=0?()=>Yt:De((e,t)=>{let r=[];e.subscribe(Ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xd(...n){let e=_i(n);return De((t,r)=>{(e?Bs(n,t,e):Bs(n,t)).subscribe(r)})}function Fn(n,e){return De((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ce(r,u=>{i?.unsubscribe();let l=0,h=o++;tt(n(u,h)).subscribe(i=Ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Uc(n){return De((e,t)=>{tt(n).subscribe(Ce(t,()=>t.complete(),Lc)),!t.closed&&e.subscribe(t)})}function Ut(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ce(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):On}var Sm;function kd(){return Sm}function lr(n){let e=Sm;return Sm=n,e}var xb=Symbol("NotFound");function qs(n){return n===xb||n?.name==="\u0275NotFound"}var Di=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Hm=new Di("21.0.1");var jd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,t){super(bi(e,t)),this.code=e}};function CO(n){return`NG0${Math.abs(n)}`}function bi(n,e){return`${CO(n)}${e?": "+e:""}`}var Gc=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("")}function Vb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Br(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Br).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function qm(n,e){return n?e?`${n} ${e}`:n:e||""}var bO=be({__forward_ref__:be});function rn(n){return n.__forward_ref__=rn,n.toString=function(){return Br(this())},n}function Rt(n){return zm(n)?n():n}function zm(n){return typeof n=="function"&&n.hasOwnProperty(bO)&&n.__forward_ref__===rn}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function En(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wc(n){return TO(n,Ud)}function Gm(n){return Wc(n)!==null}function TO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function SO(n){let e=n?.[Ud]??null;return e||null}function Rm(n){return n&&n.hasOwnProperty(Fd)?n[Fd]:null}var Ud=be({\u0275prov:be}),Fd=be({\u0275inj:be}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Wm(n){return n&&!!n.\u0275providers}var Km=be({\u0275cmp:be}),Qm=be({\u0275dir:be}),Ym=be({\u0275pipe:be}),Jm=be({\u0275mod:be}),$c=be({\u0275fac:be}),Ro=be({__NG_ELEMENT_ID__:be}),kb=be({__NG_ENV_ID__:be});function hr(n){return typeof n=="string"?n:n==null?"":String(n)}function jb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hr(n)}var Ub=be({ngErrorCode:be}),AO=be({ngErrorMessage:be}),RO=be({ngTokenPath:be});function Zm(n,e){return Bb("",-200,e)}function Bd(n,e){throw new G(-201,!1)}function Bb(n,e,t){let r=new G(e,n);return r[Ub]=e,r[AO]=n,t&&(r[RO]=t),r}function NO(n){return n[Ub]}var Nm;function $b(){return Nm}function tn(n){let e=Nm;return Nm=n,e}function Xm(n,e,t){let r=Wc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Bd(n,"Injector")}var MO={},Co=MO,Mm="__NG_DI_FLAG__",Pm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=bo(t)||0;try{return this.injector.get(e,r&8?null:Co,r)}catch(i){if(qs(i))return i;throw i}}};function PO(n,e=0){let t=kd();if(t===void 0)throw new G(-203,!1);if(t===null)return Xm(n,void 0,e);{let r=xO(e),i=t.retrieve(n,r);if(qs(i)){if(r.optional)return null;throw i}return i}}function W(n,e=0){return($b()||PO)(Rt(n),e)}function R(n,e){return W(n,bo(e))}function bo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function xm(n){let e=[];for(let t=0;t<n.length;t++){let r=Rt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=kO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function Hb(n,e){return n[Mm]=e,n.prototype[Mm]=e,n}function kO(n){return n[Mm]}function To(n,e){let t=n.hasOwnProperty($c);return t?n[$c]:null}function qb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function zb(n){return n.flat(Number.POSITIVE_INFINITY)}function $d(n,e){n.forEach(t=>Array.isArray(t)?$d(t,e):e(t))}function ey(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Gb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Wb(n,e,t){let r=Gs(n,e);return r>=0?n[r|1]=t:(r=~r,Gb(n,r,e,t)),r}function Hd(n,e){let t=Gs(n,e);if(t>=0)return n[t|1]}function Gs(n,e){return OO(n,e,1)}function OO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ti={},nn=[],Si=new q(""),ty=new q("",-1),ny=new q(""),Hc=class{get(e,t=Co){if(t===Co){let i=Bb("",-201);throw i.name="\u0275NotFound",i}return t}};function ry(n){return n[Jm]||null}function Hr(n){return n[Km]||null}function iy(n){return n[Qm]||null}function Kb(n){return n[Ym]||null}function on(n){return{\u0275providers:n}}function Qb(...n){return{\u0275providers:oy(!0,n),\u0275fromNgModule:!0}}function oy(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return $d(e,s=>{let a=s;Ld(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Yb(i,o),t}function Yb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];sy(i,o=>{e(o,r)})}}function Ld(n,e,t,r){if(n=Rt(n),!n)return!1;let i=null,o=Rm(n),s=!o&&Hr(n);if(!o&&!s){let u=n.ngModule;if(o=Rm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ld(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{$d(o.imports,h=>{Ld(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Yb(l,e)}if(!a){let l=To(i)||(()=>new i);e({provide:i,useFactory:l,deps:nn},i),e({provide:ny,useValue:i,multi:!0},i),e({provide:Si,useValue:()=>W(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;sy(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function sy(n,e){for(let t of n)Wm(t)&&(t=t.\u0275providers),Array.isArray(t)?sy(t,e):e(t)}var FO=be({provide:String,useValue:be});function Jb(n){return n!==null&&typeof n=="object"&&FO in n}function LO(n){return!!(n&&n.useExisting)}function VO(n){return!!(n&&n.useFactory)}function So(n){return typeof n=="function"}function Zb(n){return!!n.useClass}var Qc=new q(""),Od={},Ob={},Am;function Yc(){return Am===void 0&&(Am=new Hc),Am}var nt=class{},Ao=class extends nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Om(e,s=>this.processProvider(s)),this.records.set(ty,zs(void 0,this)),i.has("environment")&&this.records.set(nt,zs(void 0,this));let o=this.records.get(Qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ny,nn,{self:!0}))}retrieve(e,t){let r=bo(t)||0;try{return this.get(e,Co,r)}catch(i){if(qs(i))return i;throw i}}destroy(){Bc(this),this._destroyed=!0;let e=Z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(e)}}onDestroy(e){return Bc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Bc(this);let t=lr(this),r=tn(void 0),i;try{return e()}finally{lr(t),tn(r)}}get(e,t=Co,r){if(Bc(this),e.hasOwnProperty(kb))return e[kb](this);let i=bo(r),o,s=lr(this),a=tn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=HO(e)&&Wc(e);h&&this.injectableDefInScope(h)?l=zs(km(e),Od):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Yc():this.parent;return t=i&8&&t===Co?null:t,u.get(e,t)}catch(u){let l=NO(u);throw l===-200||l===-201?new G(l,null):u}finally{tn(a),lr(s)}}resolveInjectorInitializers(){let e=Z(null),t=lr(this),r=tn(void 0),i;try{let o=this.get(Si,nn,{self:!0});for(let s of o)s()}finally{lr(t),tn(r),Z(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Br(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Rt(e);let t=So(e)?e:Rt(e&&e.provide),r=UO(e);if(!So(e)&&e.multi===!0){let i=this.records.get(t);i||(i=zs(void 0,Od,!0),i.factory=()=>xm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Z(null);try{if(t.value===Ob)throw Zm(Br(e));return t.value===Od&&(t.value=Ob,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&$O(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Rt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function km(n){let e=Wc(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof q)throw new G(204,!1);if(n instanceof Function)return jO(n);throw new G(204,!1)}function jO(n){if(n.length>0)throw new G(204,!1);let t=SO(n);return t!==null?()=>t.factory(n):()=>new n}function UO(n){if(Jb(n))return zs(void 0,n.useValue);{let e=ay(n);return zs(e,Od)}}function ay(n,e,t){let r;if(So(n)){let i=Rt(n);return To(i)||km(i)}else if(Jb(n))r=()=>Rt(n.useValue);else if(VO(n))r=()=>n.useFactory(...xm(n.deps||[]));else if(LO(n))r=(i,o)=>W(Rt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Rt(n&&(n.useClass||n.provide));if(BO(n))r=()=>new i(...xm(n.deps));else return To(i)||km(i)}return r}function Bc(n){if(n.destroyed)throw new G(205,!1)}function zs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function BO(n){return!!n.deps}function $O(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function HO(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Om(n,e){for(let t of n)Array.isArray(t)?Om(t,e):t&&Wm(t)?Om(t.\u0275providers,e):e(t)}function rt(n,e){let t;n instanceof Ao?(Bc(n),t=n):t=new Pm(n);let r,i=lr(t),o=tn(void 0);try{return e()}finally{lr(i),tn(o)}}function Xb(){return $b()!==void 0||kd()!=null}var Ln=0,K=1,ee=2,ft=3,In=4,wn=5,Ws=6,Ks=7,Ze=8,qr=9,fr=10,je=11,Qs=12,cy=13,No=14,sn=15,Ai=16,Mo=17,pr=18,Jc=19,uy=20,Ur=21,qd=22,Zc=23,an=24,Po=25,xo=26,it=27,eT=1,ly=6,Ri=7,Xc=8,ko=9,We=10;function gr(n){return Array.isArray(n)&&typeof n[eT]=="object"}function Vn(n){return Array.isArray(n)&&n[eT]===!0}function dy(n){return(n.flags&4)!==0}function Ni(n){return n.componentOffset>-1}function Ys(n){return(n.flags&1)===1}function mr(n){return!!n.template}function Js(n){return(n[ee]&512)!==0}function Oo(n){return(n[ee]&256)===256}var tT="svg",nT="math";function Dn(n){for(;Array.isArray(n);)n=n[Ln];return n}function hy(n,e){return Dn(e[n])}function jn(n,e){return Dn(e[n.index])}function eu(n,e){return n.data[e]}function rT(n,e){return n[e]}function Cn(n,e){let t=e[n];return gr(t)?t:t[Ln]}function iT(n){return(n[ee]&4)===4}function zd(n){return(n[ee]&128)===128}function oT(n){return Vn(n[ft])}function bn(n,e){return e==null?null:n[e]}function fy(n){n[Mo]=0}function py(n){n[ee]&1024||(n[ee]|=1024,zd(n)&&Zs(n))}function sT(n,e){for(;n>0;)e=e[No],n--;return e}function tu(n){return!!(n[ee]&9216||n[an]?.dirty)}function Gd(n){n[fr].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),tu(n)&&Zs(n)}function Zs(n){n[fr].changeDetectionScheduler?.notify(0);let e=Ci(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!zd(e)));)e=Ci(e)}function gy(n,e){if(Oo(n))throw new G(911,!1);n[Ur]===null&&(n[Ur]=[]),n[Ur].push(e)}function aT(n,e){if(n[Ur]===null)return;let t=n[Ur].indexOf(e);t!==-1&&n[Ur].splice(t,1)}function Ci(n){let e=n[ft];return Vn(e)?e[ft]:e}function my(n){return n[Ks]??=[]}function yy(n){return n.cleanup??=[]}function cT(n,e,t,r){let i=my(e);i.push(t),n.firstCreatePass&&yy(n).push(r,i.length-1)}var de={lFrame:IT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Fm=!1;function uT(){return de.lFrame.elementDepthCount}function lT(){de.lFrame.elementDepthCount++}function vy(){de.lFrame.elementDepthCount--}function Wd(){return de.bindingsEnabled}function dT(){return de.skipHydrationRootTNode!==null}function _y(n){return de.skipHydrationRootTNode===n}function Ey(){de.skipHydrationRootTNode=null}function se(){return de.lFrame.lView}function pt(){return de.lFrame.tView}function Me(n){return de.lFrame.contextLView=n,n[Ze]}function Pe(n){return de.lFrame.contextLView=null,n}function Et(){let n=Iy();for(;n!==null&&n.type===64;)n=n.parent;return n}function Iy(){return de.lFrame.currentTNode}function hT(){let n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xs(n,e){let t=de.lFrame;t.currentTNode=n,t.isParent=e}function wy(){return de.lFrame.isParent}function fT(){de.lFrame.isParent=!1}function pT(){return de.lFrame.contextLView}function Dy(){return Fm}function Cy(n){let e=Fm;return Fm=n,e}function by(){let n=de.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ty(){return de.lFrame.bindingIndex}function gT(n){return de.lFrame.bindingIndex=n}function Fo(){return de.lFrame.bindingIndex++}function Kd(n){let e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mT(){return de.lFrame.inI18n}function yT(n,e){let t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qd(e)}function vT(){return de.lFrame.currentDirectiveIndex}function Qd(n){de.lFrame.currentDirectiveIndex=n}function _T(n){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Sy(){return de.lFrame.currentQueryIndex}function Yd(n){de.lFrame.currentQueryIndex=n}function qO(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function Ay(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=qO(o),i===null||(o=o[No],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=de.lFrame=ET();return r.currentTNode=e,r.lView=n,!0}function Jd(n){let e=ET(),t=n[K];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ET(){let n=de.lFrame,e=n===null?null:n.child;return e===null?IT(n):e}function IT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wT(){let n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ry=wT;function Zd(){let n=wT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function DT(n){return(de.lFrame.contextLView=sT(n,de.lFrame.contextLView))[Ze]}function yr(){return de.lFrame.selectedIndex}function Mi(n){de.lFrame.selectedIndex=n}function Xd(){let n=de.lFrame;return eu(n.tView,n.selectedIndex)}function CT(){return de.lFrame.currentNamespace}var bT=!0;function eh(){return bT}function nu(n){bT=n}function Lm(n,e=null,t=null,r){let i=Ny(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ny(n,e=null,t=null,r,i=new Set){let o=[t||nn,Qb(n)];return r=r||(typeof n=="object"?void 0:Br(n)),new Ao(o,e||Yc(),r||null,i)}var Ge=class n{static THROW_IF_NOT_FOUND=Co;static NULL=new Hc;static create(e,t){if(Array.isArray(e))return Lm({name:""},t,e,"");{let r=e.name??"";return Lm({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:n,providedIn:"any",factory:()=>W(ty)});static __NG_ELEMENT_ID__=-1},ot=new q(""),Un=(()=>{class n{static __NG_ELEMENT_ID__=zO;static __NG_ENV_ID__=t=>t}return n})(),Vm=class extends Un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Oo(this._lView)}onDestroy(e){let t=this._lView;return gy(t,e),()=>aT(t,e)}};function zO(){return new Vm(se())}var My=!1,vr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new St(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),jm=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Xb()&&(this.destroyRef=R(Un,{optional:!0})??void 0,this.pendingTasks=R(vr,{optional:!0})??void 0)}emit(e){let t=Z(null);try{super.next(e)}finally{Z(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Oe=jm;function Vd(...n){}function Py(n){let e,t;function r(){n=Vd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function xy(n){return queueMicrotask(()=>n()),()=>{n=Vd}}var ky="isAngularZone",qc=ky+"_ID",GO=0,Ie=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Oe(!1);onMicrotaskEmpty=new Oe(!1);onStable=new Oe(!1);onError=new Oe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=My}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,QO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ky)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,WO,Vd,Vd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},WO={};function Oy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function KO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Py(()=>{n.callbackScheduled=!1,Um(n),n.isCheckStableRunning=!0,Oy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Um(n)}function QO(n){let e=()=>{KO(n)},t=GO++;n._inner=n._inner.fork({name:"angular",properties:{[ky]:!0,[qc]:t,[qc+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(YO(u))return r.invokeTask(o,s,a,u);try{return Fb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Lb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Fb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JO(u)&&e(),Lb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Um(n),Oy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Um(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Lb(n){n._nesting--,Oy(n)}var zc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Oe;onMicrotaskEmpty=new Oe;onStable=new Oe;onError=new Oe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function YO(n){return TT(n,"__ignore_ng_zone__")}function JO(n){return TT(n,"__scheduler_tick__")}function TT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var dr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cn=new q("",{factory:()=>{let n=R(Ie),e=R(nt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(dr),t.handleError(r))})}}}),ST={provide:Si,useValue:()=>{let n=R(dr,{optional:!0})},multi:!0};function Te(n,e){let[t,r,i]=dm(n,e?.equal),o=t,s=o[jt];return o.set=r,o.update=i,o.asReadonly=AT.bind(o),o}function AT(){let n=this[jt];if(n.readonlyFn===void 0){let e=()=>this();e[jt]=n,n.readonlyFn=e}return n.readonlyFn}var th=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=ZO}return n})();function ZO(){return new th(se(),Et())}var $r=class{},ea=new q("",{factory:()=>!0});var nh=new q(""),ta=(()=>{class n{internalPendingTasks=R(vr);scheduler=R($r);errorHandler=R(cn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fy=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new Bm})}return n})(),Bm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},$m=class{[jt];constructor(e){this[jt]=e}destroy(){this[jt].destroy()}};function st(n){return hm(n)}function aa(n){return{toString:n}.toString()}var rh="__parameters__";function a1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function c1(n,e,t){return aa(()=>{let r=a1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(rh)?u[rh]:Object.defineProperty(u,rh,{value:[]})[rh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var un=Hb(c1("Optional"),8);function u1(n){return typeof n=="function"}function rS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Tn=(()=>{let n=()=>iS;return n.ngInherit=!0,n})();function iS(n){return n.type.prototype.ngOnChanges&&(n.setInput=d1),l1}function l1(){let n=sS(this),e=n?.current;if(e){let t=n.previous;if(t===Ti)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function d1(n,e,t,r,i){let o=this.declaredInputs[r],s=sS(n)||h1(n,{previous:Ti,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new lh(l&&l.currentValue,t,u===Ti),rS(n,e,i,t)}var oS="__ngSimpleChanges__";function sS(n){return n[oS]||null}function h1(n,e){return n[oS]=e}var RT=[];var Se=function(n,e=null,t){for(let r=0;r<RT.length;r++){let i=RT[r];i(n,e,t)}},Ee=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ee||{});function f1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=iS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function aS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function sh(n,e,t){cS(n,e,3,t)}function ah(n,e,t,r){(n[ee]&3)===t&&cS(n,e,t,r)}function Ly(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function cS(n,e,t,r){let i=r!==void 0?n[Mo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Mo]+=65536),(a<o||o==-1)&&(p1(n,t,e,u),n[Mo]=(n[Mo]&4294901760)+u+2),u++}function NT(n,e){Se(Ee.LifecycleHookStart,n,e);let t=Z(null);try{e.call(n)}finally{Z(t),Se(Ee.LifecycleHookEnd,n,e)}}function p1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[Mo]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,NT(a,o)):NT(a,o)}var ra=-1,Vo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function g1(n){return(n.flags&8)!==0}function m1(n){return(n.flags&16)!==0}function y1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];v1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function uS(n){return n===3||n===4||n===6}function v1(n){return n.charCodeAt(0)===64}function ia(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?MT(n,t,i,null,e[++r]):MT(n,t,i,null,null))}}return n}function MT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function lS(n){return n!==ra}function dh(n){return n&32767}function _1(n){return n>>16}function hh(n,e){let t=_1(n),r=e;for(;t>0;)r=r[No],t--;return r}var Ky=!0;function PT(n){let e=Ky;return Ky=n,e}var E1=256,dS=E1-1,hS=5,I1=0,_r={};function w1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ro)&&(r=t[Ro]),r==null&&(r=t[Ro]=I1++);let i=r&dS,o=1<<i;e.data[n+(i>>hS)]|=o}function fh(n,e){let t=fS(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,Vy(r.data,n),Vy(e,null),Vy(r.blueprint,null));let i=wv(n,e),o=n.injectorIndex;if(lS(i)){let s=dh(i),a=hh(i,e),u=a[K].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Vy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function wv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vS(i),r===null)return ra;if(t++,i=i[No],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ra}function Qy(n,e,t){w1(n,e,t)}function D1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(uS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function pS(n,e,t){if(t&8||n!==void 0)return n;Bd(e,"NodeInjector")}function gS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[qr],o=tn(void 0);try{return i?i.get(e,r,t&8):Xm(e,r,t&8)}finally{tn(o)}}return pS(r,e,t)}function mS(n,e,t,r=0,i){if(n!==null){if(e[ee]&2048&&!(r&2)){let s=S1(n,e,t,r,_r);if(s!==_r)return s}let o=yS(n,e,t,r,_r);if(o!==_r)return o}return gS(e,t,r,i)}function yS(n,e,t,r,i){let o=b1(t);if(typeof o=="function"){if(!Ay(e,n,r))return r&1?pS(i,t,r):gS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Bd(t);else return s}finally{Ry()}}else if(typeof o=="number"){let s=null,a=fS(n,e),u=ra,l=r&1?e[sn][wn]:null;for((a===-1||r&4)&&(u=a===-1?wv(n,e):e[a+8],u===ra||!kT(r,!1)?a=-1:(s=e[K],a=dh(u),e=hh(u,e)));a!==-1;){let h=e[K];if(xT(o,a,h.data)){let p=C1(a,e,t,s,r,l);if(p!==_r)return p}u=e[a+8],u!==ra&&kT(r,e[K].data[a+8]===l)&&xT(o,a,e)?(s=h,a=dh(u),e=hh(u,e)):a=-1}}return i}function C1(n,e,t,r,i,o){let s=e[K],a=s.data[n+8],u=r==null?Ni(a)&&Ky:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=ch(a,s,t,u,l);return h!==null?ou(e,s,h,a,i):_r}function ch(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&mr(y)&&y.type===t)return u}return null}function ou(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Vo){let a=o;if(a.resolving){let y=jb(s[t]);throw Zm(y)}let u=PT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?tn(a.injectImpl):null,g=Ay(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&f1(t,s[t],e)}finally{p!==null&&tn(p),PT(u),a.resolving=!1,Ry()}}return o}function b1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ro)?n[Ro]:void 0;return typeof e=="number"?e>=0?e&dS:T1:e}function xT(n,e,t){let r=1<<n;return!!(t[e+(n>>hS)]&r)}function kT(n,e){return!(n&2)&&!(n&1&&e)}var Lo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mS(this._tNode,this._lView,e,bo(r),t)}};function T1(){return new Lo(Et(),se())}function qn(n){return aa(()=>{let e=n.prototype.constructor,t=e[$c]||Yy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[$c]||Yy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Yy(n){return zm(n)?()=>{let e=Yy(Rt(n));return e&&e()}:To(n)}function S1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Js(s);){let a=yS(o,s,t,r|2,_r);if(a!==_r)return a;let u=o.parent;if(!u){let l=s[uy];if(l){let h=l.get(t,_r,r);if(h!==_r)return h}u=vS(s),s=s[No]}o=u}return i}function vS(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function du(n){return D1(Et(),n)}function A1(){return ca(Et(),se())}function ca(n,e){return new Bt(jn(n,e))}var Bt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=A1}return n})();function R1(n){return n instanceof Bt?n.nativeElement:n}function N1(){return this._results[Symbol.iterator]()}var ph=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=zb(e);(this._changesDetected=!qb(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=N1};function _S(n){return(n.flags&128)===128}var Dv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Dv||{}),ES=new Map,M1=0;function P1(){return M1++}function x1(n){ES.set(n[Jc],n)}function Jy(n){ES.delete(n[Jc])}var OT="__ngContext__";function oa(n,e){gr(e)?(n[OT]=e[Jc],x1(e)):n[OT]=e}function IS(n){return DS(n[Qs])}function wS(n){return DS(n[In])}function DS(n){for(;n!==null&&!Vn(n);)n=n[In];return n}var k1;function Cv(n){k1=n}var Ah=new q("",{factory:()=>O1}),O1="ng";var Rh=new q(""),zo=new q("",{providedIn:"platform",factory:()=>"unknown"});var Nh=new q("",{factory:()=>R(ot).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var CS="r";var bS="di";var TS=!1,SS=new q("",{factory:()=>TS});var bv=new q("");var F1=(n,e,t,r)=>{};function L1(n,e,t,r){F1(n,e,t,r)}function Tv(n){return(n.flags&32)===32}var V1=()=>null;function AS(n,e,t=!1){return V1(n,e,t)}function RS(n,e){let t=n.contentQueries;if(t!==null){let r=Z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Yd(o),a.contentQueries(2,e[s],s)}}}finally{Z(r)}}}function Zy(n,e,t){Yd(0);let r=Z(null);try{e(n,t)}finally{Z(r)}}function Sv(n,e,t){if(dy(e)){let r=Z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Z(r)}}}var $n=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})($n||{});var ih;function j1(){if(ih===void 0&&(ih=null,Gc.trustedTypes))try{ih=Gc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ih}function FT(n){return j1()?.createScriptURL(n)||n}var gh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jd})`}};function hu(n){return n instanceof gh?n.changingThisBreaksApplicationSecurity:n}function Av(n,e){let t=NS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${jd})`)}return t===e}function NS(n){return n instanceof gh&&n.getTypeName()||null}var U1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function MS(n){return n=String(n),n.match(U1)?n:"unsafe:"+n}var Mh=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Mh||{});function PS(n){let e=kS();return e?e.sanitize(Mh.URL,n)||"":Av(n,"URL")?hu(n):MS(hr(n))}function xS(n){let e=kS();if(e)return FT(e.sanitize(Mh.RESOURCE_URL,n)||"");if(Av(n,"ResourceURL"))return FT(hu(n));throw new G(904,!1)}function B1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xS:PS}function Rv(n,e,t){return B1(e,t)(n)}function kS(){let n=se();return n&&n[fr].sanitizer}var $1=/^>|^->|<!--|-->|--!>|<!-$/g,H1=/(<|>)/g,q1="\u200B$1\u200B";function z1(n){return n.replace($1,e=>e.replace(H1,q1))}function OS(n){return n instanceof Function?n():n}function G1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var FS="ng-template";function W1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&G1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Nv(n){return n.type===4&&n.value!==FS}function K1(n,e,t){let r=n.type===4&&!t?FS:n.value;return e===r}function Q1(n,e,t){let r=4,i=n.attrs,o=i!==null?Z1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Bn(r)&&!Bn(u))return!1;if(s&&Bn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!K1(n,u,t)||u===""&&e.length===1){if(Bn(r))return!1;s=!0}}else if(r&8){if(i===null||!W1(n,i,u,t)){if(Bn(r))return!1;s=!0}}else{let l=e[++a],h=Y1(u,i,Nv(n),t);if(h===-1){if(Bn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Bn(r))return!1;s=!0}}}}return Bn(r)||s}function Bn(n){return(n&1)===0}function Y1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return X1(e,n)}function J1(n,e,t=!1){for(let r=0;r<e.length;r++)if(Q1(n,e[r],t))return!0;return!1}function Z1(n){for(let e=0;e<n.length;e++){let t=n[e];if(uS(t))return e}return n.length}function X1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LT(n,e){return n?":not("+e.trim()+")":e}function eF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bn(s)&&(e+=LT(o,i),i=""),r=s,o=o||!Bn(r);t++}return i!==""&&(e+=LT(o,i)),e}function tF(n){return n.map(eF).join(",")}function nF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Bn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var $t={};function rF(n,e){return n.createText(e)}function iF(n,e,t){n.setValue(e,t)}function oF(n,e){return n.createComment(z1(e))}function LS(n,e,t){return n.createElement(e,t)}function mh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VS(n,e,t){n.appendChild(e,t)}function VT(n,e,t,r,i){r!==null?mh(n,e,t,r,i):VS(n,e,t)}function jS(n,e,t,r){n.removeChild(null,e,t,r)}function sF(n,e,t){n.setAttribute(e,"style",t)}function aF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function US(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&y1(n,e,r),i!==null&&aF(n,e,i),o!==null&&sF(n,e,o)}function Mv(n,e,t,r,i,o,s,a,u,l,h){let p=it+r,g=p+i,y=cF(p,g),S=typeof l=="function"?l():l;return y[K]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function cF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$t);return t}function uF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Mv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ln]=i,p[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),fy(p),p[ft]=p[No]=n,p[Ze]=t,p[fr]=s||n&&n[fr],p[je]=a||n&&n[je],p[qr]=u||n&&n[qr]||null,p[wn]=o,p[Jc]=P1(),p[Ws]=h,p[uy]=l,p[sn]=e.type==2?n[sn]:p,p}function lF(n,e,t){let r=jn(e,n),i=uF(t),o=n[fr].rendererFactory,s=xv(n,Pv(n,i,null,BS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function BS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function $S(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xv(n,e){return n[Qs]?n[cy][In]=e:n[Qs]=e,n[cy]=e,e}function j(n=1){HS(pt(),se(),yr()+n,!1)}function HS(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&sh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ah(e,o,0,t)}Mi(t)}var Ph=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ph||{});function Xy(n,e,t,r){let i=Z(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Ph.SignalBased)!==0&&(u=e[o][jt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):rS(e,u,o,r)}finally{Z(i)}}var Er=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Er||{}),dF;function kv(n,e){return dF(n,e)}var jo=new Set,xh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(xh||{}),Go=new q(""),jT=new Set;function zn(n){jT.has(n)||(jT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ov=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),qS=[0,1,2,3],zS=(()=>{class n{ngZone=R(Ie);scheduler=R($r);errorHandler=R(dr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Go,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Se(Ee.AfterRenderHooksStart),this.executing=!0;for(let r of qS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Se(Ee.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Po]??=[]).push(t),Zs(r),r[ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(xh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),yh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Po];e&&(this.view[Po]=e.filter(t=>t!==this))}};function fu(n,e){let t=e?.injector??R(Ge);return zn("NgAfterNextRender"),fF(n,t,e,!0)}function hF(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function fF(n,e,t,r){let i=e.get(Ov);i.impl??=e.get(zS);let o=e.get(Go,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Un):null,a=e.get(th,null,{optional:!0}),u=new yh(i.impl,hF(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var GS=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function WS(n,e,t){let r=n.get(GS);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function pF(n,e){let t=n.get(GS);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function gF(n,e){for(let[t,r]of e)WS(n,r.animateFns)}function UT(n,e,t,r){let i=n?.[xo]?.enter;e!==null&&i&&i.has(t.index)&&gF(r,i)}function na(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Vn(i)?u=i:gr(i)&&(l=!0,i=i[Ln]);let h=Dn(i);n===0&&r!==null?(UT(a,r,o,t),s==null?VS(e,r,h):mh(e,r,h,s||null,!0)):n===1&&r!==null?(UT(a,r,o,t),mh(e,r,h,s||null,!0)):n===2?BT(a,o,t,p=>{jS(e,h,l,p)}):n===3&&BT(a,o,t,()=>{e.destroyNode(h)}),u!=null&&AF(e,n,t,u,o,r,s)}}function mF(n,e){KS(n,e),e[Ln]=null,e[wn]=null}function yF(n,e,t,r,i,o){r[Ln]=i,r[wn]=e,Oh(n,r,t,1,i,o)}function KS(n,e){e[fr].changeDetectionScheduler?.notify(9),Oh(n,e,e[je],2,null,null)}function vF(n){let e=n[Qs];if(!e)return jy(n[K],n);for(;e;){let t=null;if(gr(e))t=e[Qs];else{let r=e[We];r&&(t=r)}if(!t){for(;e&&!e[In]&&e!==n;)gr(e)&&jy(e[K],e),e=e[ft];e===null&&(e=n),gr(e)&&jy(e[K],e),t=e&&e[In]}e=t}}function Fv(n,e){let t=n[ko],r=t.indexOf(e);t.splice(r,1)}function kh(n,e){if(Oo(e))return;let t=e[je];t.destroyNode&&Oh(n,e,t,3,null,null),vF(e)}function jy(n,e){if(Oo(e))return;let t=Z(null);try{e[ee]&=-129,e[ee]|=256,e[an]&&Oc(e[an]),IF(n,e),EF(n,e),e[K].type===1&&e[je].destroy();let r=e[Ai];if(r!==null&&Vn(e[ft])){r!==e[ft]&&Fv(r,e);let i=e[pr];i!==null&&i.detachView(n)}Jy(e)}finally{Z(t)}}function BT(n,e,t,r){let i=n?.[xo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&jo.add(n),WS(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),_F(n,r)}else n&&jo.delete(n),r(!1)},i)}function _F(n,e){let t=n[xo]?.running;if(t){t.then(()=>{n[xo].running=void 0,jo.delete(n),e(!0)});return}e(!1)}function EF(n,e){let t=n.cleanup,r=e[Ks];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ks]=null);let i=e[Ur];if(i!==null){e[Ur]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Zc];if(o!==null){e[Zc]=null;for(let s of o)s.destroy()}}function IF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Se(Ee.LifecycleHookStart,a,u);try{u.call(a)}finally{Se(Ee.LifecycleHookEnd,a,u)}}else{Se(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{Se(Ee.LifecycleHookEnd,i,o)}}}}}function wF(n,e,t){return DF(n,e.parent,t)}function DF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ln];if(Ni(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===$n.None||i===$n.Emulated)return null}return jn(r,t)}function CF(n,e,t){return TF(n,e,t)}function bF(n,e,t){return n.type&40?jn(n,t):null}var TF=bF,$T;function Lv(n,e,t,r){let i=wF(n,r,e),o=e[je],s=r.parent||e[wn],a=CF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)VT(o,i,t[u],a,!1);else VT(o,i,t,a,!1);$T!==void 0&&$T(o,r,e,t,i)}function ru(n,e){if(e!==null){let t=e.type;if(t&3)return jn(e,n);if(t&4)return ev(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ru(n,r);{let i=n[e.index];return Vn(i)?ev(-1,i):Dn(i)}}else{if(t&128)return ru(n,e.next);if(t&32)return kv(e,n)()||Dn(n[e.index]);{let r=QS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ci(n[sn]);return ru(i,r)}else return ru(n,e.next)}}}return null}function QS(n,e){if(e!==null){let r=n[sn][wn],i=e.projection;return r.projection[i]}return null}function ev(n,e){let t=We+n+1;if(t<e.length){let r=e[t],i=r[K].firstChild;if(i!==null)return ru(r,i)}return e[Ri]}function Vv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[qr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&oa(Dn(u),r),t.flags|=2),!Tv(t))if(l&8)Vv(n,e,t.child,r,i,o,!1),na(e,n,a,i,u,t,o,r);else if(l&32){let h=kv(t,r),p;for(;p=h();)na(e,n,a,i,p,t,o,r);na(e,n,a,i,u,t,o,r)}else l&16?SF(n,e,r,t,i,o):na(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Oh(n,e,t,r,i,o){Vv(t,r,n.firstChild,e,i,o,!1)}function SF(n,e,t,r,i,o){let s=t[sn],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];na(e,n,t[qr],i,h,r,o,t)}else{let l=u,h=s[ft];_S(r)&&(l.flags|=128),Vv(n,e,l,h,i,o,!0)}}function AF(n,e,t,r,i,o,s){let a=r[Ri],u=Dn(r);a!==u&&na(e,n,t,o,a,i,s);for(let l=We;l<r.length;l++){let h=r[l];Oh(h[K],h,n,e,o,a)}}function RF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Er.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Er.Important),n.setStyle(t,r,i,o))}}function YS(n,e,t,r,i){let o=yr(),s=r&2;try{Mi(-1),s&&e.length>it&&HS(n,e,it,!1);let a=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Se(a,i,t),t(r,i)}finally{Mi(o);let a=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Se(a,i,t)}}function Fh(n,e,t){FF(n,e,t),(t.flags&64)===64&&LF(n,e,t)}function pu(n,e,t=jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function NF(n,e,t,r){let o=r.get(SS,TS)||t===$n.ShadowDom||t===$n.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return MF(s),s}function MF(n){PF(n)}var PF=()=>null;function xF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function JS(n,e,t,r,i,o){let s=e[K];if($v(n,s,e,t,r)){Ni(n)&&OF(e,n.index);return}n.type&3&&(t=xF(t)),kF(n,e,t,r,i,o)}function kF(n,e,t,r,i,o){if(n.type&3){let s=jn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function OF(n,e){let t=Cn(e,n);t[ee]&16||(t[ee]|=64)}function FF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ni(t)&&lF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||fh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=ou(e,n,s,t);if(oa(u,e),o!==null&&BF(e,s-r,u,a,t,o),mr(a)){let l=Cn(t.index,e);l[Ze]=ou(e,n,s,t)}}}function LF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=vT();try{Mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Qd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&VF(u,l)}}finally{Mi(-1),Qd(s)}}function VF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];J1(e,o.selectors,!1)&&(r??=[],mr(o)?r.unshift(o):r.push(o))}return r}function jF(n,e,t,r,i,o){let s=jn(n,e);UF(e[je],s,o,n.value,t,r,i)}function UF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?hr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function BF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Xy(r,t,u,l)}}function Uv(n,e,t,r,i){let o=it+t,s=e[K],a=i(s,e,n,r,t);e[o]=a,Xs(n,!0);let u=n.type===2;return u?(US(e[je],a,n),(uT()===0||Ys(n))&&oa(a,e),lT()):oa(a,e),eh()&&(!u||!Tv(n))&&Lv(s,e,a,n),n}function Bv(n){let e=n;return wy()?fT():(e=e.parent,Xs(e,!1)),e}function $F(n,e){let t=n[qr];if(!t)return;let r;try{r=t.get(cn,null)}catch{r=null}r?.(e)}function $v(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Xy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Xy(h,l,r,i),a=!0}return a}function HF(n,e){let t=Cn(e,n),r=t[K];qF(r,t);let i=t[Ln];i!==null&&t[Ws]===null&&(t[Ws]=AS(i,t[qr])),Se(Ee.ComponentStart);try{Hv(r,t,t[Ze])}finally{Se(Ee.ComponentEnd,t[Ze])}}function qF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hv(n,e,t){Jd(e);try{let r=n.viewQuery;r!==null&&Zy(1,r,t);let i=n.template;i!==null&&YS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pr]?.finishViewCreation(n),n.staticContentQueries&&RS(n,e),n.staticViewQueries&&Zy(2,n.viewQuery,t);let o=n.components;o!==null&&zF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Zd()}}function zF(n,e){for(let t=0;t<e.length;t++)HF(n,e[t])}function Lh(n,e,t,r){let i=Z(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=Pv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ai]=l;let h=n[pr];return h!==null&&(u[pr]=h.createEmbeddedView(o)),Hv(o,u,t),u}finally{Z(i)}}function su(n,e){return!e||e.firstChild===null||_S(n)}function au(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Dn(o)),Vn(o)&&ZS(o,r);let s=t.type;if(s&8)au(n,e,t.child,r);else if(s&32){let a=kv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=QS(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ci(e[sn]);au(u[K],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ZS(n,e){for(let t=We;t<n.length;t++){let r=n[t],i=r[K].firstChild;i!==null&&au(r[K],r,i,e)}n[Ri]!==n[Ln]&&e.push(n[Ri])}function XS(n){if(n[Po]!==null){for(let e of n[Po])e.impl.addSequence(e);n[Po].length=0}}var e0=[];function GF(n){return n[an]??WF(n)}function WF(n){let e=e0.pop()??Object.create(QF);return e.lView=n,e}function KF(n){n.lView[an]!==n&&(n.lView=null,e0.push(n))}var QF=Y(M({},Pc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Zs(n.lView)},consumerOnSignalRead(){this.lView[an]=this}});function YF(n){let e=n[an]??Object.create(JF);return e.lView=n,e}var JF=Y(M({},Pc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ci(n.lView);for(;e&&!t0(e[K]);)e=Ci(e);e&&py(e)},consumerOnSignalRead(){this.lView[an]=this}});function t0(n){return n.type!==2}function n0(n){if(n[Zc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var ZF=100;function r0(n,e=0){let r=n[fr].rendererFactory,i=!1;i||r.begin?.();try{XF(n,e)}finally{i||r.end?.()}}function XF(n,e){let t=Dy();try{Cy(!0),tv(n,e);let r=0;for(;tu(n);){if(r===ZF)throw new G(103,!1);r++,tv(n,1)}}finally{Cy(t)}}function eL(n,e,t,r){if(Oo(e))return;let i=e[ee],o=!1,s=!1;Jd(e);let a=!0,u=null,l=null;o||(t0(n)?(l=GF(e),u=kc(l)):nd()===null?(a=!1,l=YF(e),u=kc(l)):e[an]&&(Oc(e[an]),e[an]=null));try{fy(e),gT(n.bindingStartIndex),t!==null&&YS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&sh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&ah(e,y,0,null),Ly(e,0)}if(s||tL(e),n0(e),i0(e,0),n.contentQueries!==null&&RS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&sh(e,y)}else{let y=n.contentHooks;y!==null&&ah(e,y,1),Ly(e,1)}rL(n,e);let p=n.components;p!==null&&s0(e,p,0);let g=n.viewQuery;if(g!==null&&Zy(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&sh(e,y)}else{let y=n.viewHooks;y!==null&&ah(e,y,2),Ly(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qd]){for(let y of e[qd])y();e[qd]=null}o||(XS(e),e[ee]&=-73)}catch(h){throw o||Zs(e),h}finally{l!==null&&(rd(l,u),a&&KF(l)),Zd()}}function i0(n,e){for(let t=IS(n);t!==null;t=wS(t))for(let r=We;r<t.length;r++){let i=t[r];o0(i,e)}}function tL(n){for(let e=IS(n);e!==null;e=wS(e)){if(!(e[ee]&2))continue;let t=e[ko];for(let r=0;r<t.length;r++){let i=t[r];py(i)}}}function nL(n,e,t){Se(Ee.ComponentStart);let r=Cn(e,n);try{o0(r,t)}finally{Se(Ee.ComponentEnd,r[Ze])}}function o0(n,e){zd(n)&&tv(n,e)}function tv(n,e){let r=n[K],i=n[ee],o=n[an],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&id(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)eL(r,n,r.template,n[Ze]);else if(i&8192){let a=Z(null);try{n0(n),i0(n,1);let u=r.components;u!==null&&s0(n,u,1),XS(n)}finally{Z(a)}}}function s0(n,e,t){for(let r=0;r<e.length;r++)nL(n,e[r],t)}function rL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Mi(~i);else{let o=i,s=t[++r],a=t[++r];yT(s,o);let u=e[o];Se(Ee.HostBindingsUpdateStart,u);try{a(2,u)}finally{Se(Ee.HostBindingsUpdateEnd,u)}}}}finally{Mi(-1)}}function qv(n,e){let t=Dy()?64:1088;for(n[fr].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Ci(n);if(Js(n)&&!r)return n;n=r}return null}function a0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function c0(n,e){let t=We+e;if(t<n.length)return n[t]}function Vh(n,e,t,r=!0){let i=e[K];if(iL(i,e,n,t),r){let s=ev(t,n),a=e[je],u=a.parentNode(n[Ri]);u!==null&&yF(i,n[wn],a,e,u,s)}let o=e[Ws];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function u0(n,e){let t=cu(n,e);return t!==void 0&&kh(t[K],t),t}function cu(n,e){if(n.length<=We)return;let t=We+e,r=n[t];if(r){let i=r[Ai];i!==null&&i!==n&&Fv(i,r),e>0&&(n[t-1][In]=r[In]);let o=Kc(n,We+e);mF(r[K],r);let s=o[pr];s!==null&&s.detachView(o[K]),r[ft]=null,r[In]=null,r[ee]&=-129}return r}function iL(n,e,t,r){let i=We+r,o=t.length;r>0&&(t[i-1][In]=e),r<o-We?(e[In]=t[i],ey(t,We+r,e)):(t.push(e),e[In]=null),e[ft]=t;let s=e[Ai];s!==null&&t!==s&&l0(s,e);let a=e[pr];a!==null&&a.insertView(n),Gd(e),e[ee]|=128}function l0(n,e){let t=n[ko],r=e[ft];if(gr(r))n[ee]|=2;else{let i=r[ft][sn];e[sn]!==i&&(n[ee]|=2)}t===null?n[ko]=[e]:t.push(e)}var Pi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[K];return au(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ze]}set context(e){this._lView[Ze]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(Vn(e)){let t=e[Xc],r=t?t.indexOf(this):-1;r>-1&&(cu(e,r),Kc(t,r))}this._attachedToViewContainer=!1}kh(this._lView[K],this._lView)}onDestroy(e){gy(this._lView,e)}markForCheck(){qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Gd(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,r0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Js(this._lView),t=this._lView[Ai];t!==null&&!e&&Fv(t,this._lView),KS(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=Js(this._lView),r=this._lView[Ai];r!==null&&!t&&l0(r,this._lView),Gd(this._lView)}};var Uo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=oL;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Lh(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Pi(o)}}return n})();function oL(){return jh(Et(),se())}function jh(n,e){return n.type&4?new Uo(e,n,ca(n,e)):null}function gu(n,e,t,r,i){let o=n.data[e];if(o===null)o=sL(n,e,t,r,i),mT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=hT();o.injectorIndex=s===null?-1:s.injectorIndex}return Xs(o,!0),o}function sL(n,e,t,r,i){let o=Iy(),s=wy(),a=s?o:o&&o.parent,u=n.data[e]=cL(n,a,t,e,r,i);return aL(n,u,o,s),u}function aL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function cL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return dT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uL(n){let e=n[ly]??[],r=n[ft][je],i=[];for(let o of e)o.data[bS]!==void 0?i.push(o):lL(o,r);n[ly]=i}function lL(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[CS];for(;t<i;){let o=r.nextSibling;jS(e,r,!1),r=o,t++}}}var dL=()=>null,hL=()=>null;function nv(n,e){return dL(n,e)}function d0(n,e,t){return hL(n,e,t)}var h0=class{},Uh=class{},rv=class{resolveComponentFactory(e){throw new G(917,!1)}},mu=class{static NULL=new rv},Bo=class{},Gn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>fL()}return n})();function fL(){let n=se(),e=Et(),t=Cn(e.index,n);return(gr(t)?t:n)[je]}var f0=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>null})}return n})();var uh={},iv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,uh,r);return i!==uh||t===uh?i:this.parentInjector.get(e,t,r)}};function vh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qm(i,a);else if(o==2){let u=a,l=e[++s];r=qm(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B(n,e=0){let t=se();if(t===null)return W(n,e);let r=Et();return mS(r,t,Rt(n),e)}function zv(){let n="invalid";throw new Error(n)}function p0(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}mL(n,e,t,a,o,u,l)}o!==null&&r!==null&&pL(t,r,o)}function pL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function gL(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function mL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&mr(y)&&(u=!0,gL(n,t,g)),Qy(fh(t,e),n,y.type)}wL(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=$S(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=ia(t.mergedAttrs,y.hostAttrs),vL(n,t,e,p,y),IL(p,y,i),s!==null&&s.has(y)){let[x,N]=s.get(y);t.directiveToIndex.set(y.type,[p,x+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}yL(n,t,o)}function yL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))HT(0,e,i,r),HT(1,e,i,r),zT(e,r,!1);else{let o=t.get(i);qT(0,e,o,r),qT(1,e,o,r),zT(e,r,!0)}}}function HT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),g0(e,o)}}function qT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),g0(e,s)}}function g0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Nv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function vL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new Vo(o,mr(i),B,null);n.blueprint[r]=s,t[r]=s,_L(n,e,r,$S(n,t,i.hostVars,$t),i)}function _L(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;EL(s)!=a&&s.push(a),s.push(t,r,o)}}function EL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mr(e)&&(t[""]=n)}}function wL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Gv(n,e,t,r,i,o,s,a){let u=e[K],l=u.consts,h=bn(l,s),p=gu(u,n,t,r,h);return o&&p0(u,e,p,bn(l,a),i),p.mergedAttrs=ia(p.mergedAttrs,p.attrs),p.attrs!==null&&vh(p,p.attrs,!1),p.mergedAttrs!==null&&vh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Wv(n,e){aS(n,e),dy(e)&&n.queries.elementEnd(e)}function DL(n,e,t,r,i,o){let s=e.consts,a=bn(s,i),u=gu(e,n,t,r,a);if(u.mergedAttrs=ia(u.mergedAttrs,u.attrs),o!=null){let l=bn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&vh(u,u.attrs,!1),u.mergedAttrs!==null&&vh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function m0(n,e,t){return n[e]=t}function CL(n,e){return n[e]}function Hn(n,e,t){if(t===$t)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function y0(n,e,t,r){let i=Hn(n,e,t);return Hn(n,e+1,r)||i}function bL(n,e,t,r,i){let o=y0(n,e,t,r);return Hn(n,e+2,i)||o}function Uy(n,e,t){return function r(i){let o=Ni(n)?Cn(n.index,e):e;qv(o,5);let s=e[Ze],a=GT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=GT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function GT(n,e,t,r){let i=Z(null);try{return Se(Ee.OutputStart,e,t),t(r)!==!1}catch(o){return $F(n,o),!1}finally{Se(Ee.OutputEnd,e,t),Z(i)}}function TL(n,e,t,r,i,o,s,a){let u=Ys(n),l=!1,h=null;if(!r&&u&&(h=AL(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=jn(n,t),g=r?r(p):p;L1(t,g,o,a);let y=i.listen(g,o,a);if(!SL(o)){let S=r?x=>r(Dn(x[n.index])):n.index;v0(S,e,t,o,a,y,!1)}}return l}function SL(n){return n.startsWith("animation")||n.startsWith("transition")}function AL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ks],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function v0(n,e,t,r,i,o,s){let a=e.firstCreatePass?yy(e):null,u=my(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function WT(n,e,t,r,i,o){let s=e[t],a=e[K],l=a.data[t].outputs[r],p=s[l].subscribe(o);v0(n.index,a,e,i,o,p,!0)}var ov=Symbol("BINDING");var _h=class extends mu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Hr(e);return new $o(t,this.ngModule)}};function RL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ph.SignalBased)!==0};return i&&(o.transform=i),o})}function NL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ML(n,e,t){let r=e instanceof nt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new iv(t,r):t}function PL(n){let e=n.get(Bo,null);if(e===null)throw new G(407,!1);let t=n.get(f0,null),r=n.get($r,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function xL(n,e){let t=_0(n);return LS(e,t,t==="svg"?tT:t==="math"?nT:null)}function _0(n){return(n.selectors[0][0]||"div").toLowerCase()}var $o=class extends Uh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=NL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Se(Ee.DynamicComponentStart);let a=Z(null);try{let u=this.componentDef,l=kL(r,u,s,o),h=ML(u,i||this.ngModule,e),p=PL(h),g=p.rendererFactory.createRenderer(null,u),y=r?NF(g,r,u.encapsulation,h):xL(u,g),S=s?.some(KT)||o?.some(U=>typeof U!="function"&&U.bindings.some(KT)),x=Pv(null,l,null,512|BS(u),null,null,p,g,h,null,AS(y,h,!0));x[it]=y,Jd(x);let N=null;try{let U=Gv(it,x,2,"#host",()=>l.directiveRegistry,!0,0);US(g,y,U),oa(y,x),Fh(l,x,U),Sv(l,U,x),Wv(l,U),t!==void 0&&FL(U,this.ngContentSelectors,t),N=Cn(U.index,x),x[Ze]=N[Ze],Hv(l,x,null)}catch(U){throw N!==null&&Jy(N),Jy(x),U}finally{Se(Ee.DynamicComponentEnd),Zd()}return new Eh(this.componentType,x,!!S)}finally{Z(a)}}};function kL(n,e,t,r){let i=n?["ng-version","21.0.1"]:nF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[ov].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[ov].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=iy(p);u.push(g)}return Mv(0,null,OL(o,s),1,a,u,null,null,null,[i],null)}function OL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function KT(n){let e=n[ov].kind;return e==="input"||e==="twoWay"}var Eh=class extends h0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=eu(t[K],it),this.location=ca(this._tNode,t),this.instance=Cn(this._tNode.index,t)[Ze],this.hostView=this.changeDetectorRef=new Pi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$v(r,i[K],i,e,t);this.previousInputValues.set(e,t);let s=Cn(r.index,i);qv(s,1)}get injector(){return new Lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var xi=(()=>{class n{static __NG_ELEMENT_ID__=LL}return n})();function LL(){let n=Et();return I0(n,se())}var VL=xi,E0=class extends VL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new Lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=wv(this._hostTNode,this._hostLView);if(lS(e)){let t=hh(e,this._hostLView),r=dh(e),i=t[K].data[r+8];return new Lo(i,t)}else return new Lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=QT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-We}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,su(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!u1(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new $o(Hr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let U=(u?p:this.parentInjector).get(nt,null);U&&(o=U)}let g=Hr(h.componentType??{}),y=nv(this._lContainer,g?.id??null),S=y?.firstChild??null,x=h.create(p,i,S,o,s,a);return this.insertImpl(x.hostView,l,su(this._hostTNode,y)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(oT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ft],l=new E0(u,u[wn],u[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Vh(s,i,o,r),e.attachToViewContainerRef(),ey(By(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=QT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=cu(this._lContainer,t);r&&(Kc(By(this._lContainer),t),kh(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=cu(this._lContainer,t);return r&&Kc(By(this._lContainer),t)!=null?new Pi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function QT(n){return n[Xc]}function By(n){return n[Xc]||(n[Xc]=[])}function I0(n,e){let t,r=e[n.index];return Vn(r)?t=r:(t=a0(r,e,null,n),e[n.index]=t,xv(e,t)),UL(t,e,n,r),new E0(t,n,e)}function jL(n,e){let t=n[je],r=t.createComment(""),i=jn(e,n),o=t.parentNode(i);return mh(t,o,r,t.nextSibling(i),!1),r}var UL=HL,BL=()=>!1;function $L(n,e,t){return BL(n,e,t)}function HL(n,e,t,r){if(n[Ri])return;let i;t.type&8?i=Dn(r):i=jL(e,t),n[Ri]=i}var sv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},av=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Kv(e,t).matches!==null&&this.queries[t].setDirty()}},cv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=JL(e):this.predicate=e}},uv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,qL(t,o)),this.matchTNodeWithReadOption(e,t,ch(t,e,o,!1,!1))}else r===Uo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ch(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Bt||i===xi||i===Uo&&t.type&4)this.addMatch(t.index,-2);else{let o=ch(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function qL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function zL(n,e){return n.type&11?ca(n,e):n.type&4?jh(n,e):null}function GL(n,e,t,r){return t===-1?zL(e,n):t===-2?WL(n,e,r):ou(n,n[K],t,e)}function WL(n,e,t){if(t===Bt)return ca(e,n);if(t===Uo)return jh(e,n);if(t===xi)return I0(e,n)}function w0(n,e,t,r){let i=e[pr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(GL(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function dv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=w0(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=We;p<h.length;p++){let g=h[p];g[Ai]===g[ft]&&dv(g[K],g,l,r)}if(h[ko]!==null){let p=h[ko];for(let g=0;g<p.length;g++){let y=p[g];dv(y[K],y,l,r)}}}}}return r}function KL(n,e){return n[pr].queries[e].queryList}function QL(n,e,t){let r=new ph((t&4)===4);return cT(n,e,r,r.destroy),(e[pr]??=new av).queries.push(new sv(r))-1}function YL(n,e,t,r){let i=pt();if(i.firstCreatePass){let o=Et();ZL(i,new cv(e,t,r),o.index),XL(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return QL(i,se(),t)}function JL(n){return n.split(",").map(e=>e.trim())}function ZL(n,e,t){n.queries===null&&(n.queries=new uv),n.queries.track(new lv(e,t))}function XL(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Kv(n,e){return n.queries.getByIndex(e)}function eV(n,e){let t=n[K],r=Kv(t,e);return r.crossesNgTemplate?dv(t,n,e,[]):w0(t,n,r,e)}var Ho=class{},Bh=class{};var Ih=class extends Ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _h(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ry(e);this._bootstrapComponents=OS(o.bootstrap),this._r3Injector=Ny(e,t,[{provide:Ho,useValue:this},{provide:mu,useValue:this.componentFactoryResolver},...r],Br(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wh=class extends Bh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ih(this.moduleType,e,[])}};var uu=class extends Ho{injector;componentFactoryResolver=new _h(this);instance=null;constructor(e){super();let t=new Ao([...e.providers,{provide:Ho,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],e.parent||Yc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ua(n,e,t=null){return new uu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var tV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=oy(!1,t.type),i=r.length>0?ua([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(W(nt))})}return n})();function Fe(n){return aa(()=>{let e=D0(n),t=Y(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Dv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(tV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$n.Emulated,styles:n.styles||nn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zn("NgStandalone"),C0(t);let r=n.dependencies;return t.directiveDefs=YT(r,nV),t.pipeDefs=YT(r,Kb),t.id=oV(t),t})}function nV(n){return Hr(n)||iy(n)}function Wn(n){return aa(()=>({type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function rV(n,e){if(n==null)return Ti;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Ph.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function iV(n){if(n==null)return Ti;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Le(n){return aa(()=>{let e=D0(n);return C0(e),e})}function D0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ti,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:rV(n.inputs,e),outputs:iV(n.outputs),debugInfo:null}}function C0(n){n.features?.forEach(e=>e(n))}function YT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function oV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function sV(n){return Object.getPrototypeOf(n.prototype).constructor}function Ht(n){let e=sV(n.type),t=!0,r=[n];for(;e;){let i;if(mr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=$y(n.inputs),s.declaredInputs=$y(n.declaredInputs),s.outputs=$y(n.outputs);let a=i.hostBindings;a&&dV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&uV(n,u),l&&lV(n,l),aV(n,i),Vb(n.outputs,i.outputs),mr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ht&&(t=!1)}}e=Object.getPrototypeOf(e)}cV(r)}function aV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function cV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ia(i.hostAttrs,t=ia(t,i.hostAttrs))}}function $y(n){return n===Ti?{}:n===nn?[]:n}function uV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function lV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function dV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function b0(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ia(n.mergedAttrs,n.attrs);let h=n.tView=Mv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Xs(n,!1);let u=fV(t,e,n,r);eh()&&Lv(t,e,u,n),oa(u,e);let l=a0(u,e,u,n);e[r+it]=l,xv(e,l),$L(l,n,e)}function hV(n,e,t,r,i,o,s,a,u,l,h){let p=t+it,g;return e.firstCreatePass?(g=gu(e,p,4,s||null,a||null),Wd()&&p0(e,n,g,bn(e.consts,l),jv),aS(e,g)):g=e.data[p],b0(g,n,e,t,r,i,o,u),Ys(g)&&Fh(e,n,g),l!=null&&pu(n,g,h),g}function Dh(n,e,t,r,i,o,s,a,u,l,h){let p=t+it,g;if(e.firstCreatePass){if(g=gu(e,p,4,s||null,a||null),l!=null){let y=bn(e.consts,l);g.localNames=[];for(let S=0;S<y.length;S+=2)g.localNames.push(y[S],-1)}}else g=e.data[p];return b0(g,n,e,t,r,i,o,u),l!=null&&pu(n,g,h),g}function la(n,e,t,r,i,o,s,a){let u=se(),l=pt(),h=bn(l.consts,o);return hV(u,l,n,e,t,r,i,h,void 0,s,a),la}var fV=pV;function pV(n,e,t,r){return nu(!0),e[je].createComment("")}var Qv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function T0(n){return typeof n=="function"&&n[jt]!==void 0}function Yv(n){return T0(n)&&typeof n.set=="function"}var Jv=new q("");function ki(n){return!!n&&typeof n.then=="function"}function Zv(n){return!!n&&typeof n.subscribe=="function"}var Xv=new q("");function $h(n){return on([{provide:Xv,multi:!0,useValue:n}])}var e_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(Xv,{optional:!0})??[];injector=R(Ge);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=rt(this.injector,i);if(ki(o))t.push(o);else if(Zv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yu=new q("");function S0(){lm(()=>{let n="";throw new G(600,n)})}function A0(n){return n.isBoundToModule}var gV=10;var zr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(cn);afterRenderManager=R(Ov);zonelessEnabled=R(ea);rootEffectScheduler=R(Fy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(vr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ge(t=>!t))}constructor(){R(Go,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ge.NULL){return this._injector.get(Ie).run(()=>{Se(Ee.BootstrapComponentStart);let s=t instanceof Uh;if(!this._injector.get(e_).done){let S="";throw new G(405,S)}let u;s?u=t:u=this._injector.get(mu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=A0(u)?void 0:this._injector.get(Ho),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Jv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),iu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Se(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(xh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Se(Ee.ChangeDetectionEnd),new G(101,!1);let t=Z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Z(t),this.afterTick.next(),Se(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Bo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<gV;){Se(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Se(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!tu(i))continue;let o=r&&!this.zonelessEnabled?0:1;r0(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>tu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;iu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(yu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>iu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vu(n,e,t,r){let i=se(),o=Fo();if(Hn(i,o,e)){let s=pt(),a=Xd();jF(a,i,n,e,t,r)}return vu}var pQ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var hv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Hy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function mV(n,e,t,r){let i,o,s=0,a=n.length-1,u=void 0;if(Array.isArray(e)){Z(r);let l=e.length-1;for(Z(null);s<=a&&s<=l;){let h=n.at(s),p=e[s],g=Hy(s,h,s,p,t);if(g!==0){g<0&&n.updateValue(s,p),s++;continue}let y=n.at(a),S=e[l],x=Hy(a,y,l,S,t);if(x!==0){x<0&&n.updateValue(a,S),a--,l--;continue}let N=t(s,h),U=t(a,y),oe=t(s,p);if(Object.is(oe,U)){let pe=t(l,S);Object.is(pe,N)?(n.swap(s,a),n.updateValue(a,S),l--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new Ch,o??=ZT(n,s,a,t),fv(n,i,s,oe))n.updateValue(s,p),s++,a++;else if(o.has(oe))i.set(N,n.detach(s)),a--;else{let pe=n.create(s,e[s]);n.attach(s,pe),s++,a++}}for(;s<=l;)JT(n,i,t,s,e[s]),s++}else if(e!=null){Z(r);let l=e[Symbol.iterator]();Z(null);let h=l.next();for(;!h.done&&s<=a;){let p=n.at(s),g=h.value,y=Hy(s,p,s,g,t);if(y!==0)y<0&&n.updateValue(s,g),s++,h=l.next();else{i??=new Ch,o??=ZT(n,s,a,t);let S=t(s,g);if(fv(n,i,s,S))n.updateValue(s,g),s++,a++,h=l.next();else if(!o.has(S))n.attach(s,n.create(s,g)),s++,a++,h=l.next();else{let x=t(s,p);i.set(x,n.detach(s)),a--}}}for(;!h.done;)JT(n,i,t,n.length,h.value),h=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function fv(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function JT(n,e,t,r,i){if(fv(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function ZT(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Ch=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Be(n,e,t,r,i,o,s,a){zn("NgControlFlow");let u=se(),l=pt(),h=bn(l.consts,o);return Dh(u,l,n,e,t,r,i,h,256,s,a),t_}function t_(n,e,t,r,i,o,s,a){zn("NgControlFlow");let u=se(),l=pt(),h=bn(l.consts,o);return Dh(u,l,n,e,t,r,i,h,512,s,a),t_}function $e(n,e){zn("NgControlFlow");let t=se(),r=Fo(),i=t[r]!==$t?t[r]:-1,o=i!==-1?bh(t,it+i):void 0,s=0;if(Hn(t,r,n)){let a=Z(null);try{if(o!==void 0&&u0(o,s),n!==-1){let u=it+n,l=bh(t,u),h=yv(t[K],u),p=d0(l,h,t),g=Lh(t,h,e,{dehydratedView:p});Vh(l,g,s,su(h,p))}}finally{Z(a)}}else if(o!==void 0){let a=c0(o,s);a!==void 0&&(a[Ze]=e)}}var pv=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-We}};function n_(n,e){return e}var gv=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function qt(n,e,t,r,i,o,s,a,u,l,h,p,g){zn("NgControlFlow");let y=se(),S=pt(),x=u!==void 0,N=se(),U=a?s.bind(N[sn][Ze]):s,oe=new gv(x,U);N[it+n]=oe,Dh(y,S,n+1,e,t,r,i,bn(S.consts,o),256),x&&Dh(y,S,n+2,u,l,h,p,bn(S.consts,g),512)}var mv=class extends hv{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-We}at(e){return this.getLView(e)[Ze].$implicit}attach(e,t){let r=t[Ws];this.needsIndexUpdate||=e!==this.length,Vh(this.lContainer,t,e,su(this.templateTNode,r)),yV(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,vV(this.lContainer,e),_V(this.lContainer,e)}create(e,t){let r=nv(this.lContainer,this.templateTNode.tView.ssrId),i=Lh(this.hostLView,this.templateTNode,new pv(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){kh(e[K],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ze].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ze].$index=e}getLView(e){return EV(this.lContainer,e)}};function zt(n){let e=Z(null),t=yr();try{let r=se(),i=r[K],o=r[t],s=t+1,a=bh(r,s);if(o.liveCollection===void 0){let l=yv(i,s);o.liveCollection=new mv(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(mV(u,n,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Fo(),h=u.length===0;if(Hn(r,l,h)){let p=t+2,g=bh(r,p);if(h){let y=yv(i,p),S=d0(g,y,r),x=Lh(r,y,void 0,{dehydratedView:S});Vh(g,x,0,su(y,S))}else i.firstUpdatePass&&uL(g),u0(g,0)}}}finally{Z(e)}}function bh(n,e){return n[e]}function yV(n,e){if(n.length<=We)return;let t=We+e,r=n[t],i=r?r[xo]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[qr];pF(o,i),jo.delete(r),i.detachedLeaveAnimationFns=void 0}}function vV(n,e){if(n.length<=We)return;let t=We+e,r=n[t],i=r?r[xo]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function _V(n,e){return cu(n,e)}function EV(n,e){return c0(n,e)}function yv(n,e){return eu(n,e)}function ve(n,e,t){let r=se(),i=Fo();if(Hn(r,i,e)){let o=pt(),s=Xd();JS(s,r,n,e,r[je],t)}return ve}function XT(n,e,t,r,i){$v(e,n,t,i?"class":"style",r)}function k(n,e,t,r){let i=se(),o=i[K],s=n+it,a=o.firstCreatePass?Gv(s,i,2,e,jv,Wd(),t,r):o.data[s];if(Uv(a,i,n,e,R0),Ys(a)){let u=i[K];Fh(u,i,a),Sv(u,a,i)}return r!=null&&pu(i,a),k}function P(){let n=pt(),e=Et(),t=Bv(e);return n.firstCreatePass&&Wv(n,t),_y(t)&&Ey(),vy(),t.classesWithoutHost!=null&&g1(t)&&XT(n,t,se(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&m1(t)&&XT(n,t,se(),t.stylesWithoutHost,!1),P}function Ne(n,e,t,r){return k(n,e,t,r),P(),Ne}function Oi(n,e,t,r){let i=se(),o=i[K],s=n+it,a=o.firstCreatePass?DL(s,o,2,e,t,r):o.data[s];return Uv(a,i,n,e,R0),r!=null&&pu(i,a),Oi}function Kn(){let n=Et(),e=Bv(n);return _y(e)&&Ey(),vy(),Kn}var R0=(n,e,t,r,i)=>(nu(!0),LS(e[je],r,CT()));function Hh(n,e,t){let r=se(),i=r[K],o=n+it,s=i.firstCreatePass?Gv(o,r,8,"ng-container",jv,Wd(),e,t):i.data[o];if(Uv(s,r,n,"ng-container",IV),Ys(s)){let a=r[K];Fh(a,r,s),Sv(a,s,r)}return t!=null&&pu(r,s),Hh}function qh(){let n=pt(),e=Et(),t=Bv(e);return n.firstCreatePass&&Wv(n,t),qh}var IV=(n,e,t,r,i)=>(nu(!0),oF(e[je],""));function gt(){return se()}var _u="en-US";var wV=_u;function N0(n){typeof n=="string"&&(wV=n.toLowerCase().replace(/_/g,"-"))}function ce(n,e,t){let r=se(),i=pt(),o=Et();return M0(i,r,r[je],o,n,e,t),ce}function M0(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Uy(r,e,o),TL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Uy(r,e,o),WT(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Uy(r,e,o),WT(r,e,p,i,i,u)}}function he(n=1){return DT(n)}function r_(n,e,t,r){YL(n,e,t,r)}function i_(n){let e=se(),t=pt(),r=Sy();Yd(r+1);let i=Kv(t,r);if(n.dirty&&iT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=eV(e,r);n.reset(o,R1),n.notifyOnChanges()}return!0}return!1}function o_(){return KL(se(),Sy())}function s_(n){let e=pT();return rT(e,it+n)}function oh(n,e){return n<<17|e<<2}function qo(n){return n>>17&32767}function DV(n){return(n&2)==2}function CV(n,e){return n&131071|e<<17}function vv(n){return n|2}function sa(n){return(n&131068)>>2}function qy(n,e){return n&-131069|e<<2}function bV(n){return(n&1)===1}function _v(n){return n|1}function TV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qo(s),u=sa(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Gs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=qo(n[a+1]);n[r+1]=oh(g,a),g!==0&&(n[g+1]=qy(n[g+1],r)),n[a+1]=CV(n[a+1],r)}else n[r+1]=oh(a,0),a!==0&&(n[a+1]=qy(n[a+1],r)),a=r;else n[r+1]=oh(u,0),a===0?a=r:n[u+1]=qy(n[u+1],r),u=r;l&&(n[r+1]=vv(n[r+1])),eS(n,h,r,!0),eS(n,h,r,!1),SV(e,h,n,r,o),s=oh(a,u),o?e.classBindings=s:e.styleBindings=s}function SV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Gs(o,e)>=0&&(t[r+1]=_v(t[r+1]))}function eS(n,e,t,r){let i=n[t+1],o=e===null,s=r?qo(i):sa(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];AV(u,e)&&(a=!0,n[s+1]=r?_v(l):vv(l)),s=r?qo(l):sa(l)}a&&(n[t+1]=r?vv(i):_v(i))}function AV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Gs(n,e)>=0:!1}function da(n,e,t){return P0(n,e,t,!1),da}function Eu(n,e){return P0(n,e,null,!0),Eu}function P0(n,e,t,r){let i=se(),o=pt(),s=Kd(2);if(o.firstUpdatePass&&NV(o,n,s,r),e!==$t&&Hn(i,s,e)){let a=o.data[yr()];OV(o,a,i,i[je],n,i[s+1]=FV(e,t),r,s)}}function RV(n,e){return e>=n.expandoStartIndex}function NV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yr()],s=RV(n,t);LV(o,r)&&e===null&&!s&&(e=!1),e=MV(i,o,e,r),TV(i,o,e,t,s,r)}}function MV(n,e,t,r){let i=_T(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=zy(null,n,e,t,r),t=lu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=zy(i,n,e,t,r),o===null){let u=PV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=zy(null,n,e,u[1],r),u=lu(u,e.attrs,r),xV(n,e,r,u))}else o=kV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function PV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(sa(r)!==0)return n[qo(r)]}function xV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qo(i)]=r}function kV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=lu(r,s,t)}return lu(r,e.attrs,t)}function zy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=lu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function lu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Wb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function OV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=bV(l)?tS(u,e,t,i,sa(l),s):void 0;if(!Th(h)){Th(o)||DV(l)&&(o=tS(u,null,t,i,a,s));let p=hy(yr(),t);RF(r,s,p,i,o)}}function tS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===$t&&(g=p?nn:void 0);let y=p?Hd(g,r):h===r?g:void 0;if(l&&!Th(y)&&(y=Hd(u,r)),Th(y)&&(a=y,s))return a;let S=n[i+1];i=s?qo(S):sa(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Hd(u,r))}return a}function Th(n){return n!==void 0}function FV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Br(hu(n)))),n}function LV(n,e){return(n.flags&(e?8:16))!==0}function F(n,e=""){let t=se(),r=pt(),i=n+it,o=r.firstCreatePass?gu(r,i,1,e,null):r.data[i],s=VV(r,t,o,e,n);t[i]=s,eh()&&Lv(r,t,s,o),Xs(o,!1)}var VV=(n,e,t,r,i)=>(nu(!0),rF(e[je],r));function jV(n,e,t,r=""){return Hn(n,Fo(),t)?e+hr(t)+r:$t}function UV(n,e,t,r,i,o=""){let s=Ty(),a=y0(n,s,t,i);return Kd(2),a?e+hr(t)+r+hr(i)+o:$t}function BV(n,e,t,r,i,o,s,a=""){let u=Ty(),l=bL(n,u,t,i,s);return Kd(3),l?e+hr(t)+r+hr(i)+o+hr(s)+a:$t}function It(n){return wt("",n),It}function wt(n,e,t){let r=se(),i=jV(r,n,e,t);return i!==$t&&a_(r,yr(),i),wt}function zh(n,e,t,r,i){let o=se(),s=UV(o,n,e,t,r,i);return s!==$t&&a_(o,yr(),s),zh}function Ir(n,e,t,r,i,o,s){let a=se(),u=BV(a,n,e,t,r,i,o,s);return u!==$t&&a_(a,yr(),u),Ir}function a_(n,e,t){let r=hy(e,n);iF(n[je],r,t)}function Gh(n,e,t){Yv(e)&&(e=e());let r=se(),i=Fo();if(Hn(r,i,e)){let o=pt(),s=Xd();JS(s,r,n,e,r[je],t)}return Gh}function c_(n,e){let t=Yv(n);return t&&n.set(e),t}function Wh(n,e){let t=se(),r=pt(),i=Et();return M0(r,t,t[je],i,n,e),Wh}function $V(n,e,t){let r=pt();if(r.firstCreatePass){let i=mr(n);Ev(t,r.data,r.blueprint,i,!0),Ev(e,r.data,r.blueprint,i,!1)}}function Ev(n,e,t,r,i){if(n=Rt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ev(n[o],e,t,r,i);else{let o=pt(),s=se(),a=Et(),u=So(n)?n:Rt(n.provide),l=ay(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(So(n)||!n.multi){let y=new Vo(l,i,B,null),S=Wy(u,e,i?h:h+g,p);S===-1?(Qy(fh(a,s),o,u),Gy(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=Wy(u,e,h+g,p),S=Wy(u,e,h,h+g),x=y>=0&&t[y],N=S>=0&&t[S];if(i&&!N||!i&&!x){Qy(fh(a,s),o,u);let U=zV(i?qV:HV,t.length,i,r,l,n);!i&&N&&(t[S].providerFactory=U),Gy(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=x0(t[i?S:y],l,!i&&r);Gy(o,n,y>-1?y:S,U)}!i&&r&&N&&t[S].componentProviders++}}}function Gy(n,e,t,r){let i=So(e),o=Zb(e);if(i||o){let u=(o?Rt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function x0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Wy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function HV(n,e,t,r,i){return Iv(this.multi,[])}function qV(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ou(r,r[K],this.providerFactory.index,i);s=u.slice(0,a),Iv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Iv(o,s);return s}function Iv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function zV(n,e,t,r,i,o){let s=new Vo(n,t,B,null);return s.multi=[],s.index=e,s.componentProviders=0,x0(s,i,r&&!t),s}function wr(n,e=[]){return t=>{t.providersResolver=(r,i)=>$V(r,i?i(n):n,e)}}function Gr(n,e,t){let r=by()+n,i=se();return i[r]===$t?m0(i,r,t?e.call(t):e()):CL(i,r)}function ha(n,e,t,r){return WV(se(),by(),n,e,t,r)}function GV(n,e){let t=n[e];return t===$t?void 0:t}function WV(n,e,t,r,i,o){let s=e+t;return Hn(n,s,i)?m0(n,s+1,o?r.call(o,i):r(i)):GV(n,s+1)}function u_(n,e){return jh(n,e)}var Sh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},l_=(()=>{class n{compileModuleSync(t){return new wh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ry(t),o=OS(i.declarations).reduce((s,a)=>{let u=Hr(a);return u&&s.push(new $o(u)),s},[]);return new Sh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var k0=(()=>{class n{applicationErrorHandler=R(cn);appRef=R(zr);taskService=R(vr);ngZone=R(Ie);zonelessEnabled=R(ea);tracing=R(Go,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(qc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(nh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?xy:Py;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(qc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O0(){return[{provide:$r,useExisting:k0},{provide:Ie,useClass:zc},{provide:ea,useValue:!0}]}function KV(){return typeof $localize<"u"&&$localize.locale||_u}var Kh=new q("",{factory:()=>R(Kh,{optional:!0,skipSelf:!0})||KV()});function Sn(n,e){return od(n,e?.equal)}var V0=Symbol("InputSignalNode#UNSET"),u2=Y(M({},sd),{transformFn:void 0,applyValueToInputSignal(n,e){Fc(n,e)}});function j0(n,e){let t=Object.create(u2);t.value=n,t.transformFn=e?.transform;function r(){if(xc(t),t.value===V0){let i=null;throw new G(-950,i)}return t.value}return r[jt]=t,r}var Yh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>du(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function F0(n,e){return j0(n,e)}function l2(n){return j0(V0,n)}var U0=(F0.required=l2,F0);var d2=(()=>{class n{zone=R(Ie);changeDetectionScheduler=R($r);applicationRef=R(zr);applicationErrorHandler=R(cn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h2=new q("",{factory:()=>!1});function f2({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new Ie(Y(M({},$0()),{scheduleInRootZone:e})),[{provide:ea,useValue:!1},{provide:Ie,useFactory:n},{provide:Si,multi:!0,useFactory:()=>{let t=R(d2,{optional:!0});return()=>t.initialize()}},{provide:Si,multi:!0,useFactory:()=>{let t=R(p2);return()=>{t.initialize()}}},{provide:nh,useValue:e??My}]}function B0(n){let e=n?.scheduleInRootZone,t=f2({ngZoneFactory:()=>{let r=$0(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&zn("NgZone_CoalesceEvent"),new Ie(r)},scheduleInRootZone:e});return on([{provide:h2,useValue:!0},t])}function $0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var p2=(()=>{class n{subscription=new Je;initialized=!1;zone=R(Ie);pendingTasks=R(vr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d_=new q(""),g2=new q("");function Iu(n){return!n.moduleRef}function m2(n){let e=Iu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{Iu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Iu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(d_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(d_);s.add(o),n.moduleRef.onDestroy(()=>{iu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return v2(r,t,()=>{let o=e.get(vr),s=o.add(),a=e.get(e_);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Kh,_u);if(N0(u||_u),!e.get(g2,!0))return Iu(n)?e.get(zr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Iu(n)){let h=e.get(zr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return y2?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var y2;function v2(n,e,t){try{let r=t();return ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Qh=null;function _2(n=[],e){return Ge.create({name:e,providers:[{provide:Qc,useValue:"platform"},{provide:d_,useValue:new Set([()=>Qh=null])},...n]})}function E2(n=[]){if(Qh)return Qh;let e=_2(n);return Qh=e,S0(),I2(e),e}function I2(n){let e=n.get(Rh,null);rt(n,()=>{e?.forEach(t=>t())})}function h_(){return!1}var Wr=(()=>{class n{static __NG_ELEMENT_ID__=w2}return n})();function w2(n){return D2(Et(),se(),(n&16)===16)}function D2(n,e,t){if(Ni(n)&&!t){let r=Cn(n.index,e);return new Pi(r,r)}else if(n.type&175){let r=e[sn];return new Pi(r,e)}return null}function H0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Se(Ee.BootstrapApplicationStart);try{let o=i?.injector??E2(r),s=[O0(),ST,...t||[]],a=new uu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return m2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Se(Ee.BootstrapApplicationEnd)}}function Wo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function q0(n){let e=Hr(n);if(!e)return null;let t=new $o(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var W0=null;function An(){return W0}function f_(n){W0??=n}var wu=class{},Du=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(K0),providedIn:"platform"})}return n})(),p_=new q(""),K0=(()=>{class n extends Du{_location;_history;_doc=R(ot);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return An().getBaseHref(this._doc)}onPopState(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Jh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function z0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qn(n){return n&&n[0]!=="?"?`?${n}`:n}var Yn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(Xh),providedIn:"root"})}return n})(),Zh=new q(""),Xh=(()=>{class n extends Yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Jh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Du),W(Zh,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fi=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=T2(z0(G0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qn(r))}normalize(t){return n.stripTrailingSlash(b2(this._basePath,G0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qn;static joinWithSlash=Jh;static stripTrailingSlash=z0;static \u0275fac=function(r){return new(r||n)(W(Yn))};static \u0275prov=$({token:n,factory:()=>C2(),providedIn:"root"})}return n})();function C2(){return new Fi(W(Yn))}function b2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function G0(n){return n.replace(/\/index.html$/,"")}function T2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var g_=(()=>{class n extends Yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Jh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Du),W(Zh,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();var Cu=(()=>{class n{_viewContainer;_context=new ef;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Q0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Q0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(B(xi),B(Uo))};static \u0275dir=Le({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ef=class{$implicit=null;ngIf=null};function Q0(n,e){if(n&&!n.createEmbeddedView)throw new G(2020,!1)}var Dt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();function m_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var bu=class{};var Y0="browser";var J0=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new y_(R(ot),window)})}return n})(),y_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Y(M({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=A2(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(bi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Y(M({},t),{left:i-s[0],top:o-s[1]}))}};function A2(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Tu=class{_doc;constructor(e){this._doc=e}manager},tf=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(W(ot))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),of=new q(""),w_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof tf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof tf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(W(of),W(Ie))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),__="ng-app-id";function Z0(n){for(let e of n)e.remove()}function X0(n,e){let t=e.createElement("style");return t.textContent=n,t}function R2(n,e,t,r){let i=n.head?.querySelectorAll(`style[${__}="${e}"],link[${__}="${e}"]`);if(i)for(let o of i)o.removeAttribute(__),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function I_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var D_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,R2(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,X0);r?.forEach(i=>this.addUsage(i,this.external,I_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Z0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Z0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,X0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,I_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(W(ot),W(Ah),W(Nh,8),W(zo))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),E_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},C_=/%COMP%/g;var tA="%COMP%",N2=`_nghost-${tA}`,M2=`_ngcontent-${tA}`,P2=!0,x2=new q("",{factory:()=>P2});function k2(n){return M2.replace(C_,n)}function O2(n){return N2.replace(C_,n)}function nA(n,e){return e.map(t=>t.replace(C_,n))}var b_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Su(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof rf?i.applyToHost(t):i instanceof Au&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case $n.Emulated:o=new rf(u,l,r,this.appId,h,s,a,p,g);break;case $n.ShadowDom:return new nf(u,t,r,s,a,this.nonce,p,g,l);case $n.ExperimentalIsolatedShadowDom:return new nf(u,t,r,s,a,this.nonce,p,g);default:o=new Au(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(W(w_),W(D_),W(Ah),W(x2),W(ot),W(Ie),W(Nh),W(Go,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Su=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(E_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=E_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=E_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Er.DashCase|Er.Important)?e.style.setProperty(t,r,i&Er.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function eA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nf=class extends Su{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=nA(r.id,h);for(let g of h){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=g,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let g of p){let y=I_(g,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Au=class extends Su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?nA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&jo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rf=class extends Au{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=k2(h),this.hostAttr=O2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var sf=class n extends wu{supportsDOMEvents=!0;static makeCurrent(){f_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=F2();return t==null?null:L2(t)}resetBaseElement(){Ru=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m_(document.cookie,e)}},Ru=null;function F2(){return Ru=Ru||document.head.querySelector("base"),Ru?Ru.getAttribute("href"):null}function L2(n){return new URL(n,document.baseURI).pathname}var V2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),rA=["alt","control","meta","shift"],j2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},iA=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=j2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rA.forEach(s=>{if(s!==i){let a=U2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(W(ot))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function T_(n,e,t){let r=M({rootComponent:n,platformRef:t?.platformRef},B2(e));return H0(r)}function B2(n){return{appProviders:[...G2,...n?.providers??[]],platformProviders:z2}}function $2(){sf.makeCurrent()}function H2(){return new dr}function q2(){return Cv(document),document}var z2=[{provide:zo,useValue:Y0},{provide:Rh,useValue:$2,multi:!0},{provide:ot,useFactory:q2}];var G2=[{provide:Qc,useValue:"root"},{provide:dr,useFactory:H2},{provide:of,useClass:tf,multi:!0},{provide:of,useClass:iA,multi:!0},b_,D_,w_,{provide:Bo,useExisting:b_},{provide:bu,useClass:V2},[]];var oA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(W(ot))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var te="primary",Uu=Symbol("RouteTitle"),M_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Jo(n){return new M_(n)}function pA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hf(n){return new Promise((e,t)=>{n.pipe(jr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Q2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dr(n[t],e[t]))return!1;return!0}function Dr(n,e){let t=n?P_(n):void 0,r=e?P_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!gA(n[i],e[i]))return!1;return!0}function P_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function mA(n){return n.length>0?n[n.length-1]:null}function Zo(n){return Sd(n)?n:ki(n)?ke(Promise.resolve(n)):ae(n)}function yA(n){return Sd(n)?hf(n):Promise.resolve(n)}var Y2={exact:_A,subset:EA},vA={exact:J2,subset:Z2,ignored:()=>!0};function sA(n,e,t){return Y2[t.paths](n.root,e.root,t.matrixParams)&&vA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function J2(n,e){return Dr(n,e)}function _A(n,e,t){if(!Qo(n.segments,e.segments)||!uf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_A(n.children[r],e.children[r],t))return!1;return!0}function Z2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gA(n[t],e[t]))}function EA(n,e,t){return IA(n,e,e.segments,t)}function IA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Qo(i,t)||e.hasChildren()||!uf(i,t,r))}else if(n.segments.length===t.length){if(!Qo(n.segments,t)||!uf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Qo(n.segments,i)||!uf(n.segments,i,r)||!n.children[te]?!1:IA(n.children[te],e,o,r)}}function uf(n,e,t){return e.every((r,i)=>vA[t](n[i].parameters,r.parameters))}var Zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){return tj.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},Li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Jo(this.parameters),this._parameterMap}toString(){return DA(this)}};function X2(n,e){return Qo(n,e)&&n.every((t,r)=>Dr(t.parameters,e[r].parameters))}function Qo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ej(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==te&&(t=t.concat(e(i,r)))}),t}var Xo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new Kr,providedIn:"root"})}return n})(),Kr=class{parse(e){let t=new k_(e);return new Zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nu(e.root,!0)}`,r=ij(e.queryParams),i=typeof e.fragment=="string"?`#${nj(e.fragment)}`:"";return`${t}${r}${i}`}},tj=new Kr;function lf(n){return n.segments.map(e=>DA(e)).join("/")}function Nu(n,e){if(!n.hasChildren())return lf(n);if(e){let t=n.children[te]?Nu(n.children[te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${Nu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ej(n,(r,i)=>i===te?[Nu(n.children[te],!1)]:[`${i}:${Nu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[te]!=null?`${lf(n)}/${t[0]}`:`${lf(n)}/(${t.join("//")})`}}function wA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(n){return wA(n).replace(/%3B/gi,";")}function nj(n){return encodeURI(n)}function x_(n){return wA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(n){return decodeURIComponent(n)}function aA(n){return df(n.replace(/\+/g,"%20"))}function DA(n){return`${x_(n.path)}${rj(n.parameters)}`}function rj(n){return Object.entries(n).map(([e,t])=>`;${x_(e)}=${x_(t)}`).join("")}function ij(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${af(t)}=${af(i)}`).join("&"):`${af(t)}=${af(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var oj=/^[^\/()?;#]+/;function S_(n){let e=n.match(oj);return e?e[0]:""}var sj=/^[^\/()?;=#]+/;function aj(n){let e=n.match(sj);return e?e[0]:""}var cj=/^[^=?&#]+/;function uj(n){let e=n.match(cj);return e?e[0]:""}var lj=/^[^&#]+/;function dj(n){let e=n.match(lj);return e?e[0]:""}var k_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[te]=new we(e,t)),r}parseSegment(){let e=S_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Li(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=S_(this.remaining);i&&(r=i,this.capture(r))}e[df(t)]=df(r)}parseQueryParam(e){let t=uj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=dj(this.remaining);s&&(r=s,this.capture(r))}let i=aA(t),o=aA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=S_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();t[o??te]=Object.keys(s).length===1&&s[te]?s[te]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function CA(n){return n.segments.length>0?new we([],{[te]:n}):n}function bA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=bA(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new we(n.segments,e);return hj(t)}function hj(n){if(n.numberOfChildren===1&&n.children[te]){let e=n.children[te];return new we(n.segments.concat(e.segments),e.children)}return n}function Vi(n){return n instanceof Zn}function TA(n,e,t=null,r=null,i=new Kr){let o=SA(n);return AA(o,e,t,r,i)}function SA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new we(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=CA(r);return e??i}function AA(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return A_(o,o,o,t,r,i);let s=fj(e);if(s.toRoot())return A_(o,o,new we([],{}),t,r,i);let a=pj(s,o,n),u=a.processChildren?Pu(a.segmentGroup,a.index,s.commands):NA(a.segmentGroup,a.index,s.commands);return A_(o,a.segmentGroup,u,t,r,i)}function ff(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ku(n){return typeof n=="object"&&n!=null&&n.outlets}function cA(n,e,t){n||="\u0275";let r=new Zn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function A_(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>cA(l,p,o)):cA(l,h,o);let a;n===e?a=t:a=RA(n,e,t);let u=CA(bA(a));return new Zn(u,s,i)}function RA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=RA(o,e,t)}),new we(n.segments,r)}var pf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ff(r[0]))throw new G(4003,!1);let i=r.find(ku);if(i&&i!==mA(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pf(t,e,r)}var pa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function pj(n,e,t){if(n.isAbsolute)return new pa(e,!0,0);if(!t)return new pa(e,!1,NaN);if(t.parent===null)return new pa(t,!0,0);let r=ff(n.commands[0])?0:1,i=t.segments.length-1+r;return gj(t,i,n.numberOfDoubleDots)}function gj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new pa(r,!1,i-o)}function mj(n){return ku(n[0])?n[0].outlets:{[te]:n}}function NA(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Pu(n,e,t);let r=yj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[te]=new we(n.segments.slice(r.pathIndex),n.children),Pu(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?O_(n,e,t):r.match?Pu(n,0,i):O_(n,e,t)}function Pu(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=mj(t),i={};if(Object.keys(r).some(o=>o!==te)&&n.children[te]&&n.numberOfChildren===1&&n.children[te].segments.length===0){let o=Pu(n.children[te],e,t);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function yj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ku(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!lA(u,l,s))return o;r+=2}else{if(!lA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function O_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ku(o)){let u=vj(o.outlets);return new we(r,u)}if(i===0&&ff(t[0])){let u=n.segments[e];r.push(new Li(u.path,uA(t[0]))),i++;continue}let s=ku(o)?o.outlets[te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ff(a)?(r.push(new Li(s,uA(a))),i+=2):(r.push(new Li(s,{})),i++)}return new we(r,{})}function vj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=O_(new we([],{}),0,r))}),e}function uA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lA(n,e,t){return n==t.path&&Dr(e,t.parameters)}var ga="imperative",mt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(mt||{}),dn=class{id;url;constructor(e,t){this.id=e,this.url=t}},ji=class extends dn{type=mt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hn=class extends dn{urlAfterRedirects;type=mt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Gt||{}),ya=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ya||{}),Cr=class extends dn{reason;code;type=mt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},br=class extends dn{reason;code;type=mt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},va=class extends dn{error;target;type=mt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ou=class extends dn{urlAfterRedirects;state;type=mt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends dn{urlAfterRedirects;state;type=mt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mf=class extends dn{urlAfterRedirects;state;shouldActivate;type=mt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yf=class extends dn{urlAfterRedirects;state;type=mt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends dn{urlAfterRedirects;state;type=mt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class{route;type=mt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ef=class{route;type=mt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},If=class{snapshot;type=mt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{snapshot;type=mt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=mt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cf=class{snapshot;type=mt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_a=class{routerEvent;position;anchor;type=mt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fu=class{},Ea=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function _j(n){return!(n instanceof Fu)&&!(n instanceof Ea)}function Ej(n,e){return n.providers&&!n._injector&&(n._injector=ua(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jn(n){return n.outlet||te}function Ij(n,e){let t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function Da(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var bf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Da(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new es(this.rootInjector)}},es=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(W(nt))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=F_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=F_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=L_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return L_(e,this._root).map(t=>t.value)}};function F_(n,e){if(n===e.value)return e;for(let t of e.children){let r=F_(n,t);if(r)return r}return null}function L_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=L_(n,t);if(r.length)return r.unshift(e),r}return[]}var ln=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Lu=class extends Tf{snapshot;constructor(e,t){super(e),this.snapshot=t,H_(this,e)}toString(){return this.snapshot.toString()}};function MA(n){let e=wj(n),t=new St([new Li("",{})]),r=new St({}),i=new St({}),o=new St({}),s=new St(""),a=new Pt(t,r,o,s,i,te,n,e.root);return a.snapshot=e.root,new Lu(new ln(a,[]),e)}function wj(n){let e={},t={},r={},o=new Yo([],e,r,"",t,te,n,null,{});return new Vu("",new ln(o,[]))}var Pt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[Uu]))??ae(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Jo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Jo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&xA(i)&&(r.resolve[Uu]=i.title),r}var Yo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Uu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Vu=class extends Tf{url;constructor(e,t){super(t),this.url=e,H_(this,t)}toString(){return PA(this._root)}};function H_(n,e){e.value._routerState=n,e.children.forEach(t=>H_(n,t))}function PA(n){let e=n.children.length>0?` { ${n.children.map(PA).join(", ")} } `:"";return`${n.value}${e}`}function R_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Dr(e.params,t.params)||n.paramsSubject.next(t.params),Q2(e.url,t.url)||n.urlSubject.next(t.url),Dr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function V_(n,e){let t=Dr(n.params,e.params)&&X2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||V_(n.parent,e.parent))}function xA(n){return typeof n.title=="string"||n.title===null}var kA=new q(""),Bu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new Oe;deactivateEvents=new Oe;attachEvents=new Oe;detachEvents=new Oe;routerOutletData=U0(void 0,{});parentContexts=R(es);location=R(xi);changeDetector=R(Wr);inputBinder=R($u,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new j_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Le({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tn]})}return n})(),j_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Pt?this.route:e===es?this.childContexts:e===kA?this.outletData:this.parent.get(e,t)}},$u=new q(""),q_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Md([r.queryParams,r.params,r.data]).pipe(Fn(([o,s,a],u)=>(a=M(M(M({},o),s),a),u===0?ae(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=q0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),z_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ne(0,"router-outlet")},dependencies:[Bu],encapsulation:2})}return n})();function G_(n){let e=n.children&&n.children.map(G_),t=e?Y(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=z_),t}function Dj(n,e,t){let r=ju(n,e._root,t?t._root:void 0);return new Lu(r,e)}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Cj(n,e,t);return new ln(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ju(n,a)),s}}let r=bj(e.value),i=e.children.map(o=>ju(n,o));return new ln(r,i)}}function Cj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ju(n,r,i);return ju(n,r)})}function bj(n){return new Pt(new St(n.url),new St(n.params),new St(n.queryParams),new St(n.fragment),new St(n.data),n.outlet,n.component,n)}var Ia=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},OA="ngNavigationCancelingError";function Af(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FA(!1,Gt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function FA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[OA]=!0,t.cancellationCode=e,t}function Tj(n){return LA(n)&&Vi(n.url)}function LA(n){return!!n&&n[OA]}var Sj=(n,e,t,r)=>ge(i=>(new U_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),U_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),R_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Cf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new wf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(R_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),R_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Rf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Aj(n,e,t){let r=n._root,i=e?e._root:null;return Mu(r,i,t,[r.value])}function Rj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ca(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Gm(n)?n:e.get(n):r}function Mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fa(e);return n.children.forEach(s=>{Nj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,t.getContext(s),i)),i}function Nj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Mj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mu(n,e,a?a.children:null,r,i):Mu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ma(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new Rf(r)),o.component?Mu(n,null,a?a.children:null,r,i):Mu(n,null,t,r,i);return i}function Mj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qo(n.url,e.url)||!Dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!V_(n,e)||!Dr(n.queryParams,e.queryParams);case"paramsChange":default:return!V_(n,e)}}function xu(n,e,t){let r=fa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),t):xu(s,null,t):xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ma(e.outlet.component,i)):t.canDeactivateChecks.push(new ma(null,i)):t.canDeactivateChecks.push(new ma(null,i))}function Hu(n){return typeof n=="function"}function Pj(n){return typeof n=="boolean"}function xj(n){return n&&Hu(n.canLoad)}function kj(n){return n&&Hu(n.canActivate)}function Oj(n){return n&&Hu(n.canActivateChild)}function Fj(n){return n&&Hu(n.canDeactivate)}function Lj(n){return n&&Hu(n.canMatch)}function VA(n){return n instanceof Do||n?.name==="EmptyError"}var cf=Symbol("INITIAL_VALUE");function wa(){return Fn(n=>Md(n.map(e=>e.pipe(Vr(1),xd(cf)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===cf)return cf;if(t===!1||Vj(t))return t}return!0}),en(e=>e!==cf),Vr(1)))}function Vj(n){return Vi(n)||n instanceof Ia}function jA(n){return n.aborted?ae(void 0).pipe(Vr(1)):new le(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function UA(n){return Uc(jA(n))}function jj(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ae(Y(M({},t),{guardsResult:!0})):Uj(s,r,i,n).pipe(At(a=>a&&Pj(a)?Bj(r,o,n,e):ae(a)),ge(a=>Y(M({},t),{guardsResult:a})))})}function Uj(n,e,t,r){return ke(n).pipe(At(i=>Gj(i.component,i.route,t,e,r)),jr(i=>i!==!0,!0))}function Bj(n,e,t,r){return ke(e).pipe(Hs(i=>Bs(Hj(i.route.parent,r),$j(i.route,r),zj(n,i.path,t),qj(n,i.route,t))),jr(i=>i!==!0,!0))}function $j(n,e){return n!==null&&e&&e(new Df(n)),ae(!0)}function Hj(n,e){return n!==null&&e&&e(new If(n)),ae(!0)}function qj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(o=>jc(()=>{let s=Da(e)??t,a=Ca(o,s),u=kj(a)?a.canActivate(e,n):rt(s,()=>a(e,n));return Zo(u).pipe(jr())}));return ae(i).pipe(wa())}function zj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Rj(s)).filter(s=>s!==null).map(s=>jc(()=>{let a=s.guards.map(u=>{let l=Da(s.node)??t,h=Ca(u,l),p=Oj(h)?h.canActivateChild(r,n):rt(l,()=>h(r,n));return Zo(p).pipe(jr())});return ae(a).pipe(wa())}));return ae(o).pipe(wa())}function Gj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ae(!0);let s=o.map(a=>{let u=Da(e)??i,l=Ca(a,u),h=Fj(l)?l.canDeactivate(n,e,t,r):rt(u,()=>l(n,e,t,r));return Zo(h).pipe(jr())});return ae(s).pipe(wa())}function Wj(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ae(!0);let s=o.map(a=>{let u=Ca(a,n),l=xj(u)?u.canLoad(e,t):rt(n,()=>u(e,t)),h=Zo(l);return i?h.pipe(UA(i)):h});return ae(s).pipe(wa(),BA(r))}function BA(n){return dd(Ut(e=>{if(typeof e!="boolean")throw Af(n,e)}),ge(e=>e===!0))}function Kj(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return ae(!0);let s=o.map(a=>{let u=Ca(a,n),l=Lj(u)?u.canMatch(e,t):rt(n,()=>u(e,t)),h=Zo(l);return i?h.pipe(UA(i)):h});return ae(s).pipe(wa(),BA(r))}var Ko=class $A extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,$A.prototype)}},B_=class HA extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,HA.prototype)}};function Qj(n){throw new G(4e3,!1)}function Yj(n){throw FA(!1,Gt.GuardRejected)}var Jj=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){return v(this,null,function*(){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[te])throw Qj(`${e.redirectTo}`);i=i.children[te]}})}applyRedirectCommands(e,t,r,i,o){return v(this,null,function*(){let s=yield Zj(t,i,o);if(s instanceof Zn)throw new B_(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new B_(a);return a})}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Zn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Zj(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return hf(Zo(rt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var $_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xj(n,e,t,r,i,o){let s=qA(n,e,t);return s.matched?(r=Ej(e,r),Kj(r,e,t,i,o).pipe(ge(a=>a===!0?s:M({},$_)))):ae(s)}function qA(n,e,t){if(e.path==="**")return eU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},$_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||pA)(t,n,e);if(!i)return M({},$_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function eU(n){return{matched:!0,parameters:n.length>0?mA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function dA(n,e,t,r){return t.length>0&&rU(n,t,r)?{segmentGroup:new we(e,nU(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&iU(n,t,r)?{segmentGroup:new we(n.segments,tU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function tU(n,e,t,r){let i={};for(let o of t)if(Mf(n,e,o)&&!r[Jn(o)]){let s=new we([],{});i[Jn(o)]=s}return M(M({},r),i)}function nU(n,e){let t={};t[te]=e;for(let r of n)if(r.path===""&&Jn(r)!==te){let i=new we([],{});t[Jn(r)]=i}return t}function rU(n,e,t){return t.some(r=>Mf(n,e,r)&&Jn(r)!==te)}function iU(n,e,t){return t.some(r=>Mf(n,e,r))}function Mf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oU(n,e,t){return e.length===0&&!n.children[t]}var sU=class{};function aU(n,e,t,r,i,o,s="emptyOnly",a){return v(this,null,function*(){return new uU(n,e,t,r,i,s,o,a).recognize()})}var cU=31,uU=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new Jj(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){return v(this,null,function*(){let e=dA(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=yield this.match(e),i=new ln(r,t),o=new Vu("",i),s=TA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(e){return v(this,null,function*(){let t=new Yo([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,e,te,t),rootSnapshot:t}}catch(r){if(r instanceof B_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ko?this.noMatchError(r):r}})}processSegmentGroup(e,t,r,i,o){return v(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=yield this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof ln?[s]:[]})}processChildren(e,t,r,i){return v(this,null,function*(){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=Ij(t,u),p=yield this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=zA(s);return lU(a),a})}processSegment(e,t,r,i,o,s,a){return v(this,null,function*(){for(let u of t)try{return yield this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof Ko||VA(l))continue;throw l}if(oU(r,i,o))return new sU;throw new Ko(r)})}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return v(this,null,function*(){if(Jn(r)!==s&&(s===te||!Mf(i,o,r)))throw new Ko(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new Ko(i)})}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){return v(this,null,function*(){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=qA(t,i,o);if(!u)throw new Ko(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cU&&(this.allowRedirects=!1));let y=new Yo(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,hA(i),Jn(i),i.component??i._loadedComponent??null,i,fA(i)),S=Sf(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=yield this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),N=yield this.applyRedirects.lineralizeSegments(i,x);return this.processSegment(e,r,t,N.concat(g),s,!1,a)})}matchSegmentAgainstRoute(e,t,r,i,o,s){return v(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield hf(Xj(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ko(t);e=r._injector??e;let{routes:u}=yield this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=a,y=new Yo(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,hA(r),Jn(r),r.component??r._loadedComponent??null,r,fA(r)),S=Sf(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:x,slicedSegments:N}=dA(t,p,g,u);if(N.length===0&&x.hasChildren()){let pe=yield this.processChildren(l,u,x,y);return new ln(y,pe)}if(u.length===0&&N.length===0)return new ln(y,[]);let U=Jn(r)===o,oe=yield this.processSegment(l,u,x,N,U?te:o,!0,y);return new ln(y,oe instanceof ln?[oe]:[])})}getChildConfig(e,t,r){return v(this,null,function*(){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield hf(Wj(e,t,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw Yj(t)}return{routes:[],injector:e}})}};function lU(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}function dU(n){let e=n.value.routeConfig;return e&&e.path===""}function zA(n){let e=[],t=new Set;for(let r of n){if(!dU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zA(r.children);e.push(new ln(r.value,i))}return e.filter(r=>!t.has(r))}function hA(n){return n.data||{}}function fA(n){return n.resolve||{}}var hU=new q("",{factory:()=>aU});function fU(n,e,t,r,i,o,s){let a=n.get(hU);return At(u=>ae(u).pipe(Fn(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),ge(({state:l,tree:h})=>Y(M({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function pU(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of GA(u))s.add(l);let a=0;return ke(s).pipe(Hs(u=>o.has(u)?gU(u,r,n,e):(u.data=Sf(u,u.parent,n).resolve,ae(void 0))),Ut(()=>a++),Pd(1),At(u=>a===s.size?ae(t):Yt))})}function GA(n){let e=n.children.map(t=>GA(t)).flat();return[n,...e]}function gU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!xA(i)&&(o[Uu]=i.title),jc(()=>(n.data=Sf(n,n.parent,t).resolve,mU(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=M(M({},n.data),s),null)))))}function mU(n,e,t,r){let i=P_(n);if(i.length===0)return ae({});let o={};return ke(i).pipe(At(s=>yU(n[s],e,t,r).pipe(jr(),Ut(a=>{if(a instanceof Ia)throw Af(new Kr,a);o[s]=a}))),Pd(1),ge(()=>o),$s(s=>VA(s)?Yt:Dm(s)))}function yU(n,e,t,r){let i=Da(e)??r,o=Ca(n,i),s=o.resolve?o.resolve(e,t):rt(i,()=>o(e,t));return Zo(s)}function N_(n){return Fn(e=>{let t=n(e);return t?ke(t).pipe(ge(()=>e)):ae(e)})}var W_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(t){return t.data[Uu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(WA),providedIn:"root"})}return n})(),WA=(()=>{class n extends W_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(W(oA))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ui=new q("",{factory:()=>({})}),ts=new q(""),Pf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(l_);loadComponent(t,r){return v(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=v(this,null,function*(){try{let o=yield yA(rt(t,()=>r.loadComponent())),s=yield YA(QA(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=v(this,null,function*(){try{let o=yield KA(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KA(n,e,t,r){return v(this,null,function*(){let i=yield yA(rt(t,()=>n.loadChildren())),o=yield YA(QA(i)),s;o instanceof Bh||Array.isArray(o)?s=o:s=yield e.compileModuleAsync(o),r&&r(n);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,u=a.get(ts,[],{optional:!0,self:!0}).flat()),{routes:u.map(G_),injector:a}})}function vU(n){return n&&typeof n=="object"&&"default"in n}function QA(n){return vU(n)?n.default:n}function YA(n){return v(this,null,function*(){return n})}var xf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(_U),providedIn:"root"})}return n})(),_U=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K_=new q(""),Q_=new q("");function JA(n,e,t){let r=n.get(Q_),i=n.get(ot);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),EU(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&rt(n,()=>u({transition:a,from:e,to:t})),s}function EU(n){return new Promise(e=>{fu({read:()=>setTimeout(e)},{injector:n})})}var IU=()=>{},Y_=new q(""),kf=(()=>{class n{currentNavigation=Te(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Te(null,{});events=new et;transitionAbortWithErrorSubject=new et;configLoader=R(Pf);environmentInjector=R(nt);destroyRef=R(Un);urlSerializer=R(Xo);rootContexts=R(es);location=R(Fi);inputBindingEnabled=R($u,{optional:!0})!==null;titleStrategy=R(W_);options=R(Ui,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(xf);createViewTransition=R(K_,{optional:!0});navigationErrorHandler=R(Y_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ae(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new _f(i)),r=i=>this.events.next(new Ef(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;st(()=>{this.transitions?.next(Y(M({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new St(null),this.transitions.pipe(en(r=>r!==null),Fn(r=>{let i=!1,o=new AbortController;return ae(r).pipe(Fn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),Yt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Y(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new br(s.id,this.urlSerializer.serialize(s.rawUrl),"",ya.IgnoredSameUrlNavigation)),s.resolve(!1),Yt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ae(s).pipe(Fn(h=>(this.events.next(new ji(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Yt:Promise.resolve(h))),fU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ut(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new Ou(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:S}=s,x=new ji(h,this.urlSerializer.serialize(p),g,y);this.events.next(x);let N=MA(this.rootComponentType).snapshot;return this.currentTransition=r=Y(M({},s),{targetSnapshot:N,urlAfterRedirects:p,extras:Y(M({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(U=>(U.finalUrl=p,U)),ae(r)}else return this.events.next(new br(s.id,this.urlSerializer.serialize(s.extractedUrl),"",ya.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Yt}),Ut(s=>{let a=new gf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ge(s=>(this.currentTransition=r=Y(M({},s),{guards:Aj(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),jj(this.environmentInjector,s=>this.events.next(s)),Ut(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Af(this.urlSerializer,s.guardsResult);let a=new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),en(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Gt.GuardRejected),!1)),N_(s=>{if(s.guards.canActivateChecks.length!==0)return ae(s).pipe(Ut(a=>{let u=new yf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Fn(a=>{let u=!1;return ae(a).pipe(pU(this.paramsInheritanceStrategy,this.environmentInjector),Ut({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Gt.NoDataFromResolver)}}))}),Ut(a=>{let u=new vf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),N_(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Da(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?ae(s):ke(Promise.all(u).then(()=>s))}),N_(()=>this.afterPreactivation()),Fn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?ke(u).pipe(ge(()=>r)):ae(r)}),ge(s=>{let a=Dj(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Y(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Ut(()=>{this.events.next(new Fu)}),Sj(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Vr(1),Uc(jA(o.signal).pipe(en(()=>!i&&!r.targetRouterState),Ut(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Gt.Aborted)}))),Ut({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=IU,a)),this.lastSuccessfulNavigation.set(st(this.currentNavigation)),this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Uc(this.transitionAbortWithErrorSubject.pipe(Ut(s=>{throw s}))),Tm(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),$s(s=>{if(this.destroyed)return r.resolve(!1),Yt;if(i=!0,LA(s))this.events.next(new Cr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Tj(s)?this.events.next(new Ea(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new va(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=rt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Ia){let{message:l,cancellationCode:h}=Af(this.urlSerializer,u);this.events.next(new Cr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ea(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Yt}))}))}cancelNavigationTransition(t,r,i){let o=new Cr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=st(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wU(n){return n!==ga}var ZA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(DU),providedIn:"root"})}return n})(),Nf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},DU=(()=>{class n extends Nf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J_=(()=>{class n{urlSerializer=R(Xo);options=R(Ui,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Fi);urlHandlingStrategy=R(xf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=MA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(XA),providedIn:"root"})}return n})(),XA=(()=>{class n extends J_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ji?this.updateStateMemento():t instanceof br?this.commitTransition(r):t instanceof Ou?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Cr&&t.code!==Gt.SupersededByNewNavigation&&t.code!==Gt.Redirect?this.restoreHistory(r):t instanceof va?this.restoreHistory(r,!0):t instanceof hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Of(n,e){n.events.pipe(en(t=>t instanceof hn||t instanceof Cr||t instanceof va||t instanceof br),ge(t=>t instanceof hn||t instanceof br?0:(t instanceof Cr?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?2:1),en(t=>t!==2),Vr(1)).subscribe(()=>{e()})}var CU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ke=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Qv);stateManager=R(J_);options=R(Ui,{optional:!0})||{};pendingTasks=R(vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(kf);urlSerializer=R(Xo);location=R(Fi);urlHandlingStrategy=R(xf);injector=R(nt);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(ZA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(ts,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R($u,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=st(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cr&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof hn)this.navigated=!0;else if(r instanceof Ea){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||wU(i.source)},s);this.scheduleNavigation(a,ga,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_j(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(cn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return st(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(G_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=SA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return AA(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Vi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ga,null,r)}navigate(t,r={skipLocationChange:!1}){return TU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(bi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=M({},CU):r===!1?i=M({},bU):i=r,Vi(t))return sA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return sA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Of(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new G(4008,!1)}var Rn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Te(null,{});get href(){return st(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;applicationErrorHandler=R(cn);options=R(Ui,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new Yh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof hn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Vi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(B(Ke),B(Pt),du("tabindex"),B(Gn),B(Bt),B(Yn))};static \u0275dir=Le({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ce("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&vu("href",i.reactiveHref(),Rv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Wo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Wo],replaceUrl:[2,"replaceUrl","replaceUrl",Wo],routerLink:"routerLink"},features:[Tn]})}return n})(),X_=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Oe;link=R(Rn,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof hn&&this.update()})}ngAfterContentInit(){ae(this.links.changes,ae(null)).pipe(wi()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ke(t).pipe(wi()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=SU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(B(Ke),B(Bt),B(Gn),B(Wr))};static \u0275dir=Le({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&r_(o,Rn,5),r&2){let s;i_(s=o_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Tn]})}return n})();function SU(n){return!!n.paths}var qu=class{};var eR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(en(t=>t instanceof hn),Hs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ua(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ke(i).pipe(wi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=ke(this.loader.loadChildren(t,r)):i=ae(null);let o=i.pipe(At(s=>s===null?ae(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return ke([o,s]).pipe(wi())}else return o})}static \u0275fac=function(r){return new(r||n)(W(Ke),W(nt),W(qu),W(Pf))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tR=new q(""),AU=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ga;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof br&&t.code===ya.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof _a))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new _a(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){zv()};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function eE(n,...e){return on([{provide:ts,multi:!0,useValue:n},[],{provide:Pt,useFactory:nR},{provide:yu,multi:!0,useFactory:rR},e.map(t=>t.\u0275providers)])}function nR(){return R(Ke).routerState.root}function zu(n,e){return{\u0275kind:n,\u0275providers:e}}function rR(){let n=R(Ge);return e=>{let t=n.get(zr);if(e!==t.components[0])return;let r=n.get(Ke),i=n.get(iR);n.get(tE)===1&&r.initialNavigation(),n.get(aR,null,{optional:!0})?.setUpPreloading(),n.get(tR,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iR=new q("",{factory:()=>new et}),tE=new q("",{factory:()=>1});function oR(){let n=[{provide:bv,useValue:!0},{provide:tE,useValue:0},$h(()=>{let e=R(Ge);return e.get(p_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ke),o=e.get(iR);Of(i,()=>{r(!0)}),e.get(kf).afterPreactivation=()=>(r(!0),o.closed?ae(void 0):o),i.initialNavigation()}))})];return zu(2,n)}function sR(){let n=[$h(()=>{R(Ke).setUpLocationChangeListener()}),{provide:tE,useValue:2}];return zu(3,n)}var aR=new q("");function cR(n){return zu(0,[{provide:aR,useExisting:eR},{provide:qu,useExisting:n}])}function uR(){return zu(8,[q_,{provide:$u,useExisting:q_}])}function lR(n){zn("NgRouterViewTransitions");let e=[{provide:K_,useValue:JA},{provide:Q_,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return zu(9,e)}var dR=[Fi,{provide:Xo,useClass:Kr},Ke,es,{provide:Pt,useFactory:nR},Pf,[]],ns=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[dR,[],{provide:ts,multi:!0,useValue:t},[],r?.errorHandler?{provide:Y_,useValue:r.errorHandler}:[],{provide:Ui,useValue:r||{}},r?.useHash?NU():MU(),RU(),r?.preloadingStrategy?cR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?PU(r):[],r?.bindToComponentInputs?uR().\u0275providers:[],r?.enableViewTransitions?lR().\u0275providers:[],xU()]}}static forChild(t){return{ngModule:n,providers:[{provide:ts,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();function RU(){return{provide:tR,useFactory:()=>{let n=R(J0),e=R(Ie),t=R(Ui),r=R(kf),i=R(Xo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new AU(i,r,n,e,t)}}}function NU(){return{provide:Yn,useClass:g_}}function MU(){return{provide:Yn,useClass:Xh}}function PU(n){return[n.initialNavigation==="disabled"?sR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?oR().\u0275providers:[]]}var Z_=new q("");function xU(){return[{provide:Z_,useFactory:rR},{provide:yu,multi:!0,useExisting:Z_}]}var hR=()=>{};var gR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},kU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ff={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new rE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OU=function(n){let e=gR(n);return Ff.encodeByteArray(e,!0)},Wu=function(n){return OU(n).replace(/\./g,"")},Lf=function(n){try{return Ff.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FU=()=>oE().__FIREBASE_DEFAULTS__,LU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Lf(n[1]);return e&&JSON.parse(e)},Vf=()=>{try{return hR()||FU()||LU()||VU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sE=n=>Vf()?.emulatorHosts?.[n],mR=n=>{let e=sE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aE=()=>Vf()?.config,cE=n=>Vf()?.[`_${n}`];var is=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Bi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function jf(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function yR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wu(JSON.stringify(t)),Wu(JSON.stringify(s)),""].join(".")}var Gu={};function jU(){let n={prod:[],emulator:[]};for(let e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function UU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var fR=!1;function Uf(n,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Gu[n]===e||Gu[n]||fR)return;Gu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=jU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{fR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=UU(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),x=t("learnmore"),N=document.getElementById(x)||document.createElement("a"),U=t("preprendIcon"),oe=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let pe=g.element;a(pe),h(N,x);let Ft=l();u(oe,U),pe.append(oe,S,N,Ft),document.body.appendChild(pe)}o?(S.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function BU(){let n=Vf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _R(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ER(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wR(){let n=Ct();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DR(){return!BU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ku(){try{return typeof indexedDB=="object"}catch{return!1}}function CR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var $U="FirebaseError",fn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$U,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?HU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new fn(i,a,r)}};function HU(n,e){return n.replace(qU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qU=/\{\$([^}]+)}/g;function bR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(pR(o)&&pR(s)){if(!Tr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pR(n){return n!==null&&typeof n=="object"}function Qu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ba(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ta(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TR(n,e){let t=new iE(n,e);return t.subscribe.bind(t)}var iE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nE),i.error===void 0&&(i.error=nE),i.complete===void 0&&(i.complete=nE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nE(){}var Oie=14400*1e3;function Xe(n){return n&&n._delegate?n._delegate:n}var Wt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var os="[DEFAULT]";var uE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new is;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WU(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GU(n){return n===os?void 0:n}function WU(n){return n.instantiationMode==="EAGER"}var Bf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new uE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KU=[],fe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(fe||{}),QU={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},YU=fe.INFO,JU={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},ZU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sr=class{constructor(e){this.name=e,this._logLevel=YU,this._logHandler=ZU,this._userLogHandler=null,KU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var XU=(n,e)=>e.some(t=>n instanceof t),SR,AR;function eB(){return SR||(SR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tB(){return AR||(AR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var RR=new WeakMap,dE=new WeakMap,NR=new WeakMap,lE=new WeakMap,fE=new WeakMap;function nB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ar(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&RR.set(t,n)}).catch(()=>{}),fE.set(e,n),e}function rB(n){if(dE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});dE.set(n,e)}var hE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MR(n){hE=n(hE)}function iB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($f(this),e,...t);return NR.set(r,e.sort?e.sort():[e]),Ar(r)}:tB().includes(n)?function(...e){return n.apply($f(this),e),Ar(RR.get(this))}:function(...e){return Ar(n.apply($f(this),e))}}function oB(n){return typeof n=="function"?iB(n):(n instanceof IDBTransaction&&rB(n),XU(n,eB())?new Proxy(n,hE):n)}function Ar(n){if(n instanceof IDBRequest)return nB(n);if(lE.has(n))return lE.get(n);let e=oB(n);return e!==n&&(lE.set(n,e),fE.set(e,n)),e}var $f=n=>fE.get(n);function xR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Ar(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Ar(s.result),u.oldVersion,u.newVersion,Ar(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sB=["get","getKey","getAll","getAllKeys","count"],aB=["put","add","delete","clear"],pE=new Map;function PR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pE.get(e))return pE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=aB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sB.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return pE.set(e,o),o}MR(n=>Y(M({},n),{get:(e,t,r)=>PR(e,t)||n.get(e,t,r),has:(e,t)=>!!PR(e,t)||n.has(e,t)}));var mE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cB(n){return n.getComponent()?.type==="VERSION"}var yE="@firebase/app",kR="0.14.6";var Qr=new Sr("@firebase/app"),uB="@firebase/app-compat",lB="@firebase/analytics-compat",dB="@firebase/analytics",hB="@firebase/app-check-compat",fB="@firebase/app-check",pB="@firebase/auth",gB="@firebase/auth-compat",mB="@firebase/database",yB="@firebase/data-connect",vB="@firebase/database-compat",_B="@firebase/functions",EB="@firebase/functions-compat",IB="@firebase/installations",wB="@firebase/installations-compat",DB="@firebase/messaging",CB="@firebase/messaging-compat",bB="@firebase/performance",TB="@firebase/performance-compat",SB="@firebase/remote-config",AB="@firebase/remote-config-compat",RB="@firebase/storage",NB="@firebase/storage-compat",MB="@firebase/firestore",PB="@firebase/ai",xB="@firebase/firestore-compat",kB="firebase",OB="12.6.0";var vE="[DEFAULT]",FB={[yE]:"fire-core",[uB]:"fire-core-compat",[dB]:"fire-analytics",[lB]:"fire-analytics-compat",[fB]:"fire-app-check",[hB]:"fire-app-check-compat",[pB]:"fire-auth",[gB]:"fire-auth-compat",[mB]:"fire-rtdb",[yB]:"fire-data-connect",[vB]:"fire-rtdb-compat",[_B]:"fire-fn",[EB]:"fire-fn-compat",[IB]:"fire-iid",[wB]:"fire-iid-compat",[DB]:"fire-fcm",[CB]:"fire-fcm-compat",[bB]:"fire-perf",[TB]:"fire-perf-compat",[SB]:"fire-rc",[AB]:"fire-rc-compat",[RB]:"fire-gcs",[NB]:"fire-gcs-compat",[MB]:"fire-fst",[xB]:"fire-fst-compat",[PB]:"fire-vertex","fire-js":"fire-js",[kB]:"fire-js-all"};var Yu=new Map,LB=new Map,_E=new Map;function OR(n,e){try{n.container.addComponent(e)}catch(t){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function er(n){let e=n.name;if(_E.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;_E.set(e,n);for(let t of Yu.values())OR(t,n);for(let t of LB.values())OR(t,n);return!0}function Sa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pn(n){return n==null?!1:n.settings!==void 0}var VB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Xn("app","Firebase",VB);var EE=class{constructor(e,t,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}};var Hi=OB;function DE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=M({name:vE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $i.create("bad-app-name",{appName:String(i)});if(t||(t=aE()),!t)throw $i.create("no-options");let o=Yu.get(i);if(o){if(Tr(t,o.options)&&Tr(r,o.config))return o;throw $i.create("duplicate-app",{appName:i})}let s=new Bf(i);for(let u of _E.values())s.addComponent(u);let a=new EE(t,r,s);return Yu.set(i,a),a}function ss(n=vE){let e=Yu.get(n);if(!e&&n===vE&&aE())return DE();if(!e)throw $i.create("no-app",{appName:n});return e}function Hf(){return Array.from(Yu.values())}function Qe(n,e,t){let r=FB[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(s.join(" "));return}er(new Wt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var jB="firebase-heartbeat-database",UB=1,Ju="firebase-heartbeat-store",gE=null;function jR(){return gE||(gE=xR(jB,UB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),gE}function BB(n){return v(this,null,function*(){try{let t=(yield jR()).transaction(Ju),r=yield t.objectStore(Ju).get(UR(n));return yield t.done,r}catch(e){if(e instanceof fn)Qr.warn(e.message);else{let t=$i.create("idb-get",{originalErrorMessage:e?.message});Qr.warn(t.message)}}})}function FR(n,e){return v(this,null,function*(){try{let r=(yield jR()).transaction(Ju,"readwrite");yield r.objectStore(Ju).put(e,UR(n)),yield r.done}catch(t){if(t instanceof fn)Qr.warn(t.message);else{let r=$i.create("idb-set",{originalErrorMessage:t?.message});Qr.warn(r.message)}}})}function UR(n){return`${n.name}!${n.options.appId}`}var $B=1024,HB=30,IE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>HB){let i=zB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qr.warn(e)}})}getHeartbeatsHeader(){return v(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=LR(),{heartbeatsToSend:t,unsentEntries:r}=qB(this._heartbeatsCache.heartbeats),i=Wu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Qr.warn(e),""}})}};function LR(){return new Date().toISOString().substring(0,10)}function qB(n,e=$B){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),VR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),VR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Ku()?CR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield BB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function VR(n){return Wu(JSON.stringify({version:2,heartbeats:n})).length}function zB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GB(n){er(new Wt("platform-logger",e=>new mE(e),"PRIVATE")),er(new Wt("heartbeat",e=>new IE(e),"PRIVATE")),Qe(yE,kR,n),Qe(yE,kR,"esm2020"),Qe("fire-js","")}GB("");function rN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iN=rN,oN=new Xn("auth","Firebase",rN());var Qf=new Sr("@firebase/auth");function WB(n,...e){Qf.logLevel<=fe.WARN&&Qf.warn(`Auth (${Hi}): ${n}`,...e)}function zf(n,...e){Qf.logLevel<=fe.ERROR&&Qf.error(`Auth (${Hi}): ${n}`,...e)}function Nr(n,...e){throw WE(n,...e)}function as(n,...e){return WE(n,...e)}function sN(n,e,t){let r=Y(M({},iN()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function Gi(n){return sN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oN.create(n,...e)}function X(n,e,...t){if(!n)throw WE(e,...t)}function Yr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw zf(e),new Error(e)}function Wi(n,e){n||Yr(e)}function SE(){return typeof self<"u"&&self.location?.href||""}function KB(){return BR()==="http:"||BR()==="https:"}function BR(){return typeof self<"u"&&self.location?.protocol||null}function QB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KB()||ER()||"connection"in navigator)?navigator.onLine:!0}function YB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var cs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wi(t>e,"Short delay should be less than long delay!"),this.isMobile=vR()||IR()}get(){return QB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function KE(n,e){Wi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Yf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var JB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ZB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XB=new cs(3e4,6e4);function ls(n,e){return n.tenantId&&!e.tenantId?Y(M({},e),{tenantId:n.tenantId}):e}function Ki(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return aN(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Qu(M({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=M({method:e,headers:g},l);return _R()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Bi(n.emulatorConfig.host)&&(y.credentials="include"),Yf.fetch()(yield cN(n,n.config.apiHost,t,p),y)}))})}function aN(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=M(M({},JB),e);try{let i=new AE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw qf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw qf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw qf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw qf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sN(n,h,l);Nr(n,h)}}catch(i){if(i instanceof fn)throw i;Nr(n,"network-request-failed",{message:String(i)})}})}function ap(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Ki(n,e,t,r,i);return"mfaPendingCredential"in l&&Nr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function cN(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?KE(n.config,i):`${n.config.apiScheme}://${i}`;return ZB.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function e$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var AE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(as(this.auth,"network-request-failed")),XB.get())})}};function qf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=as(n,e,r);return i.customData._tokenResponse=t,i}function $R(n){return n!==void 0&&n.enterprise!==void 0}var RE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return e$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function t$(n,e){return v(this,null,function*(){return Ki(n,"GET","/v2/recaptchaConfig",ls(n,e))})}function n$(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:delete",e)})}function Jf(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:lookup",e)})}function Xu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function QE(n,e=!1){return v(this,null,function*(){let t=Xe(n),r=yield t.getIdToken(e),i=YE(r);X(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xu(CE(i.auth_time)),issuedAtTime:Xu(CE(i.iat)),expirationTime:Xu(CE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function CE(n){return Number(n)*1e3}function YE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lf(t);return i?JSON.parse(i):(zf("Failed to decode base64 JWT payload"),null)}catch(i){return zf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HR(n){let e=YE(n);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tl(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof fn&&r$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function r$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var NE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Zf(n){return v(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield tl(n,Jf(e,{idToken:t}));X(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?uN(i.providerUserInfo):[],s=i$(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nl(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)})}function JE(n){return v(this,null,function*(){let e=Xe(n);yield Zf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function i$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uN(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Xg(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function o$(n,e){return v(this,null,function*(){let t=yield aN(n,{},()=>v(null,null,function*(){let r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield cN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Bi(n.emulatorConfig.host)&&(u.credentials="include"),Yf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function s$(n,e){return v(this,null,function*(){return Ki(n,"POST","/v2/accounts:revokeToken",ls(n,e))})}var el=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,"internal-error");let t=HR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield o$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(X(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(X(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Yr("not implemented")}};function qi(n,e){X(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var zi=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Xg(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nl(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield tl(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return QE(this,e)}reload(){return JE(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>M({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Y(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Zf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(pn(this.auth.app))return Promise.reject(Gi(this.auth));let e=yield this.getIdToken();return yield tl(this,n$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Y(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:S,stsTokenManager:x}=t;X(p&&x,e,"internal-error");let N=el.fromJSON(this.name,x);X(typeof p=="string",e,"internal-error"),qi(r,e.name),qi(i,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof y=="boolean",e,"internal-error"),qi(o,e.name),qi(s,e.name),qi(a,e.name),qi(u,e.name),qi(l,e.name),qi(h,e.name);let U=new n({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(U.providerData=S.map(oe=>M({},oe))),u&&(U._redirectEventId=u),U}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new el;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Zf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];X(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?uN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new el;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var qR=new Map;function Jr(n){Wi(n instanceof Function,"Expected a class definition");let e=qR.get(n);return e?(Wi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qR.set(n,e),e)}var a$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ME=a$;function Gf(n,e,t){return`firebase:${n}:${e}:${t}`}var Xf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Gf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Jf(this.auth,{idToken:e}).catch(()=>{});return t?zi._fromGetAccountInfoResponse(this.auth,t,e):null}return zi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Jr(ME),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Jr(ME),s=Gf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Jf(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield zi._fromGetAccountInfoResponse(e,g,h)}else p=zi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function zR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gN(e))return"Blackberry";if(mN(e))return"Webos";if(dN(e))return"Safari";if((e.includes("chrome/")||hN(e))&&!e.includes("edge/"))return"Chrome";if(pN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function lN(n=Ct()){return/firefox\//i.test(n)}function dN(n=Ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hN(n=Ct()){return/crios\//i.test(n)}function fN(n=Ct()){return/iemobile/i.test(n)}function pN(n=Ct()){return/android/i.test(n)}function gN(n=Ct()){return/blackberry/i.test(n)}function mN(n=Ct()){return/webos/i.test(n)}function ZE(n=Ct()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function c$(n=Ct()){return ZE(n)&&!!window.navigator?.standalone}function u$(){return wR()&&document.documentMode===10}function yN(n=Ct()){return ZE(n)||pN(n)||mN(n)||gN(n)||/windows phone/i.test(n)||fN(n)}function vN(n,e=[]){let t;switch(n){case"Browser":t=zR(Ct());break;case"Worker":t=`${zR(Ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hi}/${r}`}var PE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function l$(t){return v(this,arguments,function*(n,e={}){return Ki(n,"GET","/v2/passwordPolicy",ls(n,e))})}var d$=6,xE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??d$,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var kE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ep(this),this.idTokenSubscription=new ep(this),this.beforeStateQueue=new PE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Xf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Jf(this,{idToken:e}),r=yield zi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){if(pn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Zf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=YB()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(pn(this.app))return Promise.reject(Gi(this));let t=e?Xe(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return pn(this.app)?Promise.reject(Gi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return pn(this.app)?Promise.reject(Gi(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Jr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield l$(this),t=new xE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield s$(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jr(e)||this._popupRedirectResolver;X(t,this,"argument-error"),this.redirectPersistenceManager=yield Xf.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return v(this,null,function*(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WB(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Aa(n){return Xe(n)}var ep=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(t=>this.observer=t)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cp={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h$(n){cp=n}function _N(n){return cp.loadJS(n)}function f$(){return cp.recaptchaEnterpriseScript}function p$(){return cp.gapiScript}function EN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var OE=class{constructor(){this.enterprise=new FE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},FE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var g$="recaptcha-enterprise",IN="NO_RECAPTCHA",LE=class{constructor(e){this.type=g$,this.auth=Aa(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){t$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new RE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;$R(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(IN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&$R(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=f$();u.length!==0&&(u+=a),_N(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Zu(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new LE(n),s;if(i)s=IN;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=M({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function GR(n,e,t,r,i){return v(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Zu(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Zu(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Zu(n,e,t);return r(n,o).catch(s=>v(null,null,function*(){if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=yield Zu(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)}))}else{let o=yield Zu(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")})}function XE(n,e){let t=Sa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Tr(o,e??{}))return i;Nr(i,"already-initialized")}return t.initialize({options:e})}function m$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function eI(n,e,t){let r=Aa(n);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=wN(e),{host:s,port:a}=y$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Tr(l,r.config.emulator)&&Tr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Bi(s)?(jf(`${o}//${s}${u}`),Uf("Auth",!0)):i||v$()}function wN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function y$(n){let e=wN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WR(s)}}}function WR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function v$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}};function _$(n,e){return v(this,null,function*(){return Ki(n,"POST","/v1/accounts:signUp",e)})}function E$(n,e){return v(this,null,function*(){return ap(n,"POST","/v1/accounts:signInWithPassword",ls(n,e))})}function I$(n,e){return v(this,null,function*(){return ap(n,"POST","/v1/accounts:signInWithEmailLink",ls(n,e))})}function w$(n,e){return v(this,null,function*(){return ap(n,"POST","/v1/accounts:signInWithEmailLink",ls(n,e))})}var il=class n extends rl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GR(e,t,"signInWithPassword",E$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return I$(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GR(e,r,"signUpPassword",_$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return w$(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function bE(n,e){return v(this,null,function*(){return ap(n,"POST","/v1/accounts:signInWithIdp",ls(n,e))})}function D$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C$(n){let e=ba(Ta(n)).link,t=e?ba(Ta(e)).deep_link_id:null,r=ba(Ta(n)).deep_link_id;return(r?ba(Ta(r)).link:null)||r||t||e||n}var tp=class n{constructor(e){let t=ba(Ta(e)),r=t.apiKey??null,i=t.oobCode??null,o=D$(t.mode??null);X(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=C$(e);try{return new n(t)}catch{return null}}};var DN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return il._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=tp.parseLink(r);return X(i,"argument-error"),il._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),np=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var VE=class extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ol=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield zi._fromIdTokenResponse(e,r,i),s=KR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function KR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jE=class n extends fn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function CN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jE._fromErrorAndOperation(n,o,e,r):o})}function b$(n,e,t=!1){return v(this,null,function*(){let r=yield tl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ol._forOperation(n,"link",r)})}function T$(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(pn(r.app))return Promise.reject(Gi(r));let i="reauthenticate";try{let o=yield tl(n,CN(r,i,e,n),t);X(o.idToken,r,"internal-error");let s=YE(o.idToken);X(s,r,"internal-error");let{sub:a}=s;return X(n.uid===a,r,"user-mismatch"),ol._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nr(r,"user-mismatch"),o}})}function bN(n,e,t=!1){return v(this,null,function*(){if(pn(n.app))return Promise.reject(Gi(n));let r="signIn",i=yield CN(n,r,e),o=yield ol._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function tI(n,e){return v(this,null,function*(){return bN(Aa(n),e)})}function S$(n){return v(this,null,function*(){let e=Aa(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function up(n,e,t){return pn(n.app)?Promise.reject(Gi(n)):tI(Xe(n),DN.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&S$(n),r}))}function nI(n,e,t,r){return Xe(n).onIdTokenChanged(e,t,r)}function rI(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function Ra(n,e,t,r){return Xe(n).onAuthStateChanged(e,t,r)}function lp(n){return Xe(n).signOut()}var rp="__sak";var ip=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rp,"1"),this.storage.removeItem(rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var A$=1e3,R$=10,N$=(()=>{class n extends ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);u$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,R$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},A$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield vi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield vi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield vi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),TN=N$;var M$=(()=>{class n extends ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),iI=M$;function P$(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var x$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield P$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function SN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var UE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=SN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Rr(){return window}function k$(n){Rr().location.href=n}function AN(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}function O$(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function F$(){return navigator?.serviceWorker?.controller||null}function L$(){return AN()?self:null}var RN="firebaseLocalStorageDb",V$=1,op="firebaseLocalStorage",NN="fbase_key",us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dp(n,e){return n.transaction([op],e?"readwrite":"readonly").objectStore(op)}function j$(){let n=indexedDB.deleteDatabase(RN);return new us(n).toPromise()}function BE(){let n=indexedDB.open(RN,V$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(op,{keyPath:NN})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(op)?e(r):(r.close(),yield j$(),e(yield BE()))}))})}function QR(n,e,t){return v(this,null,function*(){let r=dp(n,!0).put({[NN]:e,value:t});return new us(r).toPromise()})}function U$(n,e){return v(this,null,function*(){let t=dp(n,!1).get(e),r=yield new us(t).toPromise();return r===void 0?null:r.value})}function YR(n,e){let t=dp(n,!0).delete(e);return new us(t).toPromise()}var B$=800,$$=3,H$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield BE(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>$$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return AN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=x$._getInstance(L$()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){if(this.activeServiceWorker=yield O$(),!this.activeServiceWorker)return;this.sender=new UE(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||F$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield BE();return yield QR(t,rp,"1"),yield YR(t,rp),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>QR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>U$(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>YR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=dp(o,!1).getAll();return new us(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),B$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),MN=H$;var coe=EN("rcb"),uoe=new cs(3e4,6e4);function q$(n,e){return e?Jr(e):(X(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var sl=class extends rl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function z$(n){return bN(n.auth,new sl(n),n.bypassAuthState)}function G$(n){let{auth:e,user:t}=n;return X(t,e,"internal-error"),T$(t,new sl(n),n.bypassAuthState)}function W$(n){return v(this,null,function*(){let{auth:e,user:t}=n;return X(t,e,"internal-error"),b$(t,new sl(n),n.bypassAuthState)})}var $E=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z$;case"linkViaPopup":case"linkViaRedirect":return W$;case"reauthViaPopup":case"reauthViaRedirect":return G$;default:Nr(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var loe=new cs(2e3,1e4);var K$="pendingRedirect",Wf=new Map,HE=class n extends $E{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Wf.get(this.auth._key());if(!e){try{let r=(yield Q$(this.resolver,this.auth))?yield vi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return vi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function Q$(n,e){return v(this,null,function*(){let t=Z$(e),r=J$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Y$(n,e){Wf.set(n._key(),e)}function J$(n){return Jr(n._redirectPersistence)}function Z$(n){return Gf(K$,n.config.apiKey,n.name)}function X$(n,e,t=!1){return v(this,null,function*(){if(pn(n.app))return Promise.reject(Gi(n));let r=Aa(n),i=q$(r,e),s=yield new HE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var eH=600*1e3,qE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!PN(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(as(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eH&&this.cachedEventUids.clear(),this.cachedEventUids.has(JR(e))}saveEventToCache(e){this.cachedEventUids.add(JR(e)),this.lastProcessedEventTime=Date.now()}};function JR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function tH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PN(n);default:return!1}}function nH(t){return v(this,arguments,function*(n,e={}){return Ki(n,"GET","/v1/projects",e)})}var rH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iH=/^https?/;function oH(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield nH(n);for(let t of e)try{if(sH(t))return}catch{}Nr(n,"unauthorized-domain")})}function sH(n){let e=SE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!iH.test(t))return!1;if(rH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var aH=new cs(3e4,6e4);function ZR(){let n=Rr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cH(n){return new Promise((e,t)=>{function r(){ZR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZR(),t(as(n,"network-request-failed"))},timeout:aH.get()})}if(Rr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rr().gapi?.load)r();else{let i=EN("iframefcb");return Rr()[i]=()=>{gapi.load?r():t(as(n,"network-request-failed"))},_N(`${p$()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Kf=null,e})}var Kf=null;function uH(n){return Kf=Kf||cH(n),Kf}var lH=new cs(5e3,15e3),dH="__/auth/iframe",hH="emulator/auth/iframe",fH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gH(n){let e=n.config;X(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?KE(e,hH):`https://${n.config.authDomain}/${dH}`,r={apiKey:e.apiKey,appName:n.name,v:Hi},i=pH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Qu(r).slice(1)}`}function mH(n){return v(this,null,function*(){let e=yield uH(n),t=Rr().gapi;return X(t,n,"internal-error"),e.open({where:document.body,url:gH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fH,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=as(n,"network-request-failed"),a=Rr().setTimeout(()=>{o(s)},lH.get());function u(){Rr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var yH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vH=500,_H=600,EH="_blank",IH="http://localhost",sp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wH(n,e,t,r=vH,i=_H){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Y(M({},yH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ct().toLowerCase();t&&(a=hN(l)?EH:t),lN(l)&&(e=e||IH,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(c$(l)&&a!=="_self")return DH(e||"",a),new sp(null);let p=window.open(e||"",a,h);X(p,n,"popup-blocked");try{p.focus()}catch{}return new sp(p)}function DH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var CH="__/auth/handler",bH="emulator/auth/handler",TH=encodeURIComponent("fac");function XR(n,e,t,r,i,o){return v(this,null,function*(){X(n.config.authDomain,n,"auth-domain-config-required"),X(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Hi,eventId:i};if(e instanceof np){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",bR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof VE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${TH}=${encodeURIComponent(u)}`:"";return`${SH(n)}?${Qu(a).slice(1)}${l}`})}function SH({config:n}){return n.emulator?KE(n,bH):`https://${n.authDomain}/${CH}`}var TE="webStorageSupport",zE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iI,this._completeRedirectFn=X$,this._overrideRedirectResult=Y$}_openPopup(e,t,r,i){return v(this,null,function*(){Wi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield XR(e,t,r,SE(),i);return wH(e,o,SN())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield XR(e,t,r,SE(),i);return k$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Wi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield mH(e),r=new qE(e);return t.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(TE,{type:TE},i=>{let o=i?.[0]?.[TE];o!==void 0&&t(!!o),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yN()||dN()||ZE()}},xN=zE;var eN="@firebase/auth",tN="1.11.1";var GE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function AH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RH(n){er(new Wt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;X(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vN(n)},l=new kE(r,i,o,u);return m$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),er(new Wt("auth-internal",e=>{let t=Aa(e.getProvider("auth").getImmediate());return(r=>new GE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(eN,tN,AH(n)),Qe(eN,tN,"esm2020")}var NH=300,MH=cE("authIdTokenMaxAge")||NH,nN=null,PH=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MH)return;let i=t?.token;nN!==i&&(nN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function oI(n=ss()){let e=Sa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=XE(n,{popupRedirectResolver:xN,persistence:[MN,TN,iI]}),r=cE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=PH(o.toString());rI(t,s,()=>s(t.currentUser)),nI(t,a=>s(a))}}let i=sE("auth");return i&&eI(t,`http://${i}`),t}function xH(){return document.getElementsByTagName("head")?.[0]??document}h$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=as("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",xH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RH("Browser");var w4="firebase",D4="12.6.0";Qe(w4,D4,"app");function kN(n){n===void 0&&(n=R(Ge));let e=n.get(ta);return t=>new le(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Qi=new Di("ANGULARFIRE2_VERSION");function al(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ma=(n,e)=>{let t=e?[e]:Hf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Na=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Na||{}),ON=h_()&&typeof Zone<"u"?Na.WARN:Na.SILENT;var hp=class{zone;delegate;constructor(e,t=wm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Yi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(Ie);this.outsideAngular=t.runOutsideAngular(()=>new hp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new hp(typeof Zone>"u"?void 0:Zone.current,Im))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FN=!1;function C4(n,e){!FN&&(ON>Na.SILENT||h_())&&(FN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ON>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function b4(n){let e=R(Ie,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ds(n){let e=R(Ie,{optional:!0});return e?e.run(()=>n()):n()}var T4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),rt(t,()=>ds(()=>n.apply(void 0,r)))),gn=(n,e,t)=>(t||=e?Na.WARN:Na.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(Yi),s=R(ta),a=R(nt)}catch{return C4(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ds(()=>s.add())),i[l]=T4(i[l],r,a));let u=b4(()=>n.apply(this,i));return e?u instanceof le?u.pipe(Ii(o.outsideAngular),Ei(o.insideAngular),kN(a)):u instanceof Promise?ds(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>rt(a,()=>ds(()=>h(g))),g=>rt(a,()=>ds(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ds(()=>u):u instanceof le?u.pipe(Ii(o.outsideAngular),Ei(o.insideAngular)):ds(()=>u)});var Zr=class{constructor(e){return e}},hs=class{constructor(){return Hf()}};function S4(n){return n&&n.length===1?n[0]:new Zr(ss())}var sI=new q("angularfire2._apps"),A4={provide:Zr,useFactory:S4,deps:[[new un,sI]]},R4={provide:hs,deps:[[new un,sI]]};function N4(n){return(e,t)=>{let r=t.get(zo);Qe("angularfire",Qi.full,"core"),Qe("angularfire",Qi.full,"app"),Qe("angular",Hm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Zr(i)}}function LN(n,...e){return on([A4,R4,{provide:sI,useFactory:N4(n),multi:!0,deps:[Ie,Ge,Yi,...e]}])}var VN=gn(DE,!0);var M4=new Map,P4={activated:!1,tokenObservers:[]},x4={initialized:!1,enabled:!1};function tr(n){return M4.get(n)||M({},P4)}function $N(){return x4}var k4="https://content-firebaseappcheck.googleapis.com/v1";var O4="exchangeDebugToken",jN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Dse=1440*60*1e3;var uI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new is,this.pending.promise.catch(t=>{}),yield F4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new is,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function F4(n){return new Promise(e=>{setTimeout(e,n)})}var L4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ji=new Xn("appCheck","AppCheck",L4);function HN(n){if(!tr(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function qN(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Ji.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ji.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ji.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function zN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${k4}/projects/${t}/apps/${r}:${O4}?key=${i}`,body:{debug_token:e}}}var V4="firebase-app-check-database",j4=1,lI="firebase-app-check-store";var fp=null;function U4(){return fp||(fp=new Promise((n,e)=>{try{let t=indexedDB.open(V4,j4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(Ji.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lI,{keyPath:"compositeKey"})}}}catch(t){e(Ji.create("storage-open",{originalErrorMessage:t?.message}))}}),fp)}function B4(n,e){return $4(H4(n),e)}function $4(n,e){return v(this,null,function*(){let r=(yield U4()).transaction(lI,"readwrite"),o=r.objectStore(lI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{a(Ji.create("storage-set",{originalErrorMessage:u.target.error?.message}))}})})}function H4(n){return`${n.options.appId}-${n.name}`}var cl=new Sr("@firebase/app-check");function aI(n,e){return Ku()?B4(n,e).catch(t=>{cl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GN(){return $N().enabled}function WN(){return v(this,null,function*(){let n=$N();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var q4={error:"UNKNOWN_ERROR"};function z4(n){return Ff.encodeString(JSON.stringify(n),!1)}function dI(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;HN(r);let i=tr(r),o=i.token,s;if(o&&!ul(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(ul(l)?o=l:yield aI(r,void 0))}if(!e&&o&&ul(o))return{token:o.token};let a=!1;if(GN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=qN(zN(r,yield WN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield aI(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?cl.warn(l.message):t&&cl.error(l),cI(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?cl.warn(l.message):t&&cl.error(l),s=l}let u;return o?s?ul(o)?u={token:o.token,internalError:s}:u=cI(s):(u={token:o.token},i.token=o,yield aI(r,o)):u=cI(s),a&&Q4(r,u),u})}function G4(n){return v(this,null,function*(){let e=n.app;HN(e);let{provider:t}=tr(e);if(GN()){let r=yield WN(),{token:i}=yield qN(zN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function W4(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ul(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),UN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>UN(n))}function KN(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function UN(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=K4(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function K4(n){let{app:e}=n;return new uI(()=>v(null,null,function*(){let t=tr(e),r;if(t.token?r=yield dI(n,!0):r=yield dI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jN.RETRIAL_MIN_WAIT,jN.RETRIAL_MAX_WAIT)}function Q4(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ul(n){return n.expireTimeMillis-Date.now()>0}function cI(n){return{token:z4(q4),error:n}}var hI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)KN(this.app,t.next);return Promise.resolve()}};function Y4(n,e){return new hI(n,e)}function J4(n){return{getToken:e=>dI(n,e),getLimitedUseToken:()=>G4(n),addTokenListener:e=>W4(n,"INTERNAL",e),removeTokenListener:e=>KN(n.app,e)}}var Z4="@firebase/app-check",X4="0.11.0";var eq="app-check",BN="app-check-internal";function tq(){er(new Wt(eq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Y4(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BN).initialize()})),er(new Wt(BN,n=>{let e=n.getProvider("app-check").getImmediate();return J4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qe(Z4,X4)}tq();var nq="app-check";var Pa=class{constructor(){return Ma(nq)}};var rq=["localhost","0.0.0.0","127.0.0.1"],Fse=typeof window<"u"&&rq.includes(window.location.hostname);var QN="auth",nr=class{constructor(e){return e}},ll=class{constructor(){return Ma(QN)}};var fI=new q("angularfire2.auth-instances");function iq(n,e){let t=al(QN,n,e);return t&&new nr(t)}function oq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nr(r)}}var sq={provide:ll,deps:[[new un,fI]]},aq={provide:nr,useFactory:iq,deps:[[new un,fI],Zr]};function YN(n,...e){return Qe("angularfire",Qi.full,"auth"),on([aq,sq,{provide:fI,useFactory:oq(n),multi:!0,deps:[Ie,Ge,Yi,hs,[new un,Pa],...e]}])}var JN=gn(oI,!0);var pp=(()=>{class n{constructor(t){this.auth=t,this._user=Te(null,{}),this.isLoggedIn=Te(!1,{}),Ra(this.auth,r=>{this._user.set(r),this.isLoggedIn.set(!!r)})}get user(){return this._user()}logout(){return v(this,null,function*(){yield lp(this.auth)})}static{this.\u0275fac=function(r){return new(r||n)(W(nr))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cq(n,e){if(n&1){let t=gt();k(0,"button",3),ce("click",function(){Me(t);let i=he();return Pe(i.logout())}),F(1,"Odhl\xE1si\u0165 sa"),P()}}var ZN=(()=>{class n{constructor(){this.auth=R(pp)}logout(){return v(this,null,function*(){yield this.auth.logout()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-home"]],decls:7,vars:1,consts:[[1,"home"],[1,"home-actions"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){r&1&&(k(0,"section",0)(1,"h2"),F(2,"Vitaj v Quest OverFlow!"),P(),k(3,"p"),F(4,"Tu m\xF4\u017Ee\u0161 spravova\u0165 svoje dobrodru\u017Estv\xE1, sledova\u0165 sk\xFAsenosti a plni\u0165 \xFAlohy ako prav\xFD hrdina!"),P(),k(5,"div",1),la(6,cq,2,0,"button",2),P()()),r&2&&(j(6),ve("ngIf",i.auth.isLoggedIn()))},dependencies:[Dt,Cu],encapsulation:2})}}return n})();var sM=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(B(Gn),B(Bt))};static \u0275dir=Le({type:n})}return n})(),Tp=(()=>{class n extends sM{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Le({type:n,features:[Ht]})}return n})(),ps=new q("");var uq={provide:ps,useExisting:rn(()=>Nn),multi:!0};function lq(){let n=An()?An().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var dq=new q(""),Nn=(()=>{class n extends sM{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!lq())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(B(Gn),B(Bt),B(dq,8))};static \u0275dir=Le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ce("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[wr([uq]),Ht]})}return n})();function yI(n){return n==null||vI(n)===0}function vI(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Sp=new q(""),Ap=new q(""),hq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,He=class{static min(e){return fq(e)}static max(e){return pq(e)}static required(e){return gq(e)}static requiredTrue(e){return mq(e)}static email(e){return yq(e)}static minLength(e){return vq(e)}static maxLength(e){return _q(e)}static pattern(e){return Eq(e)}static nullValidator(e){return aM()}static compose(e){return fM(e)}static composeAsync(e){return gM(e)}};function fq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function pq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function gq(n){return yI(n.value)?{required:!0}:null}function mq(n){return n.value===!0?null:{required:!0}}function yq(n){return yI(n.value)||hq.test(n.value)?null:{email:!0}}function vq(n){return e=>{let t=e.value?.length??vI(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function _q(n){return e=>{let t=e.value?.length??vI(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Eq(n){if(!n)return aM;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yI(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function aM(n){return null}function cM(n){return n!=null}function uM(n){return ki(n)?ke(n):n}function lM(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function dM(n,e){return e.map(t=>t(n))}function Iq(n){return!n.validate}function hM(n){return n.map(e=>Iq(e)?e:t=>e.validate(t))}function fM(n){if(!n)return null;let e=n.filter(cM);return e.length==0?null:function(t){return lM(dM(t,e))}}function pM(n){return n!=null?fM(hM(n)):null}function gM(n){if(!n)return null;let e=n.filter(cM);return e.length==0?null:function(t){let r=dM(t,e).map(uM);return Cm(r).pipe(ge(lM))}}function mM(n){return n!=null?gM(hM(n)):null}function XN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yM(n){return n._rawValidators}function vM(n){return n._rawAsyncValidators}function gI(n){return n?Array.isArray(n)?n:[n]:[]}function mp(n,e){return Array.isArray(n)?n.includes(e):n===e}function eM(n,e){let t=gI(e);return gI(n).forEach(i=>{mp(t,i)||t.push(i)}),t}function tM(n,e){return gI(e).filter(t=>!mp(n,t))}var yp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fs=class extends yp{name;get formDirective(){return null}get path(){return null}},Xr=class extends yp{_parent=null;name=null;valueAccessor=null},vp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Zt=(()=>{class n extends vp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Xr,2))};static \u0275dir=Le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Eu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ht]})}return n})(),Mr=(()=>{class n extends vp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(fs,10))};static \u0275dir=Le({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Eu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ht]})}return n})();var dl="VALID",gp="INVALID",xa="PENDING",hl="DISABLED",Zi=class{},_p=class extends Zi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fl=class extends Zi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},pl=class extends Zi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ka=class extends Zi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},mI=class extends Zi{source;constructor(e){super(),this.source=e}},Ep=class extends Zi{source;constructor(e){super(),this.source=e}};function _M(n){return(Rp(n)?n.validators:n)||null}function wq(n){return Array.isArray(n)?pM(n):n||null}function EM(n,e){return(Rp(e)?e.asyncValidators:n)||null}function Dq(n){return Array.isArray(n)?mM(n):n||null}function Rp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Cq(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[t])throw new G(1001,"")}function bq(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new G(1002,"")})}var Ip=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return st(this.statusReactive)}set status(e){st(()=>this.statusReactive.set(e))}_status=Sn(()=>this.statusReactive(),{});statusReactive=Te(void 0,{});get valid(){return this.status===dl}get invalid(){return this.status===gp}get pending(){return this.status==xa}get disabled(){return this.status===hl}get enabled(){return this.status!==hl}errors;get pristine(){return st(this.pristineReactive)}set pristine(e){st(()=>this.pristineReactive.set(e))}_pristine=Sn(()=>this.pristineReactive(),{});pristineReactive=Te(!0,{});get dirty(){return!this.pristine}get touched(){return st(this.touchedReactive)}set touched(e){st(()=>this.touchedReactive.set(e))}_touched=Sn(()=>this.touchedReactive(),{});touchedReactive=Te(!1,{});get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tM(e,this._rawAsyncValidators))}hasValidator(e){return mp(this._rawValidators,e)}hasAsyncValidator(e){return mp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Y(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new pl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Y(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new fl(!0,r))}markAsPending(e={}){this.status=xa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ka(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Y(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hl,this.errors=null,this._forEachChild(i=>{i.disable(Y(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,r)),this._events.next(new ka(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=dl,this._forEachChild(r=>{r.enable(Y(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dl||this.status===xa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _p(this.value,t)),this._events.next(new ka(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Y(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hl:dl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=xa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=uM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ka(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Oe,this.statusChanges=new Oe}_calculateStatus(){return this._allControlsDisabled()?hl:this.errors?gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xa)?xa:this._anyControlsHaveStatus(gp)?gp:dl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new pl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=wq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Dq(this._rawAsyncValidators)}},mn=class extends Ip{constructor(e,t,r){super(_M(t),EM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bq(this,!0,e),Object.keys(e).forEach(r=>{Cq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,Y(M({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ep(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gl=new q("",{factory:()=>Np}),Np="always";function IM(n,e){return[...e.path,n]}function wp(n,e,t=Np){_I(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Sq(n,e),Rq(n,e),Aq(n,e),Tq(n,e)}function Dp(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),bp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Cp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Tq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function _I(n,e){let t=yM(n);e.validator!==null?n.setValidators(XN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=vM(n);e.asyncValidator!==null?n.setAsyncValidators(XN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Cp(e._rawValidators,i),Cp(e._rawAsyncValidators,i)}function bp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=yM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=vM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Cp(e._rawValidators,r),Cp(e._rawAsyncValidators,r),t}function Sq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wM(n,e)})}function Aq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Rq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Nq(n,e){n==null,_I(n,e)}function Mq(n,e){return bp(n,e)}function EI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Pq(n){return Object.getPrototypeOf(n.constructor)===Tp}function xq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function II(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Nn?t=o:Pq(o)?r=o:i=o}),i||r||t||null}function kq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var at=class extends Ip{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(_M(t),EM(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ep(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Oq=n=>n instanceof at;var Fq={provide:Xr,useExisting:rn(()=>wI)},iM=Promise.resolve(),wI=(()=>{class n extends Xr{_changeDetectorRef;callSetDisabledState;control=new at;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Oe;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=II(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),EI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){iM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Wo(r);iM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?IM(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(B(fs,9),B(Sp,10),B(Ap,10),B(ps,10),B(Wr,8),B(gl,8))};static \u0275dir=Le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[wr([Fq]),Ht,Tn]})}return n})();var Xi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Le({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Lq={provide:ps,useExisting:rn(()=>ml),multi:!0},ml=(()=>{class n extends Tp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Le({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ce("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[wr([Lq]),Ht]})}return n})();var Vq=(()=>{class n extends fs{callSetDisabledState;get submitted(){return st(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Sn(()=>this._submittedReactive(),{});_submittedReactive=Te(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(bp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return wp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Dp(t.control||null,t,!1),kq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,xq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new mI(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Dp(r||null,t),Oq(i)&&(wp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Nq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Mq(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_I(this.form,this),this._oldForm&&bp(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(B(Sp,10),B(Ap,10),B(gl,8))};static \u0275dir=Le({type:n,features:[Ht,Tn]})}return n})();var DI=new q(""),jq={provide:Xr,useExisting:rn(()=>CI)},CI=(()=>{class n extends Xr{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Oe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=II(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&Dp(r,this,!1),wp(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}EI(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Dp(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(B(Sp,10),B(Ap,10),B(ps,10),B(DI,8),B(gl,8))};static \u0275dir=Le({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[wr([jq]),Ht,Tn]})}return n})();var Uq={provide:Xr,useExisting:rn(()=>rr)},rr=(()=>{class n extends Xr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Oe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=II(this,o)}ngOnChanges(t){this._added||this._setUpControl(),EI(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return IM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(B(fs,13),B(Sp,10),B(Ap,10),B(ps,10),B(DI,8))};static \u0275dir=Le({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[wr([Uq]),Ht,Tn]})}return n})();var Bq={provide:fs,useExisting:rn(()=>ir)},ir=(()=>{class n extends Vq{form=null;ngSubmit=new Oe;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Le({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ce("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[wr([Bq]),Ht]})}return n})(),$q={provide:ps,useExisting:rn(()=>eo),multi:!0};function DM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Hq(n){return n.split(":")[0]}var eo=(()=>{class n extends Tp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(zr).injector;destroyRef=R(Un);cdr=R(Wr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,fu({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=DM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Hq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Le({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ce("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wr([$q]),Ht]})}return n})(),Oa=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(DM(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(B(Bt),B(Gn),B(eo,9))};static \u0275dir=Le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),qq={provide:ps,useExisting:rn(()=>CM),multi:!0};function oM(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function zq(n){return n.split(":")[0]}var CM=(()=>{class n extends Tp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=zq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qn(n)))(i||n)}})();static \u0275dir=Le({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ce("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wr([qq]),Ht]})}return n})(),Fa=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(oM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(oM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(Bt),B(Gn),B(CM,9))};static \u0275dir=Le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var bM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({})}return n})();var TM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gl,useValue:t.callSetDisabledState??Np}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({imports:[bM]})}return n})(),Mn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DI,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:gl,useValue:t.callSetDisabledState??Np}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=En({imports:[bM]})}return n})();var La=(()=>{class n{constructor(){this.searchChange=new Oe,this.searchControl=new at(""),this.searchControl.valueChanges.subscribe(t=>{this.searchChange.emit(t??"")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-search"]],outputs:{searchChange:"searchChange"},decls:1,vars:1,consts:[["placeholder","Search...",1,"search-input",3,"formControl"]],template:function(r,i){r&1&&Ne(0,"input",0),r&2&&ve("formControl",i.searchControl)},dependencies:[Mn,Nn,Zt,CI],encapsulation:2})}}return n})();var SM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AM={};var ei,bI;(function(){var n;function e(D,_){function I(){}I.prototype=_.prototype,D.F=_.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(C,w,T){for(var E=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)E[Qt-2]=arguments[Qt];return _.prototype[w].apply(C,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,I){I||(I=0);let C=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)C[w]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(w=0;w<16;++w)C[w]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=D.g[0],I=D.g[1],w=D.g[2];let T=D.g[3],E;E=_+(T^I&(w^T))+C[0]+3614090360&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[1]+3905402710&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[2]+606105819&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[3]+3250441966&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[5]+1200080426&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[6]+2821735955&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[7]+4249261313&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[9]+2336552879&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[10]+4294925233&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[11]+2304563134&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(T^I&(w^T))+C[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=T+(w^_&(I^w))+C[13]+4254626195&4294967295,T=_+(E<<12&4294967295|E>>>20),E=w+(I^T&(_^I))+C[14]+2792965006&4294967295,w=T+(E<<17&4294967295|E>>>15),E=I+(_^w&(T^_))+C[15]+1236535329&4294967295,I=w+(E<<22&4294967295|E>>>10),E=_+(w^T&(I^w))+C[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[6]+3225465664&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[11]+643717713&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[0]+3921069994&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[10]+38016083&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[15]+3634488961&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[4]+3889429448&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[14]+3275163606&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[3]+4107603335&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[8]+1163531501&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(w^T&(I^w))+C[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=T+(I^w&(_^I))+C[2]+4243563512&4294967295,T=_+(E<<9&4294967295|E>>>23),E=w+(_^I&(T^_))+C[7]+1735328473&4294967295,w=T+(E<<14&4294967295|E>>>18),E=I+(T^_&(w^T))+C[12]+2368359562&4294967295,I=w+(E<<20&4294967295|E>>>12),E=_+(I^w^T)+C[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[8]+2272392833&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[11]+1839030562&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[14]+4259657740&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[4]+1272893353&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[7]+4139469664&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[10]+3200236656&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[0]+3936430074&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[3]+3572445317&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[6]+76029189&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(I^w^T)+C[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=T+(_^I^w)+C[12]+3873151461&4294967295,T=_+(E<<11&4294967295|E>>>21),E=w+(T^_^I)+C[15]+530742520&4294967295,w=T+(E<<16&4294967295|E>>>16),E=I+(w^T^_)+C[2]+3299628645&4294967295,I=w+(E<<23&4294967295|E>>>9),E=_+(w^(I|~T))+C[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[7]+1126891415&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[14]+2878612391&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[5]+4237533241&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[3]+2399980690&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[10]+4293915773&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[1]+2240044497&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[15]+4264355552&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[6]+2734768916&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[13]+1309151649&4294967295,I=w+(E<<21&4294967295|E>>>11),E=_+(w^(I|~T))+C[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=T+(I^(_|~w))+C[11]+3174756917&4294967295,T=_+(E<<10&4294967295|E>>>22),E=w+(_^(T|~I))+C[2]+718787259&4294967295,w=T+(E<<15&4294967295|E>>>17),E=I+(T^(w|~_))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+w&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.v=function(D,_){_===void 0&&(_=D.length);let I=_-this.blockSize,C=this.C,w=this.h,T=0;for(;T<_;){if(w==0)for(;T<=I;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<_;)if(C[w++]=D.charCodeAt(T++),w==this.blockSize){i(this,C),w=0;break}}else for(;T<_;)if(C[w++]=D[T++],w==this.blockSize){i(this,C),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;_=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=_&255,_/=256;for(this.v(D),D=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)D[_++]=this.g[I]>>>C&255;return D};function o(D,_){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=_(D)}function s(D,_){this.h=_;let I=[],C=!0;for(let w=D.length-1;w>=0;w--){let T=D[w]|0;C&&T==_||(I[w]=T,C=!1)}this.g=I}var a={};function u(D){return-128<=D&&D<128?o(D,function(_){return new s([_|0],_<0?-1:0)}):new s([D|0],D<0?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(D<0)return N(l(-D));let _=[],I=1;for(let C=0;D>=I;C++)_[C]=D/I|0,I*=4294967296;return new s(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return N(h(D.substring(1),_));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=l(Math.pow(_,8)),C=p;for(let T=0;T<D.length;T+=8){var w=Math.min(8,D.length-T);let E=parseInt(D.substring(T,T+w),_);w<8?(w=l(Math.pow(_,w)),C=C.j(w).add(l(E))):(C=C.j(I),C=C.add(l(E)))}return C}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(x(this))return-N(this).m();let D=0,_=1;for(let I=0;I<this.g.length;I++){let C=this.i(I);D+=(C>=0?C:4294967296+C)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(x(this))return"-"+N(this).toString(D);let _=l(Math.pow(D,6));var I=this;let C="";for(;;){let w=Ft(I,_).g;I=U(I,w.j(_));let T=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=w,S(I))return T+C;for(;T.length<6;)T="0"+T;C=T+C}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(let _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function x(D){return D.h==-1}n.l=function(D){return D=U(this,D),x(D)?-1:S(D)?0:1};function N(D){let _=D.g.length,I=[];for(let C=0;C<_;C++)I[C]=~D.g[C];return new s(I,~D.h).add(g)}n.abs=function(){return x(this)?N(this):this},n.add=function(D){let _=Math.max(this.g.length,D.g.length),I=[],C=0;for(let w=0;w<=_;w++){let T=C+(this.i(w)&65535)+(D.i(w)&65535),E=(T>>>16)+(this.i(w)>>>16)+(D.i(w)>>>16);C=E>>>16,T&=65535,E&=65535,I[w]=E<<16|T}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(D,_){return D.add(N(_))}n.j=function(D){if(S(this)||S(D))return p;if(x(this))return x(D)?N(this).j(N(D)):N(N(this).j(D));if(x(D))return N(this.j(N(D)));if(this.l(y)<0&&D.l(y)<0)return l(this.m()*D.m());let _=this.g.length+D.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let w=0;w<D.g.length;w++){let T=this.i(C)>>>16,E=this.i(C)&65535,Qt=D.i(w)>>>16,di=D.i(w)&65535;I[2*C+2*w]+=E*di,oe(I,2*C+2*w),I[2*C+2*w+1]+=T*di,oe(I,2*C+2*w+1),I[2*C+2*w+1]+=E*Qt,oe(I,2*C+2*w+1),I[2*C+2*w+2]+=T*Qt,oe(I,2*C+2*w+2)}for(D=0;D<_;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=_;D<2*_;D++)I[D]=0;return new s(I,0)};function oe(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function pe(D,_){this.g=D,this.h=_}function Ft(D,_){if(S(_))throw Error("division by zero");if(S(D))return new pe(p,p);if(x(D))return _=Ft(N(D),_),new pe(N(_.g),N(_.h));if(x(_))return _=Ft(D,N(_)),new pe(N(_.g),_.h);if(D.g.length>30){if(x(D)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=_;C.l(D)<=0;)I=Kt(I),C=Kt(C);var w=vt(I,1),T=vt(C,1);for(C=vt(C,2),I=vt(I,2);!S(C);){var E=T.add(C);E.l(D)<=0&&(w=w.add(I),T=E),C=vt(C,1),I=vt(I,1)}return _=U(D,w.j(_)),new pe(w,_)}for(w=p;D.l(_)>=0;){for(I=Math.max(1,Math.floor(D.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),T=l(I),E=T.j(_);x(E)||E.l(D)>0;)I-=C,T=l(I),E=T.j(_);S(T)&&(T=g),w=w.add(T),D=U(D,E)}return new pe(w,D)}n.B=function(D){return Ft(this,D).h},n.and=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&D.i(C);return new s(I,this.h&D.h)},n.or=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|D.i(C);return new s(I,this.h|D.h)},n.xor=function(D){let _=Math.max(this.g.length,D.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^D.i(C);return new s(I,this.h^D.h)};function Kt(D){let _=D.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=D.i(C)<<1|D.i(C-1)>>>31;return new s(I,D.h)}function vt(D,_){let I=_>>5;_%=32;let C=D.g.length-I,w=[];for(let T=0;T<C;T++)w[T]=_>0?D.i(T+I)>>>_|D.i(T+I+1)<<32-_:D.i(T+I);return new s(w,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bI=AM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ei=AM.Integer=s}).apply(typeof SM<"u"?SM:typeof self<"u"?self:typeof window<"u"?window:{});var Mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ti={};var TI,Gq,Va,SI,yl,Pp,AI,RI,NI;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mp=="object"&&Mp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(m,b,A){for(var V=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)V[ue-2]=arguments[ue];return d.prototype[b].apply(m,V)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function S(c,d){for(let m=1;m<arguments.length;m++){let b=arguments[m];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=c.length||0;let A=b.length||0;c.length=f+A;for(let V=0;V<A;V++)c[f+V]=b[V]}else c.push(b)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function U(){var c=D;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class oe{constructor(){this.h=this.g=null}add(d,f){let m=pe.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var pe=new x(()=>new Ft,c=>c.reset());class Ft{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Kt,vt=!1,D=new oe,_=()=>{let c=Promise.resolve(void 0);Kt=()=>{c.then(I)}};function I(){for(var c;c=U();){try{c.h.call(c.g)}catch(f){N(f)}var d=pe;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}vt=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function E(c){return/^[\s\xa0]*$/.test(c)}function Qt(c,d){w.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Qt,w),Qt.prototype.init=function(c,d){let f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Qt.Z.h.call(this)},Qt.prototype.h=function(){Qt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var di="closure_listenable_"+(Math.random()*1e6|0),dk=0;function hk(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++dk,this.da=this.fa=!1}function Ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vl(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function fk(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function YD(c){let d={};for(let f in c)d[f]=c[f];return d}let JD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZD(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let A=0;A<JD.length;A++)f=JD[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function jl(c){this.src=c,this.g={},this.h=0}jl.prototype.add=function(c,d,f,m,b){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let V=Ng(c,d,m,b);return V>-1?(d=c[V],f||(d.fa=!1)):(d=new hk(d,this.src,A,!!m,b),d.fa=f,c.push(d)),d};function Rg(c,d){let f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=b>=0)&&Array.prototype.splice.call(m,b,1),A&&(Ll(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ng(c,d,f,m){for(let b=0;b<c.length;++b){let A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return b}return-1}var Mg="closure_lm_"+(Math.random()*1e6|0),Pg={};function XD(c,d,f,m,b){if(m&&m.once)return tC(c,d,f,m,b);if(Array.isArray(d)){for(let A=0;A<d.length;A++)XD(c,d[A],f,m,b);return null}return f=Fg(f),c&&c[di]?c.J(d,f,a(m)?!!m.capture:!!m,b):eC(c,d,f,!1,m,b)}function eC(c,d,f,m,b,A){if(!d)throw Error("Invalid event type");let V=a(b)?!!b.capture:!!b,ue=kg(c);if(ue||(c[Mg]=ue=new jl(c)),f=ue.add(d,f,m,V,A),f.proxy)return f;if(m=pk(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)T||(b=V),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(rC(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function pk(){function c(f){return d.call(c.src,c.listener,f)}let d=gk;return c}function tC(c,d,f,m,b){if(Array.isArray(d)){for(let A=0;A<d.length;A++)tC(c,d[A],f,m,b);return null}return f=Fg(f),c&&c[di]?c.K(d,f,a(m)?!!m.capture:!!m,b):eC(c,d,f,!0,m,b)}function nC(c,d,f,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)nC(c,d[A],f,m,b);else m=a(m)?!!m.capture:!!m,f=Fg(f),c&&c[di]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],f=Ng(d,f,m,b),f>-1&&(Ll(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=kg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ng(d,f,m,b)),(f=c>-1?d[c]:null)&&xg(f))}function xg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[di])Rg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(rC(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=kg(d))?(Rg(f,c),f.h==0&&(f.src=null,d[Mg]=null)):Ll(c)}}}function rC(c){return c in Pg?Pg[c]:Pg[c]="on"+c}function gk(c,d){if(c.da)c=!0;else{d=new Qt(d,this);let f=c.listener,m=c.ha||c.src;c.fa&&xg(c),c=f.call(m,d)}return c}function kg(c){return c=c[Mg],c instanceof jl?c:null}var Og="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fg(c){return typeof c=="function"?c:(c[Og]||(c[Og]=function(d){return c.handleEvent(d)}),c[Og])}function Nt(){C.call(this),this.i=new jl(this),this.M=this,this.G=null}p(Nt,C),Nt.prototype[di]=!0,Nt.prototype.removeEventListener=function(c,d,f,m){nC(this,c,d,f,m)};function Lt(c,d){var f,m=c.G;if(m)for(f=[];m;m=m.G)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new w(d,c);else if(d instanceof w)d.target=d.target||c;else{var b=d;d=new w(m,c),ZD(d,b)}b=!0;let A,V;if(f)for(V=f.length-1;V>=0;V--)A=d.g=f[V],b=Ul(A,m,!0,d)&&b;if(A=d.g=c,b=Ul(A,m,!0,d)&&b,b=Ul(A,m,!1,d)&&b,f)for(V=0;V<f.length;V++)A=d.g=f[V],b=Ul(A,m,!1,d)&&b}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let m=0;m<f.length;m++)Ll(f[m]);delete c.g[d],c.h--}}this.G=null},Nt.prototype.J=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Nt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Ul(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let A=0;A<d.length;++A){let V=d[A];if(V&&!V.da&&V.capture==f){let ue=V.listener,ht=V.ha||V.src;V.fa&&Rg(c.i,V),b=ue.call(ht,m)!==!1&&b}}return b&&!m.defaultPrevented}function mk(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function iC(c){c.g=mk(()=>{c.g=null,c.i&&(c.i=!1,iC(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class yk extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iC(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(c){C.call(this),this.h=c,this.g={}}p(mc,C);var oC=[];function sC(c){Vl(c.g,function(d,f){this.g.hasOwnProperty(f)&&xg(d)},c),c.g={}}mc.prototype.N=function(){mc.Z.N.call(this),sC(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lg=s.JSON.stringify,vk=s.JSON.parse,_k=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function aC(){}function cC(){}var yc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vg(){w.call(this,"d")}p(Vg,w);function jg(){w.call(this,"c")}p(jg,w);var po={},uC=null;function Bl(){return uC=uC||new Nt}po.Ia="serverreachability";function lC(c){w.call(this,po.Ia,c)}p(lC,w);function vc(c){let d=Bl();Lt(d,new lC(d))}po.STAT_EVENT="statevent";function dC(c,d){w.call(this,po.STAT_EVENT,c),this.stat=d}p(dC,w);function Vt(c){let d=Bl();Lt(d,new dC(d,c))}po.Ja="timingevent";function hC(c,d){w.call(this,po.Ja,c),this.size=d}p(hC,w);function _c(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Ec(){this.g=!0}Ec.prototype.ua=function(){this.g=!1};function Ek(c,d,f,m,b,A){c.info(function(){if(c.g)if(A){var V="",ue=A.split("&");for(let Re=0;Re<ue.length;Re++){var ht=ue[Re].split("=");if(ht.length>1){let _t=ht[0];ht=ht[1];let ur=_t.split("_");V=ur.length>=2&&ur[1]=="type"?V+(_t+"="+ht+"&"):V+(_t+"=redacted&")}}}else V=null;else V=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+V})}function Ik(c,d,f,m,b,A,V){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+V})}function Rs(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Dk(c,f)+(m?" "+m:"")})}function wk(c,d){c.info(function(){return"TIMEOUT: "+d})}Ec.prototype.info=function(){};function Dk(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var f=A[c];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var b=m[0];if(b!="noop"&&b!="stop"&&b!="close")for(let V=1;V<m.length;V++)m[V]=""}}}}return Lg(A)}catch{return d}}var $l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pC;function Ug(){}p(Ug,aC),Ug.prototype.g=function(){return new XMLHttpRequest},pC=new Ug;function Ic(c){return encodeURIComponent(String(c))}function Ck(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function hi(c,d,f,m){this.j=c,this.i=d,this.l=f,this.S=m||1,this.V=new mc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gC}function gC(){this.i=null,this.g="",this.h=!1}var mC={},Bg={};function $g(c,d,f){c.M=1,c.A=ql(cr(d)),c.u=f,c.R=!0,yC(c,null)}function yC(c,d){c.F=Date.now(),Hl(c),c.B=cr(c.A);var f=c.B,m=c.S;Array.isArray(m)||(m=[String(m)]),NC(f.i,"t",m),c.C=0,f=c.j.L,c.h=new gC,c.g=KC(c.j,f?d:null,!c.u),c.P>0&&(c.O=new yk(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,m=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(oC[0]=b.toString()),b=oC);for(let A=0;A<b.length;A++){let V=XD(f,b[A],m||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.J?YD(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),vc(),Ek(c.i,c.v,c.B,c.l,c.S,c.u)}hi.prototype.ba=function(c){c=c.target;let d=this.O;d&&gi(c)==3?d.j():this.Y(c)},hi.prototype.Y=function(c){try{if(c==this.g)e:{let ue=gi(this.g),ht=this.g.ya(),Re=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||LC(this.g)))){this.K||ue!=4||ht==7||(ht==8||Re<=0?vc(3):vc(2)),Hg(this);var d=this.g.ca();this.X=d;var f=bk(this);if(this.o=d==200,Ik(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(m)){var A=m;break t}}A=null}if(c=A)Rs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qg(this,c);else{this.o=!1,this.m=3,Vt(12),go(this),wc(this);break e}}if(this.R){c=!0;let _t;for(;!this.K&&this.C<f.length;)if(_t=Tk(this,f),_t==Bg){ue==4&&(this.m=4,Vt(14),c=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==mC){this.m=4,Vt(15),Rs(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else Rs(this.i,this.l,_t,null),qg(this,_t);if(vC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,Vt(16),c=!1),this.o=this.o&&c,!c)Rs(this.i,this.l,f,"[Invalid Chunked Response]"),go(this),wc(this);else if(f.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Jg(V),V.P=!0,Vt(11))}}else Rs(this.i,this.l,f,null),qg(this,f);ue==4&&go(this),this.o&&!this.K&&(ue==4?qC(this.j,this):(this.o=!1,Hl(this)))}else Uk(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),go(this),wc(this)}}}catch{}finally{}};function bk(c){if(!vC(c))return c.g.la();let d=LC(c.g);if(d==="")return"";let f="",m=d.length,b=gi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return go(c),wc(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<m;A++)c.h.h=!0,f+=c.h.i.decode(d[A],{stream:!(b&&A==m-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function vC(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Tk(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Bg:(f=Number(d.substring(f,m)),isNaN(f)?mC:(m+=1,m+f>d.length?Bg:(d=d.slice(m,m+f),c.C=m+f,d)))}hi.prototype.cancel=function(){this.K=!0,go(this)};function Hl(c){c.T=Date.now()+c.H,_C(c,c.H)}function _C(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=_c(l(c.aa,c),d)}function Hg(c){c.D&&(s.clearTimeout(c.D),c.D=null)}hi.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(wk(this.i,this.B),this.M!=2&&(vc(),Vt(17)),go(this),this.m=2,wc(this)):_C(this,this.T-c)};function wc(c){c.j.I==0||c.K||qC(c.j,c)}function go(c){Hg(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,sC(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function qg(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||zg(f.h,c))){if(!c.L&&zg(f.h,c)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)Yl(f),Kl(f);else break e;Yg(f),Vt(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=_c(l(f.Va,f),6e3));wC(f.h)<=1&&f.ta&&(f.ta=void 0)}else yo(f,11)}else if((c.L||f.g==c)&&Yl(f),!E(d))for(b=f.Ba.g.parse(d),d=0;d<b.length;d++){let Re=b[d],_t=Re[0];if(!(_t<=f.K))if(f.K=_t,Re=Re[1],f.I==2)if(Re[0]=="c"){f.M=Re[1],f.ba=Re[2];let ur=Re[3];ur!=null&&(f.ka=ur,f.j.info("VER="+f.ka));let vo=Re[4];vo!=null&&(f.za=vo,f.j.info("SVER="+f.za));let mi=Re[5];mi!=null&&typeof mi=="number"&&mi>0&&(m=1.5*mi,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let yi=c.g;if(yi){let Zl=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zl){var A=m.h;A.g||Zl.indexOf("spdy")==-1&&Zl.indexOf("quic")==-1&&Zl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Gg(A,A.h),A.h=null))}if(m.G){let Zg=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Zg&&(m.wa=Zg,xe(m.J,m.G,Zg))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var V=c;if(m.na=WC(m,m.L?m.ba:null,m.W),V.L){DC(m.h,V);var ue=V,ht=m.O;ht&&(ue.H=ht),ue.D&&(Hg(ue),Hl(ue)),m.g=V}else $C(m);f.i.length>0&&Ql(f)}else Re[0]!="stop"&&Re[0]!="close"||yo(f,7);else f.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?yo(f,7):Qg(f):Re[0]!="noop"&&f.l&&f.l.qa(Re),f.A=0)}}vc(4)}catch{}}var Sk=class{constructor(c,d){this.g=c,this.map=d}};function EC(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function IC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wC(c){return c.h?1:c.g?c.g.size:0}function zg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Gg(c,d){c.g?c.g.add(d):c.h=d}function DC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}EC.prototype.cancel=function(){if(this.i=CC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function CC(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var bC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ak(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let m=c[f].indexOf("="),b,A=null;m>=0?(b=c[f].substring(0,m),A=c[f].substring(m+1)):b=c[f],d(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function fi(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof fi?(this.l=c.l,Dc(this,c.j),this.o=c.o,this.g=c.g,Cc(this,c.u),this.h=c.h,Wg(this,MC(c.i)),this.m=c.m):c&&(d=String(c).match(bC))?(this.l=!1,Dc(this,d[1]||"",!0),this.o=bc(d[2]||""),this.g=bc(d[3]||"",!0),Cc(this,d[4]),this.h=bc(d[5]||"",!0),Wg(this,d[6]||"",!0),this.m=bc(d[7]||"")):(this.l=!1,this.i=new Sc(null,this.l))}fi.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(Tc(d,TC,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Tc(d,TC,!0),"@"),c.push(Ic(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Tc(f,f.charAt(0)=="/"?Mk:Nk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Tc(f,xk)),c.join("")},fi.prototype.resolve=function(c){let d=cr(this),f=!!c.j;f?Dc(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var m=c.h;if(f)Cc(d,c.u);else if(f=!!c.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var b=d.h.lastIndexOf("/");b!=-1&&(m=d.h.slice(0,b+1)+m)}if(b=m,b==".."||b==".")m="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){m=b.lastIndexOf("/",0)==0,b=b.split("/");let A=[];for(let V=0;V<b.length;){let ue=b[V++];ue=="."?m&&V==b.length&&A.push(""):ue==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),m&&V==b.length&&A.push("")):(A.push(ue),m=!0)}m=A.join("/")}else m=b}return f?d.h=m:f=c.i.toString()!=="",f?Wg(d,MC(c.i)):f=!!c.m,f&&(d.m=c.m),d};function cr(c){return new fi(c)}function Dc(c,d,f){c.j=f?bc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Cc(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Wg(c,d,f){d instanceof Sc?(c.i=d,kk(c.i,c.l)):(f||(d=Tc(d,Pk)),c.i=new Sc(d,c.l))}function xe(c,d,f){c.i.set(d,f)}function ql(c){return xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Tc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Rk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var TC=/[#\/\?@]/g,Nk=/[#\?:]/g,Mk=/[#\?]/g,Pk=/[#\?@]/g,xk=/#/g;function Sc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function mo(c){c.g||(c.g=new Map,c.h=0,c.i&&Ak(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Sc.prototype,n.add=function(c,d){mo(this),this.i=null,c=Ns(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function SC(c,d){mo(c),d=Ns(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function AC(c,d){return mo(c),d=Ns(c,d),c.g.has(d)}n.forEach=function(c,d){mo(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)};function RC(c,d){mo(c);let f=[];if(typeof d=="string")AC(c,d)&&(f=f.concat(c.g.get(Ns(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}n.set=function(c,d){return mo(this),this.i=null,c=Ns(this,c),AC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=RC(this,c),c.length>0?String(c[0]):d):d};function NC(c,d,f){SC(c,d),f.length>0&&(c.i=null,c.g.set(Ns(c,d),y(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let b=Ic(f);f=RC(this,f);for(let A=0;A<f.length;A++){let V=b;f[A]!==""&&(V+="="+Ic(f[A])),c.push(V)}}return this.i=c.join("&")};function MC(c){let d=new Sc;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Ns(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function kk(c,d){d&&!c.j&&(mo(c),c.i=null,c.g.forEach(function(f,m){let b=m.toLowerCase();m!=b&&(SC(this,m),NC(this,b,f))},c)),c.j=d}function Ok(c,d){let f=new Ec;if(s.Image){let m=new Image;m.onload=h(pi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(pi,f,"TestLoadImage: error",!1,d,m),m.onabort=h(pi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(pi,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function Fk(c,d){let f=new Ec,m=new AbortController,b=setTimeout(()=>{m.abort(),pi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?pi(f,"TestPingServer: ok",!0,d):pi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),pi(f,"TestPingServer: error",!1,d)})}function pi(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function Lk(){this.g=new _k}function zl(c){this.i=c.Sb||null,this.h=c.ab||!1}p(zl,aC),zl.prototype.g=function(){return new Gl(this.i,this.h)};function Gl(c,d){Nt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Gl,Nt),n=Gl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Rc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ac(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;PC(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function PC(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ac(this):Rc(this),this.readyState==3&&PC(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ac(this))},n.Na=function(c){this.g&&(this.response=c,Ac(this))},n.ga=function(){this.g&&Ac(this)};function Ac(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Rc(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Rc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xC(c){let d="";return Vl(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Kg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=xC(f),typeof c=="string"?f!=null&&Ic(f):xe(c,d,f))}function ze(c){Nt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,Nt);var Vk=/^https?$/i,jk=["POST","PUT"];n=ze.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pC.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){kC(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(jk,d,void 0)>=0)||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){kC(this,A)}};function kC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,OC(c),Wl(c)}function OC(c){c.A||(c.A=!0,Lt(c,"complete"),Lt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Lt(this,"complete"),Lt(this,"abort"),Wl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?FC(this):this.Xa())},n.Xa=function(){FC(this)};function FC(c){if(c.h&&typeof o<"u"){if(c.v&&gi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Lt(c,"readystatechange"),gi(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=A===0){let V=String(c.D).match(bC)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),m=!Vk.test(V?V.toLowerCase():"")}f=m}if(f)Lt(c,"complete"),Lt(c,"success");else{c.o=6;try{var b=gi(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",OC(c)}}finally{Wl(c)}}}}function Wl(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||Lt(c,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(c){return c.g?c.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),vk(d)}};function LC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(c){let d={};c=(c.g&&gi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(E(c[m]))continue;var f=Ck(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}fk(d,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function VC(c){this.za=0,this.i=[],this.j=new Ec,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nc("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nc("baseRetryDelayMs",5e3,c),this.Za=Nc("retryDelaySeedMs",1e4,c),this.Ta=Nc("forwardChannelMaxRetries",2,c),this.va=Nc("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new EC(c&&c.concurrentRequestLimit),this.Ba=new Lk,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=VC.prototype,n.ka=8,n.I=1,n.connect=function(c,d,f,m){Vt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=WC(this,null,this.W),Ql(this)};function Qg(c){if(jC(c),c.I==3){var d=c.V++,f=cr(c.J);if(xe(f,"SID",c.M),xe(f,"RID",d),xe(f,"TYPE","terminate"),Mc(c,f),d=new hi(c,c.j,d),d.M=2,d.A=ql(cr(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=KC(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Hl(d)}GC(c)}function Kl(c){c.g&&(Jg(c),c.g.cancel(),c.g=null)}function jC(c){Kl(c),c.v&&(s.clearTimeout(c.v),c.v=null),Yl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Ql(c){if(!IC(c.h)&&!c.m){c.m=!0;var d=c.Ea;Kt||_(),vt||(Kt(),vt=!0),D.add(d,c),c.D=0}}function Bk(c,d){return wC(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=_c(l(c.Ea,c,d),zC(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new hi(this,this.j,c),A=this.o;if(this.U&&(A?(A=YD(A),ZD(A,this.U)):A=this.U),this.u!==null||this.R||(b.J=A,A=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=BC(this,b,d),f=cr(this.J),xe(f,"RID",c),xe(f,"CVER",22),this.G&&xe(f,"X-HTTP-Session-Id",this.G),Mc(this,f),A&&(this.R?d="headers="+Ic(xC(A))+"&"+d:this.u&&Kg(f,this.u,A)),Gg(this.h,b),this.Ra&&xe(f,"TYPE","init"),this.S?(xe(f,"$req",d),xe(f,"SID","null"),b.U=!0,$g(b,f,null)):$g(b,f,d),this.I=2}}else this.I==3&&(c?UC(this,c):this.i.length==0||IC(this.h)||UC(this))};function UC(c,d){var f;d?f=d.l:f=c.V++;let m=cr(c.J);xe(m,"SID",c.M),xe(m,"RID",f),xe(m,"AID",c.K),Mc(c,m),c.u&&c.o&&Kg(m,c.u,c.o),f=new hi(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=BC(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Gg(c.h,f),$g(f,m,d)}function Mc(c,d){c.H&&Vl(c.H,function(f,m){xe(d,m,f)}),c.l&&Vl({},function(f,m){xe(d,m,f)})}function BC(c,d,f){f=Math.min(c.i.length,f);let m=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let ue=-1;for(;;){let ht=["count="+f];ue==-1?f>0?(ue=b[0].g,ht.push("ofs="+ue)):ue=0:ht.push("ofs="+ue);let Re=!0;for(let _t=0;_t<f;_t++){var A=b[_t].g;let ur=b[_t].map;if(A-=ue,A<0)ue=Math.max(0,b[_t].g-100),Re=!1;else try{A="req"+A+"_"||"";try{var V=ur instanceof Map?ur:Object.entries(ur);for(let[vo,mi]of V){let yi=mi;a(mi)&&(yi=Lg(mi)),ht.push(A+vo+"="+encodeURIComponent(yi))}}catch(vo){throw ht.push(A+"type="+encodeURIComponent("_badmap")),vo}}catch{m&&m(ur)}}if(Re){V=ht.join("&");break e}}V=void 0}return c=c.i.splice(0,f),d.G=c,V}function $C(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Kt||_(),vt||(Kt(),vt=!0),D.add(d,c),c.A=0}}function Yg(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=_c(l(c.Da,c),zC(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,HC(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=_c(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Kl(this),HC(this))};function Jg(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function HC(c){c.g=new hi(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=cr(c.na);xe(d,"RID","rpc"),xe(d,"SID",c.M),xe(d,"AID",c.K),xe(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&xe(d,"TO",c.ia),xe(d,"TYPE","xmlhttp"),Mc(c,d),c.u&&c.o&&Kg(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=ql(cr(d)),f.u=null,f.R=!0,yC(f,c)}n.Va=function(){this.C!=null&&(this.C=null,Kl(this),Yg(this),Vt(19))};function Yl(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function qC(c,d){var f=null;if(c.g==d){Yl(c),Jg(c),c.g=null;var m=2}else if(zg(c.h,d))f=d.G,DC(c.h,d),m=1;else return;if(c.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;m=Bl(),Lt(m,new hC(m,f)),Ql(c)}else $C(c);else if(b=d.m,b==3||b==0&&d.X>0||!(m==1&&Bk(c,d)||m==2&&Yg(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),b){case 1:yo(c,5);break;case 4:yo(c,10);break;case 3:yo(c,6);break;default:yo(c,2)}}}function zC(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function yo(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),m=c.Ua;let b=!m;m=new fi(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Dc(m,"https"),ql(m),b?Ok(m.toString(),f):Fk(m.toString(),f)}else Vt(2);c.I=0,c.l&&c.l.pa(d),GC(c),jC(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function GC(c){if(c.I=0,c.ja=[],c.l){let d=CC(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ja,d),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function WC(c,d,f){var m=f instanceof fi?cr(f):new fi(f);if(m.g!="")d&&(m.g=d+"."+m.g),Cc(m,m.u);else{var b=s.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let A=new fi(null);m&&Dc(A,m),d&&(A.g=d),b&&Cc(A,b),f&&(A.h=f),m=A}return f=c.G,d=c.wa,f&&d&&xe(m,f,d),xe(m,"VER",c.ka),Mc(c,m),m}function KC(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new ze(new zl({ab:f})):new ze(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function QC(){}n=QC.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Jl(){}Jl.prototype.g=function(c,d){return new Xt(c,d)};function Xt(c,d){Nt.call(this),this.g=new VC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!E(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ms(this)}p(Xt,Nt),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Qg(this.g)},Xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=Lg(c),c=f);d.i.push(new Sk(d.Ya++,c)),d.I==3&&Ql(d)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Qg(this.g),delete this.g,Xt.Z.N.call(this)};function YC(c){Vg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(YC,Vg);function JC(){jg.call(this),this.status=1}p(JC,jg);function Ms(c){this.g=c}p(Ms,QC),Ms.prototype.ra=function(){Lt(this.g,"a")},Ms.prototype.qa=function(c){Lt(this.g,new YC(c))},Ms.prototype.pa=function(c){Lt(this.g,new JC)},Ms.prototype.oa=function(){Lt(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,NI=ti.createWebChannelTransport=function(){return new Jl},RI=ti.getStatEventTarget=function(){return Bl()},AI=ti.Event=po,Pp=ti.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,yl=ti.ErrorCode=$l,fC.COMPLETE="complete",SI=ti.EventType=fC,cC.EventType=yc,yc.OPEN="a",yc.CLOSE="b",yc.ERROR="c",yc.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Va=ti.WebChannel=cC,Gq=ti.FetchXmlHttpFactory=zl,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,TI=ti.XhrIo=ze}).apply(typeof Mp<"u"?Mp:typeof self<"u"?self:typeof window<"u"?window:{});var RM="@firebase/firestore",NM="4.9.2";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var cc="12.3.0";var Es=new Sr("@firebase/firestore");function ja(){return Es.logLevel}function H(n,...e){if(Es.logLevel<=fe.DEBUG){let t=e.map(vD);Es.debug(`Firestore (${cc}): ${n}`,...t)}}function ii(n,...e){if(Es.logLevel<=fe.ERROR){let t=e.map(vD);Es.error(`Firestore (${cc}): ${n}`,...t)}}function Wa(n,...e){if(Es.logLevel<=fe.WARN){let t=e.map(vD);Es.warn(`Firestore (${cc}): ${n}`,...t)}}function vD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function J(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vP(n,r,t)}function vP(n,e,t){let r=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ii(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||vP(e,i,r)}function ne(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ni=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var jp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},LI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VI=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ni,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ni)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new jp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new bt(e)}},jI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},UI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Up=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},BI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Up(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Up(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Wq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Dl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Wq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function $I(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return MI(i)===MI(o)?me(i,o):MI(i)?1:-1}return me(n.length,e.length)}var Kq=55296,Qq=57343;function MI(n){let e=n.charCodeAt(0);return e>=Kq&&e<=Qq}function Ka(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var MM="__name__",Bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&J(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):$I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}},qe=class n extends Bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Yq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vn=class n extends Bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Yq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MM}static keyField(){return new n([MM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};function _P(n,e,t){if(!t)throw new z(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jq(n,e,t,r){if(e===!0&&r===!0)throw new z(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PM(n){if(!Q.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xM(n){if(Q.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _D(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J(12329,{type:typeof n})}function to(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_D(n);throw new z(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lt(n,e){let t={typeString:n};return e&&(t.value=e),t}function kl(n,e){if(!EP(n))throw new z(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(O.INVALID_ARGUMENT,t);return!0}var kM=-62135596800,OM=1e6,dt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kM)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OM}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-kM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:lt("string",dt._jsonSchemaVersion),seconds:lt("number"),nanoseconds:lt("number")};var ie=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new dt(0,0))}static max(){return new n(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cl=-1,HI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};HI.UNKNOWN_ID=-1;function Zq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new Is(i,Q.empty(),e)}function Xq(n){return new Is(n.readTime,n.key,Cl)}var Is=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),Q.empty(),Cl)}static max(){return new n(ie.max(),Q.empty(),Cl)}};function e3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var t3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function uc(n){return v(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==t3)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function n3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lc(n){return n.name==="IndexedDbTransactionError"}var ED=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ID=-1;function vg(n){return n==null}function bl(n){return n===0&&1/n==-1/0}function r3(n){return typeof n=="number"&&Number.isInteger(n)&&!bl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var IP="";function i3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FM(e)),e=o3(n.get(t),e);return FM(e)}function o3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case IP:t+="";break;default:t+=o}}return t}function FM(n){return n+IP+""}var s3="remoteDocuments",wP="owner";var DP="mutationQueues";var CP="mutations";var bP="documentMutations",a3="remoteDocumentsV14";var TP="remoteDocumentGlobal";var SP="targets";var AP="targetDocuments";var RP="targetGlobal",NP="collectionParents";var MP="clientMetadata";var PP="bundles";var xP="namedQueries";var c3="indexConfiguration";var u3="indexState";var l3="indexEntries";var kP="documentOverlays";var d3="globals";var h3=[DP,CP,bP,s3,SP,wP,RP,AP,MP,TP,NP,PP,xP],Vae=[...h3,kP],f3=[DP,CP,bP,a3,SP,wP,RP,AP,MP,TP,NP,PP,xP,kP],p3=f3,g3=[...p3,c3,u3,l3];var jae=[...g3,d3];function LM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}},Ha=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}};Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class n{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tt(vn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ot=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ot.EMPTY_BYTE_STRING=new Ot("");var m3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(n){if(Ae(!!n,39018),typeof n=="string"){let e=0,t=m3.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function si(n){return typeof n=="string"?Ot.fromBase64String(n):Ot.fromUint8Array(n)}var FP="server_timestamp",LP="__type__",VP="__previous_value__",jP="__local_write_time__";function wD(n){return(n?.mapValue?.fields||{})[LP]?.stringValue===FP}function _g(n){let e=n.mapValue.fields[VP];return wD(e)?_g(e):e}function Tl(n){let e=oi(n.mapValue.fields[jP].timestampValue);return new dt(e.seconds,e.nanos)}var zI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},qp="(default)",zp=class n{constructor(e,t){this.projectId=e,this.database=t||qp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===qp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DD="__type__",UP="__max__",xp={mapValue:{fields:{__type__:{stringValue:UP}}}},CD="__vector__",Qa="value";function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wD(n)?4:$P(n)?9007199254740991:BP(n)?10:11:J(28295,{value:n})}function Or(n,e){if(n===e)return!0;let t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tl(n).isEqual(Tl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=oi(i.timestampValue),a=oi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return si(i.bytesValue).isEqual(si(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ue(i.doubleValue),a=Ue(o.doubleValue);return s===a?bl(s)===bl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ka(n.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(LM(s)!==LM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Or(s[u],a[u])))return!1;return!0})(n,e);default:return J(52216,{left:n})}}function Sl(n,e){return(n.values||[]).find(t=>Or(t,e))!==void 0}function Ya(n,e){if(n===e)return 0;let t=so(n),r=so(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ue(o.integerValue||o.doubleValue),u=Ue(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return VM(n.timestampValue,e.timestampValue);case 4:return VM(Tl(n),Tl(e));case 5:return $I(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=si(o),u=si(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=me(Ue(o.latitude),Ue(s.latitude));return a!==0?a:me(Ue(o.longitude),Ue(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jM(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Qa]?.arrayValue,h=u[Qa]?.arrayValue,p=me(l?.values?.length||0,h?.values?.length||0);return p!==0?p:jM(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===xp.mapValue&&s===xp.mapValue)return 0;if(o===xp.mapValue)return 1;if(s===xp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=$I(u[p],h[p]);if(g!==0)return g;let y=Ya(a[u[p]],l[h[p]]);if(y!==0)return y}return me(u.length,h.length)})(n.mapValue,e.mapValue);default:throw J(23264,{he:t})}}function VM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=oi(n),r=oi(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function jM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ya(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function Ja(n){return GI(n)}function GI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return si(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=GI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${GI(t.fields[s])}`;return i+"}"})(n.mapValue):J(61005,{value:n})}function Fp(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_g(n);return e?16+Fp(e):16;case 5:return 2*n.stringValue.length;case 6:return si(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Fp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return lo(r.fields,(o,s)=>{i+=o.length+Fp(s)}),i})(n.mapValue);default:throw J(13486,{value:n})}}function WI(n){return!!n&&"integerValue"in n}function bD(n){return!!n&&"arrayValue"in n}function UM(n){return!!n&&"nullValue"in n}function BM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lp(n){return!!n&&"mapValue"in n}function BP(n){return(n?.mapValue?.fields||{})[DD]?.stringValue===CD}function _l(n){if(n.geoPointValue)return{geoPointValue:M({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:M({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_l(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_l(n.arrayValue.values[t]);return e}return M({},n)}function $P(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UP}var Bae={mapValue:{fields:{[DD]:{stringValue:CD},[Qa]:{arrayValue:{}}}}};var yn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(t)}setAll(e){let t=vn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=_l(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Lp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(_l(this.value))}};function HP(n){let e=[];return lo(n.fields,(t,r)=>{let i=new vn([t]);if(Lp(r)){let o=HP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new xn(e)}var or=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),yn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Za=class{constructor(e,t){this.position=e,this.inclusive=t}};function $M(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Ya(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Or(n.position[t],e.position[t]))return!1;return!0}var Xa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function y3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gp=class{},yt=class n extends Gp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new QI(e,t,r):t==="array-contains"?new ZI(e,r):t==="in"?new XI(e,r):t==="not-in"?new ew(e,r):t==="array-contains-any"?new tw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YI(e,r):new JI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ya(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fr=class n extends Gp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return qP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function qP(n){return n.op==="and"}function zP(n){return v3(n)&&qP(n)}function v3(n){for(let e of n.filters)if(e instanceof Fr)return!1;return!0}function KI(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(zP(n))return n.filters.map(e=>KI(e)).join(",");{let e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function GP(n,e){return n instanceof yt?(function(r,i){return i instanceof yt&&r.op===i.op&&r.field.isEqual(i.field)&&Or(r.value,i.value)})(n,e):n instanceof Fr?(function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&GP(s,i.filters[a]),!0):!1})(n,e):void J(19439)}function WP(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(WP).join(" ,")+"}"})(n):"Filter"}var QI=class extends yt{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},YI=class extends yt{constructor(e,t){super(e,"in",t),this.keys=KP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},JI=class extends yt{constructor(e,t){super(e,"not-in",t),this.keys=KP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function KP(n,e){return(e.arrayValue?.values||[]).map(t=>Q.fromName(t.referenceValue))}var ZI=class extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return bD(t)&&Sl(t.arrayValue,this.value)}},XI=class extends yt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Sl(this.value.arrayValue,t)}},ew=class extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sl(this.value.arrayValue,t)}},tw=class extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!bD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sl(this.value.arrayValue,r))}};var nw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function qM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new nw(n,e,t,r,i,o,s)}function TD(n){let e=ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),vg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ja(r)).join(",")),e.Te=t}return e.Te}function SD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HM(n.startAt,e.startAt)&&HM(n.endAt,e.endAt)}function rw(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ec=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function _3(n,e,t,r,i,o,s,a){return new ec(n,e,t,r,i,o,s,a)}function AD(n){return new ec(n)}function zM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function E3(n){return n.collectionGroup!==null}function El(n){let e=ne(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Tt(vn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xa(o,r))}),t.has(vn.keyField().canonicalString())||e.Ie.push(new Xa(vn.keyField(),r))}return e.Ie}function xr(n){let e=ne(n);return e.Ee||(e.Ee=I3(e,El(n))),e.Ee}function I3(n,e){if(n.limitType==="F")return qM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Xa(i.field,o)});let t=n.endAt?new Za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Za(n.startAt.position,n.startAt.inclusive):null;return qM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iw(n,e,t){return new ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eg(n,e){return SD(xr(n),xr(e))&&n.limitType===e.limitType}function QP(n){return`${TD(xr(n))}|lt:${n.limitType}`}function Ua(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>WP(i)).join(", ")}]`),vg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`})(xr(n))}; limitType=${n.limitType})`}function Ig(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of El(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=$M(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,El(r),i)||r.endAt&&!(function(s,a,u){let l=$M(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,El(r),i))})(n,e)}function w3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YP(n){return(e,t)=>{let r=!1;for(let i of El(n)){let o=D3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function D3(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ya(u,l):J(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:n.dir})}}var ai=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return OP(this.inner)}size(){return this.innerSize}};var C3=new Ye(Q.comparator);function ci(){return C3}var JP=new Ye(Q.comparator);function vl(...n){let e=JP;for(let t of n)e=e.insert(t.key,t);return e}function ZP(n){let e=JP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return Il()}function XP(){return Il()}function Il(){return new ai(n=>n.toString(),(n,e)=>n.isEqual(e))}var b3=new Ye(Q.comparator),T3=new Tt(Q.comparator);function ye(...n){let e=T3;for(let t of n)e=e.add(t);return e}var S3=new Tt(me);function A3(){return S3}function RD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function ex(n){return{integerValue:""+n}}function R3(n,e){return r3(e)?ex(e):RD(n,e)}var tc=class{constructor(){this._=void 0}};function N3(n,e,t){return n instanceof nc?(function(i,o){let s={fields:{[LP]:{stringValue:FP},[jP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wD(o)&&(o=_g(o)),o&&(s.fields[VP]=o),{mapValue:s}})(t,e):n instanceof ws?nx(n,e):n instanceof Ds?rx(n,e):(function(i,o){let s=tx(i,o),a=GM(s)+GM(i.Ae);return WI(s)&&WI(i.Ae)?ex(a):RD(i.serializer,a)})(n,e)}function M3(n,e,t){return n instanceof ws?nx(n,e):n instanceof Ds?rx(n,e):t}function tx(n,e){return n instanceof rc?(function(r){return WI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var nc=class extends tc{},ws=class extends tc{constructor(e){super(),this.elements=e}};function nx(n,e){let t=ix(e);for(let r of n.elements)t.some(i=>Or(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ds=class extends tc{constructor(e){super(),this.elements=e}};function rx(n,e){let t=ix(e);for(let r of n.elements)t=t.filter(i=>!Or(i,r));return{arrayValue:{values:t}}}var rc=class extends tc{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function GM(n){return Ue(n.integerValue||n.doubleValue)}function ix(n){return bD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function P3(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ws&&i instanceof ws||r instanceof Ds&&i instanceof Ds?Ka(r.elements,i.elements,Or):r instanceof rc&&i instanceof rc?Or(r.Ae,i.Ae):r instanceof nc&&i instanceof nc})(n.transform,e.transform)}var ow=class{constructor(e,t){this.version=e,this.transformResults=t}},ri=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ic=class{};function ox(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Al(n.key,ri.none()):new Cs(n.key,n.data,ri.none());{let t=n.data,r=yn.empty(),i=new Tt(vn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(n.key,r,new xn(i.toArray()),ri.none())}}function x3(n,e,t){n instanceof Cs?(function(i,o,s){let a=i.value.clone(),u=KM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Lr?(function(i,o,s){if(!Vp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=KM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(sx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function wl(n,e,t,r){return n instanceof Cs?(function(o,s,a,u){if(!Vp(o.precondition,s))return a;let l=o.value.clone(),h=QM(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Lr?(function(o,s,a,u){if(!Vp(o.precondition,s))return a;let l=QM(o.fieldTransforms,u,s),h=s.data;return h.setAll(sx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Vp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function k3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=tx(r.transform,i||null);o!=null&&(t===null&&(t=yn.empty()),t.set(r.field,o))}return t||null}function WM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ka(r,i,(o,s)=>P3(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Cs=class extends ic{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends ic{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function KM(n,e,t){let r=new Map;Ae(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,M3(s,a,t[i]))}return r}function QM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,N3(o,s,e))}return r}var Al=class extends ic{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sw=class extends ic{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var aw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&x3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=wl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=wl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=XP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=ox(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ye())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(t,r)=>WM(t,r))&&Ka(this.baseMutations,e.baseMutations,(t,r)=>WM(t,r))}},cw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return b3})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var uw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ct,_e;function O3(n){switch(n){case O.OK:return J(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return J(15467,{code:n})}}function ax(n){if(n===void 0)return ii("GRPC error has no .code"),O.UNKNOWN;switch(n){case ct.OK:return O.OK;case ct.CANCELLED:return O.CANCELLED;case ct.UNKNOWN:return O.UNKNOWN;case ct.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case ct.INTERNAL:return O.INTERNAL;case ct.UNAVAILABLE:return O.UNAVAILABLE;case ct.UNAUTHENTICATED:return O.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case ct.NOT_FOUND:return O.NOT_FOUND;case ct.ALREADY_EXISTS:return O.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return O.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case ct.ABORTED:return O.ABORTED;case ct.OUT_OF_RANGE:return O.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return O.UNIMPLEMENTED;case ct.DATA_LOSS:return O.DATA_LOSS;default:return J(39323,{code:n})}}(_e=ct||(ct={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var F3=null;function L3(){return new TextEncoder}var V3=new ei([4294967295,4294967295],0);function YM(n){let e=L3().encode(n),t=new bI;return t.update(e),new Uint8Array(t.digest())}function JM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ei([t,r],0),new ei([i,o],0)]}var dw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ys(`Invalid padding: ${t}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ys(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ei.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ei.fromNumber(r)));return i.compare(V3)===1&&(i=new ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=YM(e),[r,i]=JM(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=YM(e),[r,i]=JM(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new Ye(me),ci(),ye())}},Rl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ye(),ye(),ye())}};var qa=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Kp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Qp=class{constructor(e,t,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yp=class{constructor(){this.ve=0,this.Fe=ZM(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),t=ye(),r=ye();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:o})}}),new Rl(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=ZM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},hw=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=kp(),this.He=kp(),this.Ye=new Ye(me)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(rw(o))if(r===0){let s=new Q(o.path);this.et(t,s,or.newNoDocument(s,ie.min()))}else Ae(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}F3?.lt((function(h,p,g,y,S){let x={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},N=p.unchangedNames;return N&&(x.bloomFilter={applied:S===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:U=>y?.mightContain(U)??!1}),x})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=si(r).toUint8Array()}catch(u){if(u instanceof Hp)return Wa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dw(s,i,o)}catch(u){return Wa(u instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&rw(a.target)){let u=new Q(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,or.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=ye();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Wp(e,t,this.Ye,this.je,r);return this.je=ci(),this.Je=kp(),this.He=kp(),this.Ye=new Ye(me),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(me),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yp),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function kp(){return new Ye(Q.comparator)}function ZM(){return new Ye(Q.comparator)}var j3={asc:"ASCENDING",desc:"DESCENDING"},U3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B3={and:"AND",or:"OR"},fw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function pw(n,e){return n.useProto3Json||vg(e)?e:{value:e}}function Jp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $3(n,e){return Jp(n,e.toTimestamp())}function kr(n){return Ae(!!n,49232),ie.fromTimestamp((function(t){let r=oi(t);return new dt(r.seconds,r.nanos)})(n))}function ND(n,e){return gw(n,e).canonicalString()}function gw(n,e){let t=(function(i){return new qe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ux(n){let e=qe.fromString(n);return Ae(px(e),10190,{key:e.toString()}),e}function mw(n,e){return ND(n.databaseId,e.path)}function PI(n,e){let t=ux(e);if(t.get(1)!==n.databaseId.projectId)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(dx(t))}function lx(n,e){return ND(n.databaseId,e)}function H3(n){let e=ux(n);return e.length===4?qe.emptyPath():dx(e)}function yw(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dx(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function XM(n,e,t){return{name:mw(n,e),fields:t.value.mapValue.fields}}function q3(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ae(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?O.UNKNOWN:ax(l.code);return new z(h,l.message||"")})(s);t=new Qp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=PI(n,r.document.name),o=kr(r.document.updateTime),s=r.document.createTime?kr(r.document.createTime):ie.min(),a=new yn({mapValue:{fields:r.document.fields}}),u=or.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new qa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=PI(n,r.document),o=r.readTime?kr(r.readTime):ie.min(),s=or.newNoDocument(i,o),a=r.removedTargetIds||[];t=new qa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=PI(n,r.document),o=r.removedTargetIds||[];t=new qa([],o,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lw(i,o),a=r.targetId;t=new Kp(a,s)}}return t}function z3(n,e){let t;if(e instanceof Cs)t={update:XM(n,e.key,e.value)};else if(e instanceof Al)t={delete:mw(n,e.key)};else if(e instanceof Lr)t={update:XM(n,e.key,e.data),updateMask:ez(e.fieldMask)};else{if(!(e instanceof sw))return J(16599,{Vt:e.type});t={verify:mw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof nc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ws)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ds)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rc)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw J(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J(27497)})(n,e.precondition)),t}function G3(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?kr(i.updateTime):kr(o);return s.isEqual(ie.min())&&(s=kr(o)),new ow(s,i.transformResults||[])})(t,e))):[]}function W3(n,e){return{documents:[lx(n,e.path)]}}function K3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lx(n,i);let o=(function(l){if(l.length!==0)return fx(Fr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Ba(g.field),direction:J3(g.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=pw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function Q3(n){let e=H3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ae(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let g=hx(p);return g instanceof Fr&&zP(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(S){return new Xa($a(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,vg(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Za(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Za(y,g)})(t.endAt)),_3(e,i,s,o,a,"F",u,l)}function Y3(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$a(t.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$a(t.unaryFilter.field);return yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$a(t.unaryFilter.field);return yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$a(t.unaryFilter.field);return yt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create($a(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map(r=>hx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}})(t.compositeFilter.op))})(n):J(30097,{filter:n})}function J3(n){return j3[n]}function Z3(n){return U3[n]}function X3(n){return B3[n]}function Ba(n){return{fieldPath:n.canonicalString()}}function $a(n){return vn.fromServerFormat(n.fieldPath)}function fx(n){return n instanceof yt?(function(t){if(t.op==="=="){if(BM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NAN"}};if(UM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NAN"}};if(UM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(t.field),op:Z3(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){let r=t.getFilters().map(i=>fx(i));return r.length===1?r[0]:{compositeFilter:{op:X3(t.op),filters:r}}})(n):J(54877,{filter:n})}function ez(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function px(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Nl=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=Ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vw=class{constructor(e){this.yt=e}};function tz(n){let e=Q3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?iw(e,e.limit,"L"):e}var Zp=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),bl(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=oi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(si(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?$P(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):BP(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):J(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Qa,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ue(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Q.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Zp.Kt=new Zp;var _w=class{constructor(){this.Cn=new Ew}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Is.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Ew=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(qe.comparator)).toArray()}};var $ae=new Uint8Array(0);var eP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gx=41943040,Pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(gx,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var Ml=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var tP="LruGarbageCollector",nz=1048576;function nP([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var Iw=class{constructor(e){this.Ir=e,this.buffer=new Tt(nP),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();nP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ww=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(tP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){lc(t)?H(tP,"Ignoring IndexedDB error during garbage collection: ",t):yield uc(t)}yield this.Vr(3e5)}))}},Dw=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(ED.ce);let r=new Iw(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(eP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eP):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ja()<=fe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function rz(n,e){return new Dw(n,e)}var Cw=class{constructor(){this.changes=new ai(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Tw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&wl(r.mutation,i,xn.empty(),dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ye()){let i=ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=vl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ye()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ci(),s=Il(),a=(function(){return Il()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),wl(h.mutation,l,h.mutation.getFieldMask(),dt.now())):s.set(l.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new bw(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Il(),i=new Ye((s,a)=>s-a),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||xn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ye()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=XP();h.forEach(g=>{if(!o.has(g)){let y=ox(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(ms()),a=Cl,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ye())).next(h=>({batchId:a,changes:ZP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=vl();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=(function(p,g){return new ec(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,or.newInvalidDocument(h)))});let a=vl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&wl(h.mutation,l,xn.empty(),dt.now()),Ig(t,l)&&(a=a.insert(u,l))}),a})}};var Sw=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:kr(i.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:tz(i.bundledQuery),readTime:kr(i.readTime)}})(t)),L.resolve()}};var Aw=class{constructor(){this.overlays=new Ye(Q.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ms();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=ms(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ms(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ms(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new uw(t,r));let o=this.qr.get(t);o===void 0&&(o=ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Rw=class{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Pl=class{constructor(){this.Qr=new Tt(ut.$r),this.Ur=new Tt(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new ut(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new ut(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Q(new qe([])),r=new ut(t,e),i=new ut(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Q(new qe([])),r=new ut(t,e),i=new ut(t,e+1),o=ye();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ut(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ut=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Q.comparator(e.key,t.key)||me(e.Yr,t.Yr)}static Kr(e,t){return me(e.Yr,t.Yr)||Q.comparator(e.key,t.key)}};var Nw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(ut.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new aw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new ut(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ID:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ut(t,0),i=new ut(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(me);return t.forEach(i=>{let o=new ut(i,0),s=new ut(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new ut(new Q(o),0),a=new Tt(me);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),L.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(t.mutations,i=>{let o=new ut(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new ut(t,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Mw=class{constructor(e){this.ri=e,this.docs=(function(){return new Ye(Q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=ci();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():or.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ci(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||e3(Xq(h),r)<=0||(i.has(h.key)||Ig(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){J(9500)}ii(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Pw(this)}getSize(e){return L.resolve(this.size)}},Pw=class extends Cw{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var xw=class{constructor(e){this.persistence=e,this.si=new ai(t=>TD(t),SD),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Pl,this.targetCount=0,this.ai=Ml.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Ml(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}};var Xp=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new ED(0),this.li=!1,this.li=!0,this.hi=new Rw,this.referenceDelegate=e(this),this.Pi=new xw(this),this.indexManager=new _w,this.remoteDocumentCache=(function(i){return new Mw(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new vw(t),this.Ii=new Sw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Aw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Nw(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new kw(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},kw=class extends qI{constructor(e){super(),this.currentSequenceNumber=e}},Ow=class n{constructor(e){this.persistence=e,this.Ri=new Pl,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{let i=Q.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},eg=class n{constructor(e,t){this.persistence=e,this.pi=new ai(r=>i3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rz(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fp(e.data.value)),t}br(e,t,r){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Fw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ye(),i=ye();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Lw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Vw=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DR()?8:n3(Ct())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Lw;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ja()<=fe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ja()<=fe.DEBUG&&H("QueryEngine","Query:",Ua(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ja()<=fe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):L.resolve())}ys(e,t){if(zM(t))return L.resolve(null);let r=xr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=iw(t,null,"F"),r=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ye(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,iw(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return zM(t)||i.isEqual(ie.min())?L.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?L.resolve(null):(ja()<=fe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ua(t)),this.vs(e,s,t,Zq(i,Cl)).next(a=>a))})}Ds(e,t){let r=new Tt(YP(e));return t.forEach((i,o)=>{Ig(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ja()<=fe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ua(t)),this.ps.getDocumentsMatchingQuery(e,t,Is.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var MD="LocalStore",iz=3e8,jw=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ye(me),this.xs=new ai(o=>TD(o),SD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function oz(n,e,t,r){return new jw(n,e,t,r)}function mx(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ye();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function sz(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=L.resolve();return g.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(x=>{let N=l.docVersions.get(S);Ae(N!==null,48541),x.version.compareTo(N)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yx(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function az(n,e){let t=ne(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ot.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(x,N,U){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=iz?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(g,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=ci(),l=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(cz(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(ie.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function cz(n,e,t){let r=ye(),i=ye();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ci();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H(MD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function uz(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ID),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lz(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Nl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function Uw(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!lc(s))throw s;H(MD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function rP(n,e,t){let r=ne(n),i=ie.min(),o=ye();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),g=p.xs.get(h);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:ye())).next(a=>(dz(r,w3(e),a),{documents:a,Qs:o})))}function dz(n,e,t){let r=n.Os.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var tg=class{constructor(){this.activeTargetIds=A3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bw=class{constructor(){this.Mo=new tg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $w=class{Oo(e){}shutdown(){}};var iP="ConnectivityMonitor",ng=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(iP,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){H(iP,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Op=null;function Hw(){return Op===null?Op=(function(){return 268435456+Math.round(2147483648*Math.random())})():Op++,"0x"+Op.toString(16)}var xI="RestConnection",hz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qw=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===qp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Hw(),a=this.zo(e,t.toUriEncodedString());H(xI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=Bi(l);return this.Jo(e,a,u,r,h).then(p=>(H(xI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Wa(xI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=hz[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var zw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var xt="WebChannelConnection",Gw=class extends qw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Hw();return new Promise((a,u)=>{let l=new TI;l.setWithCredentials(!0),l.listenOnce(SI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yl.NO_ERROR:let p=l.getResponseJson();H(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yl.TIMEOUT:H(xt,`RPC '${e}' ${s} timed out`),u(new z(O.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:let g=l.getStatus();if(H(xt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let x=(function(U){let oe=U.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(oe)>=0?oe:O.UNKNOWN})(S.status);u(new z(x,S.message))}else u(new z(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(O.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{H(xt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);H(xt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Hw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=NI(),a=RI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");H(xt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let g=!1,y=!1,S=new zw({Yo:N=>{y?H(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(H(xt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),H(xt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),x=(N,U,oe)=>{N.listen(U,pe=>{try{oe(pe)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return x(p,Va.EventType.OPEN,()=>{y||(H(xt,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),x(p,Va.EventType.CLOSE,()=>{y||(y=!0,H(xt,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),x(p,Va.EventType.ERROR,N=>{y||(y=!0,Wa(xt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.a_(new z(O.UNAVAILABLE,"The operation could not be completed")))}),x(p,Va.EventType.MESSAGE,N=>{if(!y){let U=N.data[0];Ae(!!U,16349);let oe=U,pe=oe?.error||oe[0]?.error;if(pe){H(xt,`RPC '${e}' stream ${i} received error:`,pe);let Ft=pe.status,Kt=(function(_){let I=ct[_];if(I!==void 0)return ax(I)})(Ft),vt=pe.message;Kt===void 0&&(Kt=O.INTERNAL,vt="Unknown error status: "+Ft+" with message "+pe.message),y=!0,S.a_(new z(Kt,vt)),p.close()}else H(xt,`RPC '${e}' stream ${i} received:`,U),S.u_(U)}}),x(a,AI.STAT_EVENT,N=>{N.stat===Pp.PROXY?H(xt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Pp.NOPROXY&&H(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function kI(){return typeof document<"u"?document:null}function wg(n){return new fw(n,!0)}var rg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var oP="PersistentStream",ig=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return v(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return v(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new z(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>v(this,null,function*(){this.state=0,this.start()}))}z_(e){return H(oP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(H(oP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ww=class extends ig{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=q3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?kr(s.readTime):ie.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=yw(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=rw(u)?{documents:W3(o,u)}:{query:K3(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cx(o,s.resumeToken);let l=pw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Jp(o,s.snapshotVersion.toTimestamp());let l=pw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Y3(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=yw(this.serializer),t.removeTarget=e,this.q_(t)}},Kw=class extends ig{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=G3(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=yw(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>z3(this.serializer,r))};this.q_(t)}};var Qw=class{},Yw=class extends Qw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,gw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(O.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,gw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(O.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Jw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ii(t),this.aa=!1):H("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var bs="RemoteStore",Zw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Ts(this)&&(H(bs,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=ne(u);l.Ea.add(4),yield Ol(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield Dg(l)})})(this))}))}),this.Ra=new Jw(r,i)}};function Dg(n){return v(this,null,function*(){if(Ts(n))for(let e of n.da)yield e(!0)})}function Ol(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function vx(n,e){let t=ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),OD(t)?kD(t):dc(t).O_()&&xD(t,e))}function PD(n,e){let t=ne(n),r=dc(t);t.Ia.delete(e),r.O_()&&_x(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ts(t)&&t.Ra.set("Unknown"))}function xD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).Y_(e)}function _x(n,e){n.Va.Ue(e),dc(n).Z_(e)}function kD(n){n.Va=new hw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.Ra.ua()}function OD(n){return Ts(n)&&!dc(n).x_()&&n.Ia.size>0}function Ts(n){return ne(n).Ea.size===0}function Ex(n){n.Va=void 0}function fz(n){return v(this,null,function*(){n.Ra.set("Online")})}function pz(n){return v(this,null,function*(){n.Ia.forEach((e,t)=>{xD(n,e)})})}function gz(n,e){return v(this,null,function*(){Ex(n),OD(n)?(n.Ra.ha(e),kD(n)):n.Ra.set("Unknown")})}function mz(n,e,t){return v(this,null,function*(){if(n.Ra.set("Online"),e instanceof Qp&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){H(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield og(n,r)}else if(e instanceof qa?n.Va.Ze(e):e instanceof Kp?n.Va.st(e):n.Va.tt(e),!t.isEqual(ie.min()))try{let r=yield yx(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),_x(o,u);let p=new Nl(h.target,u,l,h.sequenceNumber);xD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){H(bs,"Failed to raise snapshot:",r),yield og(n,r)}})}function og(n,e,t){return v(this,null,function*(){if(!lc(e))throw e;n.Ea.add(1),yield Ol(n),n.Ra.set("Offline"),t||(t=()=>yx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){H(bs,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Dg(n)}))})}function Ix(n,e){return e().catch(t=>og(n,t,e))}function Cg(n){return v(this,null,function*(){let e=ne(n),t=ao(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ID;for(;yz(e);)try{let i=yield uz(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,vz(e,i)}catch(i){yield og(e,i)}wx(e)&&Dx(e)})}function yz(n){return Ts(n)&&n.Ta.length<10}function vz(n,e){n.Ta.push(e);let t=ao(n);t.O_()&&t.X_&&t.ea(e.mutations)}function wx(n){return Ts(n)&&!ao(n).x_()&&n.Ta.length>0}function Dx(n){ao(n).start()}function _z(n){return v(this,null,function*(){ao(n).ra()})}function Ez(n){return v(this,null,function*(){let e=ao(n);for(let t of n.Ta)e.ea(t.mutations)})}function Iz(n,e,t){return v(this,null,function*(){let r=n.Ta.shift(),i=cw.from(r,e,t);yield Ix(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cg(n)})}function wz(n,e){return v(this,null,function*(){e&&ao(n).X_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return O3(s)&&s!==O.ABORTED})(i.code)){let o=r.Ta.shift();ao(r).B_(),yield Ix(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Cg(r)}})})(n,e)),wx(n)&&Dx(n)})}function sP(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),H(bs,"RemoteStore received new credentials");let r=Ts(t);t.Ea.add(3),yield Ol(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Dg(t)})}function Dz(n,e){return v(this,null,function*(){let t=ne(n);e?(t.Ea.delete(2),yield Dg(t)):e||(t.Ea.add(2),yield Ol(t),t.Ra.set("Unknown"))})}function dc(n){return n.ma||(n.ma=(function(t,r,i){let o=ne(t);return o.sa(),new Ww(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:fz.bind(null,n),t_:pz.bind(null,n),r_:gz.bind(null,n),H_:mz.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.B_(),OD(n)?kD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),Ex(n))}))),n.ma}function ao(n){return n.fa||(n.fa=(function(t,r,i){let o=ne(t);return o.sa(),new Kw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_z.bind(null,n),r_:wz.bind(null,n),ta:Ez.bind(null,n),na:Iz.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.fa.B_(),yield Cg(n)):(yield n.fa.stop(),n.Ta.length>0&&(H(bs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Xw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function FD(n,e){if(ii("AsyncQueue",`${e}: ${n}`),lc(n))return new z(O.UNAVAILABLE,`${e}: ${n}`);throw n}var sg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=vl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ag=class{constructor(){this.ga=new Ye(Q.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},oc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,sg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var eD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},tD=class{constructor(){this.queries=aP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ne(t),o=i.queries;i.queries=aP(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new z(O.ABORTED,"Firestore shutting down"))}};function aP(){return new ai(n=>QP(n),Eg)}function Cz(n,e){return v(this,null,function*(){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new eD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=FD(s,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&LD(t)})}function bz(n,e){return v(this,null,function*(){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Tz(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&LD(t)}function Sz(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function LD(n){n.Ca.forEach(e=>{e.next()})}var nD,cP;(cP=nD||(nD={})).Ma="default",cP.Cache="cache";var rD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nD.Cache}};var cg=class{constructor(e){this.key=e}},ug=class{constructor(e){this.key=e}},iD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ye(),this.mutatedKeys=ye(),this.eu=YP(e),this.tu=new sg(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new ag,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Ig(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?S!==x&&(r.track({type:3,doc:y}),N=!0):this.su(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:N})}};return x(y)-x(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new oc(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ag,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new ug(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new cg(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ye();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return oc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},VD="SyncEngine",oD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sD=class{constructor(e){this.key=e,this.hu=!1}},aD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ai(a=>QP(a),Eg),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(Q.comparator),this.Au=new Map,this.Ru=new Pl,this.Vu={},this.mu=new Map,this.fu=Ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Az(n,e,t=!0){return v(this,null,function*(){let r=Rx(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield Cx(r,e,t,!0),i})}function Rz(n,e){return v(this,null,function*(){let t=Rx(n);yield Cx(t,e,!0,!1)})}function Cx(n,e,t,r){return v(this,null,function*(){let i=yield lz(n.localStore,xr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Nz(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&vx(n.remoteStore,i),a})}function Nz(n,e,t,r,i){return v(this,null,function*(){n.pu=(p,g,y)=>(function(x,N,U,oe){return v(this,null,function*(){let pe=N.view.ru(U);pe.Cs&&(pe=yield rP(x.localStore,N.query,!1).then(({documents:D})=>N.view.ru(D,pe)));let Ft=oe&&oe.targetChanges.get(N.targetId),Kt=oe&&oe.targetMismatches.get(N.targetId)!=null,vt=N.view.applyChanges(pe,x.isPrimaryClient,Ft,Kt);return lP(x,N.targetId,vt.au),vt.snapshot})})(n,p,g,y);let o=yield rP(n.localStore,e,!0),s=new iD(e,o.Qs),a=s.ru(o.documents),u=Rl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);lP(n,t,l.au);let h=new oD(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function Mz(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Eg(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Uw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&PD(r.remoteStore,i.targetId),cD(r,i.targetId)}).catch(uc))):(cD(r,i.targetId),yield Uw(r.localStore,i.targetId,!0))})}function Pz(n,e){return v(this,null,function*(){let t=ne(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),PD(t.remoteStore,r.targetId))})}function xz(n,e,t){return v(this,null,function*(){let r=Uz(n);try{let i=yield(function(s,a){let u=ne(s),l=dt.now(),h=a.reduce((y,S)=>y.add(S.key),ye()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=ci(),x=ye();return u.Ns.getEntries(y,h).next(N=>{S=N,S.forEach((U,oe)=>{oe.isValidDocument()||(x=x.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(N=>{p=N;let U=[];for(let oe of a){let pe=k3(oe,p.get(oe.key).overlayedDocument);pe!=null&&U.push(new Lr(oe.key,pe,HP(pe.value.mapValue),ri.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(N=>{g=N;let U=N.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,N.batchId,U)})}).then(()=>({batchId:g.batchId,changes:ZP(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ye(me)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Fl(r,i.changes),yield Cg(r.remoteStore)}catch(i){let o=FD(i,"Failed to persist write");t.reject(o)}})}function bx(n,e){return v(this,null,function*(){let t=ne(n);try{let r=yield az(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ae(s.hu,14607):i.removedDocuments.size>0&&(Ae(s.hu,42227),s.hu=!1))}),yield Fl(t,r,e)}catch(r){yield uc(r)}})}function uP(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&LD(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kz(n,e,t){return v(this,null,function*(){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ye(Q.comparator);s=s.insert(o,or.newNoDocument(o,ie.min()));let a=ye().add(o),u=new Wp(ie.min(),new Map,new Ye(me),s,a);yield bx(r,u),r.du=r.du.remove(o),r.Au.delete(e),jD(r)}else yield Uw(r.localStore,e,!1).then(()=>cD(r,e,t)).catch(uc)})}function Oz(n,e){return v(this,null,function*(){let t=ne(n),r=e.batch.batchId;try{let i=yield sz(t.localStore,e);Sx(t,r,null),Tx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fl(t,i)}catch(i){yield uc(i)}})}function Fz(n,e,t){return v(this,null,function*(){let r=ne(n);try{let i=yield(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ae(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);Sx(r,e,t),Tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fl(r,i)}catch(i){yield uc(i)}})}function Tx(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Sx(n,e,t){let r=ne(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function cD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||Ax(n,r)})}function Ax(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(PD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),jD(n))}function lP(n,e,t){for(let r of t)r instanceof cg?(n.Ru.addReference(r.key,e),Lz(n,r)):r instanceof ug?(H(VD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Ax(n,r.key)):J(19791,{wu:r})}function Lz(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(H(VD,"New document in limbo: "+t),n.Eu.add(r),jD(n))}function jD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Q(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new sD(t)),n.du=n.du.insert(t,r),vx(n.remoteStore,new Nl(xr(AD(t.path)),r,"TargetPurposeLimboResolution",ED.ce))}}function Fl(n,e,t){return v(this,null,function*(){let r=ne(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=Fw.As(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield(function(u,l){return v(this,null,function*(){let h=ne(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,g=>L.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>L.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!lc(p))throw p;H(MD,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),S=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(g,x)}}})})(r.localStore,o))})}function Vz(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){H(VD,"User change. New user:",e.toKey());let r=yield mx(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new z(O.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fl(t,r.Ls)}})}function jz(n,e){let t=ne(n),r=t.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let i=ye(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function Rx(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kz.bind(null,e),e.Pu.H_=Tz.bind(null,e.eventManager),e.Pu.yu=Sz.bind(null,e.eventManager),e}function Uz(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fz.bind(null,e),e}var Nx=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=wg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return oz(this.persistence,new Vw,t.initialUser,this.serializer)}Cu(t){return new Xp(Ow.mi,this.serializer)}Du(t){return new Bw}terminate(){return v(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),uD=class extends Nx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof eg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ww(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Xp(r=>eg.mi(r,t),this.serializer)}};var Bz=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vz.bind(null,this.syncEngine),yield Dz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new tD})()}createDatastore(t){let r=wg(t.databaseInfo.databaseId),i=(function(s){return new Gw(s)})(t.databaseInfo);return(function(s,a,u,l){return new Yw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new Zw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>uP(this.syncEngine,r,0),(function(){return ng.v()?new ng:new $w})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let g=new aD(o,s,a,u,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){yield(function(r){return v(this,null,function*(){let i=ne(r);H(bs,"RemoteStore shutting down."),i.Ea.add(5),yield Ol(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var lD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var co="FirestoreClient",dD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=Dl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){H(co,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H(co,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=FD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function OI(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H(co,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield mx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function dP(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield $z(n);H(co,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sP(e.remoteStore,i)),n._onlineComponents=e})}function $z(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H(co,"Using user provided OfflineComponentProvider");try{yield OI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Wa("Error using user provided cache. Falling back to memory cache: "+t),yield OI(n,new Nx)}}else H(co,"Using default OfflineComponentProvider"),yield OI(n,new uD(void 0));return n._offlineComponents})}function Mx(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H(co,"Using user provided OnlineComponentProvider"),yield dP(n,n._uninitializedComponentsProvider._online)):(H(co,"Using default OnlineComponentProvider"),yield dP(n,new Bz))),n._onlineComponents})}function Hz(n){return Mx(n).then(e=>e.syncEngine)}function hP(n){return v(this,null,function*(){let e=yield Mx(n),t=e.eventManager;return t.onListen=Az.bind(null,e.syncEngine),t.onUnlisten=Mz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Rz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Pz.bind(null,e.syncEngine),t})}function Px(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fP=new Map;var xx="firestore.googleapis.com",pP=!0,lg=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xx,this.ssl=pP}else this.host=e.host,this.ssl=e.ssl??pP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nz)throw new z(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Px(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new UI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=fP.get(t);r&&(H("ComponentProvider","Removing Datastore"),fP.delete(t),r.terminate())})(this),Promise.resolve()}};function kx(n,e,t,r={}){n=to(n,sc);let i=Bi(e),o=n._getSettings(),s=Y(M({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(jf(`https://${a}`),Uf("Firestore",!0)),o.host!==xx&&o.host!==a&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Y(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!Tr(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=bt.MOCK_USER;else{l=yR(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new z(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new bt(p)}n._authCredentials=new LI(new jp(l,h))}}var dg=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new no(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(kl(t,n._jsonSchema))return new n(e,r||null,new Q(qe.fromString(t.referencePath)))}};kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:lt("string",kt._jsonSchemaVersion),referencePath:lt("string")};var no=class n extends dg{constructor(e,t,r){super(e,t,AD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ox(n,e,...t){if(n=Xe(n),_P("collection","path",e),n instanceof sc){let r=qe.fromString(e,...t);return xM(r),new no(n,null,r)}{if(!(n instanceof kt||n instanceof no))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return xM(r),new no(n.firestore,null,r)}}function UD(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=Dl.newId()),_P("doc","path",e),n instanceof sc){let r=qe.fromString(e,...t);return PM(r),new kt(n,null,new Q(r))}{if(!(n instanceof kt||n instanceof no))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return PM(r),new kt(n.firestore,n instanceof no?n.converter:null,new Q(r))}}var gP="AsyncQueue",hg=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rg(this,"async_queue_retry"),this._c=()=>{let r=kI();r&&H(gP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=kI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=kI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return v(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lc(e))throw e;H(gP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ii("INTERNAL UNHANDLED ERROR: ",mP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Xw.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:mP(this.nc)})}verifyOperationInProgress(){}Tc(){return v(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function mP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function yP(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var uo=class extends sc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hg(e),this._firestoreClient=void 0,yield e}})}};function Fx(n,e){let t=typeof n=="object"?n:ss(),r=typeof n=="string"?n:e||qp,i=Sa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=mR("firestore");o&&kx(i,...o)}return i}function Lx(n){if(n._terminated)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qz(n),n._firestoreClient}function qz(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new zI(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Px(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var ro=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ot.fromBase64String(e))}catch(t){throw new z(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ro._jsonSchemaVersion="firestore/bytes/1.0",ro._jsonSchema={type:lt("string",ro._jsonSchemaVersion),bytes:lt("string")};var ac=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xl=class{constructor(e){this._methodName=e}};var io=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(kl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};io._jsonSchemaVersion="firestore/geoPoint/1.0",io._jsonSchema={type:lt("string",io._jsonSchemaVersion),latitude:lt("number"),longitude:lt("number")};var oo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};oo._jsonSchemaVersion="firestore/vectorValue/1.0",oo._jsonSchema={type:lt("string",oo._jsonSchemaVersion),vectorValues:lt("object")};var zz=/^__.*__$/,hD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cs(e,this.data,t,this.fieldTransforms)}},fg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Vx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:n})}}var fD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Vx(this.Ac)&&zz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},pD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wg(e)}Cc(e,t,r,i=!1){return new fD({Ac:e,methodName:t,Dc:r,path:vn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jx(n){let e=n._freezeSettings(),t=wg(n._databaseId);return new pD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gz(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);BD("Data must be an object, but it was:",s,r);let a=Ux(r,s),u,l;if(o.merge)u=new xn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=gD(e,p,t);if(!s.contains(g))throw new z(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$x(h,g)||h.push(g)}u=new xn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new hD(new yn(a),u,l)}var pg=class n extends xl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Wz(n,e,t,r){let i=n.Cc(1,e,t);BD("Data must be an object, but it was:",i,r);let o=[],s=yn.empty();lo(r,(u,l)=>{let h=$D(e,u,t);l=Xe(l);let p=i.yc(h);if(l instanceof pg)o.push(h);else{let g=bg(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new xn(o);return new fg(s,a,i.fieldTransforms)}function Kz(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[gD(e,r,t)],u=[i];if(o.length%2!=0)throw new z(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(gD(e,o[g])),u.push(o[g+1]);let l=[],h=yn.empty();for(let g=a.length-1;g>=0;--g)if(!$x(l,a[g])){let y=a[g],S=u[g];S=Xe(S);let x=s.yc(y);if(S instanceof pg)l.push(y);else{let N=bg(S,x);N!=null&&(l.push(y),h.set(y,N))}}let p=new xn(l);return new fg(h,p,s.fieldTransforms)}function bg(n,e){if(Bx(n=Xe(n)))return BD("Unsupported field value:",e,n),Ux(n,e);if(n instanceof xl)return(function(r,i){if(!Vx(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=bg(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=dt.fromDate(r);return{timestampValue:Jp(i.serializer,o)}}if(r instanceof dt){let o=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jp(i.serializer,o)}}if(r instanceof io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ro)return{bytesValue:cx(i.serializer,r._byteString)};if(r instanceof kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ND(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof oo)return(function(s,a){return{mapValue:{fields:{[DD]:{stringValue:CD},[Qa]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return RD(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${_D(r)}`)})(n,e)}function Ux(n,e){let t={};return OP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,(r,i)=>{let o=bg(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Bx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof io||n instanceof ro||n instanceof kt||n instanceof xl||n instanceof oo)}function BD(n,e,t){if(!Bx(t)||!EP(t)){let r=_D(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function gD(n,e,t){if((e=Xe(e))instanceof ac)return e._internalPath;if(typeof e=="string")return $D(n,e);throw gg("Field path arguments must be of type string or ",n,!1,void 0,t)}var Qz=new RegExp("[~\\*/\\[\\]]");function $D(n,e,t){if(e.search(Qz)>=0)throw gg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ac(...e.split("."))._internalPath}catch{throw gg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(O.INVALID_ARGUMENT,a+n+u)}function $x(n,e){return n.some(t=>t.isEqual(e))}var mg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Hx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mD=class extends mg{data(){return super.data()}};function Hx(n,e){return typeof e=="string"?$D(n,e):e instanceof ac?e._internalPath:e._delegate._internalPath}function Yz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yD=class{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return lo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Qa].arrayValue?.values?.map(r=>Ue(r.doubleValue));return new oo(t)}convertGeoPoint(e){return new io(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_g(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){let t=oi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);Ae(px(r),9688,{name:e});let i=new zp(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Jz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var vs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_s=class n extends mg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Hx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:lt("string",_s._jsonSchemaVersion),bundleSource:lt("string","DocumentSnapshot"),bundleName:lt("string"),bundle:lt("string")};var za=class extends _s{data(e={}){return super.data(e)}},Ga=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new za(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Zz(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Zz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:n})}}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:lt("string",Ga._jsonSchemaVersion),bundleSource:lt("string","QuerySnapshot"),bundleName:lt("string"),bundle:lt("string")};var yg=class extends yD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}};function qx(n,e,t,...r){n=to(n,kt);let i=to(n.firestore,uo),o=jx(i),s;return s=typeof(e=Xe(e))=="string"||e instanceof ac?Kz(o,"updateDoc",n._key,e,t,r):Wz(o,"updateDoc",n._key,e),qD(i,[s.toMutation(n._key,ri.exists(!0))])}function zx(n){return qD(to(n.firestore,uo),[new Al(n._key,ri.none())])}function Gx(n,e){let t=to(n.firestore,uo),r=UD(n),i=Jz(n.converter,e);return qD(t,[Gz(jx(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}function HD(n,...e){n=Xe(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||yP(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yP(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof kt)s=to(n.firestore,uo),a=AD(n._key.path),o={next:u=>{e[r]&&e[r](Xz(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=to(n,dg);s=to(u.firestore,uo),a=u._query;let l=new yg(s);o={next:h=>{e[r]&&e[r](new Ga(s,l,u,h))},error:e[r+1],complete:e[r+2]},Yz(n._query)}return(function(l,h,p,g){let y=new lD(g),S=new rD(h,y,p);return l.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Cz(yield hP(l),S)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return bz(yield hP(l),S)}))}})(Lx(s),a,i,o)}function qD(n,e){return(function(r,i){let o=new ni;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return xz(yield Hz(r),i,o)})),o.promise})(Lx(n),e)}function Xz(n,e,t){let r=t.docs.get(e._key),i=new yg(n);return new _s(n,i,e._key,r,new vs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){cc=i})(Hi),er(new Wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new uo(new VI(r.getProvider("auth-internal")),new BI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zp(l.options.projectId,h)})(s,i),s);return o=M({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qe(RM,NM,e),Qe(RM,NM,"esm2020")})();var Tg=function(){return Tg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tg.apply(this,arguments)};var n6={includeMetadataChanges:!1};function Wx(n,e){return e===void 0&&(e=n6),new le(function(t){var r=HD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Kx(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Tg(Tg({},r),(t={},t[e.idField]=n.id,t))}function Qx(n){return Wx(n,{includeMetadataChanges:!0}).pipe(ge(function(e){return e.docs}))}function Yx(n,e){return e===void 0&&(e={}),Qx(n).pipe(ge(function(t){return t.map(function(r){return Kx(r,e)})}))}var sr=class{constructor(e){return e}},Jx="firestore",zD=class{constructor(){return Ma(Jx)}};var GD=new q("angularfire2.firestore-instances");function r6(n,e){let t=al(Jx,n,e);return t&&new sr(t)}function i6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sr(r)}}var o6={provide:zD,deps:[[new un,GD]]},s6={provide:sr,useFactory:r6,deps:[[new un,GD],Zr]};function Zx(n,...e){return Qe("angularfire",Qi.full,"fst"),on([s6,o6,{provide:GD,useFactory:i6(n),multi:!0,deps:[Ie,Ge,Yi,hs,[new un,ll],[new un,Pa],...e]}])}var hc=gn(Yx,!0);var ui=gn(Gx,!0,2);var fc=gn(Ox,!0,2);var pc=gn(zx,!0,2);var _n=gn(UD,!0,2);var Xx=gn(Fx,!0);var li=gn(qx,!0,2);var gc=(()=>{class n{constructor(){this.firestore=R(sr),this.questsCollection=fc(this.firestore,"quests"),this._quests=Te([],{}),this.loadQuests()}loadQuests(){hc(this.questsCollection,{idField:"id"}).pipe(ge(r=>r.sort((i,o)=>(o.id??"").localeCompare(i.id??"")))).subscribe(r=>{this._quests.set(r)})}quests(){return this._quests.asReadonly()()}getQuestById(t){return this._quests().find(r=>r.id===t)}addCustomQuest(t){return v(this,null,function*(){let r={title:t.title,description:t.description,xp:t.xp,imageUrl:"assets/default.png",difficulty:"medium"},i=yield ui(this.questsCollection,r)})}deleteQuest(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"quests",t);yield pc(r)})}addDefaultQuestsIfEmpty(){return v(this,null,function*(){if(this._quests().length===0){let t=[{title:"Find the Lost Sword",description:"Retrieve the legendary sword from the ancient ruins.",xp:40,imageUrl:"assets/sword.png",difficulty:"medium"},{title:"Rescue the Villagers",description:"Save the villagers captured by goblins.",xp:120,imageUrl:"assets/villagers.png",difficulty:"hard"},{title:"Collect Herbs",description:"Gather 10 healing herbs for the village healer.",xp:60,imageUrl:"assets/herbs.png",difficulty:"easy"}];for(let r of t)yield ui(this.questsCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var a6=n=>["/quests",n],c6=(n,e)=>e.id;function u6(n,e){n&1&&(k(0,"p",3),F(1,"Title must be at least 8 characters."),P())}function l6(n,e){if(n&1){let t=gt();k(0,"div",8)(1,"h3",9),F(2),P(),k(3,"p"),F(4),P(),k(5,"p")(6,"strong"),F(7,"XP:"),P(),F(8),P(),k(9,"button",10),ce("click",function(i){let o=Me(t).$implicit;return he().deleteQuest(o.id),Pe(i.stopPropagation())}),F(10," Delete "),P()()}if(n&2){let t=e.$implicit;ve("routerLink",ha(4,a6,t.id)),j(2),It(t.title),j(2),It(t.description),j(4),wt(" ",t.xp)}}function d6(n,e){n&1&&(k(0,"p"),F(1,"No quests match your search."),P())}var ek=(()=>{class n{constructor(t){this.questsService=t,this.search=Te("",{}),this.questForm=new mn({title:new at("",{validators:[He.required,He.minLength(8)],nonNullable:!0}),description:new at("",{validators:[He.required],nonNullable:!0}),xp:new at(0,{validators:[He.required,He.min(1)],nonNullable:!0})}),this.filteredQuests=Sn(()=>{let r=this.search().toLowerCase();return this.questsService.quests().filter(i=>i.title.toLowerCase().includes(r))},{})}onSearchChange(t){this.search.set(t??"")}createQuest(){return v(this,null,function*(){if(this.questForm.invalid)return;let{title:t,description:r,xp:i}=this.questForm.getRawValue();yield this.questsService.addCustomQuest({title:t,description:r,xp:i}),this.questForm.reset({title:"",description:"",xp:0})})}deleteQuest(t){return v(this,null,function*(){yield this.questsService.deleteQuest(t)})}static{this.\u0275fac=function(r){return new(r||n)(B(gc))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-quests"]],decls:18,vars:5,consts:[[3,"searchChange"],[1,"create-form",3,"formGroup"],["type","text","formControlName","title","placeholder","Title"],[1,"error"],["formControlName","description","placeholder","Description"],["type","number","formControlName","xp","placeholder","XP"],["type","button",1,"create-btn",3,"click","disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"p-4","bg-gray-800","text-white","rounded-xl","shadow","hover:bg-gray-700","transition","cursor-pointer",3,"routerLink"],[1,"text-xl","font-bold"],[1,"mt-2","bg-red-500","hover:bg-red-600","text-white","px-3","py-1","rounded",3,"click"]],template:function(r,i){if(r&1&&(k(0,"h2"),F(1,"Available Quests"),P(),k(2,"p"),F(3),P(),k(4,"app-search",0),ce("searchChange",function(s){return i.onSearchChange(s)}),P(),k(5,"div",1)(6,"h3"),F(7,"Create New Quest"),P(),Ne(8,"input",2),Be(9,u6,2,0,"p",3),Ne(10,"textarea",4)(11,"input",5),k(12,"button",6),ce("click",function(){return i.createQuest()}),F(13," Create Quest "),P()(),k(14,"div",7),qt(15,l6,11,6,"div",8,c6),Be(17,d6,2,0,"p"),P()),r&2){let o;j(3),wt("Total quests: ",i.questsService.quests().length),j(2),ve("formGroup",i.questForm),j(4),$e((o=i.questForm.get("title"))!=null&&o.invalid&&((o=i.questForm.get("title"))!=null&&o.touched)?9:-1),j(3),ve("disabled",i.questForm.invalid),j(3),zt(i.filteredQuests()),j(2),$e(i.filteredQuests().length?-1:17)}},dependencies:[Dt,Rn,Mn,Nn,ml,Zt,Mr,ir,rr,La],styles:["h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;color:#222}p[_ngcontent-%COMP%]{font-size:1rem;color:#000;margin-bottom:1rem}button[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;border:none;transition:background .2s ease}button.bg-green-500[_ngcontent-%COMP%]{background-color:#22c55e;color:#fff}button.bg-green-500[_ngcontent-%COMP%]:hover{background-color:#16a34a}button.bg-red-500[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}button.bg-red-500[_ngcontent-%COMP%]:hover{background-color:#b91c1c}button.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem}@media(min-width:640px){.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.lg\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}div[p-4][_ngcontent-%COMP%]{padding:1rem}div.bg-gray-800[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#fff;box-shadow:0 4px 10px #0003;transition:transform .2s ease,background .2s ease}div.bg-gray-800[_ngcontent-%COMP%]:hover{background-color:#374151;transform:translateY(-3px)}h3.text-xl[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;margin-bottom:.5rem}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}div.bg-gray-800[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.25rem .5rem;font-size:.9rem}.create-form[_ngcontent-%COMP%]{background:#1f2937;padding:20px;border-radius:12px;margin-bottom:24px;color:#fff;box-shadow:0 4px 12px #0000004d}.create-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:12px;font-weight:600}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:#111827;border:1px solid #374151;padding:10px;border-radius:8px;color:#fff;margin-bottom:12px;font-size:.95rem;transition:border .2s,background .2s}.create-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#0f172a;outline:none}.create-btn[_ngcontent-%COMP%]{width:100%;background:#10b981;padding:10px;border-radius:8px;font-weight:600;transition:.2s;color:#fff}.create-btn[_ngcontent-%COMP%]:disabled{background:#374151;color:#9ca3af;cursor:not-allowed}.create-btn[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669}.error[_ngcontent-%COMP%]{font-size:.85rem;color:#f87171;margin-top:-8px;margin-bottom:12px}"]})}}return n})();function h6(n,e){if(n&1&&(Oi(0,"p")(1,"strong"),F(2,"Difficulty:"),Kn(),F(3),Kn()),n&2){let t=he(2);j(3),wt(" ",t.quest.difficulty)}}function f6(n,e){if(n&1&&(Oi(0,"div",0)(1,"h2"),F(2),Kn(),Oi(3,"p"),F(4),Kn(),Oi(5,"p")(6,"strong"),F(7,"XP:"),Kn(),F(8),Kn(),Be(9,h6,4,1,"p"),Kn()),n&2){let t=he();j(2),It(t.quest.title),j(2),It(t.quest.description),j(4),wt(" ",t.quest.xp),j(),$e(t.quest.difficulty?9:-1)}}function p6(n,e){n&1&&(Oi(0,"p"),F(1,"Quest sa nena\u0161iel."),Kn())}var tk=(()=>{class n{constructor(t,r){this.route=t,this.questsService=r}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");this.quest=this.questsService.getQuestById(t??"")}static{this.\u0275fac=function(r){return new(r||n)(B(Pt),B(gc))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-quest-detail"]],decls:2,vars:1,consts:[[1,"quest-detail"]],template:function(r,i){r&1&&Be(0,f6,10,4,"div",0)(1,p6,2,0,"p"),r&2&&$e(i.quest?0:1)},styles:[".quest-detail[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:1rem;box-shadow:0 4px 12px #00000026;max-width:600px;margin:2rem auto;transition:transform .2s ease,box-shadow .2s ease}.quest-detail[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0003}.quest-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:1rem;text-align:center}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#4b5563;margin-bottom:.75rem;line-height:1.5}.quest-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#111827}p[_ngcontent-%COMP%]{font-size:1rem;color:#ef4444;text-align:center;margin-top:2rem}"]})}}return n})();var Ss=[{level:1,xpRequired:0,title:"Novice"},{level:2,xpRequired:100,title:"Apprentice"},{level:3,xpRequired:300,title:"Adept"},{level:4,xpRequired:600,title:"Expert"},{level:5,xpRequired:1e3,title:"Master"},{level:6,xpRequired:2e3,title:"Grandmaster"},{level:7,xpRequired:3500,title:"Legend"},{level:8,xpRequired:5500,title:"Mythic"},{level:9,xpRequired:8e3,title:"Immortal"},{level:10,xpRequired:12e3,title:"Eternal"}];function ar(n){let e=Ss[0],t;for(let i=0;i<Ss.length;i++)n>=Ss[i].xpRequired&&(e=Ss[i],t=Ss[i+1]);let r=0;if(t){let i=e.xpRequired,o=t.xpRequired;r=(n-i)/(o-i)*100}else r=100;return{level:e,nextLevel:t,progress:r}}var ho=(()=>{class n{constructor(){this.firestore=R(sr),this.playersCollection=fc(this.firestore,"players"),this._players=Te([],{}),this.loadPlayers()}loadPlayers(){hc(this.playersCollection,{idField:"id"}).pipe(ge(r=>r.sort((i,o)=>(o.nickname??"").localeCompare(i.nickname??"")))).subscribe(r=>{console.log("[PlayerService] loadPlayers - received",r.length,"players"),this._players.set(r)})}players(){return this._players.asReadonly()}getAll(){return this._players()}getPlayerById(t){return this._players().find(r=>r.id===t)}addPlayer(t){return v(this,null,function*(){let r={nickname:t,xp:0,level:1,activeQuests:[],completedQuests:[]};try{let i=yield ui(this.playersCollection,r);return console.log("[PlayerService] addPlayer - created",i.id),i.id}catch(i){console.error("[PlayerService] addPlayer - error",i);return}})}removePlayer(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"players",t);yield pc(r)})}addQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i||(i.activeQuests??[]).some(a=>a.id===r.id))return;let o=[...i.activeQuests??[],r],s=_n(this.firestore,"players",t);yield li(s,{activeQuests:o})})}removeQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.activeQuests??[]).filter(h=>h.id!==r),s=(i.completedQuests??[]).filter(h=>h.id!==r),a=s.reduce((h,p)=>h+(p.xp??0),0),u=ar(a),l=_n(this.firestore,"players",t);yield li(l,{activeQuests:o,completedQuests:s,xp:a,level:u.level.level})})}completeQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.activeQuests??[]).findIndex(g=>g.id===r);if(o===-1)return;let s=i.activeQuests[o],a=i.activeQuests.filter((g,y)=>y!==o),u=[...i.completedQuests??[],s],l=u.reduce((g,y)=>g+(y.xp??0),0),h=ar(l),p=_n(this.firestore,"players",t);yield li(p,{activeQuests:a,completedQuests:u,xp:l,level:h.level.level})})}reopenQuest(t,r){return v(this,null,function*(){let i=this.getPlayerById(t);if(!i)return;let o=(i.completedQuests??[]).findIndex(g=>g.id===r);if(o===-1)return;let s=i.completedQuests[o],a=i.completedQuests.filter((g,y)=>y!==o),u=[...i.activeQuests??[],s],l=a.reduce((g,y)=>g+(y.xp??0),0),h=ar(l),p=_n(this.firestore,"players",t);yield li(p,{activeQuests:u,completedQuests:a,xp:l,level:h.level.level})})}setPlayerClan(t,r){return v(this,null,function*(){let i=_n(this.firestore,"players",t);yield li(i,{clanId:r})})}addDefaultPlayersIfEmpty(){return v(this,null,function*(){if(this._players().length===0){let t=[{nickname:"Alice",xp:150,level:2,activeQuests:[],completedQuests:[]},{nickname:"Bob",xp:80,level:1,activeQuests:[],completedQuests:[]},{nickname:"Cara",xp:250,level:3,activeQuests:[],completedQuests:[]}];for(let r of t)yield ui(this.playersCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fo=(()=>{class n{constructor(){this.firestore=R(sr),this.clansCollection=fc(this.firestore,"clans"),this._clans=Te([],{}),this.loadClans()}loadClans(){hc(this.clansCollection,{idField:"id"}).pipe(ge(r=>r.sort((i,o)=>(i.name??"").localeCompare(o.name??"")))).subscribe(r=>{this._clans.set(r)})}clans(){return this._clans.asReadonly()}getAll(){return this._clans()}getById(t){return this._clans().find(r=>r.id===t)}addClan(t){return v(this,null,function*(){let r=M({},t);delete r.id,yield ui(this.clansCollection,r)})}removeClan(t){return v(this,null,function*(){if(!t)return;let r=_n(this.firestore,"clans",t);yield pc(r)})}addPlayerToClan(t,r){return v(this,null,function*(){let i=this.getById(t);if(!i||(i.memberIds||(i.memberIds=[]),i.memberIds.includes(r))||i.memberIds.length>=i.capacity)return!1;let o=[...i.memberIds,r],s=_n(this.firestore,"clans",t);return yield li(s,{memberIds:o}),!0})}removePlayerFromClan(t,r){return v(this,null,function*(){let i=this.getById(t);if(!i)return!1;let o=(i.memberIds??[]).length,s=(i.memberIds??[]).filter(u=>u!==r);if(s.length===o)return!1;let a=_n(this.firestore,"clans",t);return yield li(a,{memberIds:s}),!0})}addDefaultClansIfEmpty(){return v(this,null,function*(){if(this._clans().length===0){let t=[{name:"Warriors",description:"Strong and proud.",capacity:5,memberIds:[]},{name:"Rangers",description:"Stealth and speed.",capacity:4,memberIds:[]}];for(let r of t)yield ui(this.clansCollection,r)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var g6=(n,e)=>e.title,m6=(n,e)=>e.id;function y6(n,e){n&1&&(k(0,"div",3),F(1," Nickname must have at least 8 characters. "),P())}function v6(n,e){if(n&1&&(k(0,"option",8),F(1),P()),n&2){let t=e.$implicit;ve("ngValue",t.title),j(),wt(" ",t.title," ")}}function _6(n,e){if(n&1){let t=gt();k(0,"li")(1,"div",11)(2,"span"),F(3),P(),k(4,"span"),F(5),P(),k(6,"div",12),Ne(7,"div",13),P(),k(8,"div",14)(9,"button",15),ce("click",function(){let i=Me(t).$implicit,o=he();return Pe(o.goToDetails(i.id))}),F(10,"Details"),P(),k(11,"button",16),ce("click",function(){let i=Me(t).$implicit,o=he();return Pe(o.removePlayer(i.id))}),F(12,"Remove"),P()()()()}if(n&2){let t=e.$implicit,r=he();j(3),Ir(" ",t.nickname," - ",r.getPlayerLevelForPlayer(t).level.title," (Level ",r.getPlayerLevelForPlayer(t).level.level,") "),j(2),wt("- Clan: ",r.getClanName(t)),j(2),da("width",r.getPlayerLevelForPlayer(t).progress,"%")}}function E6(n,e){n&1&&(k(0,"li"),F(1,"No players found."),P())}var nk=(()=>{class n{constructor(t,r,i){this.router=t,this.playerService=r,this.clansService=i,this.players=this.playerService.players(),this.playerForm=new mn({nickname:new at("",{validators:[He.required,He.minLength(3)],nonNullable:!0})}),this.filterForm=new mn({levelTitle:new at(null)}),this.search=Te("",{}),this.playerLevels=Ss,this.filteredPlayers=Sn(()=>{let o=this.filterForm.get("levelTitle")?.value,s=this.search().toLowerCase();return this.players().filter(a=>!(o&&ar(a.xp??0).level.title!==o||s&&!a.nickname.toLowerCase().includes(s)))},{})}ngOnInit(){}createPlayer(){return v(this,null,function*(){if(this.playerForm.invalid){this.playerForm.markAllAsTouched();return}let t=this.playerForm.getRawValue();yield this.playerService.addPlayer(t.nickname),this.playerForm.reset()})}onSearchChange(t){this.search.set(t??"")}goToDetails(t){t&&this.router.navigate(["/players",t])}removePlayer(t){return v(this,null,function*(){t&&(this.clansService.getAll().forEach(r=>{r.memberIds.includes(t)&&this.clansService.removePlayerFromClan(r.id,t)}),yield this.playerService.removePlayer(t))})}getPlayerLevelForPlayer(t){return ar(t.xp??0)}getClanName(t){return t.clanId?this.clansService.getById(t.clanId)?.name??"-":"-"}static{this.\u0275fac=function(r){return new(r||n)(B(Ke),B(ho),B(fo))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-players"]],decls:26,vars:6,consts:[[1,"player-form"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Nickname (min 8 chars)","formControlName","nickname"],[1,"error"],["type","submit",1,"create-btn",3,"disabled"],[1,"filter-form"],[3,"formGroup"],["formControlName","levelTitle"],[3,"ngValue"],[3,"searchChange"],[1,"player-list"],[1,"player-card"],[1,"progress-bar"],[1,"progress"],[1,"actions"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"h3"),F(2,"Create New Player"),P(),k(3,"form",1),ce("ngSubmit",function(){return i.createPlayer()}),Ne(4,"input",2),Be(5,y6,2,0,"div",3),k(6,"button",4),F(7," Create Player "),P()()(),k(8,"div",5)(9,"h3"),F(10,"Filter by Level"),P(),k(11,"form",6)(12,"select",7)(13,"option",8),F(14,"All Levels"),P(),qt(15,v6,2,2,"option",8,g6),P()(),k(17,"h3"),F(18,"Search by Nickname"),P(),k(19,"app-search",9),ce("searchChange",function(s){return i.onSearchChange(s)}),P()(),k(20,"h2"),F(21,"Players"),P(),k(22,"ul",10),qt(23,_6,13,6,"li",null,m6),Be(25,E6,2,0,"li"),P()),r&2&&(j(3),ve("formGroup",i.playerForm),j(2),$e(i.playerForm.controls.nickname.invalid&&i.playerForm.controls.nickname.touched?5:-1),j(),ve("disabled",i.playerForm.invalid),j(5),ve("formGroup",i.filterForm),j(2),ve("ngValue",null),j(2),zt(i.playerLevels),j(8),zt(i.filteredPlayers()),j(2),$e(i.filteredPlayers().length?-1:25))},dependencies:[Dt,Mn,Xi,Oa,Fa,Nn,eo,Zt,Mr,ir,rr,ns,La],encapsulation:2})}}return n})();var rk=n=>["/quests",n],KD=(n,e)=>e.id;function I6(n,e){if(n&1){let t=gt();k(0,"span",6),ce("click",function(){Me(t);let i=he(2);return Pe(i.goToClan())}),F(1),P()}if(n&2){let t=he(2);j(),It(t.clan.name)}}function w6(n,e){n&1&&(k(0,"span"),F(1,"-"),P())}function D6(n,e){if(n&1&&(k(0,"p"),F(1),P()),n&2){let t=he(2);j(),wt(" XP do \u010Fal\u0161ieho levelu: ",((t.levelInfo==null||t.levelInfo.nextLevel==null?null:t.levelInfo.nextLevel.xpRequired)??0)-t.player.xp," ")}}function C6(n,e){if(n&1){let t=gt();k(0,"li")(1,"a",7),F(2),P(),F(3),k(4,"button",5),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.completeQuest(i.id))}),F(5,"Ozna\u010Di\u0165 dokon\u010Den\xFD"),P(),k(6,"button",5),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.removeQuest(i.id))}),F(7,"Odstr\xE1ni\u0165"),P()()}if(n&2){let t=e.$implicit;j(),ve("routerLink",ha(3,rk,t.id)),j(),It(t.title),j(),wt(" (XP: ",t.xp,") ")}}function b6(n,e){n&1&&(k(0,"li"),F(1,"\u017Diadne akt\xEDvne questy"),P())}function T6(n,e){if(n&1){let t=gt();k(0,"li")(1,"a",7),F(2),P(),F(3),k(4,"button",5),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.reopenQuest(i.id))}),F(5,"Ozna\u010Di\u0165 akt\xEDvny"),P(),k(6,"button",5),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.removeQuest(i.id))}),F(7,"Odstr\xE1ni\u0165"),P()()}if(n&2){let t=e.$implicit;j(),ve("routerLink",ha(3,rk,t.id)),j(),It(t.title),j(),wt(" (XP: ",t.xp,") ")}}function S6(n,e){n&1&&(k(0,"li"),F(1,"\u017Diadne dokon\u010Den\xE9 questy"),P())}function A6(n,e){if(n&1&&(k(0,"option",4),F(1),P()),n&2){let t=e.$implicit;ve("ngValue",t.id),j(),It(t.title)}}function R6(n,e){if(n&1){let t=gt();k(0,"h2"),F(1),P(),k(2,"div"),F(3," Clan: "),Be(4,I6,2,1,"span",0)(5,w6,2,0,"span"),P(),k(6,"h3"),F(7),P(),k(8,"div",1),Ne(9,"div",2),P(),Be(10,D6,2,1,"p"),k(11,"h3"),F(12,"Akt\xEDvne questy"),P(),k(13,"ul"),qt(14,C6,8,5,"li",null,KD),Be(16,b6,2,0,"li"),P(),k(17,"h3"),F(18,"Dokon\u010Den\xE9 questy"),P(),k(19,"ul"),qt(20,T6,8,5,"li",null,KD),Be(22,S6,2,0,"li"),P(),k(23,"h4"),F(24,"Prida\u0165 nov\xFD quest"),P(),k(25,"select",3),Wh("ngModelChange",function(i){Me(t);let o=he();return c_(o.selectedQuestId,i)||(o.selectedQuestId=i),Pe(i)}),k(26,"option",4),F(27,"-- Vyber quest --"),P(),qt(28,A6,2,2,"option",4,KD),P(),k(30,"button",5),ce("click",function(){Me(t);let i=he();return Pe(i.addQuest())}),F(31,"Prida\u0165 quest"),P()}if(n&2){let t=he();j(),It(t.player.nickname),j(3),$e(t.clan?4:5),j(3),zh(" Level: ",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.title," (",t.levelInfo==null||t.levelInfo.level==null?null:t.levelInfo.level.level,") "),j(2),da("width",t.levelInfo==null?null:t.levelInfo.progress,"%"),j(),$e(t.levelInfo!=null&&t.levelInfo.nextLevel?10:-1),j(4),zt(t.player.activeQuests),j(2),$e(t.player.activeQuests!=null&&t.player.activeQuests.length?-1:16),j(4),zt(t.player.completedQuests),j(2),$e(t.player.completedQuests!=null&&t.player.completedQuests.length?-1:22),j(3),Gh("ngModel",t.selectedQuestId),j(),ve("ngValue",void 0),j(2),zt(t.allQuests)}}var ik=(()=>{class n{constructor(t,r,i,o,s){this.route=t,this.router=r,this.playerService=i,this.clansService=o,this.questsService=s,this.allQuests=[]}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.player=this.playerService.getPlayerById(t),this.player&&(this.player.clanId&&(this.clan=this.clansService.getById(this.player.clanId)),this.allQuests=this.questsService.quests(),this.updateLevel()))}updateLevel(){if(!this.player)return;let t=(this.player.completedQuests??[]).reduce((r,i)=>r+(i.xp??0),0);this.player.xp=t,this.levelInfo=ar(t)}addQuest(){return v(this,null,function*(){if(!this.player||!this.selectedQuestId)return;let t=this.questsService.getQuestById(this.selectedQuestId);if(!t||(this.player.activeQuests??[]).some(i=>i.id===this.selectedQuestId))return;let r={id:t.id,title:t.title,description:t.description,xp:t.xp};yield this.playerService.addQuest(this.player.id,r),this.refreshPlayer(),this.selectedQuestId=void 0})}removeQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.removeQuest(this.player.id,t),this.refreshPlayer())})}completeQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.completeQuest(this.player.id,t),this.refreshPlayer())})}reopenQuest(t){return v(this,null,function*(){this.player&&(yield this.playerService.reopenQuest(this.player.id,t),this.refreshPlayer())})}goToClan(){this.clan&&this.router.navigate(["/clan",this.clan.id])}refreshPlayer(){this.player?.id&&(this.player=this.playerService.getPlayerById(this.player.id),this.updateLevel())}static{this.\u0275fac=function(r){return new(r||n)(B(Pt),B(Ke),B(ho),B(fo),B(gc))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-player-detail"]],decls:2,vars:1,consts:[[1,"clan-link"],[1,"progress-bar"],[1,"progress"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"click"],[1,"clan-link",3,"click"],[3,"routerLink"]],template:function(r,i){r&1&&(k(0,"div"),Be(1,R6,32,11),P()),r&2&&(j(),$e(i.player?1:-1))},dependencies:[Dt,TM,Oa,Fa,eo,Zt,wI,ns,Rn],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}.player-detail[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:1rem;padding:2rem;box-shadow:0 4px 12px #00000014}.player-detail[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:1.5rem;margin-bottom:.5rem}.player-detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem;margin-top:1.5rem;margin-bottom:.5rem}.clan-link[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600;cursor:pointer;text-decoration:underline;transition:color .2s}.clan-link[_ngcontent-%COMP%]:hover{color:#2563eb}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#fff;padding:.75rem 1rem;border-radius:.75rem;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 6px #0000000d;transition:transform .2s,box-shadow .2s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#111827;text-decoration:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.3rem .6rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;font-size:1rem;margin-right:.5rem;min-width:200px}"]})}}return n})();var N6=(n,e)=>e.id;function M6(n,e){n&1&&(k(0,"div",3),F(1," Name must have at least 8 characters. "),P())}function P6(n,e){n&1&&(k(0,"div",3),F(1," Capacity must be at least 1. "),P())}function x6(n,e){if(n&1){let t=gt();k(0,"div",8)(1,"div",9)(2,"div",10),F(3),P(),k(4,"div",11),F(5),P()(),k(6,"div")(7,"button",12),ce("click",function(){let i=Me(t).$implicit,o=he();return Pe(o.openDetail(i.id))}),F(8,"Detail"),P(),k(9,"button",13),ce("click",function(){let i=Me(t).$implicit,o=he();return Pe(o.deleteClan(i.id))}),F(10,"Delete"),P()()()}if(n&2){let t=e.$implicit;j(3),Ir(" ",t.name," (",t.memberIds.length,"/",t.capacity,") "),j(2),wt(" ",t.description," ")}}var ok=(()=>{class n{constructor(t,r,i){this.clansService=t,this.playerService=r,this.router=i,this.clans=this.clansService.clans(),this.search=Te("",{}),this.filteredClans=Sn(()=>{let o=this.search().toLowerCase();return this.clans().filter(s=>s.name.toLowerCase().startsWith(o))},{}),this.clanForm=new mn({name:new at("",{validators:[He.required,He.minLength(8)]}),description:new at(""),capacity:new at(5,{validators:[He.required,He.min(1)]})})}createClan(){if(this.clanForm.invalid){this.clanForm.markAllAsTouched();return}let t=this.clanForm.getRawValue(),r={id:String(Date.now()),name:t.name,description:t.description,capacity:t.capacity,memberIds:[]};this.clansService.addClan(r).then(()=>{this.clanForm.reset({capacity:5})})}deleteClan(t){let r=this.clansService.getById(t);r&&confirm(`Delete clan "${r.name}"?`)&&this.clansService.removeClan(t).then(()=>{this.playerService.getAll().forEach(i=>{i.clanId===t&&i.id&&this.playerService.setPlayerClan(i.id,void 0)})})}openDetail(t){this.router.navigate(["/clan",t])}onSearchChange(t){this.search.set(t)}static{this.\u0275fac=function(r){return new(r||n)(B(fo),B(ho),B(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-clans"]],decls:23,vars:3,consts:[[1,"clan-page"],[1,"form-card",3,"ngSubmit","formGroup"],["formControlName","name"],[1,"error"],["formControlName","description"],["type","number","formControlName","capacity"],["type","submit"],[3,"searchChange"],[1,"clan-card"],[1,"clan-info"],[1,"title"],[1,"small"],[3,"click"],[1,"danger",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"h2"),F(2,"Create New Clan"),P(),k(3,"form",1),ce("ngSubmit",function(){return i.createClan()}),k(4,"label"),F(5," Name: "),Ne(6,"input",2),P(),Be(7,M6,2,0,"div",3),k(8,"label"),F(9," Description: "),Ne(10,"textarea",4),P(),k(11,"label"),F(12," Capacity: "),Ne(13,"input",5),P(),Be(14,P6,2,0,"div",3),k(15,"button",6),F(16,"Create Clan"),P()(),Ne(17,"hr"),k(18,"h2"),F(19,"Clans"),P(),k(20,"app-search",7),ce("searchChange",function(s){return i.onSearchChange(s)}),P(),qt(21,x6,11,4,"div",8,N6),P()),r&2&&(j(3),ve("formGroup",i.clanForm),j(4),$e(i.clanForm.controls.name.invalid&&i.clanForm.controls.name.touched?7:-1),j(7),$e(i.clanForm.controls.capacity.invalid&&i.clanForm.controls.capacity.touched?14:-1),j(7),zt(i.filteredClans()))},dependencies:[Dt,Mn,Xi,Nn,ml,Zt,Mr,ir,rr,La],styles:[".clan-page[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:20px;font-family:Arial,sans-serif}.form-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background:#fafafa;padding:15px;border-radius:8px;margin-bottom:20px;border:1px solid #ddd}.form-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:6px;border-radius:4px;border:1px solid #ccc}.form-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;padding:6px 14px}.error[_ngcontent-%COMP%]{color:#c70000;font-size:13px}.clan-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;border:1px solid #ddd;padding:10px 12px;border-radius:8px;margin-bottom:10px}.clan-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:16px}button.danger[_ngcontent-%COMP%]{background:#d9534f;color:#fff;border:none;padding:6px 10px;border-radius:4px}"]})}}return n})();var QD=()=>({xp:0}),k6=(n,e)=>e.id;function O6(n,e){if(n&1&&(k(0,"option",3),F(1),P()),n&2){let t=e.$implicit,r=he(2);ve("ngValue",t.id),j(),Ir(" ",t.nickname," (Level ",r.getPlayerLevelForPlayer(t).level.level," - ",r.getPlayerLevelForPlayer(t).level.title,") ")}}function F6(n,e){if(n&1){let t=gt();k(0,"li")(1,"span",5),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.goToPlayerDetail(i))}),F(2),P(),Ne(3,"progress",6),k(4,"button",7),ce("click",function(){let i=Me(t).$implicit,o=he(2);return Pe(o.removePlayer(i))}),F(5," Remove "),P()()}if(n&2){let t,r=e.$implicit,i=he(2);j(2),Ir(" ",((t=i.playerService.getPlayerById(r))==null?null:t.nickname)||"Unknown Player"," (Level ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(4,QD)).level.level," - ",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(5,QD)).level.title,") "),j(),ve("value",i.getPlayerLevelForPlayer(i.playerService.getPlayerById(r)??Gr(6,QD)).progress)}}function L6(n,e){if(n&1){let t=gt();k(0,"h2"),F(1),P(),k(2,"p"),F(3),P(),k(4,"h3"),F(5,"Add Player"),P(),k(6,"form",0)(7,"select",1)(8,"option",2),F(9,"Select a player"),P(),qt(10,O6,2,4,"option",3,k6),P(),k(12,"button",4),ce("click",function(){Me(t);let i=he();return Pe(i.addPlayer())}),F(13,"Add"),P()(),k(14,"h3"),F(15,"Members"),P(),k(16,"ul"),qt(17,F6,6,7,"li",null,n_),P()}if(n&2){let t=he();j(),Ir("",t.clan.name," (",t.clan.memberIds.length,"/",t.clan.capacity,")"),j(2),It(t.clan.description),j(3),ve("formGroup",t.addPlayerForm),j(2),ve("ngValue",null),j(2),zt(t.availablePlayers),j(7),zt(t.clan.memberIds)}}function V6(n,e){n&1&&(k(0,"p"),F(1,"Clan not found."),P())}var sk=(()=>{class n{constructor(t,r,i,o){this.route=t,this.clansService=r,this.playerService=i,this.router=o,this.availablePlayers=[],this.addPlayerForm=new mn({playerId:new at(null,He.required)})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id")??"";this.clan=this.clansService.getById(t),this.clan&&this.refreshAvailablePlayers()}refreshAvailablePlayers(){if(!this.clan)return;let t=this.playerService.getAll();this.availablePlayers=t.filter(r=>r.id!=null&&!this.clansService.getAll().some(i=>i.memberIds.includes(r.id)))}addPlayer(){if(!this.clan)return;let t=this.addPlayerForm.value.playerId;t&&this.clansService.addPlayerToClan(this.clan.id,t).then(r=>{r?(this.playerService.setPlayerClan(t,this.clan.id),this.addPlayerForm.reset(),this.refreshAvailablePlayers()):alert("Cannot add player: either clan is full or player already in another clan.")})}removePlayer(t){this.clan&&this.clansService.removePlayerFromClan(this.clan.id,t).then(r=>{r&&(this.playerService.setPlayerClan(t,void 0),this.refreshAvailablePlayers())})}goToPlayerDetail(t){this.router.navigate(["/players",t])}getPlayerLevelForPlayer(t){return ar(t?.xp??0)}static{this.\u0275fac=function(r){return new(r||n)(B(Pt),B(fo),B(ho),B(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-clan-detail"]],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","playerId"],["disabled","","selected","",3,"ngValue"],[3,"ngValue"],["type","button",3,"click"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],["max","100",3,"value"],[2,"margin-left","8px",3,"click"]],template:function(r,i){r&1&&Be(0,L6,19,6)(1,V6,2,0,"p"),r&2&&$e(i.clan?0:1)},dependencies:[Dt,Mn,Xi,Oa,Fa,eo,Zt,Mr,ir,rr],styles:["[_nghost-%COMP%]{display:block;max-width:700px;margin:2rem auto;font-family:Inter,sans-serif;color:#1f2937}h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:1.5rem;margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#4b5563}select[_ngcontent-%COMP%]{padding:.4rem .6rem;border-radius:.375rem;border:1px solid #d1d5db;margin-right:.5rem;font-size:.95rem}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:.375rem;padding:.4rem .8rem;font-weight:500;transition:background-color .2s,transform .1s}button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button.add-btn[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}button.remove-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;margin-left:.5rem}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;margin-top:.5rem}li[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:.6rem 1rem;margin-bottom:.5rem;border-radius:.75rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 4px #0000000d}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#2563eb}"]})}}return n})();var j6=()=>["/"];function U6(n,e){if(n&1&&(k(0,"div",4),F(1),P()),n&2){let t=he();j(),It(t.error())}}var ak=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.error=Te(null,{}),this.loginForm=new mn({email:new at("",{validators:[He.required,He.email],nonNullable:!0}),password:new at("",{validators:[He.required,He.minLength(6)],nonNullable:!0})})}submit(){return v(this,null,function*(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:t,password:r}=this.loginForm.getRawValue();try{yield up(this.auth,t,r),this.error.set(null),yield this.router.navigate(["/"])}catch(i){this.error.set(i?.message??"Sign in failed")}})}static{this.\u0275fac=function(r){return new(r||n)(B(nr),B(Ke))}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-login"]],decls:17,vars:4,consts:[[1,"login-card"],[3,"ngSubmit","formGroup"],["formControlName","email","type","email"],["formControlName","password","type","password"],[1,"error"],["type","submit"],[3,"routerLink"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"h2"),F(2,"Login"),P(),k(3,"form",1),ce("ngSubmit",function(){return i.submit()}),k(4,"label"),F(5," Email "),Ne(6,"input",2),P(),k(7,"label"),F(8," Password "),Ne(9,"input",3),P(),Be(10,U6,2,1,"div",4),k(11,"button",5),F(12,"Sign in"),P()(),k(13,"p"),F(14," Don't have an account? "),k(15,"a",6),F(16,"Go home"),P()()()),r&2&&(j(3),ve("formGroup",i.loginForm),j(7),$e(i.error()?10:-1),j(5),ve("routerLink",Gr(3,j6)))},dependencies:[Dt,Mn,Xi,Nn,Zt,Mr,ir,rr,ns,Rn],styles:[".login-card[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:30px;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 8px #0000001a;background:#fff}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-weight:500;color:#555;gap:5px}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px;transition:border-color .2s}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 5px #007bff80}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .2s}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.login-card[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{padding:10px;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px;text-align:center}.login-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px}.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.login-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();var As=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(){return new Promise(t=>{Ra(this.auth,r=>{t(r?!0:this.router.parseUrl("/login"))})})}static{this.\u0275fac=function(r){return new(r||n)(W(nr),W(Ke))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ck=[{path:"",component:ZN},{path:"quests",component:ek,canActivate:[As]},{path:"quests/:id",component:tk,canActivate:[As]},{path:"players",component:nk,canActivate:[As]},{path:"players/:id",component:ik,canActivate:[As]},{path:"clan",component:ok,canActivate:[As]},{path:"clan/:id",component:sk,canActivate:[As]},{path:"login",component:ak}];var B6=()=>({exact:!0});function $6(n,e){if(n&1){let t=gt();Hh(0),k(1,"a",5),F(2,"Quests"),P(),k(3,"a",6),F(4,"Clans"),P(),k(5,"a",7),F(6,"Players"),P(),k(7,"a",8),ce("click",function(){Me(t);let i=he();return Pe(i.logout())}),F(8,"Logout"),P(),qh()}}function H6(n,e){n&1&&(k(0,"a",9),F(1,"Login"),P())}var uk=(()=>{class n{constructor(){this.auth=R(pp)}logout(){return v(this,null,function*(){yield this.auth.logout()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-header"]],decls:9,vars:4,consts:[["loggedOut",""],[1,"app-header"],[1,"menu"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],[4,"ngIf","ngIfElse"],["routerLink","/quests","routerLinkActive","active"],["routerLink","/clan","routerLinkActive","active"],["routerLink","/players","routerLinkActive","active"],[1,"logout",3,"click"],["routerLink","/login","routerLinkActive","active"]],template:function(r,i){if(r&1&&(k(0,"header",1)(1,"h1"),F(2,"Quest OverFlow"),P(),k(3,"nav",2)(4,"a",3),F(5,"Home"),P(),la(6,$6,9,0,"ng-container",4)(7,H6,2,0,"ng-template",null,0,u_),P()()),r&2){let o=s_(8);j(4),ve("routerLinkActiveOptions",Gr(3,B6)),j(2),ve("ngIf",i.auth.isLoggedIn())("ngIfElse",o)}},dependencies:[Dt,Cu,Rn,X_],styles:[".app-header[_ngcontent-%COMP%]{background-color:#282c34;color:#fff;padding:1rem;text-align:center;border-radius:8px}.menu[_ngcontent-%COMP%]{margin-top:.5rem}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 1rem;font-weight:700;transition:color .2s ease-in-out}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#61dafb}.menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{text-decoration:underline}"]})}}return n})();var lk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,i){r&1&&(Ne(0,"app-header"),k(1,"main",0),Ne(2,"router-outlet"),P())},dependencies:[Bu,uk],styles:["[_nghost-%COMP%]{--content-padding: 10px}header[_ngcontent-%COMP%]{display:block;height:60px;padding:var(--content-padding);box-shadow:0 5px 25px var(--shadow-color)}.content[_ngcontent-%COMP%]{padding:var(--content-padding)}"]})}}return n})();var q6={apiKey:"AIzaSyBjdYRHO0xPvlBDBu9USu986ENcquO_Z4s",authDomain:"angular-b02e9.firebaseapp.com",projectId:"angular-b02e9",storageBucket:"angular-b02e9.firebasestorage.app",messagingSenderId:"411151949286",appId:"1:411151949286:web:103eb2a6522f85ddd3ca27",measurementId:"G-7P0XHYK2TY"};T_(lk,{providers:[B0({eventCoalescing:!0}),eE(ck),LN(()=>VN(q6)),Zx(()=>Xx()),YN(()=>JN())]});
